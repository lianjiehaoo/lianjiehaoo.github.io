<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[JAVA è®¾è®¡æ¨¡å¼æ€»ç»“]]></title>
    <url>%2F2020%2F03%2F08%2FJAVA%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E6%80%BB%E7%BB%93%E4%B9%8B23%E7%A7%8D%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[ç¬”è€…ä¸€ç›´æƒ³å¯¹è®¾è®¡æ¨¡å¼åšä¸€ä¸ªå…¨é¢çš„å­¦ä¹ ï¼Œè¿™æ¬¡ç–«æƒ…æœŸé—´åœ¨å®¶çš„æ—¶é—´å¤šäº†ï¼Œæ‰€ä»¥å†³å®šåŸºäºŽç½‘ç»œä¸Šçš„ä¼˜ç§€æ–‡ç« æŠŠè¿™ä¸€å—çŸ¥è¯†å¥½å¥½å­¦ä¹ æ•´ç†ä¸€ä¸‹ï¼ŒåŽŸæ–‡é“¾æŽ¥ä¼šåœ¨å…·ä½“å¼•ç”¨å¤„æ ‡æ³¨ã€‚ UML ç±»å›¾åŽŸæ–‡é“¾æŽ¥&gt;&gt; å…­å¤§è®¾è®¡åŽŸåˆ™åŽŸæ–‡é“¾æŽ¥&gt;&gt; å¯¹äºŽä¸Šé¢å‚è€ƒæ–‡ç« ä¸­æ‰€æçš„â€é«˜å†…èšï¼Œä½Žè€¦åˆâ€åŽŸåˆ™ï¼Œåˆ°åº•ä»€ä¹ˆæ˜¯å†…èšï¼Œä»€ä¹ˆæ˜¯è€¦åˆå‘¢ï¼Ÿ1ã€è€¦åˆè€¦åˆä¸»è¦æè¿°æ¨¡å—ä¹‹é—´çš„å…³ç³»ã€‚è€¦åˆæ¨¡å—ä¹‹é—´å­˜åœ¨ä¾èµ–, å¯¼è‡´æ”¹åŠ¨å¯èƒ½ä¼šäº’ç›¸å½±å“, å…³ç³»è¶Šç´§å¯†, è€¦åˆè¶Šå¼º, æ¨¡å—ç‹¬ç«‹æ€§è¶Šå·®ã€‚æ¯”å¦‚æ¨¡å—Aç›´æŽ¥æ“ä½œäº†æ¨¡å—Bä¸­æ•°æ®, åˆ™è§†ä¸ºå¼ºè€¦åˆ, è‹¥Aåªæ˜¯é€šè¿‡æ•°æ®ä¸Žæ¨¡å—Bäº¤äº’, åˆ™è§†ä¸ºå¼±è€¦åˆã€‚ç‹¬ç«‹çš„æ¨¡å—ä¾¿äºŽæ‰©å±•, ç»´æŠ¤, å†™å•å…ƒæµ‹è¯•, å¦‚æžœæ¨¡å—ä¹‹é—´é‡é‡ä¾èµ–, ä¼šæžå¤§é™ä½Žå¼€å‘æ•ˆçŽ‡ã€‚ 2ã€å†…èšå†…èšä¸»è¦æè¿°æ¨¡å—å†…éƒ¨ã€‚æ¨¡å—å†…éƒ¨çš„å…ƒç´ , å…³è”æ€§è¶Šå¼º, åˆ™å†…èšè¶Šé«˜, æ¨¡å—å•ä¸€æ€§æ›´å¼ºã€‚ä¸€ä¸ªæ¨¡å—åº”å½“å°½å¯èƒ½ç‹¬ç«‹å®ŒæˆæŸä¸ªåŠŸèƒ½, å¦‚æžœæœ‰å„ç§åœºæ™¯éœ€è¦è¢«å¼•å…¥åˆ°å½“å‰æ¨¡å—, ä»£ç è´¨é‡å°†å˜å¾—éžå¸¸è„†å¼±, è¿™ç§æƒ…å†µå»ºè®®æ‹†åˆ†ä¸ºå¤šä¸ªæ¨¡å—.ä½Žå†…èšçš„æ¨¡å—ä»£ç , ä¸ç®¡æ˜¯ç»´æŠ¤, æ‰©å±•è¿˜æ˜¯é‡æž„éƒ½ç›¸å½“éº»çƒ¦, éš¾ä»¥ä¸‹æ‰‹ã€‚ æ³¨æ„ï¼šæ¨¡å—çš„ç²’åº¦å¯å¤§å¯å°, å¯ä»¥æ˜¯å‡½æ•°, ç±», åŠŸèƒ½å—ç­‰ç­‰ã€‚ è®¾è®¡æ¨¡å¼è¯¦è§£æ­¤æ¨¡å—å‰ä¸¤ä¸ªéƒ¨åˆ†æ¥æºäºŽæ­¤æ–‡ç« ï¼Œç¬¬ä¸‰éƒ¨åˆ†å…³é”®ç‚¹æ€»ç»“ä¹Ÿå¤§å¤šæ¥æºäºŽæ­¤é“¾æŽ¥ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé“¾æŽ¥ä¸­å…¶ä½™å†…å®¹ä¸ç”¨ç®¡ã€‚ ä¸€ã€ä»€ä¹ˆæ˜¯è®¾è®¡æ¨¡å¼è®¾è®¡æ¨¡å¼ï¼ˆDesign patternï¼‰æ˜¯ä¸€å¥—è¢«åå¤ä½¿ç”¨ã€å¤šæ•°äººçŸ¥æ™“çš„ã€ç»è¿‡åˆ†ç±»ç¼–ç›®çš„ã€ä»£ç è®¾è®¡ç»éªŒçš„æ€»ç»“ã€‚ä½¿ç”¨è®¾è®¡æ¨¡å¼æ˜¯ä¸ºäº†å¯é‡ç”¨ä»£ç ã€è®©ä»£ç æ›´å®¹æ˜“è¢«ä»–äººç†è§£ã€ä¿è¯ä»£ç å¯é æ€§ã€‚ æ¯«æ— ç–‘é—®ï¼Œè®¾è®¡æ¨¡å¼äºŽå·±äºŽä»–äººäºŽç³»ç»Ÿéƒ½æ˜¯å¤šèµ¢çš„ï¼Œè®¾è®¡æ¨¡å¼ä½¿ä»£ç ç¼–åˆ¶çœŸæ­£å·¥ç¨‹åŒ–ï¼Œè®¾è®¡æ¨¡å¼æ˜¯è½¯ä»¶å·¥ç¨‹çš„åŸºçŸ³ï¼Œå¦‚åŒå¤§åŽ¦çš„ä¸€å—å—ç –çŸ³ä¸€æ ·ã€‚é¡¹ç›®ä¸­åˆç†çš„è¿ç”¨è®¾è®¡æ¨¡å¼å¯ä»¥å®Œç¾Žçš„è§£å†³å¾ˆå¤šé—®é¢˜ï¼Œæ¯ç§æ¨¡å¼åœ¨çŽ°å®žä¸­éƒ½æœ‰ç›¸åº”çš„åŽŸç†æ¥ä¸Žä¹‹å¯¹åº”ï¼Œæ¯ä¸€ä¸ªæ¨¡å¼æè¿°äº†ä¸€ä¸ªåœ¨æˆ‘ä»¬å‘¨å›´ä¸æ–­é‡å¤å‘ç”Ÿçš„é—®é¢˜ï¼Œä»¥åŠè¯¥é—®é¢˜çš„æ ¸å¿ƒè§£å†³æ–¹æ¡ˆï¼Œè¿™ä¹Ÿæ˜¯å®ƒèƒ½è¢«å¹¿æ³›åº”ç”¨çš„åŽŸå› ã€‚ç®€å•è¯´ï¼šæ¨¡å¼ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œé’ˆå¯¹æŸç±»é—®é¢˜çš„æŸç§é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚åœºæ™¯ï¼šé¡¹ç›®æ‰€åœ¨çš„çŽ¯å¢ƒé—®é¢˜ï¼šçº¦æŸæ¡ä»¶ï¼Œé¡¹ç›®ç›®æ ‡ç­‰è§£å†³æ–¹æ¡ˆï¼šé€šç”¨ã€å¯å¤ç”¨çš„è®¾è®¡ï¼Œè§£å†³çº¦æŸè¾¾åˆ°ç›®æ ‡ã€‚ äºŒã€è®¾è®¡æ¨¡å¼çš„ä¸‰ä¸ªåˆ†ç±»åˆ›å»ºåž‹æ¨¡å¼ï¼šå¯¹è±¡å®žä¾‹åŒ–çš„æ¨¡å¼ï¼Œåˆ›å»ºåž‹æ¨¡å¼ç”¨äºŽè§£è€¦å¯¹è±¡çš„å®žä¾‹åŒ–è¿‡ç¨‹ã€‚ç»“æž„åž‹æ¨¡å¼ï¼šæŠŠç±»æˆ–å¯¹è±¡ç»“åˆåœ¨ä¸€èµ·å½¢æˆä¸€ä¸ªæ›´å¤§çš„ç»“æž„ã€‚è¡Œä¸ºåž‹æ¨¡å¼ï¼šç±»å’Œå¯¹è±¡å¦‚ä½•äº¤äº’ï¼ŒåŠåˆ’åˆ†è´£ä»»å’Œç®—æ³•ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š ä¸‰ã€23ç§è®¾è®¡æ¨¡å¼å¯¹äºŽä¸‹é¢å¤–é“¾æ–‡ç« æ‰€æ¶‰åŠåˆ°çš„ UML æ—¶åºå›¾ï¼Œç¬”è€…ä¸æ˜¯å¾ˆç†è§£å®ƒä»¬çš„ç»†èŠ‚è¡¨è¾¾ï¼Œä¸è¿‡ä¹Ÿä¸å½±å“å¯¹çŸ¥è¯†æ¦‚å¿µçš„ç†è§£å§ï¼Œä»¥åŽå½»åº•ç†è§£äº†æ—¶åºå›¾çš„ä½¿ç”¨å†æ¥å¤ç›˜ã€‚åŒæ—¶ï¼Œä¸‹é¢çš„é“¾æŽ¥æ–‡ç« ä¸­æœ‰äº›ç»†èŠ‚æ€§çš„å°çº æ­£ä¼šåœ¨å…¶æ–‡ç« çš„è¯„è®ºåŒºæœ‰ä½“çŽ°ï¼ŒæŸäº›è¯„è®ºå¯¹äº†ç†è§£è¿˜æ˜¯æœ‰å…¶å®ƒè¾…åŠ©ä½œç”¨çš„ã€‚ 1.å•ä¾‹æ¨¡å¼å…³é”®ç‚¹ï¼šæŸä¸ªç±»åªèƒ½æœ‰ä¸€ä¸ªå®žä¾‹ï¼Œæä¾›ä¸€ä¸ªå…¨å±€çš„è®¿é—®ç‚¹ã€‚å•ä¾‹æ¨¡å¼è¯¦è§£&gt;&gt;ä¸Šé¢é“¾æŽ¥ä¸­è®²åˆ°â€åŒé‡æ£€æŸ¥åŠ é”â€ä¸ºä»€ä¹ˆéœ€è¦ volatile å…³é”®å­—æ—¶æ²¡æœ‰è®²æ¸…æ¥šï¼Œå®ƒå¹¶æ²¡æœ‰æåˆ° volatile çš„â€æœ‰åºæ€§â€è¿™ä¸€ç‰¹æ€§ï¼Œå®žé™…ä¸Šè¿™æ‰æ˜¯â€åŒé‡æ£€æŸ¥åŠ é”â€åœºæ™¯ä¸ºä»€ä¹ˆéœ€è¦ volatile çš„æœ¬è´¨ã€‚å»ºè®®å‚è€ƒç¬”è€…ä¹‹å‰å†™è¿‡çš„è¿™ç¯‡æ–‡ç« æ¥å…¨é¢äº†è§£ volatile çš„ä½œç”¨ã€‚ 2.ç®€å•å·¥åŽ‚æ¨¡å¼å…³é”®ç‚¹ï¼šä¸€ä¸ªå·¥åŽ‚ç±»æ ¹æ®ä¼ å…¥çš„é‡å†³å®šåˆ›å»ºå‡ºå“ªä¸€å‚ç§äº§å“ç±»çš„å®žä¾‹ã€‚ç®€å•å·¥åŽ‚æ¨¡å¼è¯¦è§£&gt;&gt; 3.å·¥åŽ‚æ–¹æ³•æ¨¡å¼å…³é”®ç‚¹ï¼šå®šä¹‰ä¸€ä¸ªåˆ›å»ºå¯¹è±¡çš„æŽ¥å£ï¼Œè®©å­ç±»å†³å®šå®žä¾‹åŒ–é‚£ä¸ªç±»ã€‚å·¥åŽ‚æ–¹æ³•æ¨¡å¼è¯¦è§£&gt;&gt; 4.æŠ½è±¡å·¥åŽ‚æ¨¡å¼å…³é”®ç‚¹ï¼šåˆ›å»ºç›¸å…³å¯¹è±¡æˆ–è€…ä¾èµ–å¯¹è±¡çš„å®¶æ—ï¼Œè€Œæ— éœ€æ˜Žç¡®æŒ‡å®šå…·ä½“ç±»ã€‚æŠ½è±¡å·¥åŽ‚æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 5.å»ºé€ è€…æ¨¡å¼å…³é”®ç‚¹ï¼šå°è£…ä¸€ä¸ªå¤æ‚å¯¹è±¡çš„æž„å»ºè¿‡ç¨‹ï¼Œå¹¶å¯ä»¥æŒ‰æ­¥éª¤æž„é€ ã€‚å»ºé€ è€…æ¨¡å¼è¯¦è§£&gt;&gt;&gt;ä»¥ä¸Šé“¾æŽ¥åœ¨â€ç”µå­æ‚å¿—ç³»ç»Ÿâ€ä¾‹å­çš„çº¢è‰²å­—ä½“éƒ¨åˆ†è®²åˆ°ï¼šè™½ç„¶åœ¨è¿™ä¸ªä¾‹å­é‡Œé¢å„ä¸ªäº§å“ç±»å‡æœ‰ä¸€ä¸ªå…±åŒçš„æŽ¥å£ï¼Œä½†è¿™ä»…ä»…æ˜¯æœ¬ä¾‹å­ç‰¹æœ‰çš„ï¼Œå¹¶ä¸ä»£è¡¨å»ºé€ æ¨¡å¼çš„ç‰¹ç‚¹â€¦æˆ‘å¯¹è¿™ä¸€å¥è¯çš„ç†è§£æ˜¯ï¼šå¯¹äºŽæ‹¥æœ‰å®Œå…¨ä¸åŒæŽ¥å£çš„äº§å“ç±»çš„åˆ›å»ºè¿‡ç¨‹ï¼ˆè¿™ä¹Ÿæ˜¯å¤§å¤šæ•°åœºæ™¯ï¼‰ï¼Œä¸€ç§æ–¹æ¡ˆæ˜¯ï¼Œåˆ†åˆ«åˆ›å»ºäº§å“ï¼ˆProductï¼‰ã€å¯¼æ¼”è€…ï¼ˆDirectorï¼‰ã€æŠ½è±¡å»ºé€ è€…ï¼ˆBuilderï¼‰ã€å…·ä½“å»ºé€ è€…ï¼ˆWelcomeBuilderå’ŒGoodbyeBuilderï¼‰ï¼Œä¹Ÿå°±æ˜¯ç”¨é“¾æ–‡ä¸­ç¬¬ä¸€ä¸ªä¾‹å­åˆ†åˆ«åˆ›å»ºå‡ºå„ä¸ªäº§å“ã€‚å¦ä¸€ç§æ–¹æ¡ˆæ˜¯ï¼Œå¤æ‚å¯¹è±¡çš„æž„å»ºå¯ä»¥ä½¿ç”¨é“¾æ–‡ä¸­æœ€åŽä¸€ç§æ–¹æ³•ï¼Œç¬”è€…æ›´å€¾å‘äºŽæ­¤æ–¹æ¡ˆï¼Œå› ä¸ºèƒ½ç®€åŒ–æµç¨‹ã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œå¯¹äºŽé“¾æ–‡ä¸­ç¬¬äºŒä¸ªä¾‹å­çš„å¤šä¸ªäº§å“åº”ç”¨å…±åŒæŽ¥å£çš„æƒ…å†µä»…ä»…æ˜¯ä¸ªä¾‹ï¼Œä½œè€…åªæ˜¯æƒ³æŠŠè¿™ç§ç‰¹æ®Šæƒ…å†µå•ç‹¬æ‹Žå‡ºæ¥å§ï¼Œæˆ‘ä»¬è¿˜æ˜¯è¦æŠŠå…³æ³¨ç‚¹æ”¾åœ¨å¤§å¤šæ•°åœºæ™¯çš„è§£å†³æ–¹æ¡ˆä¸Šæ¥ï¼Œå³ç¬¬ä¸€ç§æ–¹æ¡ˆå’Œç¬¬ä¸‰ç§æ–¹æ¡ˆã€‚ 6.åŽŸåž‹æ¨¡å¼å…³é”®ç‚¹ï¼šé€šè¿‡å¤åˆ¶çŽ°æœ‰çš„å®žä¾‹æ¥åˆ›å»ºæ–°çš„å®žä¾‹ã€‚åŽŸåž‹æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 7.é€‚é…å™¨æ¨¡å¼å…³é”®ç‚¹ï¼šæŠŠä¸€ä¸ªç±»çš„æŽ¥å£å˜æ¢æˆå®¢æˆ·ç«¯æ‰€æœŸå¾…çš„å¦ä¸€ç§æŽ¥å£ã€‚é€‚é…å™¨æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 8.ç»„åˆï¼ˆåˆæˆï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šå°†å¯¹è±¡ç»„åˆæˆæ ‘å½¢ç»“æž„ä»¥è¡¨ç¤ºâ€œéƒ¨åˆ†-æ•´ä½“â€çš„å±‚æ¬¡ç»“æž„ã€‚åˆæˆæ¨¡å¼è¯¦è§£&gt;&gt;&gt; 9.è£…é¥°æ¨¡å¼å…³é”®ç‚¹ï¼šåŠ¨æ€çš„ç»™å¯¹è±¡æ·»åŠ æ–°çš„åŠŸèƒ½ï¼Œæ˜¯ç»§æ‰¿å…³ç³»çš„ä¸€ä¸ªæ›¿ä»£æ–¹æ¡ˆã€‚è£…é¥°æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 10.ä»£ç†æ¨¡å¼å…³é”®ç‚¹ï¼šä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ä¸ªä»£ç†ä»¥ä¾¿æŽ§åˆ¶è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ã€‚ä»£ç†æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 11.äº¨å…ƒæ¨¡å¼å…³é”®ç‚¹ï¼šé€šè¿‡å…±äº«æŠ€æœ¯æ¥æœ‰æ•ˆçš„æ”¯æŒå¤§é‡ç»†ç²’åº¦çš„å¯¹è±¡ã€‚äº¨å…ƒæ¨¡å¼&gt;&gt;&gt; 12.å¤–è§‚ï¼ˆé—¨é¢ï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šé—¨é¢æ¨¡å¼æä¾›ä¸€ä¸ªé«˜å±‚æ¬¡çš„æŽ¥å£ï¼Œä½¿å¾—å­ç³»ç»Ÿæ›´æ˜“äºŽä½¿ç”¨ã€‚é—¨é¢æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 13.æ¡¥æŽ¥ï¼ˆæ¡¥æ¢ï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šå°†æŠ½è±¡éƒ¨åˆ†å’Œå®ƒçš„å®žçŽ°éƒ¨åˆ†åˆ†ç¦»ï¼Œä½¿å®ƒä»¬éƒ½å¯ä»¥ç‹¬ç«‹çš„å˜åŒ–ã€‚æ¡¥æ¢æ¨¡å¼è¯¦è§£&gt;&gt;&gt;ï½žå…³äºŽJDBCé©±åŠ¨å™¨çš„ä¾‹å­æ²¡çœ‹æ‡‚ã€‚ä»¥åŽåœ¨æ¥å¤ç›˜ã€‚ï½ž 14.æ¨¡æ¿ï¼ˆæ¨¡æ¿æ–¹æ³•ï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šå®šä¹‰ä¸€ä¸ªç®—æ³•ç»“æž„ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»å®žçŽ°ã€‚æ¨¡æ¿æ–¹æ³•æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 15.è§£é‡Šå™¨æ¨¡å¼å…³é”®ç‚¹ï¼šç»™å®šä¸€ä¸ªè¯­è¨€ï¼Œå®šä¹‰å®ƒçš„æ–‡æ³•çš„ä¸€ç§è¡¨ç¤ºï¼Œå¹¶å®šä¹‰ä¸€ä¸ªè§£é‡Šå™¨ã€‚è§£é‡Šå™¨æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 16.ç­–ç•¥æ¨¡å¼å…³é”®ç‚¹ï¼šå®šä¹‰ä¸€ç³»åˆ—ç®—æ³•ï¼ŒæŠŠä»–ä»¬å°è£…èµ·æ¥ï¼Œå¹¶ä¸”ä½¿å®ƒä»¬å¯ä»¥ç›¸äº’æ›¿æ¢ã€‚ç­–ç•¥æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 17.çŠ¶æ€æ¨¡å¼å…³é”®ç‚¹ï¼šå…è®¸ä¸€ä¸ªå¯¹è±¡åœ¨å…¶å¯¹è±¡å†…éƒ¨çŠ¶æ€æ”¹å˜æ—¶æ”¹å˜å®ƒçš„è¡Œä¸ºã€‚çŠ¶æ€æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 18.è§‚å¯Ÿè€…æ¨¡å¼å…³é”®ç‚¹ï¼šå®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚è§‚å¯Ÿè€…æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 19.å‘½ä»¤æ¨¡å¼å…³é”®ç‚¹ï¼šå°†å‘½ä»¤è¯·æ±‚å°è£…ä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œä½¿å¾—å¯ä»¥ç”¨ä¸åŒçš„è¯·æ±‚æ¥è¿›è¡Œå‚æ•°åŒ–ã€‚å‘½ä»¤æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 20.å¤‡å¿˜å½•æ¨¡å¼å…³é”®ç‚¹ï¼šåœ¨ä¸ç ´åå°è£…çš„å‰æä¸‹ï¼Œä¿æŒå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€ã€‚å¤‡å¿˜å½•æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 21.è¿­ä»£å™¨ï¼ˆè¿­ä»£å­ï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šé¡ºåºåœ°è®¿é—®ä¸€ä¸ªèšé›†ä¸­çš„å…ƒç´ è€Œä¸å¿…æš´éœ²èšé›†çš„å†…éƒ¨è¡¨è±¡ã€‚è¿­ä»£å­æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 22.è®¿é—®è€…æ¨¡å¼å…³é”®ç‚¹ï¼šåœ¨ä¸æ”¹å˜æ•°æ®ç»“æž„çš„å‰æä¸‹ï¼Œå¢žåŠ ä½œç”¨äºŽä¸€ç»„å¯¹è±¡å…ƒç´ çš„æ–°åŠŸèƒ½ã€‚è®¿é—®è€…æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 23.è´£ä»»é“¾æ¨¡å¼å…³é”®ç‚¹ï¼šå°†è¯·æ±‚çš„å‘é€è€…å’ŒæŽ¥æ”¶è€…è§£è€¦ï¼Œä½¿çš„å¤šä¸ªå¯¹è±¡éƒ½æœ‰å¤„ç†è¿™ä¸ªè¯·æ±‚çš„æœºä¼šã€‚è´£ä»»é“¾æ¨¡å¼è¯¦è§£&gt;&gt;&gt; 24.ä¸­ä»‹è€…ï¼ˆè°ƒåœè€…ï¼‰æ¨¡å¼å…³é”®ç‚¹ï¼šç”¨ä¸€ä¸ªä¸­ä»‹å¯¹è±¡æ¥å°è£…ä¸€ç³»åˆ—çš„å¯¹è±¡äº¤äº’ã€‚è°ƒåœè€…æ¨¡å¼è¯¦è§£&gt;&gt;&gt;]]></content>
  </entry>
  <entry>
    <title><![CDATA[WebViewä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2020%2F01%2F05%2FWebView%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[å¦‚æžœä½ æƒ³åœ¨å°†webé¡µé¢ä½œä¸ºAPPçš„ä¸€éƒ¨åˆ†ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥ä½¿ç”¨WebViewã€‚WebViewåœ¨Androidä¸­ç»§æ‰¿äº†viewç±»ï¼Œä½œä¸ºæ‰¿è½½ç½‘é¡µçš„æŽ§ä»¶ã€‚ä½†æ˜¯æˆ‘ä»¬åº”è¯¥çŸ¥é“å®ƒå¹¶æ²¡æœ‰ç»§æ‰¿webæµè§ˆå™¨çš„æ‰€æœ‰ç‰¹æ€§ï¼Œå®ƒæ‰€å®žçŽ°çš„ä¹Ÿåªæ˜¯å±•ç¤ºç½‘é¡µï¼Œä»¥åŠä¸€äº›åŸºæœ¬çš„äº¤äº’å’Œç›‘å¬åŠŸèƒ½ã€‚WebViewç»å¸¸è¢«ä½¿ç”¨çš„åœºæ™¯æ˜¯ï¼Œå½“ä½ çš„APPéœ€è¦å‘ç”¨æˆ·å±•ç¤ºä¸€ä¸ªéšæ—¶å¯æ›´æ–°çš„å†…å®¹ï¼Œæ¯”å¦‚ç”¨æˆ·æ¡æ¬¾ã€ä½¿ç”¨å‘å¯¼ã€‚é‚£ä¹ˆè¿™æ ·çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä¸€ä¸ªActivityä¸­åŒ…å«ä¸€ä¸ªWebViewæŽ§ä»¶ç”¨æ¥å±•ç¤ºæœåŠ¡å™¨ç»´æŠ¤çš„å†…å®¹ï¼Œè¿™äº›å†…å®¹å¯ä»¥åœ¨æœåŠ¡å™¨éšæ—¶æ›´æ”¹ã€‚WeblViewå¦ä¸€ä¸ªä½¿ç”¨åœºæ™¯æ˜¯ï¼Œå½“æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªé¡µé¢ä¸­è¯·æ±‚æ‰€æœ‰ç”¨æˆ·çš„æ•°æ®ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯å†™ä¸€ä¸ªlayoutï¼Œç„¶åŽåˆ©ç”¨ç½‘ç»œè¯·æ±‚æ‰€æœ‰æ‰€éœ€æ•°æ®ï¼Œæœ€åŽå°†è¿™äº›æ•°æ®å¡«å……åˆ°layoutä¸­ã€‚ä½†æœ€ç®€æ´çš„æ–¹å¼æ˜¯ï¼Œæˆ‘ä»¬å…¶å®žå¯ä»¥ç›´æŽ¥åŠ è½½ä¸€ä¸ªç½‘é¡µï¼Œè¿™ä¸ªç½‘é¡µåŒ…å«äº†éœ€è¦çš„æ•°æ®ã€‚è¿™ä¸ªæ•™ç¨‹å°†å¸®åŠ©ä½ å­¦ä¼šä½¿ç”¨WebViewï¼Œä»¥åŠå…³äºŽå®ƒé«˜çº§ä¸€ç‚¹çš„ç”¨æ³•ï¼Œæ¯”å¦‚é¡µé¢è·³è½¬ã€jsäº¤äº’ç­‰ã€‚ æ·»åŠ WebViewåˆ°ä½ çš„åº”ç”¨æ·»åŠ WebViewåˆ°ä½ çš„åº”ç”¨æœ€ç®€å•çš„æ–¹å¼æ˜¯åœ¨Layoutä¸­æ·»åŠ &lt; WebView &gt;æ ‡ç­¾ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­è¡¨ç¤ºä¸€ä¸ªå…¨å±çš„WebViewã€‚123456&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;WebView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:id=&quot;@+id/webview&quot;android:layout_width=&quot;fill_parent&quot;android:layout_height=&quot;fill_parent&quot;/&gt; åŠ è½½ç½‘é¡µï¼Œè°ƒç”¨loadUrl()æ–¹æ³•å³å¯ã€‚12WebView myWebView = (WebView) findViewById(R.id.webview);myWebView.loadUrl(&quot;http://www.example.com&quot;); è¯·æ±‚æœåŠ¡å™¨ç½‘é¡µæ—¶ï¼Œåˆ«å¿˜äº†è¦åŠ ç½‘ç»œè¯·æ±‚æƒé™ã€‚1234&lt;manifest ... &gt;&lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;...&lt;/manifest&gt; ä»¥ä¸Šå°±æ˜¯æœ€ç®€å•çš„åŠ è½½ç½‘é¡µæ–¹å¼ã€‚ åœ¨WebViewä¸­ä½¿ç”¨JavaScriptå¦‚æžœä½ åœ¨APPå±•ç¤ºçš„ç½‘é¡µä¸­åŒ…å«JSï¼Œé‚£ä¹ˆè¯·ç¡®ä¿WebViewæ”¯æŒJSçš„åŠ è½½ã€‚åœ¨æ­¤ä¹‹åŽï¼Œä½ è¿˜å¯ä»¥æ–°å»ºæŽ¥å£è®©WebViewä¸ŽAndroidä»£ç äº¤äº’ã€‚ æŽˆæƒä½¿ç”¨JavaScriptWebViewé»˜è®¤ä¸æ”¯æŒJSçš„åŠ è½½ï¼Œå¼€å¯å®ƒéœ€è¦è°ƒç”¨WebSettingçš„setJavaScriptEnable()æ–¹æ³•ã€‚WebSettingå¯ä»¥é€šè¿‡WebViewçš„getSettings()æ–¹æ³•èŽ·å¾—ã€‚123WebView myWebView = (WebView) findViewById(R.id.webview);WebSettings webSettings = myWebView.getSettings();webSettings.setJavaScriptEnabled(true); WebSettingæä¾›äº†è®¸å¤šä½¿ç”¨æ€§çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ä½ æƒ³è®©ä½ å¹¸å¹¸è‹¦è‹¦å¼€å‘çš„web pageåªèƒ½åœ¨è‡ªå·±çš„androidåº”ç”¨ä¸­å±•ç¤ºï¼Œé‚£ä¹ˆå¯ä»¥åœ¨å®¢æˆ·ç«¯é€šè¿‡setUserAgentString()è®¾ç½®ç”¨æˆ·ä»£ç†ä¹‹åŽï¼Œåœ¨æœåŠ¡ç«¯éåŽ†userAgentStringå­—æ®µæ˜¯å¦æ˜¯è‡ªå·±çš„å®¢æˆ·ç«¯æ‰€è®¾å®šçš„ã€‚ åœ¨Androidä»£ç ä¸­ç»‘å®šJavaScriptä»£ç é€šè¿‡æŽ¥å£çš„æ–¹å¼ï¼Œä½ å¯ä»¥ä½¿ä½ çš„Androidä»£ç å’ŒJavaScriptä»£ç è¿›è¡Œäº¤äº’ã€‚ä¾‹å¦‚ï¼Œä½ çš„JavaScriptä»£ç å¯ä»¥è°ƒç”¨Androidä»£ç å¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ï¼Œè€Œä¸æ˜¯ä½¿ç”¨JavaScriptçš„Alertï¼ˆï¼‰æ–¹æ³•ã€‚è®©JavaScriptå’ŒAndroidä»£ç äº§ç”Ÿè”ç³»çš„å…³é”®æ˜¯addJavaScriptInterface()æ–¹æ³•ï¼Œæ­¤æ–¹æ³•åŒ…å«ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ä¸€ä¸ªç±»å¯¹è±¡ï¼Œä¾›JavaScriptè°ƒç”¨ã€‚ç¬¬äºŒä¸ªæ˜¯æŽ¥å£åç§°ï¼Œå®ƒç”¨åœ¨JavaScriptä¸­ä½œä¸ºè°ƒç”¨Androidæ–¹æ³•çš„åˆ«åã€‚ä¾‹å¦‚ï¼š1234567891011121314public class WebAppInterface &#123;Context mContext;/** Instantiate the interface and set the context */WebAppInterface(Context c) &#123;mContext = c;&#125;/** Show a toast from the web page */@JavascriptInterfacepublic void showToast(String toast) &#123;Toast.makeText(mContext, toast, Toast.LENGTH_SHORT).show();&#125;&#125; ç‰¹åˆ«æé†’ï¼šå¦‚æžœä½ çš„Androidç›®æ ‡SDKç‰ˆæœ¬åœ¨17æˆ–ä»¥ä¸Šï¼Œä½ å¿…é¡»åœ¨é‚£äº›å°†è¦åœ¨JavaScriptä¸­è°ƒç”¨çš„æ–¹æ³•ä½“å‰ä½¿ç”¨@JavascriptInterfaceæ ‡è¯†ã€‚å¦åˆ™ï¼Œè¿™äº›æ–¹æ³•å°†ä¸ä¼šè¢«è°ƒç”¨ã€‚ åœ¨è¿™ä¸ªå®žä¾‹ä¸­ï¼ŒWebAppInterfaceå…è®¸JavaScriptè¿è¡ŒshowToastæ–¹æ³•å¼¹å‡ºä¸€ä¸ªToastã€‚ä½ å¯ä»¥è¿è¡Œè¿™æ®µä»£ç é€šè¿‡WebViewçš„addJavaScriptInterface()æ–¹æ³•ï¼Œå¹¶æŒ‡å®šæŽ¥å£çš„åç§°ä¸ºâ€œAndroidâ€ï¼Œä¾‹å¦‚ï¼š12WebView webView = (WebView) findViewById(R.id.webview);webView.addJavascriptInterface(new WebAppInterface(this), &quot;Android&quot;); è¿™æ®µä»£ç ä¸ºè¿è¡Œåœ¨WebViewä¸­çš„JavaScriptåˆ›å»ºäº†ä¸€ä¸ªæŽ¥å£â€œAndroidâ€ï¼Œé‚£ä¹ˆçŽ°åœ¨ä½ çš„JavaScriptå·²ç»æœ‰èƒ½åŠ›è®¿é—®WebAppInterfaceä¸­çš„showToastæ–¹æ³•äº†ã€‚ä¸‹é¢çš„HTMLå’ŒJSä»£ç å°†è°ƒç”¨showToastæ–¹æ³•å¼¹å‡ºToastæç¤ºã€‚123456&lt;input type=&quot;button&quot; value=&quot;Say hello&quot; onClick=&quot;showAndroidToast(&apos;Hello Android!&apos;)&quot; /&gt;&lt;script type=&quot;text/javascript&quot;&gt;function showAndroidToast(toast) &#123;Android.showToast(toast);&#125;&lt;/script&gt; å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåœ¨JSä¸­ä½¿ç”¨â€œAndroidâ€è¿™ä¸ªæŽ¥å£æ—¶ï¼Œå¹¶ä¸éœ€è¦åˆå§‹åŒ–å®ƒï¼Œåœ¨æ­¤ä¹‹å‰ï¼ŒWebViewå·²ç»ä¸ºä½ å‡†å¤‡å¥½äº†ä¸€äº›ï¼Œä½ åªéœ€è¦é€šè¿‡å®ƒè°ƒç”¨é€»è¾‘å³å¯ã€‚ æ³¨æ„ï¼š1.WebAppInterfaceçš„å®žä¾‹å°†è¿è¡Œåœ¨å¦ä¸€ä¸ªçº¿ç¨‹ï¼Œå¹¶ä¸åœ¨åŽŸæ¥æ–°å»ºå®ƒçš„çº¿ç¨‹ã€‚2.ç”±äºŽé€šè¿‡JSå¯ä»¥è°ƒç”¨æœ¬åœ°çš„Androidä»£ç ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯¹äºŽè¿™ç‚¹è¦éžå¸¸çš„è°¨æ…Žã€‚å¯¹äºŽä¸å—ä¿¡ä»»çš„webé“¾æŽ¥ï¼Œä¸åº”è¯¥ä½¿ç”¨addJavascriptInterface()ï¼Œé™¤éžè¿™ä¸ªé“¾æŽ¥æ˜¯è‡ªå·±æœ¬äººå†™çš„æˆ–è€…å…¶å®ƒåº”è¯¥å……åˆ†ä¿¡ä»»å®ƒçš„ç†ç”±ã€‚åŒæ—¶ï¼Œå¯¹äºŽä¸ä¿¡ä»»çš„ç½‘ç«™ï¼Œæˆ‘ä»¬åœ¨å¤„ç†å®ƒçš„è·³è½¬æ—¶åº”è¯¥éžå¸¸å°å¿ƒï¼Œä¸åº”è¯¥åœ¨æˆ‘ä»¬çš„WebViewä¸­ç›´æŽ¥æŽ¥å—é“¾æŽ¥çš„è·³è½¬ã€‚ï¼ˆé»˜è®¤æƒ…å†µï¼ŒWebViewç½‘é¡µä¸­çš„é“¾æŽ¥ä¼šè·³è½¬åˆ°æ‰‹æœºçš„Webæµè§ˆå™¨ï¼Œè¿™æ˜¯ä¿è¯å®‰å…¨çš„å‰æä¸‹ä¸€ç§å¾ˆå¥½çš„å¤„ç†æ–¹æ³•ã€‚ä½†æ˜¯ï¼Œåœ¨æŽ¥ä¸‹æ¥ä¼šæåˆ°çš„serWebViewClient()æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥è‡ªå®šä¹‰é“¾æŽ¥çš„è¡Œä¸ºï¼Œè¿™å°±éœ€è¦å°å¿ƒäº†ã€‚ï¼‰ é¡µé¢å¯¼èˆªå½“ç”¨æˆ·åœ¨WebViewç‚¹å‡»ä¸€ä¸ªé“¾æŽ¥åŽï¼Œé»˜è®¤çš„è¡Œä¸ºæ˜¯åœ¨webæµè§ˆå™¨ä¸­æ‰“å¼€è¯¥é“¾æŽ¥æ‰€æŒ‡å‘çš„ç½‘é¡µã€‚æ­£å¦‚ä¸Šé¢æ‰€æåŠçš„ä¸€æ ·ï¼Œä½ æ˜¯å¯ä»¥é€šè¿‡WebViewçš„serWebViewClientæ–¹æ³•è‡ªå®šä¹‰è¿™ä¸ªè¡Œä¸ºçš„ã€‚ä¾‹å¦‚åœ¨è‡ªå·±çš„WebViewä¸­å±•ç¤ºè·³è½¬çš„å†…å®¹ï¼Œè€Œä¸æ˜¯è·³è½¬åˆ°webæµè§ˆå™¨ã€‚12WebView myWebView = (WebView) findViewById(R.id.webview);myWebView.setWebClient(new WebClient()); å½“ç„¶ä½ è¿˜å¯ä»¥åšæ›´å¤šï¼š12345678910111213private class MyWebViewClient extends WebViewClient &#123;@Overridepublic boolean shouldOverrideUrlLoading(WebView view,String url)&#123;if (Uri.parse(url).getHost().equals(&quot;www.example.com&quot;)) &#123;// This is my web site, so do not override; let my WebView load the pagereturn false;&#125;// Otherwise, the link is not for a page on my site, so launch another Activity that handles URLsIntent intent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));startActivity(intent);return true;&#125;&#125; ç„¶åŽåˆ›å»ºMyWebViewClientçš„å®žä¾‹ä½œä¸ºsetWebClient()çš„å‚æ•°ã€‚12WebView myWebView = (WebView) findViewById(R.id.webview);myWebView.setWebClient(new MyWebViewClient()); å¯¼èˆªwebçš„æµè§ˆè®°å½•åœ¨WebViewä¸­æµè§ˆç½‘é¡µæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šé€šè¿‡webä¸­åŒ…å«çš„å¤–é“¾è·³è½¬åˆ°å…¶å®ƒçš„ç½‘é¡µï¼ˆåœ¨åŒä¸€Webviewé¡µé¢ä¸­ï¼‰ï¼Œé‚£ä¹ˆè¿™äº›è·³è½¬è®°å½•æ˜¯å¯ä»¥æ¥å›žåˆ‡æ¢çš„ï¼Œè¿™é‡Œä¸»è¦æ¶‰åŠåˆ°goBack()å’ŒgoForward()æ–¹æ³•çš„ä½¿ç”¨ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬é€šè¿‡è®¾å¤‡çš„è¿”å›žæŒ‰é’®è®©WebViewå›žé€€åˆ°ä¸Šä¸€ä¸ªé¡µé¢ï¼Œæˆ–è€…é€€å‡ºå½“å‰Activityã€‚1234567891011@Overridepublic boolean onKeyDown(int keyCode, KeyEvent event) &#123; // Check if the key event was the Back button and if there&apos;s history if ((keyCode == KeyEvent.KEYCODE_BACK) &amp;&amp; myWebView.canGoBack()) &#123; myWebView.goBack()); return true; &#125; // If it wasn&apos;t the Back key or there&apos;s no web page history, bubble up to the default // system behavior (probably exit the activity) return super.onKeyDown(keyCode, event);&#125; å‚è€ƒèµ„æ–™Building Web Apps in WebView]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>WebView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[MD5åŠ å¯†ç®—æ³•]]></title>
    <url>%2F2019%2F12%2F20%2FMD5%E5%8A%A0%E5%AF%86%E7%AE%97%E6%B3%95%2F</url>
    <content type="text"><![CDATA[MD5(Message-Digest Algorithm 5,ä¿¡æ¯-æ‘˜è¦ç®—æ³•5)ç”¨äºŽç¡®ä¿ä¿¡æ¯ä¼ è¾“å®Œæ•´ä¸€è‡´ï¼Œæ˜¯è®¡ç®—æœºå¹¿æ³›ä½¿ç”¨çš„æ‚å‡‘ç®—æ³•ä¹‹ä¸€ï¼ˆåˆè¯‘æ‘˜è¦ç®—æ³•ï¼Œå“ˆå¸Œç®—æ³•ï¼‰ã€‚MD5ç®—æ³•å°†æ•°æ®ï¼ˆå¦‚æ±‰å­—ï¼‰è¿ç®—æˆå¦ä¸€å›ºå®šé•¿åº¦å€¼ï¼ŒMD5çš„å‰ç”Ÿæœ‰MD2ï¼ŒMD3å’ŒMD4ã€‚MD5ç®—æ³•å…·æœ‰å¦‚ä¸‹ç‰¹å¾ï¼š1ã€åŽ‹ç¼©æ€§ï¼šä»»æ„é•¿åº¦çš„æ•°æ®ç®—å‡ºçš„MD5å€¼æ˜¯å›ºå®šçš„ï¼Œå³128 ä½å›ºå®šé•¿åº¦çš„æ•£åˆ—å€¼ã€‚2ã€å®¹æ˜“è®¡ç®—ï¼šä»ŽåŽŸæ•°æ®å¾ˆå®¹æ˜“ç®—å‡ºMD5å€¼ã€‚3ã€æŠ—ä¿®æ”¹æ€§ï¼šå¯¹åŽŸæ•°æ®ä»»ä½•ä¸€ä¸ªç»†å¾®çš„æ”¹åŠ¨ï¼Œæ‰€å¾—åˆ°çš„MD5å€¼éƒ½ä¼šæœ‰å¾ˆå¤§çš„ä¸åŒã€‚4ã€å¼ºæŠ—ç¢°æ’žï¼šMD5 ä½¿ç”¨çš„æ˜¯æ•£åˆ—å‡½æ•°ï¼ˆä¹Ÿç§°å“ˆå¸Œå‡½æ•°ï¼‰ï¼Œä¸€å®šæ¦‚çŽ‡ä¸Šä¹Ÿå­˜åœ¨å“ˆå¸Œå†²çªï¼ˆä¹Ÿç§°å“ˆå¸Œç¢°æ’žï¼‰ï¼Œå³å¤šä¸ªä¸åŒçš„åŽŸæ•°æ®å¯¹åº”ä¸€ä¸ªç›¸åŒçš„ MD5 å€¼ã€‚ä¸è¿‡ï¼Œç»è¿‡ MD4ã€MD3 ç­‰å‡ ä»£ç®—æ³•çš„ä¼˜åŒ–ï¼ŒMD5 å·²ç»å……åˆ†åˆ©ç”¨æ•£åˆ—çš„åˆ†æ•£æ€§é«˜åº¦é¿å…ç¢°æ’žçš„å‘ç”Ÿã€‚ å¯ä»¥çœ‹å‡ºï¼ŒMD5 æ˜¯ä¸€ç§ä¸å¯é€†çš„ç®—æ³•ï¼Œä¹Ÿå°±è¯´ï¼Œä½ æ— æ³•é€šè¿‡å¾—åˆ°çš„ MD5 å€¼é€†å‘ç®—å‡ºåŽŸæ•°æ®å†…å®¹ã€‚æ­£æ˜¯å‡­å€Ÿè¿™äº›ç‰¹ç‚¹ï¼ŒMD5 è¢«å¹¿æ³›ä½¿ç”¨ã€‚ MD5çš„ä½¿ç”¨åœºæ™¯åœºæ™¯ä¸€å®¢æˆ·ç«¯ä¸ŽæœåŠ¡å™¨çš„ HTTP é€šä¿¡ï¼Œé€šä¿¡åŒæ–¹å¯ä»¥å°†æŠ¥æ–‡å†…å®¹åšä¸€ä¸ª MD5 è®¡ç®—ï¼Œå¹¶å°†è®¡ç®—æ‰€å¾— MD5 å€¼ä¸€å¹¶ä¼ é€’ç»™å½¼æ­¤ï¼Œè¿™æ ·ï¼ŒæŽ¥æ”¶æ–¹å¯ä»¥é€šè¿‡å¯¹æŠ¥æ–‡å†…å®¹å†æ¬¡åš MD5 è®¡ç®—å¾—åˆ°ä¸€ä¸ª MD5 å€¼ï¼Œä¸Žä¼ é€’æŠ¥æ–‡ä¸­çš„ MD5 å€¼åšæ¯”è¾ƒï¼ŒéªŒè¯æ•°æ®æ˜¯å¦å®Œæ•´ï¼Œæˆ–è€…æ˜¯å¦ä¸­é€”è¢«æ‹¦æˆªç¯¡æ”¹è¿‡ã€‚ åœºæ™¯äºŒç½‘ç»œäº‘ç›˜ä¸­çš„æ–‡ä»¶ç§’ä¼ åŠŸèƒ½ä¹Ÿè¿ç”¨åˆ° MD5 ç®—æ³•ã€‚æœåŠ¡å™¨å­˜å‚¨æ–‡ä»¶çš„æ—¶å€™ï¼ŒåŒæ—¶è®°å½•æ¯ä¸€ä¸ªæ–‡ä»¶çš„ MD5 å€¼ï¼Œä¸åŒæ–‡ä»¶å¯¹åº”ç€ä¸åŒçš„ MD5 å€¼ã€‚è¿™æ ·ï¼Œé‡åˆ°ç”¨æˆ·ä¸Šä¼ æ–‡ä»¶æ—¶ï¼Œå°†ä¸Šä¼ æ–‡ä»¶çš„ MD5 å€¼ä¸ŽæœåŠ¡å™¨ä¸Šæ‰€æœ‰å­˜å‚¨çš„ MD5 å€¼åšæ¯”è¾ƒï¼Œå¦‚æžœç›¸åŒï¼Œåˆ™è¯´æ˜Žç”¨æˆ·ä¸Šä¼ çš„æ–‡ä»¶å·²ç»åœ¨æœåŠ¡å™¨å­˜æœ‰ã€‚è¿™æ ·ï¼Œåªéœ€è¦åœ¨æ•°æ®åº“è¡¨ä¸­æ·»åŠ ä¸€ä¸ªè®°å½•ï¼Œæ˜ å°„åˆ°å¯¹åº”çš„æ–‡ä»¶ï¼Œè€Œä¸ç”¨é‡å¤ä¸Šä¼ ï¼Œå®žçŽ°æ‰€è°“ç§’ä¼ çš„åŠŸèƒ½ã€‚ æ³¨æ„ï¼šä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è®²ï¼ŒMD5 å¹¶ä¸å±žäºŽåŠ å¯†ç®—æ³•ï¼Œä¹Ÿä¸å±žäºŽç­¾åç®—æ³•ï¼Œè€Œæ˜¯ä¸€ç§æ‘˜è¦ç®—æ³•ï¼Œç”¨äºŽæ•°æ®å®Œæ•´æ€§æ ¡éªŒç­‰ã€‚ Java è¯­è¨€ä¸­è®¡ç®— MD5 å€¼çš„å®žçŽ°æ–¹å¼ç¬¬ä¸€æ­¥ï¼ŒèŽ·å– MessageDigest å¯¹è±¡ï¼Œå‚æ•°ä¸º MD5 å­—ç¬¦ä¸²ï¼Œè¡¨ç¤ºè¿™æ˜¯ä¸€ä¸ª MD5 ç®—æ³•ï¼ˆå…¶ä»–è¿˜æœ‰ SHA1 ç®—æ³•ç­‰ï¼‰ï¼š1MessageDigest md5 = MessageDigest.getInstance(&quot;MD5&quot;); ç¬¬äºŒæ­¥ï¼Œè¾“å…¥åŽŸæ•°æ®ï¼Œå‚æ•°ç±»åž‹ä¸º byte[] ï¼š1md5.update(buffer); æ³¨æ„ï¼šupdate() æ–¹æ³•æœ‰ç‚¹ç±»ä¼¼ StringBuilder å¯¹è±¡çš„ append() æ–¹æ³•ï¼Œé‡‡ç”¨çš„æ˜¯è¿½åŠ æ¨¡å¼ï¼Œå±žäºŽä¸€ä¸ªç´¯è®¡æ›´æ”¹çš„è¿‡ç¨‹ï¼Œæ¯”å¦‚ï¼š12md5.update(new byte[]&#123;&apos;a&apos;, &apos;b&apos;&#125;);md5.update(new byte[]&#123;&apos;c&apos;, &apos;d&apos;&#125;); ä¸Ž1md5.update(new byte[]&#123;&apos;a&apos;,&apos;b&apos;,&apos;c&apos;, &apos;d&apos;&#125;); æ˜¯ç­‰æ•ˆçš„ã€‚ç¬¬ä¸‰æ­¥ï¼Œè®¡ç®— MD5 å€¼ï¼š1String resultArray = md5.digest(); æ³¨æ„ï¼šdigest() æ–¹æ³•è¢«è°ƒç”¨åŽï¼ŒMessageDigest å¯¹è±¡å°±è¢«é‡ç½®ï¼Œä¹Ÿå°±æ˜¯è¯´ä½ ä¸èƒ½ç´§æŽ¥ç€å†æ¬¡è°ƒç”¨è¯¥æ–¹æ³•è®¡ç®—åŽŸæ•°æ®çš„ MD5 å€¼ã€‚å½“ç„¶ï¼Œä½ å¯ä»¥æ‰‹åŠ¨è°ƒç”¨ reset() æ–¹æ³•é‡ç½®è¾“å…¥æºã€‚digest() æ–¹æ³•è¿”å›žå€¼æ˜¯ä¸€ä¸ªå­—èŠ‚æ•°ç»„ç±»åž‹çš„ 16 ä½é•¿åº¦çš„å“ˆå¸Œå€¼ï¼Œé€šå¸¸ï¼Œæˆ‘ä»¬ä¼šè½¬åŒ–ä¸ºåå…­è¿›åˆ¶çš„ 32 ä½é•¿åº¦çš„å­—ç¬¦ä¸²æ¥ä½¿ç”¨ï¼Œå¯ä»¥åˆ©ç”¨ BigInteger ç±»æ¥åšè¿™ä¸ªè½¬åŒ–ï¼š12BigInteger bigInt = new BigInteger(1, resultArray);String resultStr = bigInt.toString(16); é€šè¿‡è¿™å±‚è½¬æ¢ï¼Œå¾—åˆ°çš„ MD5 å€¼ä¾¿æ˜¯ä¸€ä¸ªé•¿åº¦ä¸º 32 ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ï¼Œæ–¹ä¾¿ä½¿ç”¨ï¼Œç±»ä¼¼è¿™æ ·ï¼š115aa7ec97a6288e46ae865a7211eb4eb æœ‰äº†ä¸Šé¢çš„åŸºç¡€æˆ‘ä»¬å†æ¥çœ‹å¦‚ä½•å°†ä¸€ä¸ªæ–‡ä»¶é€šè¿‡MD5åŠ å¯†è½¬åŒ–æˆ32ä½çš„åå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚12345678910111213141516171819public static String fileToMD5(String filePath) &#123;String md5 = null;MessageDigest digest = null;try &#123;digest = MessageDigest.getInstance(&quot;MD5&quot;);FileInputStream inputStream = new FileInputStream(filePath);byte[] b = new byte[1024];int len = -1;while ((len = inputStream.read(b)) != -1) &#123;digest.update(b, 0, len);&#125;byte[] bytes = digest.digest();BigInteger bigInteger = new BigInteger(1, bytes);md5 = bigInteger.toString(16);&#125; catch (Exception e) &#123;e.printStackTrace();&#125;return md5;&#125; æ³¨æ„ï¼šæ–‡ä»¶çš„å¤§å°ç›´æŽ¥å½±å“å­—èŠ‚æµçš„è¯»å–é€Ÿåº¦ï¼Œé—´æŽ¥å½±å“è¿™é‡Œ MD5 çš„è®¡ç®—æ—¶é•¿ã€‚Java è¯­è¨€æä¾›æœ‰å¤šç§æ–¹å¼è¯»å–æ–‡ä»¶ï¼Œé™¤äº†ä¸Šé¢ç”¨åˆ°çš„ FileInputStream è¿™ç§é¡ºåºè¯»å–çš„ API ç±»ï¼Œè¿˜æœ‰é‡‡ç”¨éšæœºè¯»å–æ–¹å¼çš„ RandomAccessFile ç±»ç­‰ã€‚å¯¹äºŽæ–‡ä»¶è¯»å–çš„æ•ˆçŽ‡é—®é¢˜ï¼Œç ”ç©¶ä¹‹åŽå†ä½œä»‹ç»ã€‚ å‚è€ƒèµ„æ–™MD5 ç®€ä»‹ï¼ŒåŠå…¶åœ¨ Java ä¸­çš„å®žçŽ°æ–¹å¼]]></content>
      <categories>
        <category>ç®—æ³•</category>
      </categories>
      <tags>
        <tag>MD5</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ConstraintLayoutå¸ƒå±€ä½¿ç”¨æŒ‡å—]]></title>
    <url>%2F2019%2F10%2F18%2FConstraintLayout%E5%B8%83%E5%B1%80%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡ä¸»è¦æ˜¯å‚çœ‹äº†æŽ˜é‡‘ç½‘çš„è¿™ç¯‡æ–‡ç« åŽï¼Œå¯¹ ConstraintLayout å¸ƒå±€çš„ä¸€ä¸ªè¡¥å……è¯´æ˜Žã€‚ Visibility behaviorConstraintLayout å¯¹å¯è§è¡Œè¢«æ ‡è®°ä¸º GONE çš„ View æœ‰ç‰¹æ®Šçš„å¤„ç†æ–¹å¼ã€‚ä¸‹é¢æ¥è°ˆè°ˆ android:layout_margin å’Œ app:layout_goneMargin çš„åŒºåˆ«ï¼š1ã€android:layout_margin ä¸€ç›´æœ‰ä½œç”¨ï¼Œå³ä½¿ç›®æ ‡ View å·²ç»éšè—ã€‚2ã€app:layout_goneMargin åªæ˜¯åœ¨ç›®æ ‡ View éšè—æ—¶èµ·ä½œç”¨ã€‚åŒæ—¶å£°æ˜Žæ—¶ï¼ŒåŽè€…çš„ä¼˜å…ˆçº§å¤§äºŽå‰è€…ã€‚ä¸€èˆ¬æƒ…å†µä¸‹ä¼šåŒæ—¶ä½¿ç”¨è¿™ä¸¤ç§å±žæ€§ä»¥è¾¾åˆ°ç›®æ ‡ View ä¸åŒæ˜¾ç¤ºçŠ¶æ€ä¸‹å½“å‰ View çš„ä¸åŒ Margin æ•ˆæžœã€‚ Virtual Helpers objectsBarrierBarrierï¼Œç›´è¯‘ä¸ºéšœç¢ã€å±éšœã€‚åœ¨çº¦æŸå¸ƒå±€ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å±žæ€§ constraint_referenced_ids æ¥å¼•ç”¨å¤šä¸ªå¸¦çº¦æŸçš„ç»„ä»¶ï¼Œä»Žè€Œå°†å®ƒä»¬çœ‹ä½œä¸€ä¸ªæ•´ä½“ã€‚1234567891011121314151617181920212223242526272829&lt;Buttonandroid:id=&quot;@+id/button1&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;100dp&quot;android:text=&quot;Button1&quot;app:layout_constraintLeft_toLeftOf=&quot;parent&quot;app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;Buttonandroid:id=&quot;@+id/button2&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;200dp&quot;android:text=&quot;Button2&quot;app:layout_constraintLeft_toRightOf=&quot;@id/button1&quot; /&gt;&lt;android.support.constraint.Barrierandroid:id=&quot;@+id/barrier1&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;app:barrierDirection=&quot;bottom&quot;app:constraint_referenced_ids=&quot;button1,button2&quot; /&gt;&lt;TextViewandroid:id=&quot;@+id/bottom_textview&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:text=&quot;stone&quot;app:layout_constraintLeft_toLeftOf=&quot;parent&quot;app:layout_constraintTop_toBottomOf=&quot;@id/barrier1&quot; /&gt; ä¸Šé¢çš„ TextView ä¼šåœ¨ button1 å’Œ button2 è¿™ä¸ªæ•´ä½“çš„ä¸‹é¢ã€‚å¦‚æžœå°† app:constraint_referenced_ids=â€button1, button2â€ ä¸­çš„ button2 åŽ»æŽ‰ï¼Œä¼šå‘çŽ°ï¼ŒTextView ä¼šä»…åœ¨ button1 çš„ä¸‹é¢ã€‚ Groupç»„çš„ç›®çš„åœ¨äºŽï¼ˆä¸”åªèƒ½ï¼‰åŒæ—¶æŽ§åˆ¶å¤šä¸ªæŽ§ä»¶çš„ Visibility å±žæ€§ã€‚ä½†æ˜¯æœ‰ä»¥ä¸‹éœ€è¦æ³¨æ„çš„åœ°æ–¹ã€‚1ã€å•ç‹¬è®¾ç½®ç»„å†…æŽ§ä»¶çš„ Visibility æ— æ•ˆã€‚2ã€å½“æœ‰å¤šä¸ªç»„å¼•ç”¨äº†åŒä¸€ä¸ª View ï¼Œè¯¥ View çš„ Visible å±žæ€§ç”±æœ€åŽå®šä¹‰çš„ç»„å†³å®šã€‚ Layer(Added in 2.0)åŒæ—¶éœ€è¦å¯¹ä¸€ç»„ View åšç»Ÿä¸€æ“ä½œæˆ–è€…éœ€è¦åœ¨ View é›†åˆåŽé¢åŠ ä¸ªèƒŒæ™¯éƒ½å¯ä»¥ã€‚åŒæ—¶ï¼Œä»–å¯ä»¥å®žçŽ° Group çš„åŠŸèƒ½ã€‚å®žä¾‹ä»£ç å‚è€ƒ&gt;&gt; Flow(Added in 2.0)ç”¨å¼•ç”¨çš„æ–¹å¼æ¥é¿å…å¸ƒå±€åµŒå¥—ï¼Œä»£æ›¿ LinearLayout çš„åŠŸèƒ½ã€‚å‚è€ƒé“¾æŽ¥&gt;&gt; Placeholderå‚è€ƒåœ°å€Placeholder ï¼ˆå ä½ç¬¦ï¼‰ç”¨äºŽå’Œä¸€ä¸ªè§†å›¾å…³è”èµ·æ¥ï¼Œé€šè¿‡ setContentId() æ–¹æ³•å°†å ä½ç¬¦è½¬æ¢ä¸ºæŒ‡å®šçš„è§†å›¾ï¼Œå³è§†å›¾å°†åœ¨å ä½ç¬¦æ‰€åœ¨ä½ç½®ä¸Šæ˜¾ç¤ºã€‚å½“åŽŸè§†å›¾å·²åœ¨ Placeholder ä¸­æ˜¾ç¤ºæ—¶ï¼ŒåŽŸè§†å›¾å°†ä»ŽåŽŸæœ‰ä½ç½®æ¶ˆå¤±ã€‚12345678910111213141516171819202122232425&lt;Buttonandroid:id=&quot;@+id/btn_setContentId&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;wrap_content&quot;android:onClick=&quot;setContentId&quot;android:text=&quot;setContentId&quot;android:textAllCaps=&quot;false&quot; /&gt;&lt;ImageViewandroid:id=&quot;@+id/iv_target&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:src=&quot;@drawable/ic_launcher_background&quot;app:layout_constraintEnd_toEndOf=&quot;parent&quot;app:layout_constraintStart_toStartOf=&quot;parent&quot;app:layout_constraintTop_toBottomOf=&quot;@id/btn_setContentId&quot; /&gt;&lt;android.support.constraint.Placeholderandroid:id=&quot;@+id/placeholder&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;app:layout_constraintBottom_toBottomOf=&quot;parent&quot;app:layout_constraintEnd_toEndOf=&quot;parent&quot;app:layout_constraintStart_toStartOf=&quot;parent&quot;app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; 12Placeholder placeholder = findViewById(R.id.placeholder);placeholder.setContentId(R.id.iv_target); æ­¤å¤–ä¹Ÿå¯ä»¥ç›´æŽ¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­å°†å ä½ç¬¦å’Œè§†å›¾ ID ç»‘å®šåœ¨ä¸€èµ·123456789&lt;android.support.constraint.Placeholderandroid:id=&quot;@+id/placeholder&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;app:content=&quot;@id/iv_target&quot;app:layout_constraintBottom_toBottomOf=&quot;parent&quot;app:layout_constraintEnd_toEndOf=&quot;parent&quot;app:layout_constraintStart_toStartOf=&quot;parent&quot;app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; ConstrainSetåŠ¨æ€ä¿®æ”¹å¸ƒå±€ï¼Œå‚è€ƒé“¾æŽ¥&gt;&gt; é˜²æ­¢å¸ƒå±€ä¸­æœ‰æ—  id æŽ§ä»¶ï¼Œå¯ä»¥è®¾ç½® isForceId = false ã€‚ å¾ªçŽ¯å®šä½ä¸€ä¸ªå°éƒ¨ä»¶çš„ä¸­å¿ƒå¯ä»¥ä»¥ä¸€å®šè§’åº¦å’Œè·ç¦»é™åˆ¶ç›¸å¯¹äºŽå¦ä¸€ä¸ªå°éƒ¨ä»¶çš„ä¸­å¿ƒã€‚è¿™å…è®¸ä½ å°†ä¸€ä¸ªå°éƒ¨ä»¶æ”¾åœ¨ä¸€ä¸ªåœ†ä¸Šã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹å±žæ€§ï¼š1ã€layout_constraintCircle ï¼šå¼•ç”¨å¦ä¸€ä¸ªå°éƒ¨ä»¶ID2ã€layout_constraintCircleRadius ï¼šåˆ°å…¶ä»–å°éƒ¨ä»¶ä¸­å¿ƒçš„è·ç¦»3ã€layout_constraintCircleAngle ï¼šå°éƒ¨ä»¶åº”å¤„äºŽçš„è§’åº¦ï¼ˆåº¦æ•°ï¼Œä»Ž0åˆ°360ï¼‰ 12345678910111213141516&lt;Buttonandroid:id=&quot;@+id/bt_1&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;app:layout_constraintBottom_toBottomOf=&quot;parent&quot;app:layout_constraintLeft_toLeftOf=&quot;parent&quot;app:layout_constraintRight_toRightOf=&quot;parent&quot;app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt;&lt;Buttonandroid:id=&quot;@+id/bt_2&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;app:layout_constraintCircle=&quot;@+id/bt_1&quot;app:layout_constraintCircleAngle=&quot;45&quot;app:layout_constraintCircleRadius=&quot;100dp&quot; /&gt; å…¶å®ƒå‚è€ƒå®˜æ–¹æ–‡æ¡£&gt;&gt;]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>ConstraintLayout</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android é—®é¢˜æ±‡æ€»ï¼ˆè¿›è¡Œä¸­...ï¼‰]]></title>
    <url>%2F2019%2F09%2F18%2FAndroid%E9%97%AE%E9%A2%98%E6%B1%87%E6%80%BB%E5%92%8C%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[æœ¬æ–‡å°†é•¿æœŸè®°å½•å¹¶è§£ç­”ç¬”è€…åœ¨ Android å¼€å‘è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ï¼Œè¿™äº›é—®é¢˜ä¸€èˆ¬æ˜¯å‡ å¥è¯å°±èƒ½æ¦‚æ‹¬å¹¶ä¸”ä¸éœ€è¦å•ç‹¬æˆæ–‡è®²è§£çš„ã€‚ ç½‘ç»œç›¸å…³1ã€Host è¿™ä¸ª Headerçš„ä½œç”¨æ˜¯ï¼Ÿç­”ï¼šä»…ç”¨äºŽæ‰¾åˆ°ç›®æ ‡ä¸»æœºåŽç¡®è®¤å­ä¸»æœºçš„åŸŸåå’Œç«¯å£ã€‚è§£é‡Šï¼šHostè¡¨ç¤ºæœåŠ¡å™¨ä¸»æœºåœ°å€ï¼Œè¿™ä¸ªåœ°å€æ˜¯å­ä¸»æœºçš„åœ°å€ï¼Œæˆ–è€…è¯´æ˜¯å­ä¸»æœºçš„åŸŸåï¼ˆä¹Ÿå¯ä»¥æ˜¯IPåœ°å€ï¼‰ã€‚å‚è€ƒåœ°å€&gt;&gt;2ã€Host ä¸ºä»€ä¹ˆä¸æ”¾åœ¨è¯·æ±‚è¡Œå’Œ Path ä¸€èµ·æ‹¼å‡‘ä½¿ç”¨ï¼Œè€Œæ˜¯å•ç‹¬ä½œä¸º Header ï¼Ÿç­”ï¼šè¯·æ±‚è¡Œä¸­çš„ Path æ˜¯ç»™å­ä¸»æœºç¡®å®šè®¿é—®è·¯å¾„ç”¨çš„ï¼Œè€Œ Host æ˜¯ç»™ä¸»ä¸»æœºç¡®è®¤è®¿é—®çš„å­ä¸»æœºç”¨çš„ã€‚ä¸¤ä¸ªçš„ç”¨é€”ä¸ä¸€æ ·ï¼Œå‰è€…ç»™å­ä¸»æœºç”¨ï¼ŒåŽè€…ç»™ä¸»ä¸»æœºç”¨ã€‚3ã€Http åè®®ä¸­ä¸»ä¸»æœºçš„ IP åœ°å€æ˜¯ä½•æ—¶ç¡®å®šçš„ï¼Ÿç­”ï¼šæ˜¯åœ¨ Http è¯·æ±‚å‘é€ä¹‹å‰é€šè¿‡DNSåŸŸåè§£æžåŽç¡®å®šçš„ã€‚4ã€å½“ä¸€ä¸ª Java é›†åˆï¼ˆå¦‚ï¼šHashMapï¼‰çš„ key æ˜¯ç±»ç±»åž‹æ—¶ï¼Œ ä¸ºä»€ä¹ˆé‡å†™äº†ç±»çš„ equals() æ–¹æ³•ï¼Œè¿˜è¦é‡å†™ hashCode() æ–¹æ³•ï¼Ÿç­”ï¼šå› ä¸ºå¦‚æžœåªé‡å†™äº† equals æ–¹æ³•ï¼Œä¸¤ä¸ªå¯¹è±¡ equals è¿”å›žäº†trueï¼Œä½†æ˜¯å¦‚æžœæ²¡æœ‰é‡å†™ hashCode æ–¹æ³•ï¼Œé›†åˆè¿˜æ˜¯ä¼šæ’å…¥å…ƒç´ ã€‚è¿™æ ·é›†åˆä¸­å°±å‡ºçŽ°äº†é‡å¤å…ƒç´ äº†ã€‚å‚è€ƒåœ°å€&gt;&gt;5ã€ä»€ä¹ˆæ˜¯ç¼–ç ï¼Ÿç­”ï¼šæŠŠæ•°æ®ä»Žä¸€ç§æ ¼å¼è½¬æ¢æˆå¦ä¸€ç§æ ¼å¼ï¼ˆå¯èƒ½æ˜¯åŒä¸€ç§æ ¼å¼ï¼‰ï¼Œå®ƒæ˜¯å¯é€†çš„ï¼Œå®ƒçš„é€†å‘è¿‡ç¨‹å«åšè§£ç ã€‚6ã€ä»€ä¹ˆæ˜¯å¯¹è±¡åºåˆ—åŒ–ï¼Ÿç­”ï¼šæŠŠæ•°æ®å¯¹è±¡ï¼ˆä¸€èˆ¬æ˜¯å†…å­˜ç§çš„ï¼Œä¾‹å¦‚JVMä¸­çš„å¯¹è±¡ï¼‰è½¬æ¢æˆå­—èŠ‚åºåˆ—çš„è¿‡ç¨‹ã€‚å¯¹è±¡åœ¨ç¨‹åºå†…å­˜é‡Œçš„å­˜æ”¾å½¢å¼æ˜¯æ•£ä¹±çš„ï¼ˆå­˜æ”¾åœ¨ä¸åŒçš„å†…å­˜åŒºåŸŸã€å¹¶ä¸”ç”±å¼•ç”¨è¿›è¡Œè¿žæŽ¥ï¼‰ï¼Œé€šè¿‡åºåˆ—åŒ–å¯ä»¥æŠŠå†…å­˜ä¸­çš„å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªå­—èŠ‚åºåˆ—ï¼Œä»Žè€Œå¯ä½¿ç”¨byte[]ç­‰å½¢å¼è¿›è¡Œæœ¬åœ°å­˜å‚¨æˆ–ç½‘ç»œä¼ è¾“ï¼Œåœ¨éœ€è¦çš„æ—¶å€™é‡æ–°ç»„è£…ï¼ˆååºåˆ—åŒ–ï¼‰æ¥ä½¿ç”¨ã€‚7ã€åºåˆ—åŒ–å’Œç¼–ç çš„åŒºåˆ«ç­”ï¼šç¼–ç æ˜¯æŠŠæ•°æ®ç”±ä¸€ç§æ•°æ®æ ¼å¼è½¬æ¢æˆå¦ä¸€ç§æ•°æ®æ ¼å¼ï¼›è€Œåºåˆ—åŒ–æ˜¯æŠŠæ•°æ®ç”±å†…å­˜ä¸­çš„å¯¹è±¡ï¼ˆè€Œä¸æ˜¯æŸç§å…·ä½“çš„æ ¼å¼ï¼‰è½¬æ¢æˆå­—èŠ‚åºåˆ—ã€‚8ã€éžå¯¹ç§°åŠ å¯†å’Œæ•°å­—ç­¾ååœ¨åŠ å¯†é€šä¿¡ä¸­å¦‚ä½•é…åˆä½¿ç”¨ï¼Ÿç­”ï¼šä½¿ç”¨éžå¯¹ç§°åŠ å¯†é€šä¿¡ï¼Œå¯ä»¥åœ¨ï¥§å¯ä¿¡ç½‘ç»œä¸Šå°†åŒæ–¹çš„å…¬é’¥ä¼ ç»™å¯¹æ–¹ï¼Œç„¶åŽåœ¨å‘æ¶ˆæ¯å‰åˆ†åˆ«å¯¹æ¶ˆæ¯ä½¿ç”¨å¯¹æ–¹çš„å…¬é’¥æ¥åŠ å¯†å’Œä½¿ç”¨è‡ªå·±çš„ç§é’¥æ¥ç­¾åï¼Œåšåˆ°ï¥§å¯ä¿¡ç½‘ç»œä¸Šçš„å¯é å¯†é’¥ä¼ æ’­åŠåŠ å¯†é€šä¿¡ã€‚çŸ¥è¯†æ‹“å±•ï¼šç­¾åæ˜¯å¯¹åŽŸæ•°æ®çš„ hash å€¼è¿›è¡Œç­¾åï¼Œè€Œä¸æ˜¯ç›´æŽ¥å¯¹åŽŸæ•°æ®è¿›è¡Œç­¾åã€‚è¿™æ ·åšæ˜¯ä¸ºäº†å‡å°æ•°æ®çš„ä¼ è¾“ä½“ç§¯ã€‚9ã€TCP/IPåè®®æ—ã€HTTPåè®®ã€TCPåè®®ã€UDPåè®®ã€IPåè®®ã€Socketä¹‹é—´çš„å…³ç³»ï¼Ÿå‚è€ƒæ–‡ç« â… ã€TCP/IPåè®®æ—æ˜¯ä¸€ä¸ªç½‘ç»œé€šä¿¡æ¨¡åž‹ï¼Œä¸ºäº’è”ç½‘çš„åŸºç¡€é€šä¿¡æž¶æž„ï¼Œå®ƒå¹¶ä¸åªæ˜¯åŒ…å«TCPåè®®å’ŒIPåè®®ï¼Œåªæ˜¯å› ä¸ºè¿™ä¸¤ä¸ªåè®®å¾ˆé‡è¦ï¼Œæ‰€ä»¥æ‰ç”¨å®ƒä»¬æ¥å‘½åã€‚é€šå¸¸TCP/IPåè®®æ—è¢«åˆ†ä¸ºå››å±‚ï¼šåº”ç”¨å±‚ï¼ˆHTTPåè®®ï¼‰ã€ä¼ è¾“å±‚ï¼ˆTCPåè®® | UDPåè®®ï¼‰ã€ç½‘ç»œå±‚ï¼ˆIPåè®®ï¼‰ã€æ•°æ®é“¾è·¯å±‚ï¼ˆä»¥å¤ªç½‘åè®®ç­‰ï¼‰ã€‚â…¡ã€HTTPè¿žæŽ¥æ˜¯åŸºäºŽTCPåè®®çš„å¯é ä¼ è¾“åè®®ï¼ŒåŒæ—¶ä¹Ÿæ˜¯è¯·æ±‚å“åº”æ¨¡å¼ä¸”æ— çŠ¶æ€çš„åè®®ã€‚ï¼ˆHttp 1.1 ä¹‹åŽå¯ä»¥é€šè¿‡è®¾ç½® Keep-Aliveè¯·æ±‚å¤´å°† Http è½¬å˜æˆé•¿è¿žæŽ¥æ¨¡å¼ï¼Œæ‰€ä»¥æ­¤æ—¶çš„ Http æ˜¯æœ‰çŠ¶æ€çš„ã€‚ï¼‰â…¢ã€Socketè¿žæŽ¥æ—¢å¯ä»¥åŸºäºŽTCPåè®®ï¼Œä¹Ÿå¯ä»¥åŸºäºŽUDPåè®®ã€‚å‰è€…æ¯æ¬¡å»ºç«‹è¿žæŽ¥éƒ½è¦æ‰§è¡ŒTCPçš„ä¸‰æ¬¡æ¡æ‰‹è¿‡ç¨‹ï¼Œæ¯æ¬¡æ–­å¼€è¿žæŽ¥éƒ½è¦æ‰§è¡Œå››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ã€‚åŽè€…æ²¡æœ‰ä¸‰æ¬¡æ¡æ‰‹å’Œå››æ¬¡æŒ¥æ‰‹çš„è¿‡ç¨‹ã€‚â…£ã€TCPåè®®ï¼ˆTransmission Control Protocolï¼Œä¼ è¾“æŽ§åˆ¶åè®®ï¼‰æ˜¯é¢å‘è¿žæŽ¥çš„åè®®ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨æ”¶å‘æ•°æ®å‰ï¼Œå¿…é¡»å’Œå¯¹æ–¹å»ºç«‹å¯é çš„è¿žæŽ¥ã€‚ ä¸€ä¸ªTCPè¿žæŽ¥å¿…é¡»è¦ç»è¿‡ä¸‰æ¬¡â€œå¯¹è¯â€æ‰èƒ½å»ºç«‹èµ·æ¥ï¼ŒåŒæ—¶ï¼Œç»“æŸå¯¹è¯ä¹Ÿéœ€è¦å››æ¬¡æŒ¥æ‰‹è¿‡ç¨‹ã€‚Vã€UDPåè®®ï¼ˆUser Data Protocolï¼Œç”¨æˆ·æ•°æ®æŠ¥åè®®ï¼‰åœ¨ä¼ è¾“æ•°æ®æ—¶ä¸å»ºç«‹è¿žæŽ¥ï¼Œå› æ­¤ä¹Ÿå°±ä¸éœ€è¦ç»´æŠ¤è¿žæŽ¥çŠ¶æ€ã€‚UDPæ˜¯é¢å‘æŠ¥æ–‡çš„ã€‚å‘é€æ–¹çš„UDPå¯¹åº”ç”¨ç¨‹åºäº¤ä¸‹æ¥çš„æŠ¥æ–‡ï¼Œ åœ¨æ·»åŠ é¦–éƒ¨åŽå°±å‘ä¸‹äº¤ä»˜ç»™IPå±‚ã€‚æ—¢ä¸æ‹†åˆ†ï¼Œä¹Ÿä¸åˆå¹¶ï¼Œè€Œæ˜¯ä¿ç•™è¿™äº›æŠ¥æ–‡çš„è¾¹ç•Œï¼Œ å› æ­¤ï¼Œåº”ç”¨ç¨‹åºéœ€è¦é€‰æ‹©åˆé€‚çš„æŠ¥æ–‡å¤§å°ã€‚â…¥ã€æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼ŒTCP/IPåè®®æ—æ˜¯ä¸€ä¸ªæ€»ç§°ï¼Œå®ƒåŒ…å«äº†HTTPåè®®ã€TCPåè®®ã€UDPåè®®ã€IPåè®®ã€‚TCPåè®®ã€UDPåè®®æ˜¯ä¸¤ç§ä¸åŒçš„ä¼ è¾“å±‚åè®®ã€‚Socketæ˜¯ä¸€ä¸ªä¸ºäº†ä¾¿äºŽä½¿ç”¨ TCP/UDP è€Œæä¾›çš„APIæŽ¥å£è§„èŒƒï¼Œè€ŒHttpæ˜¯ä¸€ä¸ªåº”ç”¨å±‚åè®®ï¼ŒHttpçš„ä¸‹ä¸€å±‚åŸºäºŽTCPåè®®ï¼Œå®ƒå’ŒSocketæ²¡æœ‰è”ç³»ã€‚åœ¨ Http è¿žæŽ¥ä¸­ï¼Œåªæœ‰å®¢æˆ·ç«¯å‘èµ·è¯·æ±‚åŽæœåŠ¡ç«¯æ‰ä¼šå“åº”ï¼ŒæœåŠ¡ç«¯æ˜¯æ— æ³•ä¸»åŠ¨å‘å®¢æˆ·ç«¯å‘æ¶ˆæ¯çš„ï¼Œè€ŒSocketè¿žæŽ¥ä¸­ï¼Œé€šä¿¡åŒæ–¹å‘é€æ¶ˆæ¯å¹¶æ²¡æœ‰å…ˆåŽçš„é™åˆ¶ï¼Œé€šä¿¡åŒæ–¹ä¸­çš„ä»»ä½•ä¸€æ–¹å¯ä»¥éšæ—¶å‘å¦ä¸€æ–¹å‘é€æ¶ˆæ¯ã€‚æœ€åŽï¼Œç¬”è€…ä¹Ÿè®¤ä¸ºæ—¢ç„¶ Socket æ˜¯ä¸€ä¸ªå¯¹ä¼ è¾“å±‚åè®®çš„æŽ¥å£å°è£…ï¼Œè€Œä¼ è¾“å±‚çš„ä¸Šä¸ªæ­¥éª¤æ˜¯æ¥è‡ªäºŽåº”ç”¨å±‚çš„ï¼ˆè¿™é‡Œå°±æ˜¯Httpåè®®äº†ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥è¯´ Sockect çš„å®žçŽ°æ˜¯ä¾èµ–äºŽä¸Šå±‚httpåè®®çš„ã€‚ï¼ˆåº”ç”¨å±‚åè®®è¿˜æœ‰ä¸€ä¸ªWebSockeåè®®æ”¯æŒåŒå‘ä¸»åŠ¨å‘é€æ¶ˆæ¯ç»™å¯¹æ–¹ï¼Œå®ƒå’Œ Httpåè®® çš„åŒºåˆ«å¯ä»¥å‚è€ƒè¿™ä¸ªé“¾æŽ¥ï¼‰10ã€HMAC æ˜¯ä»€ä¹ˆ ä»¥åŠ Https å»ºç«‹è¿žæŽ¥è¿‡ç¨‹ä¸­äº§ç”Ÿçš„ mac secrete æœ‰ä»€ä¹ˆç”¨ï¼Ÿå…³äºŽ HMAC çš„å®šä¹‰å¯ä»¥çœ‹è¿™ç¯‡æ–‡ç« ï¼Œæ‰€ä»¥æˆ‘å¾—åˆ°ç»“è®ºæ˜¯ HMAC ä¸ä»…å¯ä»¥éªŒè¯æ•°æ®çš„å®Œæ•´æ€§ï¼ŒåŒæ—¶è¿˜èƒ½ä¿è¯æ•°æ®æ¥è‡ªäºŽå¯ä¿¡çš„å¯¹è±¡ï¼ˆåŠ å¤§ç ´è§£éš¾åº¦ï¼‰ã€‚è€Œ mac secrete å®žé™…ä¸Šå……å½“äº† HMAC è®¡ç®—è¿‡ç¨‹ä¸­çš„ key ã€‚ è‡ªå®šä¹‰ View ç›¸å…³1ã€canvas ä¸­ saveï¼ˆï¼‰å’Œ saveLayerï¼ˆï¼‰åŒºåˆ«å‚è€ƒé“¾æŽ¥&gt;&gt;2ã€è‡ªå®šä¹‰ View æ—¶æ‹¿åˆ° View å±žæ€§å€¼çš„ä¸¤ç§æ–¹å¼æ–¹å¼ä¸€12TypedArray typedArray =context.obtainStyledAttributes(attrs,æŽ§ä»¶åœ¨ R.styleable.styleable æ–‡ä»¶ä¸­çš„å‘½åã€éšæ„ã€‘);typedArray.getXXX(R.styleable.styleableæ–‡ä»¶ä¸­çš„æŽ§ä»¶åç§°_æŽ§ä»¶å±žæ€§å, defaultValue); æ–¹å¼äºŒ12TypedArray typedArray =context.obtainStyledAttributes(attrs,ç”±æŽ§ä»¶å±žæ€§ç»„æˆçš„æ•°ç»„ã€å¦‚&#123;android.R.attr.layout_width,R.attr.***&#125;ã€‘);typedArray.getXXX(å±žæ€§åœ¨æ•°ç»„ä¸­çš„å¼•ç´¢, defaultValue); æ³¨æ„ï¼Œå¯¹äºŽæ–¹å¼äºŒï¼ŒobtainStyledAttributes çš„ç¬¬äºŒä¸ªå‚æ•°å¿…é¡»æ˜¯ç”±ç»„æˆè¯¥æŽ§ä»¶çš„å±žæ€§ç”Ÿæˆçš„æ•°ç»„ï¼Œå¯ä»¥æ˜¯ç³»ç»Ÿè‡ªå¸¦çš„ï¼Œå¦‚ï¼šandroid.R.attr.layout_widthï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨ styleable æ–‡ä»¶è‡ªå®šä¹‰çš„å±žæ€§ï¼Œå¦‚ï¼šR.attr.*ã€‚ 3ã€Android åŠ¨ç”»é€‰æ‹©é—®é¢˜**ä¼˜å…ˆè€ƒè™‘ä½¿ç”¨å±žæ€§åŠ¨ç”»ã€View åŠ¨ç”»ã€æˆ–è€…ä»–ä»¬çš„è¡ç”Ÿç‰ˆæœ¬åŠ¨ç”»ã€‚å¦‚æžœå®žçŽ°èµ·æ¥å¤æ‚ï¼Œæ‰è€ƒè™‘ä½¿ç”¨è¿‡æ¸¡åŠ¨ç”»æˆ– MotionLayout åŠ¨ç”»ã€‚ æ³¨æ„ï¼šè¿‡æ¸¡åŠ¨ç”»ä½¿ç”¨TransitionManager#go()æ–¹å¼æ—¶ï¼Œéœ€è¦é‡æ–°ç»‘å®šæ•°æ®ï¼ˆå› ä¸º View ä¼šè¢«é‡æ–°æ·»åŠ ï¼‰ï¼ŒTransitionManager#beginDelayedTransition()æ–¹å¼å’Œ MotionLayout åŠ¨ç”»ä¸éœ€è¦é‡æ–°ç»‘å®šæ•°æ®ã€‚]]></content>
      <categories>
        <category>Android å…¶å®ƒ</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[Kotlin ä½¿ç”¨ç¬”è®°ï¼ˆè¿›è¡Œä¸­...ï¼‰]]></title>
    <url>%2F2019%2F08%2F28%2FKotlin%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%2F</url>
    <content type="text"><![CDATA[æœ¬ç¯‡æ–‡ç« å°†é•¿æœŸè®°å½•å¹¶è§£ç­”ç¬”è€…åœ¨å­¦ä¹ ä½¿ç”¨ Kotlin è¿‡ç¨‹ä¸­æ‰€é‡åˆ°çš„é—®é¢˜ç‚¹ï¼Œå‚è€ƒèµ„æ–™ä¼šä»¥ æ‰”ç‰©çº¿ è€å¸ˆçš„ ç ä¸Šå¼€å­¦ç³»åˆ—æ•™ç¨‹ å’Œ Kotlin å®˜æ–¹æ•™ç¨‹ ä¸ºä¸»ï¼ŒåŒæ—¶ä¹Ÿä¼šé…åˆå‚è€ƒå…¶ä»–ä¼˜ç§€æ–‡ç« ã€‚ å•ä¾‹æ¨¡å¼Java çš„å•ä¾‹æ¨¡å¼é€šå¸¸å®žçŽ°èµ·æ¥ç¨æ˜¾ç¹çï¼ŒåŒ…å«å¤§é‡çš„æ¨¡æ¿ä»£ç ï¼Œå…·ä½“ä½¿ç”¨å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚è€Œ Kotlin å®žçŽ°å•ä¾‹æ¨¡å¼æ˜¯éžå¸¸ä¾¿æ·çš„ï¼Œåªéœ€ä½¿ç”¨ object å…³é”®å­—å³å¯ã€‚1234567// ðŸ‘‡ class æ›¿æ¢æˆäº† objectobject A &#123; val number: Int = 1 fun method() &#123; println(&quot;A.method()&quot;) &#125;&#125; é€šè¿‡ Android studio è½¬æ¢å·¥å…·å°†ä¸Šé¢ä»£ç è½¬æˆ Java ä»£ç å¦‚ä¸‹ï¼š1234567891011121314151617181920public final class A &#123; private static final int number = 1; public static final A INSTANCE; public final int getNumber() &#123; return number; &#125; public final void method() &#123; String var1 = &quot;A.method()&quot;; boolean var2 = false; System.out.println(var1); &#125; static &#123; A var0 = new A(); INSTANCE = var0; number = 1; &#125;&#125; å¯ä»¥çœ‹åˆ°ï¼Œå®žé™…ä¸Šè¿™ç§é€šè¿‡ object å®žçŽ°çš„å•ä¾‹æ˜¯ä¸€ä¸ªé¥¿æ±‰å¼çš„å•ä¾‹ï¼Œå¹¶ä¸”å®žçŽ°äº†çº¿ç¨‹å®‰å…¨ã€‚ ä»£ç å—Java ä¸€å…±æœ‰å››å¤§ä»£ç å—ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ–‡ç« ä¸­æœ€åŽæåˆ°çš„åŒæ­¥ä»£ç å—ä¸­å¯¹é™æ€ä»£ç å—çš„è§£é‡Šæœ‰è¯¯ï¼Œå¦‚æžœè¦äº†è§£ java ä¸­çš„åŒæ­¥ä»£ç å—çŸ¥è¯†ï¼Œå¯ä»¥ç§»æ­¥åˆ°ç¬”è€…ä¹‹å‰å†™çš„è¿™ç¯‡æ–‡ç« ã€‚Kotlin ä¸­çš„æž„é€ ä»£ç å—å’Œé™æ€ä»£ç å—æœ‰äº†ä¸€äº›å˜åŒ–ï¼Œå…ˆæ¥çœ‹æž„é€ ä»£ç å—ã€‚Java æ˜¯è¿™æ ·å†™çš„ï¼š1234567public class User &#123; &#123; // åˆå§‹åŒ–ä»£ç å—ï¼Œå…ˆäºŽä¸‹é¢çš„æž„é€ å™¨æ‰§è¡Œ &#125; public User() &#123; &#125;&#125; è€Œ Kotlin æ˜¯è¿™æ ·å†™çš„ï¼š1234567class User &#123; init &#123; // åˆå§‹åŒ–ä»£ç å—ï¼Œå…ˆäºŽä¸‹é¢çš„æž„é€ å™¨æ‰§è¡Œ &#125; constructor() &#123; &#125;&#125; å¯¹äºŽé™æ€ä»£ç å—ï¼Œ Java æ˜¯è¿™æ ·çš„ï¼š12345public class Sample &#123; static &#123; ... &#125;&#125; è€Œ Kotlin æ˜¯è¿™æ ·å†™çš„ï¼š1234567class Sample &#123; companion object &#123; init &#123; ... &#125; &#125;&#125; è®¿é—®é™åˆ¶ç¬¦Java çš„è®¿é—®é™åˆ¶ç¬¦å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« è®¿é—®æŽ§åˆ¶ä¿®é¥°ç¬¦éƒ¨åˆ†ã€‚å…¶ä¸­ï¼Œå¦‚ä¸‹å‡ ä¸ªçŸ¥è¯†ç‚¹éœ€è¦æ³¨æ„ä¸€ä¸‹ï¼š 1ã€å­ç±»ä¸ŽåŸºç±»åœ¨åŒä¸€åŒ…ä¸­ï¼šè¢«å£°æ˜Žä¸º protected æˆ– default çš„å˜é‡ã€æ–¹æ³•å’Œæž„é€ å™¨èƒ½è¢«åŒä¸€ä¸ªåŒ…ä¸­çš„ä»»ä½•å…¶ä»–ç±»è®¿é—®ã€‚2ã€å­ç±»ä¸ŽåŸºç±»ä¸åœ¨åŒä¸€åŒ…ä¸­ï¼šé‚£ä¹ˆåœ¨å­ç±»ä¸­ï¼Œå­ç±»å®žä¾‹å¯ä»¥è®¿é—®å…¶ä»ŽåŸºç±»ç»§æ‰¿è€Œæ¥çš„ protected æ–¹æ³•ï¼Œè€Œä¸èƒ½è®¿é—®åŸºç±»å®žä¾‹çš„ protected æ–¹æ³•ã€‚åŒæ—¶ï¼Œåœ¨å­ç±»ä¸­æ—¢ä¸èƒ½è®¿é—®å…¶ä»ŽåŸºç±»ç»§æ‰¿è€Œæ¥çš„ default æ–¹æ³•ï¼Œä¹Ÿä¸èƒ½è®¿é—®åŸºç±»å®žä¾‹çš„ default æ–¹æ³•ã€‚ï¼ˆå˜é‡ã€æž„é€ å™¨åŒç†ã€‚ï¼‰3ã€å­ç±»å¯ä»¥å¯¹ä»Žçˆ¶ç±»ç»§æ‰¿çš„æ–¹æ³•åŠ å®½è®¿é—®èŒƒå›´ã€‚è®¿é—®æŽ§åˆ¶ç¬¦çš„è®¿é—®èŒƒå›´æœ‰å¤§åˆ°å°æŽ’åºæ˜¯ï¼špublic &gt; protect &gt; default &gt; privateã€‚ å¯¹äºŽKotlinçš„è®¿é—®æŽ§åˆ¶ç¬¦ï¼Œç›´æŽ¥å‚è€ƒç ä¸Šå¼€å­¦å§ã€‚ å†…è”å‡½æ•°é¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä½¿ç”¨å†…è”å‡½æ•°çš„ä¸€ä¸ªä¾‹å­ï¼š12345678inline fun log() &#123; println(&quot;log1&quot;) println(&quot;log2&quot;)&#125;fun main(args: Array&lt;String&gt;) &#123; log()&#125; åç¼–è¯‘æˆ Java çš„ä»£ç å¦‚ä¸‹ï¼š1234567891011121314public static final void log() &#123; String var1 = &quot;log1&quot;; System.out.println(var1); var1 = &quot;log2&quot;; System.out.println(var1); &#125; public static final void main(@NotNull String[] args) &#123; Intrinsics.checkParameterIsNotNull(args, &quot;args&quot;); String var1 = &quot;log1&quot;; System.out.println(var1); var1 = &quot;log2&quot;; System.out.println(var1); &#125; è€Œæˆ‘ä»¬åŽ»æŽ‰ inline å…³é”®å­—åŽï¼Œå†åç¼–è¯‘æˆ Java ä»£ç ï¼Œå¦‚ä¸‹ï¼š1234567891011public static final void log() &#123; String var0 = &quot;log1&quot;; System.out.println(var0); var0 = &quot;log2&quot;; System.out.println(var0); &#125; public static final void main(@NotNull String[] args) &#123; Intrinsics.checkParameterIsNotNull(args, &quot;args&quot;); log(); &#125; å¦‚ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œä½¿ç”¨å†…è”å‡½æ•°å¯ä»¥å‡å°‘ä¸€å±‚å‡½æ•°çš„è°ƒç”¨æ ˆï¼Œä½†å¦‚æžœæœ‰å¤šä¸ªåœ°æ–¹è°ƒç”¨å†…è”å‡½æ•°çš„è¯ï¼Œå°±ä¼šéšå¼åœ°å¢žåŠ ç¼–è¯‘åŽä»£ç çš„è¡Œæ•°ã€‚é‚£ä¹ˆå¦‚æžœæ­£ç¡®ä½¿ç”¨å†…è”å‡½æ•°å‘¢ï¼Œæˆ–è€…è¯´å®ƒåˆ°åº•æœ‰ä»€ä¹ˆç”¨ï¼Ÿæœ‰å¦‚ä¸‹å‡ ä¸ªä½¿ç”¨åœºæ™¯ï¼š 1ã€å‡½æ•°å‚æ•°åŒ…å«å‡½æ•°ç±»åž‹çš„å‡½æ•°ã€‚12345class View &#123; inline fun setOnClickListener(listener: (View) -&gt; Unit) &#123; listener(this) &#125;&#125; å¦‚æžœä¸ä½¿ç”¨å†…è”å‡½æ•°ï¼Œç”±äºŽ setOnClickListener ä½¿ç”¨çš„æ˜¯å‡½æ•°ç±»åž‹çš„å‚æ•°ï¼Œé‚£ä¹ˆåœ¨è°ƒç”¨æ—¶ä¼šäº§ç”Ÿä¸€ä¸ªé¢å¤–çš„å¯¹è±¡ï¼Œå…·ä½“çš„è¿‡ç¨‹å¯ä»¥åç¼–è¯‘æˆ Java æ–‡ä»¶åŽçœ‹çœ‹ã€‚ 2ã€æ³›åž‹å…·ä½“åŒ–ã€‚å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨æ³›åž‹æ—¶ï¼Œæ˜¯ä¸èƒ½ç›´æŽ¥å¯¹æ³›åž‹ç±»åž‹è¿›è¡Œæ“ä½œçš„ã€‚æ¯”å¦‚ä¸‹é¢çš„æ“ä½œä¼šå¯¼è‡´ç¼–è¯‘ä¸é€šè¿‡ï¼š123fun &lt;T&gt; excute() &#123; func(T::class.java) //ç¼–è¯‘å™¨æŠ¥é”™ï¼šCannot use &apos;T&apos; as reified type parameter. Use a class instead.&#125; å¤§æ„æ˜¯ï¼šä¸èƒ½ä½¿ç”¨æ³›åž‹ T ä½œä¸ºå…·ä½“çš„ç±»åž‹å‚æ•°ã€‚å¦‚æžœä¾ç…§ Java çš„è§£å†³æ–¹å¼ï¼Œå¯ä»¥è¿™æ ·å†™ï¼š123fun &lt;T&gt; excute(class: Class&lt;T&gt;) &#123; func(class)&#125; ä¸è¿‡ï¼Œ Kotlin ä¸­æœ‰æ›´åŠ æ–¹ä¾¿çš„ç”¨æ³•ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ inline å…³é”®å­—è¾¾åˆ°è®©æ³›åž‹å…·ä½“åŒ–çš„ç›®æ ‡ï¼š1234inline fun &lt;reified T&gt; excute() &#123; func(T::class.java)&#125;//PSï¼šä½¿ç”¨æ—¶è¿˜éœ€åœ¨æ³›åž‹å£°æ˜Žå‰åŠ ä¸Š refied å…³é”®å­—ï¼Œæ‰èƒ½è®©æ³›åž‹çœŸæ­£å…·ä½“åŒ–ã€‚ Retrofit æœ€æ–°æ‹“å±•ä¸­ï¼Œå†…éƒ¨å·²ç»å®žçŽ°äº†ä¸€ä¸ªå†…è”å‡½æ•°ç”¨æ¥ä»£æ›¿æ—§ç‰ˆæœ¬åˆ›å»ºå®žä¾‹çš„æ–¹å¼ã€‚å…·ä½“å¯å‚è€ƒ Retrofit.create() æ‹“å±•æ–¹æ³•ã€‚ å§”æ‰˜å‚è€ƒåœ°å€&gt;&gt;ä¸Šé¢çš„æ–‡ç« ä¸­ï¼Œç¬”è€…è®¤ä¸ºåªéœ€è¦ç†è§£ä»Žå¼€ç¯‡åˆ°â€œæŠŠå±žæ€§å‚¨å­˜åœ¨æ˜ å°„ä¸­â€éƒ¨åˆ†çš„å†…å®¹ï¼Œå‰©ä¸‹çš„å†…å®¹è¯»è€…è‡ªè¡Œæ–Ÿé…Œå…¶é‡è¦æ€§å§ã€‚ æž„é€ å™¨æ‰§è¡Œé¡ºåºKotlin çš„æž„é€ å™¨æ‰§è¡Œé¡ºåºå’Œ Java ä¸€è‡´ï¼Œå¯å‚è€ƒè¿™ç¯‡æ–‡ç« &gt;&gt; ä½œç”¨åŸŸå‡½æ•° withâ€˜withâ€™æœ€å¤§çš„ä½œç”¨æ˜¯å¯ä»¥è¿”å›žä»»ä½•å¯¹è±¡ï¼Œè¿™æ˜¯å…¶å®ƒå‡ ä¸ªä½œç”¨åŸŸå‡½æ•°ä¸èƒ½å®žçŽ°çš„ã€‚å®˜æ–¹è¯¦è§£&gt;&gt; lambdaè¡¨è¾¾å¼ã€åŒ¿åå‡½æ•°ä»¥åŠå‡½æ•°ç±»åž‹ä¸‰è€…ä¹‹é—´çš„è”ç³»ä¸ŽåŒºåˆ«å®˜æ–¹æ–‡æ¡£å‚è€ƒ&gt;&gt; ç†è§£ã€Œå¸¦æŽ¥æ”¶è€…ç±»åž‹çš„å‡½æ•°ç±»åž‹ ã€æ¦‚å¿µï¼šå®˜æ–¹æ–‡æ¡£ï¼ˆåªéœ€çœ‹ç›¸å…³çš„ï¼‰&gt;&gt;å®žè·µï¼ˆæ¥è‡ª Android KTX Coreï¼‰ï¼šSharedPreferences æºç &gt;&gt; é—­åŒ…å…¶å®žé—­åŒ…å¹¶ä¸æ˜¯ Kotlin ä¸­çš„æ–°æ¦‚å¿µï¼Œåœ¨ Java 8 ä¸­å°±å·²ç»æ”¯æŒã€‚æˆ‘ä»¬ä»¥ Thread ä¸ºä¾‹ï¼Œæ¥çœ‹çœ‹ä»€ä¹ˆæ˜¯é—­åŒ…ï¼š12345678910111213141516// åˆ›å»ºä¸€ä¸ª Thread çš„å®Œæ•´å†™æ³•Thread(object : Runnable &#123; override fun run() &#123; ... &#125;&#125;)â€‹// Runnable æ˜¯å‡½æ•°å¼æŽ¥å£ï¼Œå¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼ç®€åŒ–ä¸ºThread(&#123; ...&#125;)â€‹// ä½¿ç”¨é—­åŒ…åŽŸåˆ™ï¼Œå†ç®€åŒ–ä¸ºThread &#123; ...&#125; å½¢å¦‚ Thread {â€¦} è¿™æ ·çš„ç»“æž„ä¸­ {} å°±æ˜¯ä¸€ä¸ªé—­åŒ…ã€‚ åœ¨ Kotlin ä¸­æœ‰è¿™æ ·ä¸€ä¸ªè¯­æ³•ç³–ï¼šå½“å‡½æ•°çš„æœ€åŽä¸€ä¸ªå‚æ•°æ˜¯ lambda è¡¨è¾¾å¼æ—¶ï¼ˆåˆåï¼šæ‹–å°¾ lambda è¡¨è¾¾å¼ï¼‰ï¼Œå¯ä»¥å°† lambda å†™åœ¨æ‹¬å·å¤–ã€‚è¿™å°±æ˜¯å®ƒçš„é—­åŒ…åŽŸåˆ™ã€‚ åœ¨è¿™é‡Œéœ€è¦ä¸€ä¸ªç±»åž‹ä¸º Runnable çš„å‚æ•°ï¼Œè€Œ Runnable æ˜¯ä¸€ä¸ª Java æŽ¥å£ï¼Œä¸”åªå®šä¹‰äº†ä¸€ä¸ªå‡½æ•° runï¼Œè¿™ç§æƒ…å†µå¯ä»¥è½¬æ¢æˆä¼ é€’ä¸€ä¸ª lambda è¡¨è¾¾å¼ï¼ˆç¬¬äºŒæ®µï¼‰ï¼Œå› ä¸ºæ˜¯æœ€åŽä¸€ä¸ªå‚æ•°ï¼Œæ ¹æ®é—­åŒ…åŽŸåˆ™æˆ‘ä»¬å°±å¯ä»¥ç›´æŽ¥å†™æˆ Thread {â€¦}ï¼ˆç¬¬ä¸‰æ®µï¼‰ çš„å½¢å¼ã€‚ æ³¨æ„:Kotlin å¯¹äºŽâ€œå‡½æ•°å¼æŽ¥å£å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼â€è¿™ä¸ªç”¨æ³•ä»…ä»…æ˜¯é’ˆå¯¹æŽ¥å£æ˜¯ Java ç±»åž‹çš„æƒ…å†µï¼Œå¦‚æžœæŽ¥å£æ˜¯ Kotlin å†™çš„ï¼Œåˆ™åœ¨ Kotlin ä¸­è°ƒç”¨ä»¥æŽ¥å£ä½œä¸ºå‚æ•°çš„æ–¹æ³•æ—¶å¿…é¡»é€šè¿‡å…³é”®å­—â€™objectâ€™åˆ›å»ºåŒ¿åç±»çš„å¯¹è±¡æ¥ä½œä¸ºå…¶å‚æ•°ã€‚ å‚è€ƒé“¾æŽ¥&gt;&gt; å¹³å°ç±»åž‹åœ¨ kotlin ä¸­ä½¿ç”¨å…¶ä»–å¹³å°ï¼ˆå¦‚ï¼šJavaï¼‰çš„ç±»åž‹æ—¶ï¼Œå¦‚æžœè¯¥ç±»åž‹æœªç”¨å¯ç©ºæ€§æ³¨è§£æ ‡æ³¨ï¼Œåˆ™ Kotlin ä¼šè‡ªåŠ¨å°†è¿™å…¶è§£é‡Šæˆå¹³å°ç±»åž‹ã€‚ åœ¨ç±»åž‹åŽé¢åŠ ä¸Šä¸€ä¸ªæ„Ÿå¹å·çš„ç±»åž‹å°±æ˜¯å¹³å°ç±»åž‹ï¼Œå¹³å°ç±»åž‹ä¸èƒ½æ‰‹åŠ¨å£°æ˜Žã€‚ Kotlin å¯¹å¹³å°ç±»åž‹çš„ç©ºæ£€æµ‹ä¼šæ”¾å®½ï¼Œ å› æ­¤å®ƒä»¬çš„å®‰å…¨ä¿è¯ä¸Žåœ¨ Java ä¸­ç›¸åŒï¼Œå³è¦ç©ºæ£€æŸ¥ã€‚ å®˜æ–¹æ–‡æ¡£ï¼ˆçœ‹åˆ°å¯ç©ºæ€§æ³¨è§£ï¼‰&gt;&gt;ã€‚]]></content>
      <categories>
        <category>Android å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>Kotlin</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆä¸ƒï¼‰ï¼šè¿‡æ¸¡åŠ¨ç”»]]></title>
    <url>%2F2019%2F07%2F29%2F%E8%BF%87%E6%B8%A1%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚Android 4.4.2 (API level 19) å¼•å…¥äº† Transition æ¡†æž¶ï¼Œæ”¯æŒåœºæ™¯è¿‡æ¸¡æ•ˆæžœï¼Œåˆ°äº†A ndroid 5.0ï¼ˆAPI level 21ï¼‰ å¼€å§‹æ”¯æŒ Activity è¿‡æ¸¡åŠ¨ç”»ã€‚ç›¸å¯¹äºŽè§†å›¾åŠ¨ç”»æˆ–å±žæ€§åŠ¨ç”»ï¼ŒTransition åŠ¨ç”»æ›´å…·ç‰¹æ®Šæ€§ï¼ŒTransition å¯ä»¥çœ‹ä½œå¯¹å±žæ€§åŠ¨ç”»çš„é«˜åº¦å°è£…ã€‚ä¸ºäº†å¯¹ Transition æœ‰ä¸€ä¸ªå¤§ä½“çš„äº†è§£ï¼Œæˆ‘ä»¬ä»Ž Scene Transition(åœºæ™¯è¿‡æ¸¡åŠ¨ç”»)ã€Activity è¿‡æ¸¡åŠ¨ç”»ä¹‹ Content Transitionã€Activity è¿‡æ¸¡åŠ¨ç”»ä¹‹ Shared Element Transition è¿™ä¸‰ä¸ªæ–¹é¢æ¥åšæ¦‚è¿°ã€‚ åœºæ™¯è¿‡æ¸¡åŠ¨ç”»ï¼šScene Transitionåœºæ™¯è¿‡æ¸¡åŠ¨ç”»æ˜¯æŒ‡ä»¥åŠ¨ç”»çš„å½¢å¼å®žçŽ°Viewä¸¤ä¸ªåœºæ™¯çš„åˆ‡æ¢(ä»Žä¸€ä¸ªåœºæ™¯åˆ‡æ¢åˆ°å¦ä¸€ä¸ªåœºæ™¯)ã€‚è€Œä¸”åœ¨åˆ‡æ¢è¿‡ç¨‹ä¸­é€šè¿‡ Transition æ¥è®¾ç½®ä¸åŒçš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæžœã€‚åœºæ™¯è¿‡æ¸¡åŠ¨ç”»ä¸­æœ‰ä¸‰ä¸ªç‰¹åˆ«å…³é”®æ¦‚å¿µï¼šSceneï¼ˆåœºæ™¯ï¼‰ï¼ŒTransitionï¼ˆè¿‡æ¸¡åŠ¨ç”»ï¼‰ï¼ŒTransitionManagerï¼ˆç®¡ç†ï¼‰ã€‚ 1ã€Sceneï¼šScene ä»£è¡¨ä¸€ä¸ªåœºæ™¯ã€‚Scene ä¿å­˜äº†ä¸€ä¸ªè§†å›¾å±‚çº§ç»“æž„ï¼ŒåŒ…æ‹¬å®ƒæ‰€æœ‰çš„ views ä»¥åŠ views çš„çŠ¶æ€ï¼Œé€šå¸¸ç”± getSceneForLayout (ViewGroup sceneRoot,int layoutId,Context context)èŽ·å– Scene å®žä¾‹ã€‚Transition æ¡†æž¶å¯ä»¥å®žçŽ°åœ¨ starting scene å’Œ ending scene ä¹‹é—´æ‰§è¡ŒåŠ¨ç”»ã€‚è€Œä¸”å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦åˆ›å»º starting sceneï¼Œå› ä¸º starting scene é€šå¸¸ç”±å½“å‰UIçŠ¶æ€å†³å®šï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»º ending sceneã€‚ 2ã€Transitionï¼šTransiton åˆ™æ˜¯ç”¨æ¥è®¾ç½®è¿‡æ¸¡åŠ¨ç”»æ•ˆæžœç”¨çš„ã€‚è€Œä¸”ç³»ç»Ÿç»™æä¾›äº†ä¸€äº›éžå¸¸æœ‰ç”¨çš„ Transtion åŠ¨ç”»æ•ˆæžœï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤º: ç³»ç»ŸTransition è§£é‡Š ChangeBounds æ£€æµ‹ View çš„ä½ç½®è¾¹ç•Œåˆ›å»ºç§»åŠ¨å’Œå¤§å°å˜åŒ–åŠ¨ç”»(å…³æ³¨å¸ƒå±€è¾¹ç•Œçš„å˜åŒ–ï¼Œä¸å…³æ³¨ scale å¼•èµ·çš„å¸ƒå±€è¾¹ç•Œå˜åŒ–) ChangeTransform æ£€æµ‹ View çš„ scale å’Œ rotation åˆ›å»ºç¼©æ”¾å’Œæ—‹è½¬åŠ¨ç”»(å…³æ³¨ scale å’Œ ratation çš„å˜åŒ–) ChangeClipBounds æ£€æµ‹ View çš„å‰ªåˆ‡åŒºåŸŸçš„ä½ç½®è¾¹ç•Œï¼Œå’Œ ChangeBounds ç±»ä¼¼ã€‚ä¸è¿‡ ChangeBounds é’ˆå¯¹çš„æ˜¯ view è€Œ ChangeClipBounds é’ˆå¯¹çš„æ˜¯ view çš„å‰ªåˆ‡åŒºåŸŸ rect çš„å˜åŒ–ï¼Œï¼ˆå…³æ³¨ setClipBounds(Rect rect) ä¸­ rect çš„å˜åŒ–ï¼‰ ChangeImageTransform æ£€æµ‹ ImageView çš„ ScaleTypeï¼Œå¹¶åˆ›å»ºç›¸åº”åŠ¨ç”»(å…³æ³¨çš„æ˜¯ ImageView çš„ scaleType) Fade æ ¹æ® View çš„ visibilityçŠ¶æ€çš„çš„ä¸åŒåˆ›å»ºæ·¡å…¥æ·¡åŠ¨ç”»,è°ƒæ•´çš„æ˜¯é€æ˜Žåº¦(å…³æ³¨çš„æ˜¯ View çš„ visibility çš„çŠ¶æ€) Slide æ ¹æ® View çš„ visibility çŠ¶æ€çš„çš„ä¸åŒåˆ›å»ºæ»‘åŠ¨åŠ¨ç”»(å…³æ³¨çš„æ˜¯ View çš„ visibility çš„çŠ¶æ€) Explode æ ¹æ® View çš„ visibility çŠ¶æ€çš„çš„ä¸åŒåˆ›å»ºåˆ†è§£åŠ¨ç”»(å…³æ³¨çš„æ˜¯ View çš„ visibility çš„çŠ¶æ€) AutoTransition é»˜è®¤åŠ¨ç”»ï¼ŒChangeBoundsã€Fade åŠ¨ç”»çš„é›†åˆ PathMotionTransition çš„è¾…åŠ©å·¥å…·ï¼Œä»¥ path çš„æ–¹å¼æŒ‡å®šè¿‡æ¸¡æ•ˆæžœï¼Œä¸¤ä¸ªå…·ä½“å®žçŽ°ç±» ArcMotion å’Œ PatternPathMotionï¼Œæ•ˆæžœç±»ä¼¼äºŽä¹‹å‰è®²è¿‡çš„è·¯å¾„åŠ¨ç”»ã€‚å‚è€ƒé“¾æŽ¥&gt;&gt; 3ã€TransitionManagerTransitionManager ç”¨äºŽå°† Scene å’Œ Transition è”ç³»èµ·æ¥ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ï¼Œå¦‚ï¼šgo(Scene scene, Transition transition)ï¼Œåˆ°æŒ‡å®šçš„åœºæ™¯æ‰€ä½¿ç”¨çš„è¿‡æ¸¡åŠ¨ç”»æ˜¯ä»€ä¹ˆï¼ŒbeginDelayedTransition(ViewGroup sceneRoot, Transition transition)ï¼Œåœ¨å½“å‰åœºæ™¯åˆ°ä¸‹ä¸€å¸§çš„è¿‡æ¸¡æ•ˆæžœæ˜¯ä»€ä¹ˆã€‚ æˆ‘ä»¬åœ¨ä½¿ç”¨åœºæ™¯è¿‡æ¸¡åŠ¨ç”»æ—¶ï¼Œæœ‰ä¸¤ç§å®žçŽ°æ–¹å¼ã€‚1ã€TransitionManager.goæ–¹å¼ã€‚123456...//å®šä¹‰å¼€å§‹åœºæ™¯ã€ç»“æŸåœºæ™¯ã€‚mSceneStart = Scene.getSceneForLayout(sceneRootView, R.layout.scene_start, context);mSceneEnd = Scene.getSceneForLayout(sceneRootView, R.layout.scene_end, context);//å¼€å§‹åœºæ™¯è¿‡æ¸¡åŠ¨ç”»ã€‚å…¶ä¸­&quot;transition&quot;å‚æ•°å¯ä»¥é€šè¿‡ä»£ç ç”Ÿæˆï¼Œå¦‚ï¼šnew AutoTransition()ã€‚ä¹Ÿå¯ä»¥æ˜¯å¼•ç”¨xmlæ–‡ä»¶ï¼Œå¦‚ï¼šTransitionInflater.from(this).inflateTransition(R.transition.xxx)ã€‚TransitionManager.go(mSceneEnd,transition); 2ã€beginDelayedTransitionæ–¹å¼ã€‚1234...TransitionManager.beginDelayedTransition(sceneRootView,transition);//ä¸‹é¢æ”¹å˜ sceneRootView ä¸­å­ View çš„å±žæ€§ï¼Œå¦‚ï¼šä½ç½®ï¼Œç¼©æ”¾æ¯”ä¾‹ç­‰ã€‚... beginDelayedTransition çš„æ–¹å¼æ˜¯ä¸æ˜¯ä¼šè®©ä½ è”æƒ³åˆ°ä¹‹å‰è®²è¿‡çš„ LayoutTransition åŠ¨ç”»å‘¢ï¼Ÿå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å¯ä»¥è¿™ä¹ˆç†è§£ï¼šLayoutTransitioné’ˆå¯¹çš„æ˜¯å„ä¸ªæŽ§ä»¶åœ¨é™å®šåœºæ™¯åˆ°è¾¾æ—¶çš„åŠ¨ç”»è¡¨çŽ°ã€‚è€ŒbeginDelayedTransitioné’ˆå¯¹çš„æ˜¯ä¸åŒçš„åœºæ™¯ä¹‹é—´çš„åˆ‡æ¢åŠ¨ç”»ã€‚å‰è€…å…³æ³¨çš„æ˜¯æŽ§ä»¶ï¼ˆå¾®è§‚ï¼‰ï¼ŒåŽè€…å…³æ³¨çš„æ˜¯åœºæ™¯ï¼ˆå®è§‚ï¼‰ã€‚é™¤äº†ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Transtion ä½¿ç”¨åŠ¨ç”»ä»¥å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥è‡ªå®šä¹‰ Transition åŠ¨ç”»ï¼Œå…·ä½“å¯å‚è€ƒå®˜æ–¹çš„è¿™ç¯‡æ–‡ç« ã€‚æˆ–è€…ç›´æŽ¥çœ‹å®˜æ–¹ç»™çš„DEMOã€‚ ä½¿ç”¨åœºæ™¯è¿‡æ¸¡åŠ¨ç”»éœ€è¦æ³¨æ„çš„ç‚¹ï¼š1ã€Android ç‰ˆæœ¬åœ¨ 4.0(API Level 14) åˆ° 4.4.2(API Level 19) ä½¿ç”¨ Android Support Libraryï¼Œä½†æ˜¯Activityè¿‡æ¸¡åŠ¨ç”»å’Œå…±äº«å…ƒç´ è¿‡æ¸¡åŠ¨ç”»è‡³å°‘è¦Android 5.0ç‰ˆæœ¬æ‰æ”¯æŒã€‚2ã€å¯¹äºŽ SurfaceView å¯èƒ½ä¸èµ·æ•ˆæžœï¼Œå› ä¸º SurfaceView çš„å®žä¾‹æ˜¯åœ¨éž UI çº¿ç¨‹æ›´æ–°çš„ï¼Œå› æ­¤ä¼šé€ æˆå’Œå…¶ä»–è§†å›¾åŠ¨ç”»ä¸åŒæ­¥ã€‚3ã€æŸäº›ç‰¹å®šçš„è½¬æ¢ç±»åž‹åœ¨åº”ç”¨åˆ° TextureView æ—¶å¯èƒ½ä¸ä¼šäº§ç”Ÿæ‰€éœ€çš„åŠ¨ç”»æ•ˆæžœã€‚4ã€ç»§æ‰¿è‡ª AdapterView çš„è§†å›¾å¦‚ï¼šListViewï¼Œä¸Žè¯¥æ¡†æž¶ä¸å…¼å®¹ã€‚RecycleView å…¼å®¹è¯¥æ¡†æž¶ï¼Œä¸è¿‡ç”±äºŽ RecycleView å¤ç”¨æœºåˆ¶çš„å­˜åœ¨ï¼Œè¿™é‡Œå°±ä¼šå­˜åœ¨ä¸¤ä¸ªåŠ¨ç”»ï¼šä¸€ä¸ªè¿›å…¥ã€ä¸€ä¸ªé€€å‡ºï¼Œæ‰€ä»¥å¦‚æžœä¸æ»¡è¶³éœ€æ±‚ï¼Œè¿˜æ˜¯è€å®žç”¨ ItemAnimator å§ã€‚ï¼ˆPSï¼šåŽé¢å†å†™ç¯‡æ–‡ç« è¯¦ç»†ä»‹ç» RecycleViewã€‚ï¼‰5ã€ä¸è¦å¯¹åŒ…å«æ–‡æœ¬çš„è§†å›¾çš„å¤§å°è¿›è¡ŒåŠ¨ç”»ã€‚(è¿™é‡Œæ‰€æŒ‡çš„å¤§å°æ”¹å˜ä¸»è¦åŒ…æ‹¬ç›´æŽ¥æ”¹å˜è§†å›¾çš„å®½é«˜æˆ–è€…é€šè¿‡ setTextSize æ”¹å˜è§†å›¾çš„å¤§å°ï¼Œä¸åŒ…æ‹¬ scale å¼•èµ·çš„è§†å›¾å¤§å°å˜åŒ–ã€‚)6ã€é»˜è®¤æƒ…å†µä¸‹ï¼ŒsceneRoot ä¸‹æ‰€æœ‰çš„ View éƒ½ä¼šæ‰§è¡Œ Transition åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ Transition.addTarget å’Œ removeTarget æ–¹æ³•é€‰æ‹©æ€§æ·»åŠ æˆ–ç§»é™¤æ‰§è¡ŒåŠ¨ç”»çš„ View ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒTransition çš„ removeTarget æ–¹æ³•å¿…é¡»åœ¨å·²ç»ä½¿ç”¨äº† addTargetçš„å‰æä¸‹æ‰æœ‰æ•ˆæžœã€‚åœ¨æœªä½¿ç”¨ addTarget çš„æƒ…å†µä¸‹ï¼Œå¦‚æžœè¦æŽ’é™¤æŸä¸ª View æ‰§è¡ŒåŠ¨ç”»æ•ˆæžœï¼Œå¯ä»¥ä½¿ç”¨ Transition çš„ excludeTarget æ›¿ä»£ removeTarget æ–¹æ³•ã€‚æœ¬èŠ‚å‚è€ƒèµ„æ–™:1ã€Animate layout changes using a transition2ã€Android Transitionï¼ˆä¸€ï¼‰3ã€Android Transitionï¼ˆAndroidè¿‡æ¸¡åŠ¨ç”»ï¼‰ Activityè¿‡æ¸¡åŠ¨ç”»ï¼šContent Transitionã€Shared Element Transitionå®˜æ–¹å‚è€ƒæ–‡æ¡£ï¼šStart an activity using an animationä¸­æ–‡å‚è€ƒæ–‡æ¡£ï¼šActivity è¿‡æ¸¡åŠ¨ç”» å¯¹äºŽå…±äº«å…ƒç´ çš„å»¶è¿ŸåŠ è½½å¦‚æžœå…±äº«å…ƒç´ åœ¨è¢«è°ƒç”¨çš„ Activity éœ€è¦é€šè¿‡ AsyncTask, Loader, æˆ–å…¶å®ƒç±»ä¼¼çš„æ•°æ®åŠ è½½æ–¹å¼å†³å®šå®ƒä»¬æœ€ç»ˆçš„è¡¨çŽ°ï¼Œæ•°æ®è¢«åˆ†å‘è¿”å›žåˆ°ä¸»çº¿ç¨‹ä¹‹å‰æ¡†æž¶æ˜¯å¯ä»¥å¼€å§‹è¿‡æ¸¡çš„ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼ŒActivity Transitions API æä¾›äº†ä¸€ä¸ªæ–¹æ³•æš‚æ—¶æŽ¨è¿Ÿè¿‡æ¸¡ç›´åˆ°æˆ‘ä»¬ç¡®åˆ‡åœ°çŸ¥é“å…±äº«å…ƒç´ å·²ç»è¢«é€‚å½“çš„æ¸²æŸ“å’Œæ”¾ç½®ã€‚ä¸ºäº†ä»Žå¼€å§‹æ—¶æš‚æ—¶é˜»æ­¢å…±äº«å…ƒç´ è¿‡æ¸¡ï¼Œè°ƒç”¨ postponeEnterTransition()ï¼ˆAPI &gt;= 21ï¼‰æˆ– supportPostponeEnterTransition()ï¼ˆAPI &lt; 21ï¼‰åœ¨ä½ è¢«è°ƒç”¨çš„ Activity ä¸­çš„ onCreate() æ–¹æ³•ä¸­ã€‚ç„¶åŽï¼Œå½“ä½ çŸ¥é“æ‰€æœ‰å…±äº«å…ƒç´ å·²ç»è¢«é€‚å½“çš„æ‘†æ”¾å’Œå¤§å°æ—¶ï¼Œè°ƒç”¨ startPostponedEnterTransition()ï¼ˆAPI &gt;= 21ï¼‰æˆ–supportStartPostponedEnterTransition()ï¼ˆAPI &lt; 21ï¼‰ æ¢å¤è¿‡æ¸¡ã€‚ä½ ä¼šæ‰¾åˆ°ä¸€ä¸ªå¸¸è§çš„å¤„ç†æ¨¡å¼æ˜¯åœ¨ OnPreDrawListener ä¸­å¼€å¯å»¶è¿Ÿè¿‡æ¸¡ï¼Œå®ƒå°†ä¼šåœ¨å…±äº«å…ƒç´ è¢«æ¸²æŸ“å’Œæ”¾ç½®åŽè°ƒç”¨ã€‚123456789101112// ... load remote image with Glide/Picasso heresupportPostponeEnterTransition();ivBackdrop.getViewTreeObserver().addOnPreDrawListener( new ViewTreeObserver.OnPreDrawListener() &#123; @Override public boolean onPreDraw() &#123; ivBackdrop.getViewTreeObserver().removeOnPreDrawListener(this); supportStartPostponedEnterTransition(); return true; &#125; &#125;); éœ€è¦è®°ä½çš„æ˜¯ï¼Œä¸€å®šè¦åœ¨å…±äº«å…ƒç´ è¢«æ¸²æŸ“å’Œæ”¾ç½®åŽè°ƒç”¨startPostponedEnterTransitionæ–¹æ³•ï¼Œå¦è€…è¢«è°ƒç”¨çš„ Activity ä¼šä¸€ç›´è¢«å µå¡žã€‚å‚è€ƒæ–‡ç« &gt;&gt; ViewOverlay è¡¥å……ViewOverlayå¯ä»¥å®žçŽ°è·¨ViewGroupçš„åŠ¨ç”»ï¼Œå‚è€ƒDemoä¸­çš„OverlayActivityç±»ï¼Œæœ‰å¦‚ä¸‹è¦çš„ï¼š1ã€åŠ¨ç”»å®ŒæˆåŽä¸€å®šè¦è®°å¾—åœ¨ç›®æ ‡ ViewGroup Overlay ç§»é™¤å½“å‰çš„Viewã€‚2ã€è¢«æ·»åŠ åˆ°ç›®æ ‡ ViewGroup Overlay ä¸­çš„ Viewï¼Œæ— æ³•å“åº”ç‚¹å‡»äº‹ä»¶ã€‚ Activity è¿‡æ¸¡åŠ¨ç”»éœ€è¦æ³¨æ„çš„ç‚¹ï¼š1ã€å¯¹äºŽéžå…±äº«å…ƒç´ è¿‡æ¸¡åŠ¨ç”»ï¼Œä¸€äº›å›½å†…æœºåž‹åœ¨å¼€å¯ windowAllowEnterTransitionOverlap åŽï¼Œå¦‚æžœ ExitTransition è®¾ç½®çš„è½¬åœºæ—¶é—´è¿‡é•¿ï¼Œåˆ™ä¼šå‡ºçŽ°è¿”å›žé¡µé¢æ—¶æ— æ³•æ¢å¤åŽŸæ¥çŠ¶æ€çš„é—®é¢˜ã€‚ä½¿ç”¨ç»éªŒï¼šå¦‚æžœéœ€è¦å¯åŠ¨é¡µä¹Ÿæœ‰åŠ¨ç”»æ•ˆæžœçš„è¯ï¼Œä¸èƒ½å°†åŠ¨ç”»æ—¶é•¿è®¾ç½®è¿‡é•¿ï¼ŒåŒæ—¶è¦ç»“åˆå¤šä¸ªæœºåž‹æµ‹è¯•ä¸€ä¸‹ã€‚å¦å¤–ï¼Œä¸è®¾ç½® ExitTransition åŠ¨ç”»æ•ˆæžœä¸ä¼šæœ‰é—®é¢˜ã€‚2ã€ä¸€äº›å›½å†…æœºåž‹è·³è½¬ç›®æ ‡é¡µæ—¶ï¼Œå³ä½¿ä½¿ç”¨äº† excludeTarget(android.R.id.statusBarBackground, true) æ–¹æ³•æŽ’é™¤çŠ¶æ€æ å‚ä¸ŽåŠ¨ç”»ï¼ŒçŠ¶æ€æ èƒŒæ™¯ä»ä¼šå‡ºçŽ°é¢œè‰²åˆ‡æ¢çŽ°è±¡ï¼ˆé¢œè‰²ä¸ºç›®æ ‡é¡µé¢èƒŒæ™¯è‰²ï¼‰ã€‚è§£å†³æ–¹æ¡ˆè¯·å‚è€ƒDemo&gt;&gt;3ã€ä½¿ç”¨ Fragment çš„ Transition å®žçŽ°ç•Œé¢è¿‡æ¸¡å¯å®Œç¾Žé¿å…å‡ºçŽ°ä¸Šè¿°é—®é¢˜ã€‚ å‚è€ƒé¡¹ç›®&gt;&gt;]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Scene Transition</tag>
        <tag>Content Transition</tag>
        <tag>Shared Element Transition</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆå…­ï¼‰ï¼šå¸ƒå±€åŠ¨ç”»]]></title>
    <url>%2F2019%2F07%2F21%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8006%EF%BC%9A%E5%B8%83%E5%B1%80%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚åœ¨ Android çš„åŠ¨ç”»ä½“ç³»ä¸­ï¼Œæœ‰è¡¥é—´åŠ¨ç”»ï¼Œå¸§åŠ¨ç”»å’Œå±žæ€§åŠ¨ç”»ï¼Œä½†æ˜¯è¿™äº›åŠ¨ç”»éƒ½æ˜¯é’ˆå¯¹å•ä¸ªå¯¹è±¡çš„ï¼Œå¦‚æžœæƒ³å¯¹ ViewGroup ä½œåŠ¨ç”»ï¼Œå°±è¦ç”¨åˆ°å¸ƒå±€åŠ¨ç”»äº†ã€‚å¸ƒå±€åŠ¨ç”»ä¸€å…±æœ‰ä¸¤ç§ï¼šLayoutAnimation å’Œ LayoutTransitionï¼Œæœ¬æ–‡å°†é€ä¸€ä»‹ç»ä»–ä»¬çš„ç”¨æ³•å’ŒåŒºåˆ«ã€‚ LayoutAnimationLayoutAnimation å¸ƒå±€åŠ¨ç”»å±žäºŽè¡¥é—´åŠ¨ç”»çš„ä¸€ç§ï¼Œåˆ©ç”¨å®ƒå¯ä»¥å¿«é€Ÿå®žçŽ°å¯¹ ViewGroup ä¸­å­ view çš„åŠ¨ç”»ã€‚ä¸è¿‡ï¼Œå®ƒçš„ç¼ºé™·æ˜¯åªèƒ½å¤Ÿåœ¨ ViewGroup åˆå§‹åŒ–æ—¶å¯¹å…¶å­ view äº§ç”ŸåŠ¨ç”»æ•ˆæžœï¼Œä¹‹åŽå†å¢žåŠ å­ view æ—¶æ²¡æœ‰æ•ˆæžœã€‚LayoutAnimation åŠ¨ç”»å¯ä»¥ç›´æŽ¥åœ¨ xml ä¸­å®šä¹‰ï¼š1ã€é¦–å…ˆå®šä¹‰å•ä¸ª View çš„è¡¥é—´åŠ¨ç”»12345678910&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:duration=&quot;500&quot;&gt; &lt;translate android:fromXDelta=&quot;-50%p&quot; android:toXDelta=&quot;0&quot;/&gt; &lt;alpha android:fromAlpha=&quot;0.0&quot; android:toAlpha=&quot;1.0&quot;/&gt;&lt;/set&gt; 2ã€å®šä¹‰ layoutAnimation1234567891011&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;layoutAnimation xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:animation=&quot;@anim/slide_in_from_left&quot; android:animationOrder=&quot;random&quot; android:delay=&quot;1&quot;/&gt;&lt;!--1ã€delay : ViewGroup ä¸­å•ä¸ªItemåŠ¨ç”»çš„å¼€å§‹å»¶æ—¶ï¼Œå–å€¼æ˜¯android:animation æ‰€æŒ‡å®šåŠ¨ç”»æ—¶é•¿çš„å€æ•°ï¼Œå¯ä»¥æ˜¯floatï¼Œä¹Ÿå¯ä»¥æ˜¯ç™¾åˆ†æ•°ï¼Œé»˜è®¤0.5æ¯”å¦‚slide_in_from_leftä¸­å®šä¹‰çš„åŠ¨ç”»æ—¶é•¿æ˜¯500msï¼Œè¿™é‡Œdelay=1ï¼Œé‚£ä¹ˆåœ¨ä¸Šä¸€ä¸ªåŠ¨ç”»æ‰§è¡Œä¹‹åŽå»¶æ—¶500msæ‰§è¡Œä¸‹ä¸€ä¸ªitemçš„åŠ¨ç”»2ã€animationOrder : åŠ¨ç”»å¼€å§‹é¡ºåºï¼Œnormal(æ­£åº)ã€reverse(å€’åº)ã€random(éšæœº)3ã€animation : æŒ‡å®šåŠ¨ç”»èµ„æºanimationï¼Œæ³¨æ„ä¸èƒ½ä½¿ç”¨animator--&gt; å¯ä»¥é€šè¿‡ä¸‹é¢ä¸¤ç§æ–¹å¼åŠ è½½1ã€ç›´æŽ¥åœ¨ ViewGroup çš„ layout xml æ–‡ä»¶ä¸­è®¾ç½®ï¼š1android:layoutAnimation=&quot;@anim/list_item_slide_layout_animation&quot; 2ã€ä½¿ç”¨ä»£ç è®¾ç½®ï¼š123456Animation animation = AnimationUtils.loadAnimation(mActivityï¼ŒR.anim.slide_in_from_left);LayoutAnimationController animationController = new LayoutAnimationController(animationï¼Œ 1f);animationController.setOrder(LayoutAnimationController.ORDER_NORMAL);mList.setLayoutAnimation(animationController);mList.startLayoutAnimation(); åŒæ—¶ï¼Œç³»ç»Ÿä¹Ÿæä¾›äº† gridLayoutAnimation ç”¨äºŽç»™ Gridview è®¾ç½®å¸ƒå±€åŠ¨ç”»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¸ƒå±€åŠ¨ç”»ï¼Œåœ¨åˆ›å»ºViewGroupçš„æ—¶å€™ç”Ÿæ•ˆï¼ŒåŽç»­æ·»åŠ çš„å­Viewæ˜¯æ²¡æœ‰åŠ¨ç”»æ•ˆæžœçš„ã€‚ LayoutTransitionLayoutTransition æ˜¯API Level 11 æ‰å‡ºçŽ°çš„ã€‚LayoutTransition çš„åŠ¨ç”»æ•ˆæžœï¼Œåªæœ‰å½“ ViewGroup ä¸­æœ‰ View æ·»åŠ ã€åˆ é™¤ã€éšè—ã€æ˜¾ç¤ºçš„æ—¶å€™æ‰ä¼šä½“çŽ°å‡ºæ¥ï¼Œåˆå§‹åŒ–æ—¶æ²¡æœ‰æ•ˆæžœã€‚LayoutTransition ç±»ä¸­ä¸»è¦æœ‰äº”ç§å®¹å™¨è½¬æ¢åŠ¨ç”»ç±»åž‹ï¼Œå…·ä½“å¦‚ä¸‹ï¼š LayoutTransition.APPEARINGï¼šå­ View æ·»åŠ åˆ°å®¹å™¨ä¸­æ—¶çš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæžœã€‚LayoutTransition.CHANGE_APPEARINGï¼šå­ View æ·»åŠ åˆ°å®¹å™¨ä¸­æ—¶ï¼Œå…¶ä»–å­ View ä½ç½®æ”¹å˜çš„è¿‡æ¸¡åŠ¨ç”»ã€‚LayoutTransition.DISAPPEARINGï¼šå­ View ä»Žå®¹å™¨ä¸­ç§»é™¤æ—¶çš„è¿‡æ¸¡åŠ¨ç”»æ•ˆæžœã€‚LayoutTransition.CHANGE_DISAPPEARINGï¼šå­ View ä»Žå®¹å™¨ä¸­ç§»é™¤æ—¶ï¼Œå…¶å®ƒå­ View ä½ç½®æ”¹å˜çš„è¿‡æ¸¡åŠ¨ç”»ã€‚LayoutTransition.CHANGINGï¼šå­ View åœ¨å®¹å™¨ä¸­ä½ç½®æ”¹å˜æ—¶çš„è¿‡æ¸¡åŠ¨ç”»ï¼Œä¸æ¶‰åŠåˆ é™¤æˆ–è€…æ·»åŠ æ“ä½œã€‚(æ²¡æœ‰è¯•å‡ºæ•ˆæžœï¼Œå“ªä½å¤§ç¥žçŸ¥é“ç”¨æ³•çš„è¯ï¼Œæ¬¢è¿Žåˆ°githubç•™ä¸ªè¨€ï¼Œè°¢è°¢ã€‚) LayoutTransition ä¹Ÿæœ‰ä¸¤ç§æ–¹å¼æ·»åŠ ã€‚1ã€åœ¨xmlä¸­ç›´æŽ¥æ·»åŠ ã€‚12// åªèƒ½ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ LayoutTransition åŠ¨ç”»android:animateLayoutChanges=&quot;true&quot; 2ã€åœ¨ä»£ç ä¸­ä½¿ç”¨ã€‚ä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ LayoutTransition åŠ¨ç”»12LayoutTransition mTransitioner = new LayoutTransition();mViewGroup.setLayoutTransition(mTransitioner); æ³¨æ„ï¼šä½¿ç”¨ç³»ç»ŸåŠ¨ç”»æ—¶ï¼Œä¼šå‡ºçŽ°åŠ¨ç”»æœªè¾¾åˆ°é¢„æœŸçš„çŽ°è±¡ã€‚æ­¤æ—¶åº”è¯¥ä»Žè¿™äº›æ–¹é¢è€ƒè™‘ï¼ša. ç›´æŽ¥å­ View æ˜¯ä¸€ä¸ªå®¹å™¨ï¼Œä¸”å®¹å™¨ä¸­çš„å­ View æ˜¯å¦è¿‡å¤šï¼Ÿb. ç›´æŽ¥å­ View ä¹‹é—´çš„ä¾èµ–å…³ç³»æ˜¯å¦èƒ½è¾¾åˆ°åŠ¨ç”»é¢„æœŸï¼Ÿc. è¿ç”¨åœ¨ SurfaceView ä¸Šçš„åŠ¨ç”»æ•ˆæžœä¼šå¼‚å¸¸ã€‚ ä½¿ç”¨è‡ªå®šä¹‰çš„ LayoutTransition åŠ¨ç”»12345LayoutTransition layoutTransition = new LayoutTransition();viewGroup.setLayoutTransition(layoutTransition);...layoutTransition.setAnimator(transitionTypeï¼Œ AnimatorInflater.loadAnimator(thisï¼Œ R.animator.xxx));&lt;!--transitionTypeä»£è¡¨äº”ç§å®¹å™¨è½¬æ¢åŠ¨ç”»ç±»åž‹ï¼› R.animator.xxxä»£è¡¨å±žæ€§åŠ¨ç”»èµ„æºã€‚--&gt; åŒæ—¶ï¼Œå¯ä»¥ç»™ LayoutTransition è®¾ç½®ç›‘å¬å™¨1mTransitioner.addTransitionListener(new LayoutTransition.TransitionListener()&#123;//...&#125; æ€»ç»“ å¸ƒå±€åŠ¨ç”»ç±» ç±»åž‹ ä¼˜ç¼ºç‚¹ å‘å¸ƒç‰ˆæœ¬ LayoutAnimation è¡¥é—´åŠ¨ç”» ä¼˜ç‚¹ï¼šå¿«é€Ÿå®žçŽ°å¯¹ ViewGroup ä¸­å­ View çš„åŠ¨ç”»ã€‚å¯¹äºŽ RecyclerView è¿™äº› list ç±»åž‹çš„ ViewGroup åŒæ ·é€‚ç”¨ã€‚ç¼ºç‚¹ï¼šåªèƒ½å¤Ÿåœ¨ ViewGroup åˆå§‹åŒ–æ—¶å¯¹å…¶å­ View äº§ç”ŸåŠ¨ç”»æ•ˆæžœã€‚ API Level 1 LayoutTransition å±žæ€§åŠ¨ç”» ä¼˜ç‚¹ï¼šViewGroup ä¸­åªè¦æœ‰å­ View æ·»åŠ ã€åˆ é™¤ã€éšè—ã€æ˜¾ç¤ºï¼Œéƒ½èƒ½å¯¹å­ View çš„äº§ç”ŸåŠ¨ç”»ã€‚ã€‚ç¼ºç‚¹ï¼š1ã€å¯¹äºŽ RecyclerView ä¸é€‚ç”¨ï¼Œæˆ‘åœ¨å®žéªŒæ»‘åŠ¨çš„æ—¶å€™æ˜¯ç›´æŽ¥æŠ¥é”™äº†ï¼Œæ‰€ä»¥æˆ‘å»ºè®®å¦‚æžœæ˜¯ RecyclerView çš„è¯ï¼Œè¿˜æ˜¯ç”¨å®ƒè‡ªå¸¦çš„ ItemAnimatorã€‚2ã€å¯¹äºŽ ListView é€‚ç”¨ï¼Œå‚è€ƒè¿™ä¸ªé“¾æŽ¥ï¼Œä¸è¿‡æ•ˆæžœæœ‰ç‚¹ä¹±ï¼ŒåŒæ—¶è¿˜ä½¿å¾—é—®é¢˜å¤æ‚åŒ–äº†ï¼Œæˆ‘åœ¨stackoverflowä¸Šçœ‹åˆ°äº†è¿™ä¸ªé—®é¢˜çš„å›žç­”ã€‚3ã€åˆå§‹åŒ– ViewGroup æ—¶æ²¡æœ‰æ•ˆæžœã€‚ API Level 11 å‚è€ƒèµ„æ–™1.Android åŠ¨ç”»(ä¸€) LayoutAnimation ä¸Ž LayoutTransition2.Android animation 30å¤©ä¸Šæ‰‹ â€” Day13 LayoutTransition]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>LayoutAnimation</tag>
        <tag>LayoutTransition</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆäº”ï¼‰ï¼šæ’å€¼å™¨å’Œä¼°å€¼å™¨è¡¥å……ã€FlingåŠ¨ç”»ã€ç‰©ç†åŠ¨ç”»]]></title>
    <url>%2F2019%2F03%2F03%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8005%EF%BC%9APath%E7%B1%BB%E5%9E%8B%E6%8F%92%E5%80%BC%E5%99%A8%E3%80%81%E8%B7%AF%E5%BE%84%E5%8A%A8%E7%94%BB%E3%80%81Fling%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚æœ¬ç¯‡è®²çš„æ˜¯ Android è§†å›¾ä½ç½®å˜åŒ–ç›¸å…³çš„çŸ¥è¯†ï¼Œå…¶ä¸­ï¼Œç¬¬ä¸€éƒ¨åˆ†æ˜¯å¯¹ä¹‹å‰æ–‡ç« è§†å›¾åŠ¨ç”»ã€å±žæ€§åŠ¨ç”»ä¸­æ’å€¼å™¨ã€ä¼°å€¼å™¨çš„è¡¥å……ã€‚æœ¬ç« çš„å†…å®¹ä¸»è¦å‚è€ƒäº†å®˜æ–¹çš„ä¸‹é¢ä¸‰ç¯‡æ–‡ç« ï¼š1ã€Move a View with Animation2ã€Move views using a fling animation3ã€Animate movement using spring physicså‚è€ƒçš„ä¸­æ–‡æ–‡ç« åœ¨æ–‡æœ«æœ‰ç»™å‡ºã€‚ Pathç±»åž‹çš„æ’å€¼å™¨Path ç±»åž‹çš„æ’å€¼å™¨æ˜¯ä¸€ç§æ–°çš„æ’å€¼å™¨ï¼ŒAndroid ä»Ž5.0å¼€å§‹æ”¯æŒã€‚å¯ä»¥ç”¨ä»£ç ã€XML ä¸¤ç§æ–¹å¼å®žçŽ°ï¼Œè¿™é‡Œæˆ‘ä»¬åªè®¨è®ºä»£ç å®žçŽ°çš„æ–¹å¼ï¼š123456if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;Path path = new Path();path.lineTo(1f, 1f);PathInterpolator pathInterpolator = new PathInterpolator(path);â€¦â€¦â€¦â€¦&#125; ä»Žä»¥ä¸Šä»£ç å¯ä»¥çœ‹å‡ºï¼ŒPath è¢«é™åˆ¶åœ¨ä¸€ä¸ª1*1çš„æ­£æ–¹å½¢ä¸­ï¼Œxã€yåæ ‡çš„å–å€¼èŒƒå›´éƒ½ä¸º[0,1]ï¼Œå¹¶ä¸” Path å¿…é¡»ä»Ž(0,0)åæ ‡å¼€å§‹ï¼Œ(1,1)åæ ‡ç»“æŸã€‚xåæ ‡ä»£è¡¨æ—¶é—´è¿›åº¦ï¼š0-100%ï¼Œyåæ ‡ä»£è¡¨å½“å‰æ—¶é—´ç‚¹å¯¹åº”çš„åŠ¨ç”»å®Œæˆåº¦ï¼š0-100%ã€‚ä¸€æ—¦pathInterpolatoråˆ›å»ºå®Œæˆï¼Œå°±å¯ä»¥é€šè¿‡Animator.setInterpolator()æ–¹æ³•ä½¿ç”¨å®ƒäº†ã€‚123ObjectAnimator animation = ObjectAnimator.ofFloat(view, &quot;translationX&quot;, 100f);animation.setInterpolator(pathInterpolator);animation.start(); ä¼°å€¼å™¨å®žçŽ°è·¯å¾„åŠ¨ç”»ObjectAnimatorä»Ž Android 5.0 å¼€å§‹æä¾›äº†ä¸€ç±»æ–°çš„æž„é€ æ–¹æ³•ç”¨äºŽå®žçŽ°æ²¿è‡ªå®šä¹‰è·¯å¾„ç§»åŠ¨çš„åŠ¨ç”»ã€‚1234567891011121314151617if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123;Path path = new Path();path.moveTo(view.getX(), view.getY());path.cubicTo(view.getX(), view.getY(),view.getX() + 300, view.getY() + 200,view.getX() - 400, view.getY() + 500);//ä¸‹é¢ä¸¤ç§æ–¹æ³•ä¸å…è®¸//path.addCircle(view.getX(), view.getY(),100,Path.Direction.CCW);//path.arcTo(view.getX()+100, view.getY()+100, view.getX() + 500, view.getY() + 500, 270f, -180f, true);ObjectAnimator objectAnimator =ObjectAnimator.ofFloat(ivBalPathAnimator, View.X, View.Y, path);objectAnimator.setDuration(1200);objectAnimator.setRepeatCount(ValueAnimator.INFINITE);objectAnimator.setRepeatMode(ValueAnimator.REVERSE);objectAnimator.setInterpolator(new LinearInterpolator());objectAnimator.start();&#125; FlingåŠ¨ç”»Fling åŠ¨ç”»ä½¿ç”¨ç‰©ç†å­¦ä¸­æ‘©æ“¦åŠ›çš„æ¦‚å¿µï¼Œä½¿å¾— view çš„é€Ÿåº¦é€æ¸è¢«é™ä½Žï¼Œä»Žè€Œå®žçŽ°äº†çŽ°å®žä¸­çš„é˜»åŠ›è¿åŠ¨ã€‚Android 4.4ç‰ˆæœ¬å¼€å§‹æ”¯æŒè¯¥åŠ¨ç”»ã€‚ 1ã€æ·»åŠ æ”¯æŒåº“ 123dependencies &#123;implementation &apos;com.android.support:support-dynamic-animation:28.0.0&apos;&#125; 2ã€åˆ›å»ºflingåŠ¨ç”» FlingAnimation ç±»å¯ä»¥å¸®åŠ©ä½ åˆ›å»ºflingåŠ¨ç”»ï¼Œåªè¦åœ¨åˆ›å»º FlingAnimation å®žä¾‹æ—¶ä¼ å…¥æ“ä½œçš„ View å¯¹è±¡ä»¥åŠæ“ä½œå¯¹è±¡çš„å±žæ€§å³å¯ã€‚1FlingAnimation fling = new FlingAnimation(view, DynamicAnimation.SCROLL_X); 3ã€è®¾ç½®åˆå§‹é€Ÿåº¦ ä¸ºäº†è®©ç‰©ä½“ç§»åŠ¨ï¼ˆå¹¶éžåªæœ‰ç§»åŠ¨ï¼‰ï¼Œæˆ‘ä»¬å¿…é¡»ç»™ç‰©ä½“ä¸€ä¸ªåˆé€Ÿåº¦ã€‚é»˜è®¤çš„åˆé€Ÿåº¦æ˜¯0ï¼Œæ‰€ä»¥æˆ‘ä»¬å¿…é¡»å®šä¹‰ä¸€ä¸ªå¤§äºŽ0çš„åˆé€Ÿåº¦ä»¥ä¿è¯ç‰©ä½“èƒ½å¤Ÿç§»åŠ¨ã€‚è®¾ç½®åˆé€Ÿåº¦çš„æ–¹æ³•æ˜¯setStartVelocity()ã€‚æ‚¨å¯ä»¥ä½¿ç”¨å›ºå®šå€¼ä½œä¸ºèµ·å§‹é€Ÿåº¦ï¼Œä¹Ÿå¯ä»¥å°†å…¶åŸºäºŽè§¦æ‘¸æ‰‹åŠ¿çš„é€Ÿåº¦é€šè¿‡GestureDetetor.OnGestureListener èŽ·å–ã€‚å¦‚æžœæ‚¨é€‰æ‹©æä¾›å›ºå®šå€¼ï¼Œæ‚¨åº”è¯¥ä»¥æ¯ç§’dpçš„å€¼å®šä¹‰å€¼ï¼Œç„¶åŽå°†å…¶è½¬æ¢ä¸ºæ¯ç§’åƒç´ æ•°ã€‚ä»¥æ¯ç§’dpå®šä¹‰å€¼çš„æ–¹å¼å…è®¸é€Ÿåº¦ç‹¬ç«‹äºŽè®¾å¤‡çš„å¯†åº¦å’Œå½¢çŠ¶å› å­ã€‚æœ‰å…³å°†èµ·å§‹é€Ÿåº¦è½¬æ¢ä¸ºæ¯ç§’åƒç´ æ•°çš„æ›´å¤šä¿¡æ¯ï¼Œå°†åœ¨ä¸‹ä¸€ç¯‡æ–‡ç«  ã€ŠSpring Animationã€‹ä¸­çš„â€œ æ¯ç§’è½¬æ¢ä¸ºæ¯ç§’åƒç´ æ•°â€éƒ¨åˆ†è®²è§£ ã€‚ 4ã€è®¾ç½®åŠ¨ç”»çš„å–å€¼èŒƒå›´ ä½ å¯ä»¥é€šè¿‡setMinValue()å’ŒsetMaxValue()è®¾ç½®å±žæ€§å€¼çš„å˜åŒ–èŒƒå›´ï¼Œè¿™ä¸ªå¯¹äºŽæœ‰æ˜Žç¡®å˜åŒ–èŒƒå›´çš„å±žæ€§æ˜¾å¾—ååˆ†é‡è¦ï¼Œä¾‹å¦‚é€æ˜Žåº¦ï¼ˆ0-1ï¼‰ã€‚æ³¨æ„ï¼Œå½“flingæ—¶çš„å±žæ€§å€¼åˆ°è¾¾è®¾å®šçš„æœ€å¤§å€¼æˆ–è€…æœ€å°å€¼æ—¶ï¼ŒåŠ¨ç”»ä¼šç«‹åˆ»ç»“æŸã€‚ 5ã€è®¾ç½®é˜»åŠ›å› å­ ä½ å¯ä»¥é€šè¿‡setFriction()æ”¹å˜åŠ¨ç”»çš„é˜»åŠ›å› å­ï¼Œä»–å®šä¹‰äº†é€Ÿåº¦ä¸‹é™çš„é€Ÿåº¦ã€‚é˜»åŠ›å› å­çš„é»˜è®¤å€¼æ˜¯1ã€‚ä¸‹é¢çš„ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªæ¨ªå‘æ»‘åŠ¨çš„flingåŠ¨ç”»ï¼Œæ»‘åŠ¨è¾¹ç•Œè¢«è®¾ç½®ä¸º0å’ŒmaxScrollï¼Œæ‘©æ“¦åŠ›è®¾ç½®ä¸º1.1ã€‚123456FlingAnimation fling = new FlingAnimation(view, DynamicAnimation.SCROLL_X);fling.setStartVelocity(-velocityX).setMinValue(0).setMaxValue(maxScroll).setFriction(1.1f).start(); æ³¨æ„ï¼Œä¸Šé¢çš„æ–¹æ³•ä»…ä»…é€‚ç”¨äºŽå•ä¸ªå±žæ€§çš„ fling å˜åŒ–ã€‚å¦‚æžœæœ‰å¤šä¸ªå±žæ€§åŒæ—¶éœ€è¦flingå˜åŒ–å‘¢ï¼Ÿæœ‰çš„æ–‡ç« å€’æ˜¯å»ºè®®ç”¨FloatPropertyCompatå®žçŽ°ã€‚å¯æ˜¯FloatPropertyCompatæœ‰å®ƒçš„å±€é™æ€§ï¼Œæ­£å¦‚è¿™ç¯‡æ–‡ç« çš„ç¬¬äº”éƒ¨åˆ†æ‰€è¯´ï¼šè¦åœ¨ç¡®ä¿æ‰€æœ‰å±žæ€§çš„å€¼ä¸æ˜¯å®Œå…¨ç›¸äº’ç‹¬ç«‹çš„æƒ…å†µä¸‹ï¼Œè¯¥æ–¹æ³•æ‰é€‚ç”¨ã€‚å¦åˆ™ï¼Œæˆ‘ä»¬åªèƒ½é’ˆå¯¹æ¯ä¸ªå±žæ€§éƒ½å»ºç«‹ä¸€ä¸ª FlingAnimationã€‚ 6ã€è®¾ç½®æœ€å°å¯è§å˜åŒ– å½“æ‚¨åœ¨ä¸ºä¸ä»¥åƒç´ ä¸ºå•ä½å®šä¹‰çš„è‡ªå®šä¹‰å±žæ€§è®¾ç½®åŠ¨ç”»æ—¶ï¼Œåº”è®¾ç½®ç”¨æˆ·å¯è§çš„åŠ¨ç”»å€¼çš„æœ€å°æ›´æ”¹ï¼Œå®ƒä½œä¸ºå®šä¹‰åŠ¨ç”»ç»“æŸçš„æœ€å°å€¼ã€‚å½“æ“ä½œ DynamicAnimation.ViewProperty åŠ¨ç”»æ—¶ä¸éœ€è¦è°ƒç”¨æ­¤æ–¹æ³•ï¼Œå› ä¸ºæ­¤æ—¶çš„æœ€å°å¯è§å˜åŒ–å¯ä»¥è‡ªåŠ¨èŽ·å–ã€‚ä¾‹å¦‚ï¼š1ã€é»˜è®¤æœ€å°å¯è§çš„å˜åŒ–å€¼æ˜¯1ä¸ªåƒç´ ï¼Œå¦‚ï¼šTRANSLATION_Xï¼ŒTRANSLATION_Yï¼Œ TRANSLATION_Zï¼ŒSCROLL_Xï¼Œå’Œ SCROLL_Yã€‚2ã€å¯¹äºŽä½¿ç”¨æ—‹è½¬åŠ¨ç”»ï¼Œå¦‚ROTATIONï¼Œ ROTATION_Xï¼Œå’ŒROTATION_Yï¼Œæœ€å°å¯è§å˜åŒ–æ˜¯ MIN_VISIBLE_CHANGE_ROTATION_DEGREESï¼Œæˆ–1/10åƒç´ ã€‚3ã€å¯¹äºŽä½¿ç”¨ä¸é€æ˜Žåº¦çš„åŠ¨ç”»ï¼Œæœ€å°å¯è§å˜åŒ–ä¸º MIN_VISIBLE_CHANGE_ALPHA æˆ–è€…1/256ã€‚è¦è®¾ç½®åŠ¨ç”»çš„æœ€å°å¯è§å˜åŒ–ï¼Œè¯·è°ƒç”¨setMinimumVisibleChange()æ–¹æ³•ï¼Œå¹¶ä¼ é€’æœ€å°å¯è§å¸¸é‡æˆ–æ‚¨éœ€è¦ä¸ºè‡ªå®šä¹‰å±žæ€§è®¡ç®—çš„å€¼ã€‚æœ‰å…³è®¡ç®—æ­¤å€¼çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚é˜…æœ¬éƒ¨åˆ†æœ«çš„â€œè®¡ç®—æœ€å°å¯è§å˜åŒ–å€¼â€éƒ¨åˆ†ã€‚1anim.setMinimumVisibleChange(DynamicAnimation.MIN_VISIBLE_CHANGE_SCALE); æ³¨æ„ï¼šåªæœ‰åœ¨ä¸ºä¸ä»¥åƒç´ å®šä¹‰çš„è‡ªå®šä¹‰å±žæ€§åˆ¶ä½œåŠ¨ç”»æ—¶ï¼Œæ‰éœ€è¦è®¾ç½®æœ€å°å¯è§å˜åŒ–å€¼ã€‚ è®¡ç®—æœ€å°å¯è§å˜åŒ–å€¼ ï¼šæœ€å°å¯è§å˜åŒ–å€¼=è‡ªå®šä¹‰å±žæ€§å€¼çš„èŒƒå›´/ä»¥åƒç´ ä¸ºå•ä½çš„åŠ¨ç”»æ‰§è¡ŒèŒƒå›´ã€‚ä¾‹å¦‚ï¼Œè¦è¿›è¡ŒåŠ¨ç”»åˆ¶ä½œçš„è‡ªå®šä¹‰éžåƒç´ ä¸ºå•ä½çš„å±žæ€§å˜åŒ–èŒƒå›´æ˜¯ä»Ž0åˆ°100ï¼ŒåŒæ—¶å¦‚æžœæ­¤è¿‡ç¨‹å¯¹åº”äºŽ200åƒç´ çš„åŠ¨ç”»æ›´æ”¹ã€‚æ ¹æ®å…¬å¼ï¼Œæœ€å°å¯è§å˜åŒ–å€¼æ˜¯100/200ç­‰äºŽ0.5åƒç´ ã€‚ SpringåŠ¨ç”»è¿™ä¸€éƒ¨åˆ†çš„å†…å®¹åœ¨å®˜ç½‘è®²å¾—ä¹Ÿæ˜¯å¾ˆæ˜Žç™½äº†ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå®˜ç½‘ç»“å°¾æœ€åŽçš„â€œCancel animationâ€éƒ¨åˆ†æåˆ°çš„â€˜cancel()â€™å’Œâ€˜skipToEnd()â€™ä½¿ç”¨æ³¨æ„äº‹é¡¹ï¼š cancel()ï¼šç«‹å³åœæ­¢åŠ¨ç”»skipToEnd()ï¼šæ¢å¤åˆ°æœ€ç»ˆä½ç½®å¹¶åœæ­¢åŠ¨ç”»ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æ— é˜»å°¼çš„æƒ…å†µä¸‹ï¼Œä¸èƒ½è°ƒç”¨è¯¥æ–¹æ³•ï¼ˆå³ï¼šDampingRatio==0æ—¶ï¼‰ã€‚ä¸ºäº†å®‰å…¨ï¼Œå¯ä»¥å…ˆè°ƒç”¨ canSkipToEnd() è¿›è¡Œåˆ¤æ–­ï¼Œæœ‰é˜»å°¼çš„æƒ…å†µä¸‹è¿”å›ž trueï¼Œå¦åˆ™è¿”å›ž falseã€‚ä¸€èˆ¬æ¥è¯´ï¼ŒskipToEnd() ä¼šæœ‰è·³è·ƒçš„æ•ˆæžœã€‚ ä»¥ä¸‹æ˜¯Demoä¸­å®žçŽ°çš„æ•ˆæžœï¼š å‚è€ƒèµ„æ–™1ã€ä¸­æ–‡ç¿»è¯‘ï¼šä½¿ç”¨ fling åŠ¨ç”»ç§»åŠ¨è§†å›¾2ã€SpringAnimation è¯¦è§£]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>PathInterpolator</tag>
        <tag>è·¯å¾„åŠ¨ç”»</tag>
        <tag>FlingAnimation</tag>
        <tag>SpringAnimation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆå››ï¼‰ï¼šæ·¡å…¥æ·¡å‡ºã€ç¿»ç‰Œã€æ­éœ²åŠ¨ç”»]]></title>
    <url>%2F2019%2F02%2F22%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8004%EF%BC%9A%E6%B7%A1%E5%85%A5%E3%80%81%E7%BF%BB%E7%89%8C%E3%80%81%E6%8F%AD%E9%9C%B2%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚ä»¥ä¸‹å†…å®¹æ˜¯å¯¹å®˜æ–¹æ–‡æ¡£çš„ç¿»è¯‘ã€‚å½“ä½ åœ¨ä½¿ç”¨APPæ—¶ï¼Œå¦‚æžœç«‹å³ä»Žæ—§çš„å†…å®¹åˆ‡æ¢åˆ°æ–°å†…å®¹ï¼Œåˆ™å¾ˆå®¹æ˜“è®©ç”¨æˆ·æ„Ÿåˆ°ä¸é€‚ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦è½¬åœºåŠ¨ç”»æ¥å¹³æ»‘åœ°è¿‡æ¸¡è¿™ç§æ–°æ—§å†…å®¹çš„åˆ‡æ¢è¿‡ç¨‹ã€‚æœ‰ä¸‰ç§å¸¸ç”¨çš„åŠ¨ç”»é€‚åˆè¯¥åœºæ™¯ï¼Œä»–ä»¬åˆ†åˆ«æ˜¯æ·¡å…¥æ·¡å‡ºåŠ¨ç”»ã€ç¿»ç‰ŒåŠ¨ç”»ã€æ­éœ²åŠ¨ç”»ã€‚ æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ·¡å…¥æ·¡å‡ºåŠ¨ç”»é¡¾åæ€ä¹‰æ˜¯åœ¨ä¸€ä¸ª View æˆ–è€… ViewGroup æ¶ˆå¤±æ—¶ï¼Œå¦å¤–ä¸€ä¸ªViewåŒæ­¥æ˜¾ç¤ºçš„åŠ¨ç”»ã€‚æœ¬èŠ‚é‡‡ç”¨ViewPropertyAnimatorå®žçŽ°æ·¡å…¥æ·¡å‡ºåŠ¨ç”»ï¼Œä»ŽAndroid 3.1 ï¼ˆAPI level 12ï¼‰å¼€å§‹æ”¯æŒ ViewPropertyAnimatorã€‚è¿™æ˜¯ä¸€ä¸ªä½¿ç”¨æ·¡å…¥æ·¡å‡ºåŠ¨ç”»çš„ä¾‹å­ã€‚ åˆ›å»ºviewsé¦–å…ˆï¼Œä½ éœ€è¦åˆ›å»ºä¸¤ä¸ªä½ éœ€è¦ä½¿ç”¨æ·¡å…¥æ·¡å‡ºåŠ¨ç”»çš„ Viewã€‚ä¸‹é¢åˆ›å»ºäº†ä¸€ä¸ªè¿›åº¦æŒ‡ç¤º View å’Œä¸€ä¸ªå¯æ»‘åŠ¨çš„æ–‡æœ¬ Viewï¼š123456789101112131415161718192021222324252627&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;ScrollView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:id=&quot;@+id/content&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView style=&quot;?android:textAppearanceMedium&quot; android:lineSpacingMultiplier=&quot;1.2&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;@string/lorem_ipsum&quot; android:padding=&quot;16dp&quot; /&gt; &lt;/ScrollView&gt; &lt;ProgressBar android:id=&quot;@+id/loading_spinner&quot; style=&quot;?android:progressBarStyleLarge&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_gravity=&quot;center&quot; /&gt;&lt;/FrameLayout&gt; åˆ›å»ºæ·¡å…¥æ·¡å‡ºåŠ¨ç”»åˆ†ä¸º3ä¸ªæ­¥éª¤ï¼š1ã€åˆ›å»ºæˆå‘˜å˜é‡ä»¥ä¾¿æŽ¥ä¸‹æ¥å¯¹å…¶æ·»åŠ åŠ¨ç”»ã€‚2ã€å¯¹äºŽå°†è¦æ·¡å…¥çš„ Viewï¼Œæå‰å°† visibility å±žæ€§è®¾ç½®ä¸ºGONEã€‚è¿™ä¸ä»…èƒ½å¤Ÿé¿å…è¯¥ View åœ¨åŠ¨ç”»å¼€å§‹ä¹‹å‰å ç”¨ layout ç©ºé—´ï¼ŒåŒæ—¶ä¹Ÿé¿å…äº†ä¸å¿…è¦çš„ layout è®¡ç®—ã€‚3ã€é¢„å…ˆä¿å­˜config_shortAnimTimeå±žæ€§å€¼ã€‚è¿™ä¸ªå±žæ€§å€¼è¡¨ç¤ºæ ‡å‡†çš„çŸ­æš‚åŠ¨ç”»æ—¶é•¿ï¼Œè¿™ä¸ªæ—¶é•¿æ˜¯å¾ˆç†æƒ³çš„æ•°å€¼å¯¹äºŽé¢‘ç¹ä½¿ç”¨çš„åŠ¨ç”»æ¥è¯´ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰config_longAnimTimeå’Œconfig_mediumAnimTimeå¯ä¾›é€‰æ‹©ã€‚ ä¸‹é¢çš„ä»£ç ä½¿ç”¨äº†ä¹‹å‰åˆ›å»ºçš„ layout ä½œä¸ºæ´»åŠ¨çš„ content viewï¼š12345678910111213141516171819202122232425public class CrossfadeActivity extends Activity &#123; private View contentView; private View loadingView; private int shortAnimationDuration; ... @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_crossfade); contentView = findViewById(R.id.content); loadingView = findViewById(R.id.loading_spinner); // Initially hide the content view. contentView.setVisibility(View.GONE); // Retrieve and cache the system&apos;s default &quot;short&quot; animation time. shortAnimationDuration = getResources().getInteger( android.R.integer.config_shortAnimTime); &#125; ...&#125; æ·»åŠ æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æœ€åŽï¼Œæˆ‘ä»¬è¦å®žçŽ°æ·¡å…¥æ·¡å‡ºåŠ¨ç”»è¿˜éœ€è¦å¦‚ä¸‹3ä¸ªæ­¥éª¤ï¼š1ã€å¯¹äºŽå°†è¦æ·¡å…¥çš„ Viewï¼Œè®¾ç½®å®ƒçš„ alpha å±žæ€§ä¸º0å¹¶ä¸”è®¾ç½® visiblity ä¸ºVISIBLEï¼ˆè¯¥ View ä¹‹å‰çš„ visibility ä¸ºGONEï¼‰ã€‚è¿™ä¸€æ­¥è®©è¯¥ View å¤„äºŽå¯è§ä½†å®Œå…¨é€æ˜Žçš„çŠ¶æ€ã€‚2ã€å¯¹å°†è¦æ·¡å…¥çš„viewï¼Œè®©å®ƒçš„é€æ˜Žåº¦ä»Ž0å˜åŒ–åˆ°1ã€‚å¯¹äºŽå°†è¦æ·¡å‡ºçš„viewï¼Œè®©å®ƒçš„é€æ˜Žåº¦ä»Ž1åˆ°0ã€‚3ã€åœ¨Animator.AnimatorListenerçš„onAnimationEnd()æ–¹æ³•ä¸­è®¾ç½®æ·¡å‡ºview çš„ visibility å±žæ€§ä¸ºGONEã€‚æ³¨æ„ï¼Œè™½ç„¶è¯¥ View å·²ç»å®Œå…¨é€æ˜Žï¼Œä½†æ˜¯è®¾ç½®å±žæ€§ visibility ä¸ºGONEä¸ä»…å¯ä»¥é˜»æ­¢è¯¥ View å ç”¨ layout ç©ºé—´ï¼ŒåŒæ—¶è¿˜é¿å…äº†ä¸å¿…è¦çš„ layout è®¡ç®—ã€‚ä¸‹é¢æ˜¯è¿™å‡ æ­¥çš„ä¾‹å­ï¼š123456789101112131415161718192021222324public class CrossfadeActivity extends Activity &#123; private View contentView; private View loadingView; private int shortAnimationDuration; ... private void crossfade() &#123; contentView.setAlpha(0f); contentView.setVisibility(View.VISIBLE); contentView.animate() .alpha(1f) .setDuration(shortAnimationDuration) .setListener(null); loadingView.animate() .alpha(0f) .setDuration(shortAnimationDuration) .setListener(new AnimatorListenerAdapter() &#123; @Override public void onAnimationEnd(Animator animation) &#123; loadingView.setVisibility(View.GONE); &#125; &#125;); &#125;&#125; ç¿»ç‰ŒåŠ¨ç”»è¯¥åŠ¨ç”»é€‚ç”¨äºŽåœ¨ä¸¤ä¸ª View ä¹‹é—´å®žçŽ°ç±»ä¼¼ç¿»ç‰Œçš„åŠ¨æ•ˆã€‚æœ¬èŠ‚çš„ç¿»ç‰ŒåŠ¨ç”»å€ŸåŠ©äº†FragmentTransactionç±»çš„setCustomAnimationsæ–¹æ³•ï¼Œè¯¥ç±»ä»Ž Android3.0ï¼ˆAPIç­‰çº§11ï¼‰ å¼€å§‹å¯ä»¥è°ƒç”¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥å€ŸåŠ©å…¶ä»–çš„æ–¹å¼å®žçŽ°å’¯ã€‚ åˆ›å»ºAnimator objectä¸ºäº†åˆ›å»ºç¿»ç‰ŒåŠ¨ç”»ï¼Œä½ ä¸€å…±éœ€è¦å››ä¸ª animatorsã€‚ä¸¤ä¸ªåˆ†åˆ«æŽ§åˆ¶å‰é¢çš„å†…å®¹ï¼ˆå¡ç‰‡æ­£é¢ï¼‰ä»Žå·¦è¾¹ç¿»å‡ºå’Œä»Žå·¦è¾¹ç¿»å…¥ã€‚åŒæ—¶éœ€è¦ä¸¤ä¸ª animators åˆ†åˆ«æŽ§åˆ¶åŽé¢çš„å†…å®¹ï¼ˆå¡ç‰‡åé¢ï¼‰ä»Žå³è¾¹ç¿»å…¥å’Œå³è¾¹ç¿»å‡ºã€‚card_flip_left_in.xml123456789101112131415161718192021222324&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;!-- Before rotating, immediately set the alpha to 0. --&gt; &lt;objectAnimator android:valueFrom=&quot;1.0&quot; android:valueTo=&quot;0.0&quot; android:propertyName=&quot;alpha&quot; android:duration=&quot;0&quot; /&gt; &lt;!-- Rotate. --&gt; &lt;objectAnimator android:valueFrom=&quot;-180&quot; android:valueTo=&quot;0&quot; android:propertyName=&quot;rotationY&quot; android:interpolator=&quot;@android:interpolator/accelerate_decelerate&quot; android:duration=&quot;@integer/card_flip_time_full&quot; /&gt; &lt;!-- Half-way through the rotation (see startOffset), set the alpha to 1. --&gt; &lt;objectAnimator android:valueFrom=&quot;0.0&quot; android:valueTo=&quot;1.0&quot; android:propertyName=&quot;alpha&quot; android:startOffset=&quot;@integer/card_flip_time_half&quot; android:duration=&quot;1&quot; /&gt;&lt;/set&gt; card_flip_left_out.xml1234567891011121314151617&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;!-- Rotate. --&gt; &lt;objectAnimator android:valueFrom=&quot;0&quot; android:valueTo=&quot;180&quot; android:propertyName=&quot;rotationY&quot; android:interpolator=&quot;@android:interpolator/accelerate_decelerate&quot; android:duration=&quot;@integer/card_flip_time_full&quot; /&gt; &lt;!-- Half-way through the rotation (see startOffset), set the alpha to 0. --&gt; &lt;objectAnimator android:valueFrom=&quot;1.0&quot; android:valueTo=&quot;0.0&quot; android:propertyName=&quot;alpha&quot; android:startOffset=&quot;@integer/card_flip_time_half&quot; android:duration=&quot;1&quot; /&gt;&lt;/set&gt; card_flip_right_in.xml123456789101112131415161718192021222324&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;!-- Before rotating, immediately set the alpha to 0. --&gt; &lt;objectAnimator android:valueFrom=&quot;1.0&quot; android:valueTo=&quot;0.0&quot; android:propertyName=&quot;alpha&quot; android:duration=&quot;0&quot; /&gt; &lt;!-- Rotate. --&gt; &lt;objectAnimator android:valueFrom=&quot;180&quot; android:valueTo=&quot;0&quot; android:propertyName=&quot;rotationY&quot; android:interpolator=&quot;@android:interpolator/accelerate_decelerate&quot; android:duration=&quot;@integer/card_flip_time_full&quot; /&gt; &lt;!-- Half-way through the rotation (see startOffset), set the alpha to 1. --&gt; &lt;objectAnimator android:valueFrom=&quot;0.0&quot; android:valueTo=&quot;1.0&quot; android:propertyName=&quot;alpha&quot; android:startOffset=&quot;@integer/card_flip_time_half&quot; android:duration=&quot;1&quot; /&gt;&lt;/set&gt; card_flip_right_out.xml1234567891011121314151617&lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;!-- Rotate. --&gt; &lt;objectAnimator android:valueFrom=&quot;0&quot; android:valueTo=&quot;-180&quot; android:propertyName=&quot;rotationY&quot; android:interpolator=&quot;@android:interpolator/accelerate_decelerate&quot; android:duration=&quot;@integer/card_flip_time_full&quot; /&gt; &lt;!-- Half-way through the rotation (see startOffset), set the alpha to 0. --&gt; &lt;objectAnimator android:valueFrom=&quot;1.0&quot; android:valueTo=&quot;0.0&quot; android:propertyName=&quot;alpha&quot; android:startOffset=&quot;@integer/card_flip_time_half&quot; android:duration=&quot;1&quot; /&gt;&lt;/set&gt; åˆ›å»ºviewå¡ç‰‡çš„æ­£åé¢æ˜¯ä¸¤ä¸ªç‹¬ç«‹çš„ layoutï¼Œæ–¹ä¾¿ä¹‹åŽå°†è¿™ä¸¤ä¸ªç‹¬ç«‹çš„ layout åˆ†åˆ«ç»‘å®šåˆ°ä¸¤ä¸ª Fragment ä¸Šã€‚ä¸‹é¢æ˜¯è¿™ä¸¤ä¸ªç‹¬ç«‹çš„ layout ä¹‹ä¸€ï¼š1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:padding=&quot;130dp&quot;&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:background=&quot;#a6c&quot;&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_centerInParent=&quot;true&quot; android:text=&quot;FONT&quot; android:textColor=&quot;#FFFFFF&quot; android:textStyle=&quot;bold&quot; /&gt; &lt;/RelativeLayout&gt;&lt;/LinearLayout&gt; ä¸‹é¢æ˜¯å¦ä¸€ä¸ªï¼š1234567891011121314151617181920&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:padding=&quot;130dp&quot;&gt; &lt;RelativeLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:background=&quot;@color/colorPrimary&quot;&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_centerInParent=&quot;true&quot; android:text=&quot;BACK&quot; android:textColor=&quot;#FFFFFF&quot; android:textStyle=&quot;bold&quot; /&gt; &lt;/RelativeLayout&gt;&lt;/LinearLayout&gt; åˆ›å»ºfragmentsåˆ›å»ºä¸¤ä¸ª Fragment ä½œä¸ºå¡ç‰‡çš„æ­£åé¢ï¼Œå°†ä¹‹å‰çš„ä¸¤ä¸ª layout åˆ†åˆ«ç»‘å®šåˆ°è¿™ä¸¤ä¸ª Fragment ä¸Šã€‚ç„¶åŽå°†è¿™ä¸¤ä¸ª Fragment ä½œä¸º FragmentActivity çš„å±•ç¤ºå†…å®¹ï¼Œè¯¥ Activity å°±æ˜¯ä½ è¦å±•ç¤ºç¿»ç‰ŒåŠ¨ç”»çš„é¡µé¢ã€‚ä¸‹é¢æ˜¯ä¸¤ä¸ª Fragment çš„å®šä¹‰ï¼š123456789101112131415161718192021222324public class CardFlipActivity extends FragmentActivity &#123; ... /** * A fragment representing the front of the card. */ public class CardFrontFragment extends Fragment &#123; @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123; return inflater.inflate(R.layout.fragment_card_front, container, false); &#125; &#125; /** * A fragment representing the back of the card. */ public class CardBackFragment extends Fragment &#123; @Override public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) &#123; return inflater.inflate(R.layout.fragment_card_back, container, false); &#125; &#125;&#125; å®žçŽ°åŠ¨ç”»çŽ°åœ¨ï¼Œä½ éœ€è¦åœ¨ Activity ä¸­å±•ç¤ºè¿™ä¸¤ä¸ª Fragment çš„å†…å®¹ã€‚ä¸ºäº†å®žçŽ°æ­¤éœ€æ±‚ï¼Œä½ åº”è¯¥ä¸ºä½ çš„ Activity åˆ›å»ºä¸€ä¸ª layoutã€‚ä¸‹é¢çš„ä¾‹å­åœ¨æ­¤ layout ä¸­åˆ›å»ºäº†ä¸€ä¸ªFrameLayoutä½œä¸º Fragment çš„å®¹å™¨ï¼š1234&lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:id=&quot;@+id/container&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; /&gt; åœ¨ Activity ä¸­ï¼Œå°†ä»¥ä¸Šçš„ layout è®¾ç½®ä¸º content viewã€‚ç„¶åŽåœ¨ Activity çš„oncreateé˜¶æ®µæ˜¾ç¤ºå¡ç‰‡çš„æ­£é¢å†…å®¹ã€‚ä¸‹é¢çš„ä¾‹å­å±•ç¤ºäº†è¿™ä¸€è¿‡ç¨‹ï¼š12345678910111213141516public class CardFlipActivity extends FragmentActivity &#123; @Override protected void onCreate(Bundle savedInstanceState) &#123; super.onCreate(savedInstanceState); setContentView(R.layout.activity_activity_card_flip); if (savedInstanceState == null) &#123; getSupportFragmentManager() .beginTransaction() .add(R.id.container, new CardFrontFragment()) .commit(); &#125; &#125; ...&#125; çŽ°åœ¨ä½ å·²ç»å±•ç¤ºäº†å¡ç‰‡çš„æ­£é¢ï¼ŒæŽ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯å¦‚ä½•ä½¿ç”¨ç¿»ç‰ŒåŠ¨ç”»ç¿»å¼€å¡ç‰‡çš„èƒŒé¢ï¼Œå½“å¡ç‰‡ç¿»è½¬åˆ°èƒŒé¢åŽï¼Œå†æ¬¡å°†å…¶ç¿»è½¬åˆ°æ­£é¢ã€‚ä¸‹é¢çš„ä»£ç å®žçŽ°è¿™ä¸€åŠŸèƒ½ã€‚1234567891011121314151617181920212223242526272829303132public class CardFlipActivity extends FragmentActivity &#123; ... private void flipCard() &#123; if (showingBack) &#123; //Flip to the font. showingBack = false; getSupportFragmentManager() .beginTransaction() //æ³¨æ„setCustomAnimations()æ–¹æ³•å¿…é¡»åœ¨addã€removeã€replaceè°ƒç”¨ä¹‹å‰è¢«è®¾ç½®ï¼Œå¦åˆ™ä¸èµ·ä½œç”¨ã€‚ .setCustomAnimations( R.animator.card_flip_left_in, R.animator.card_flip_left_out, 0, 0) .replace(R.id.flContainer, new CardFrontFragment()) .commit(); return; &#125; // Flip to the back. showingBack = true; getSupportFragmentManager() .beginTransaction() .setCustomAnimations( R.animator.card_flip_right_in, R.animator.card_flip_right_out, 0, 0) .replace(R.id.flContainer, new CardBackFragment()) .commit(); &#125; æœ€ç»ˆå®žçŽ°çš„æ•ˆæžœï¼š æ­éœ²åŠ¨ç”»å½“éœ€è¦æ˜¾ç¤ºæˆ–è€…éšè—viewæ—¶ï¼Œæ­éœ²åŠ¨ç”»ç»™ç”¨æˆ·æä¾›äº†ä¸€ç§è§†è§‰ä¸Šçš„å»¶ç»­ã€‚ViewAnimationUtils.createCircularReveal()æ–¹æ³•å¯ä»¥å¸®åŠ©ä½ å®žçŽ°æ­¤åŠ¨ç”»ï¼Œæ­¤æ–¹å¼åœ¨ Android 5.0ï¼ˆAPI level 21ï¼‰ ä»¥ä¸Šæä¾›ã€‚ä¸‹é¢çš„ä»£ç å±•ç¤ºäº†å¦‚ä½•ä½¿ç”¨æ­éœ²åŠ¨ç”»å±•ç¤ºåˆå§‹çŠ¶æ€ä¸º invisible çš„ Viewï¼š12345678910111213// previously invisible viewView myView = findViewById(R.id.my_view);if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) &#123; int cx = myView.getWidth() / 2; int cy = myView.getHeight() / 2; float finalRadius = (float) Math.hypot(cx, cy); Animator anim = ViewAnimationUtils.createCircularReveal(myView, cx, cy, 0f, finalRadius); myView.setVisibility(View.VISIBLE); anim.start();&#125; else &#123; // set the view to visible without a circular reveal animation below Lollipop myView.setVisibility(View.VISIBLE);&#125; ViewAnimationUtils.createCircularReveal()åŠ¨ç”»ä¸€å…±æœ‰5ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºç›®æ ‡ Viewã€‚æŽ¥ä¸‹æ¥çš„ä¸¤ä¸ªå‚æ•°ä»£è¡¨äº†æ­éœ²åŠ¨ç”»å¼€å§‹çš„åœ†å¿ƒåæ ‡ã€‚ä¸€èˆ¬åœ°ï¼Œè¿™é€šå¸¸æ˜¯ç›®æ ‡ Viewçš„ä¸­å¿ƒç‚¹åæ ‡ï¼Œä½†æ˜¯ä½ ä¹Ÿå¯ä»¥å°†å®ƒå®šä¹‰ä¸ºä½ çš„æ‰‹æŒ‡è§¦æ‘¸ç‚¹çš„åæ ‡ï¼Œä»Žè€Œä½¿å¾—æ­éœ²åŠ¨ç”»ä»Žä½ çš„æ‰‹æŒ‡è§¦æ‘¸ç‚¹å¼€å§‹æ­éœ²ã€‚ç¬¬å››ä¸ªå‚æ•°è¡¨ç¤ºåŠ¨ç”»å¼€å§‹çš„åœ†å½¢åŒºåŸŸåŠå¾„ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œåˆå§‹çš„åœ†å½¢åŠå¾„ä¸º0ï¼Œä»Žè€Œç›®æ ‡ View åˆå§‹çŠ¶æ€æ˜¯éšè—çš„ã€‚æœ€åŽä¸€ä¸ªå‚æ•°ä»£è¡¨æ­éœ²åŒºåŸŸï¼ˆåœ†å½¢åŒºåŸŸï¼‰çš„æœ€å¤§åŠå¾„ã€‚å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ€åŽä¸€ä¸ªå‚æ•°å¿…é¡»ä¿è¯èƒ½å¤Ÿå®Œå…¨è¦†ç›–ä½ çš„ç›®æ ‡ Viewã€‚ä¸‹é¢æ˜¯ä½¿ç”¨æ­éœ²åŠ¨ç”»éšè—è§†å›¾çš„ä»£ç ï¼š12345678910111213141516171819// previously visible viewfinal View myView = findViewById(R.id.my_view);if (Build.VERSION.SDK_INT == Build.VERSION_CODES.LOLLIPOP) &#123; int cx = myView.getWidth() / 2; int cy = myView.getHeight() / 2; float initialRadius = (float) Math.hypot(cx, cy); Animator anim = ViewAnimationUtils.createCircularReveal(myView, cx, cy, initialRadius, 0f); anim.addListener(new AnimatorListenerAdapter() &#123; @Override public void onAnimationEnd(Animator animation) &#123; super.onAnimationEnd(animation); myView.setVisibility(View.INVISIBLE); &#125; &#125;); anim.start();&#125; else &#123; // set the view to invisible without a circular reveal animation below Lollipop myView.setVisibility(View.INVISIBLE);&#125; å®žä¾‹ä¸­ï¼Œæ­éœ²åŠ¨ç”»çš„åˆå§‹åŠå¾„è¶³å¤Ÿè¦†ç›–æ•´ä¸ªç›®æ ‡è§†å›¾ï¼Œæ‰€ä»¥åˆå§‹æ—¶çš„è§†å›¾æ˜¯å®Œå…¨å¯è§çš„ã€‚æœ€ç»ˆçš„åŠå¾„è®¾ç½®ä¸º0ï¼Œåˆ™è¡¨ç¤ºåŠ¨ç”»ç»“æŸåŽä¼šéšè—ç›®æ ‡è§†å›¾ã€‚æ³¨æ„ï¼Œå½“åŠ¨ç”»ç»“æŸåŽè¦å°†ç›®æ ‡è§†å›¾çš„ visiblility å±žæ€§è®¾ç½®ä¸ºINVISIBLEä»¥æé«˜æ€§èƒ½ã€‚æœ€ç»ˆæ•ˆæžœå¦‚ä¸‹ï¼š]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>æ·¡å…¥æ·¡å‡ºåŠ¨ç”»</tag>
        <tag>ç¿»ç‰ŒåŠ¨ç”»</tag>
        <tag>æ­éœ²åŠ¨ç”»</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆä¸‰ï¼‰ï¼šçŸ¢é‡å›¾åŠ¨ç”»]]></title>
    <url>%2F2019%2F02%2F17%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8003%EF%BC%9A%E7%9F%A2%E9%87%8F%E5%9B%BE%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚æœ¬ç¯‡å‚è€ƒäº†CSDNä½œè€…ï¼šMr13_å‘¨ çš„ä»¥ä¸‹ä¸‰ç¯‡æ–‡ç« ã€‚1ã€SVG çš„ PathData åœ¨ Android ä¸­çš„ä½¿ç”¨2ã€Androidï¼šèŽ·å–å¹¶åˆ¶ä½œçŸ¢é‡å›¾åŠ¨ç”»3ã€Android çŸ¢é‡å›¾åŠ¨ç”»ï¼ˆå®Œç»“ç¯‡ï¼‰åœ¨é€šè¯»å®Œè¿™3ç¯‡æ–‡ç« åŽï¼Œç¬”è€…åœ¨ä»£ç å®žæ“åŽï¼Œè¡¥å……ä»¥ä¸‹çŸ¥è¯†ç‚¹ã€‚ çŸ¥è¯†ä¸€ï¼šstrokeLineJoin çš„ miter æ¨¡å¼ ã€‚strokeLineJoinæ˜¯ path æ ‡ç­¾ä¸‹çš„å±žæ€§ï¼Œè´Ÿè´£çº¿æ¡çš„æ‹è§’å½¢çŠ¶ï¼ŒåŒ…æ‹¬å¦‚ä¸‹3ä¸ªå±žæ€§å€¼ï¼š1ã€miter : é»˜è®¤å€¼ï¼Œä¹Ÿå°±æ˜¯ç³»ç»Ÿé»˜è®¤ä½¿ç”¨çš„ã€‚2ã€round : åœ†è§’å¼è¿žæŽ¥ã€‚3ã€bevelï¼šæ–œè§’å¼è¿žæŽ¥ã€‚å½“çº¿æ¡æ‹è§’ä¸º MITER æ—¶ï¼Œæ‹è§’å¤„çš„å¤–ç¼˜éœ€è¦ä½¿ç”¨å»¶é•¿çº¿æ¥è¡¥å¿ï¼šè€Œè¿™ç§è¡¥å¿æ–¹æ¡ˆä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æžœæ‹è§’çš„è§’åº¦å¤ªå°ï¼Œå°±æœ‰å¯èƒ½ç”±äºŽå‡ºçŽ°è¿žæŽ¥ç‚¹è¿‡é•¿çš„æƒ…å†µã€‚æ¯”å¦‚è¿™æ ·ï¼šæ‰€ä»¥ä¸ºäº†é¿å…æ„æ–™ä¹‹å¤–çš„è¿‡é•¿çš„å°–è§’å‡ºçŽ°ï¼Œ MITER åž‹è¿žæŽ¥ç‚¹æœ‰ä¸€ä¸ªé¢å¤–çš„è§„åˆ™ï¼šå½“å°–è§’è¿‡é•¿æ—¶ï¼Œè‡ªåŠ¨æ”¹ç”¨ BEVEL çš„æ–¹å¼æ¥æ¸²æŸ“è¿žæŽ¥ç‚¹ã€‚ä¾‹å¦‚ä¸Šå›¾çš„è¿™ä¸ªå°–è§’ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹æ˜¯ä¸ä¼šå‡ºçŽ°çš„ï¼Œè€Œæ˜¯ä¼šç”±äºŽå»¶é•¿çº¿è¿‡é•¿è€Œè¢«è½¬ä¸º BEVEL åž‹è¿žæŽ¥ç‚¹ï¼šè‡³äºŽå¤šå°–çš„è§’æ‰å±žäºŽè¿‡äºŽå°–ï¼Œå°–åˆ°éœ€è¦è½¬ä¸ºä½¿ç”¨ BEVEL æ¥ç»˜åˆ¶ï¼Œåˆ™æ˜¯ç”± path æ ‡ç­¾çš„å±žæ€§strokeMiterLimitæ¥è®¾ç½®çš„ã€‚strokeMiterLimit å‚æ•°æ˜¯å¯¹äºŽè½¬è§’é•¿åº¦çš„é™åˆ¶ï¼Œå…·ä½“æ¥è®²ï¼Œæ˜¯æŒ‡å°–è§’çš„å¤–ç¼˜ç«¯ç‚¹å’Œå†…éƒ¨æ‹è§’çš„è·ç¦»ä¸Žçº¿æ¡å®½åº¦çš„æ¯”ã€‚ä¹Ÿå°±æ˜¯ä¸‹é¢è¿™ä¸¤ä¸ªé•¿åº¦çš„æ¯”ï¼šè¿™ä¸ª strokeMiterLimit çš„é»˜è®¤å€¼æ˜¯ 4ï¼Œå¯¹åº”çš„æ˜¯ä¸€ä¸ªå¤§çº¦ 29Â° çš„é”è§’ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§äºŽè¿™ä¸ªè§’çš„å°–è§’ä¼šè¢«ä¿ç•™ï¼Œè€Œå°äºŽè¿™ä¸ªå¤¹è§’çš„ strokeLineJoin å°±ä¼šè¢«è‡ªåŠ¨è½¬æ¢ä¸º bevel æ¨¡å¼ã€‚å‚è€ƒåœ°å€&gt;&gt; çŸ¥è¯†äºŒï¼šSVGã€VectorDrawableã€AnimatedVectorDrawableä¹‹é—´çš„è”ç³»ã€‚SVGæ˜¯ä¸€ç§æ ¼å¼ï¼Œä»£è¡¨çŸ¢é‡å›¾å½¢ï¼Œç±»ä¼¼çš„æœ‰JPGã€PNGæ ¼å¼ã€‚SVGä¸èƒ½åœ¨ Android ä¸­ç›´æŽ¥ä½¿ç”¨ã€‚VectorDrawable æ˜¯ Android 5.0 ç³»ç»Ÿä¸­å¼•å…¥äº†æ¥æ”¯æŒçŸ¢é‡å›¾(SVG)çš„ï¼ŒåŒæ—¶è¿˜å¼•å…¥äº† AnimatedVectorDrawable æ¥æ”¯æŒçŸ¢é‡å›¾åŠ¨ç”»ã€‚å¸‚åœºä¸Šæœ‰å¾ˆå¤šSVGè½¬ VectorDrawable çš„å·¥å…·ï¼Œç¬”è€…æŽ¨èè¿™ä¸ªç½‘ç«™ï¼Œä¸è¿‡éœ€è¦ç§‘å­¦ä¸Šç½‘å“¦ã€‚ çŸ¥è¯†ä¸‰ï¼šVectorDrawableçš„å„ä¸ªæ ‡ç­¾çš„å±žæ€§ä»‹ç»ã€‚å¦‚æžœä½ å–œæ¬¢åŽŸæ»‹åŽŸå‘³çš„ï¼Œè¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚å¦‚æžœå–œæ¬¢ç¿»è¯‘å¥½äº†çš„ï¼Œè¯·ç§»æ­¥è¿™ç¯‡æ–‡ç« çš„æœ€åŽéƒ¨åˆ†ã€‚ çŸ¥è¯†å››ï¼šå¯¹trimPathStartã€trimPathEndã€trimPathOffsetå±žæ€§çš„ç†è§£ã€‚å…·ä½“ä»‹ç»è¯·ç§»æ­¥åˆ°ç®€ä¹¦çš„è¿™ç¯‡æ–‡ç« ã€‚è¿™é‡Œè¿˜æœ‰ä¸€ç‚¹éœ€è¦è¡¥å……ï¼Œå½“ä»–ä»¬çš„å€¼nå¤§äºŽ1æ—¶ï¼Œå®žé™…çš„å€¼æ˜¯n-1ï¼Œæ¯”å¦‚ trimPathStart çš„å€¼æ˜¯1.1ï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨æŒ‰0.1å¤„ç†ã€‚æ³¨æ„ï¼Œnä¸èƒ½å°äºŽ0ï¼Œå¦è€…ä¼šå°†å½“å‰pathå…¨éƒ¨ä¿®å‰ªã€‚å…¶å®ƒçš„æƒ…å†µï¼Œå¯ä»¥ä¸‹è½½ç¬”è€…çš„ä»£ç è‡ªå·±æ“ä½œä¸€ä¸‹ã€‚ çŸ¥è¯†äº”ï¼šæ€Žä¹ˆå¤„ç†å…¼å®¹æ€§ï¼ŸAndroidä»Ž5.0ç‰ˆæœ¬ï¼ˆAPI 21ï¼‰æ‰å¼€å§‹æ”¯æŒçŸ¢é‡å›¾ï¼Œå¼•å…¥äº† VectorDrawableï¼ˆçŸ¢é‡å›¾ï¼‰ å’Œ AnimatedVectorDrawableï¼ˆçŸ¢é‡å›¾åŠ¨ç”»ï¼‰ã€‚å¯¹äºŽä½Žç‰ˆæœ¬ï¼Œå®˜æ–¹è™½ç„¶ä¹Ÿç»™å‡ºäº†å…¼å®¹æ–¹æ³•ï¼Œä½†æ˜¯ä¾ç„¶è¿˜æœ‰å¾ˆå¤šå‘è¦è¸©ï¼Œæ¯”å¦‚è¿™ç¯‡æ–‡ç« æ‰€è¯´çš„ã€‚æ‰€ä»¥ç¬”è€…å»ºè®®å¦‚æžœæ²¡æœ‰å¼ºåˆ¶è¦æ±‚çš„è¯ï¼Œè¿˜æ˜¯æŠŠä½ çš„appçš„æœ€ä½Žç‰ˆæœ¬æ”¯æŒæé«˜åˆ°API 21å§ã€‚ çŸ¥è¯†å…­ï¼šwidthã€heightã€viewportWidthã€viewportHeightå±žæ€§è¯´æ˜Žã€‚1ã€android:width \ android:heightï¼šå®šä¹‰çŸ¢é‡å›¾çš„å®½é«˜ã€‚2ã€android:viewportHeight \ android:viewportWidthï¼šå®šä¹‰å›¾åƒè¢«åˆ’åˆ†çš„æ¯”ä¾‹å¤§å°ã€‚æ¯”å¦‚width=200dpã€viewportWidth=500ï¼Œå³æŠŠ200dpå¤§å°çš„å›¾åƒåˆ’åˆ†æˆ500ä»½ï¼ŒåŽé¢Pathæ ‡ç­¾ä¸­çš„åæ ‡ï¼Œå°±å…¨éƒ¨ä½¿ç”¨çš„æ˜¯è¿™é‡Œåˆ’åˆ†åŽçš„åæ ‡ç³»ç»Ÿã€‚]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>AnimationDrawable</tag>
        <tag>AnimatedVectorDrawable</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆäºŒï¼‰ï¼šè§†å›¾åŠ¨ç”»ã€å±žæ€§åŠ¨ç”»]]></title>
    <url>%2F2019%2F01%2F25%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8002%EF%BC%9A%E8%A7%86%E5%9B%BE%E5%8A%A8%E7%94%BB%E3%80%81%E5%B1%9E%E6%80%A7%E5%8A%A8%E7%94%BB%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚æœ¬ç¯‡ä»¥æ–‡ç« ã€ŠAndroid åŠ¨ç”»ï¼šè¿™æ˜¯ä¸€ä»½è¯¦ç»† &amp; æ¸…æ™°çš„åŠ¨ç”»å­¦ä¹ æŒ‡å—ã€‹ä¸ºåŸºç¡€ï¼Œç¬”è€…åœ¨é€šè¯»äº†è¿™ç¯‡æ–‡ç« å¹¶è¿›è¡Œäº†å¿…è¦çš„ä»£ç å®žæ“åŽè§‰å¾—æœ‰ä¸‰ä¸ªçŸ¥è¯†ç‚¹éœ€è¦è¡¥å……ï¼Œæ‰€ä»¥æœ¬ç¯‡å°†è®°å½•ä¸‹è¿™ä¸‰ä¸ªçŸ¥è¯†ç‚¹ã€‚ çŸ¥è¯†ä¸€ï¼šLayoutAnimationçš„å±€é™æ€§LayoutAnimation åªåœ¨åˆ›å»º ViewGroup çš„æ—¶å€™ç”Ÿæ•ˆï¼ŒåŽç»­æ·»åŠ çš„å­ View æ˜¯æ²¡æœ‰åŠ¨ç”»æ•ˆæžœçš„ã€‚è¿™å’Œ LayoutTransition æœ‰å¾ˆå¤§çš„åŒºåˆ«ï¼Œåœ¨åŽç»­ä»‹ç»å¸ƒå±€åŠ¨ç”»æ—¶å†å±•å¼€ä»‹ç»ã€‚ çŸ¥è¯†äºŒï¼šåŠ¨ç”»ç›‘å¬æ–¹æ³•å½’ç±»1ã€è½¬åœºåŠ¨ç”»ç›¸å…³Animation.setAnimationListener(Animation.AnimationListener listener);2ã€å±žæ€§åŠ¨ç”»ç›¸å…³Animator.addListener(AnimatorListenerAdapter adapter);Animator.addListener(Animator.AnimatorListener listener);Animator.addPauseListener(Animator.AnimatorPauseListener listener);Animator.addUpdateListener(ValueAnimator.AnimatorUpdateListener listener);3ã€ViewPropertyAnimatoråŠ¨ç”»ç›¸å…³ViewPropertyAnimator.setListener(AnimatorListenerAdapter adapter);ViewPropertyAnimator.setListener(Animator.AnimatorListener listener);ViewPropertyAnimator.setUpdateListener(AnimatorUpdateListener listener);ViewPropertyAnimator.withEndAction(Runnable runnable);ViewPropertyAnimator.withStartAction(Runnable runnable); æ³¨æ„ withStartAction() / withEndAction() æ˜¯ä¸€æ¬¡æ€§çš„ï¼Œåœ¨åŠ¨ç”»æ‰§è¡Œç»“æŸåŽå°±è‡ªåŠ¨å¼ƒæŽ‰äº†ï¼Œå°±ç®—ä¹‹åŽå†é‡ç”¨ ViewPropertyAnimator æ¥åšåˆ«çš„åŠ¨ç”»ï¼Œç”¨å®ƒä»¬è®¾ç½®çš„å›žè°ƒä¹Ÿä¸ä¼šå†è¢«è°ƒç”¨ã€‚è€Œ set/addListener() æ‰€è®¾ç½®çš„ AnimatorListener æ˜¯æŒç»­æœ‰æ•ˆçš„ï¼Œå½“åŠ¨ç”»é‡å¤æ‰§è¡Œæ—¶ï¼Œå›žè°ƒæ€»ä¼šè¢«è°ƒç”¨ã€‚ å‚è€ƒé“¾æŽ¥&gt;&gt; çŸ¥è¯†ä¸‰ï¼šAnimationDrawableçš„ä½¿ç”¨æ—¶æœºAnimationDrawable çš„ start æ–¹æ³•ä¸èƒ½åœ¨ä½ çš„ Activity çš„onCreate()ä¸­ä½¿ç”¨ï¼Œå¦è€…ä¼šæ²¡æœ‰æ•ˆæžœï¼Œå› ä¸ºè¿™ä¸ªæ—¶å€™ AnimationDrawable è¿˜æ²¡æœ‰ç»‘å®šåˆ°çª—å£ã€‚å¦‚æžœä½ æƒ³åœ¨è¿›å…¥é¡µé¢åŽç«‹å³å¼€å§‹åŠ¨ç”»ï¼Œå¯ä»¥åœ¨ä½ çš„ Activity çš„onStart()æ–¹æ³•ä¸­è°ƒç”¨ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥åœ¨äº¤äº’ç›‘å¬ä¸­è°ƒç”¨ start æ–¹æ³•ï¼Œæ¯”å¦‚åœ¨æŸä¸ª View çš„onClick()æ–¹æ³•ä¸­è°ƒç”¨ã€‚]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>Animation</tag>
        <tag>LayoutAnimation</tag>
        <tag>Animator</tag>
        <tag>ValueAnimator</tag>
        <tag>ObjectAnimator</tag>
        <tag>ViewPropertyAnimator</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidåŠ¨ç”»ï¼ˆä¸€ï¼‰ï¼šåæ ‡ã€åŒºåŸŸã€è§†å›¾å±‚çº§]]></title>
    <url>%2F2019%2F01%2F15%2F%E5%8A%A8%E7%94%BB%E5%9F%BA%E7%A1%8001%EF%BC%9A%E5%9D%90%E6%A0%87%E3%80%81%E5%8C%BA%E5%9F%9F%E3%80%81%E8%A7%86%E5%9B%BE%E5%B1%82%E7%BA%A7%2F</url>
    <content type="text"><![CDATA[ç¬”è€…å·²å°†æœ¬èŠ‚çš„ä»£ç ä¸Šä¼ è‡³ Githubï¼Œå¤§å®¶å¯ä»¥ç»“åˆç€å­¦ä¹ ã€‚ åæ ‡event.getX()ï¼šè¡¨ç¤ºçš„æ˜¯è§¦æ‘¸çš„ç‚¹è·ç¦»è‡ªèº«å·¦è¾¹ç•Œçš„è·ç¦»ã€‚event.getY()ï¼šè¡¨ç¤ºçš„æ˜¯è§¦æ‘¸çš„ç‚¹è·ç¦»è‡ªèº«ä¸Šè¾¹ç•Œçš„è·ç¦»ã€‚event.getRawXï¼šè¡¨ç¤ºçš„æ˜¯è§¦æ‘¸ç‚¹è·ç¦»å±å¹•å·¦è¾¹ç•Œçš„è·ç¦»ã€‚event.getRawYï¼šè¡¨ç¤ºçš„æ˜¯è§¦æ‘¸ç‚¹è·ç¦»å±å¹•ä¸Šè¾¹ç•Œçš„è·ç¦»ï¼ŒåŒ…æ‹¬çŠ¶æ€æ ã€‚View.getXï¼šè¡¨ç¤ºViewå·¦ä¸Šè§’ç›¸å¯¹äºŽçˆ¶å®¹å™¨çš„xåæ ‡ã€‚View.getYï¼šè¡¨ç¤ºViewå·¦ä¸Šè§’ç›¸å¯¹äºŽçˆ¶å®¹å™¨çš„yåæ ‡ã€‚View.getTranslationX()ï¼šè®¡ç®—çš„æ˜¯è¯¥Viewåœ¨Xè½´çš„åç§»é‡ã€‚åˆå§‹å€¼ä¸º0ï¼Œå‘å·¦åç§»å€¼ä¸ºè´Ÿï¼Œå‘å³åç§»å€¼ä¸ºæ­£ã€‚View.getTranslationY()ï¼šè®¡ç®—çš„æ˜¯è¯¥Viewåœ¨Yè½´çš„åç§»é‡ã€‚åˆå§‹å€¼ä¸º0ï¼Œå‘ä¸Šåç§»ä¸ºè´Ÿï¼Œå‘ä¸‹åç§»ä¸ºæ­£ã€‚View.getLocationInWindow(pos)ï¼šè®¡ç®—çš„æ˜¯viewåœ¨å…¶çˆ¶çª—å£ä¸­çš„åæ ‡ä½ç½®ã€‚View.getLocationOnScreen(pos)ï¼šè®¡ç®—çš„æ˜¯viewåœ¨å…¶æ•´ä¸ªå±å¹•ä¸Šçš„åæ ‡ä½ç½®ã€‚ çŸ¥è¯†è¡¥å……1ã€Androidä¸­æ¯ä¸ª View éƒ½æœ‰ä¸€ä¸ªè‡ªå·±çš„åæ ‡ç³»ï¼Œå½¼æ­¤ä¹‹é—´æ˜¯ä¸å½±å“çš„ã€‚è¿™ä¸ªåæ ‡ç³»çš„åŽŸç‚¹æ˜¯ View å·¦ä¸Šè§’çš„é‚£ä¸ªç‚¹ï¼›æ°´å¹³æ–¹å‘æ˜¯ x è½´ï¼Œå³æ­£å·¦è´Ÿï¼›ç«–ç›´æ–¹å‘æ˜¯ y è½´ï¼Œä¸‹æ­£ä¸Šè´Ÿã€‚æŸ¥çœ‹æ¥æº2ã€å¦‚æžœé‡å†™ Activity çš„onTouchEvent(MotionEvent event)æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™ event.getX() ä¸Ž event.getRawX() èŽ·å–çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œevent.getY() ä¸Ž event.getRawY() èŽ·å–çš„å€¼æ˜¯ä¸€æ ·ï¼Œä½†æ˜¯ç›´æŽ¥è§¦æ‘¸çŠ¶æ€æ ã€åº•éƒ¨å¯¼èˆªæ æ—¶çš„åæ ‡ä½ç½®ä¸èƒ½èŽ·å¾—ã€‚æŸ¥çœ‹æ¥æº3ã€view.translationX è¡¨ç¤º view åœ¨åŽŸæ¥åŸºç¡€ä¸Šç§»åŠ¨å¤šå°‘ï¼Œview.X è¡¨ç¤ºæœ€ç»ˆè¦ç§»åŠ¨åˆ°Xè½´çš„å“ªä¸ªä½ç½®ï¼Œview.getX() çš„å€¼ä¸º view.getLeft() ä¸Ž view.getTranslationX() ä¹‹å’Œã€‚æŸ¥çœ‹æ¥æº4ã€æ³¨æ„ canvas.translate ä¸Ž view.translationX æ˜¯ä¸åŒçš„ï¼Œå‰è€…è¡¨ç¤º canvas åœ¨ä¸Šæ¬¡åŸºç¡€ä¸Šç§»åŠ¨å¤šå°‘ã€‚ï¼ˆé€‚ç”¨æ‰€æœ‰ translate() ç±»çš„æ–¹æ³•ã€‚ï¼‰5ã€å½“viewæ˜¯åœ¨dialog æˆ– popupWindow ä¸Šæ˜¾ç¤ºæ—¶ï¼ŒgetLocationInWindowèŽ·å¾—çš„å€¼æ˜¯ç›¸å¯¹äºŽ dialog æˆ–è€… popuwindow å·¦ä¸Šè§’çš„åæ ‡ã€‚æŸ¥çœ‹æ¥æº1 | æŸ¥çœ‹æ¥æº2 åŒºåŸŸæˆ‘ä¸ºä¾¿äºŽè¡¨è¿°ï¼Œç»Ÿä¸€æŠŠè§†å›¾å¤§å°ã€è§†å›¾èŒƒå›´ã€Android 5.0ä¸»é¢˜é£Žæ ¼çš„çŸ¥è¯†éƒ½åˆ’å½’åˆ°è¿™ä¸€éƒ¨åˆ†ï¼Œå¤§å®¶ä¸å¿…çº ç»“ï¼Œé‡ç‚¹å…³æ³¨æ¯ä¸ªçŸ¥è¯†ç‚¹çš„æ¦‚å¿µä»¥åŠåŒºåˆ«ã€‚View.getWidth()ï¼šè¡¨ç¤ºçš„æ˜¯å½“å‰æŽ§ä»¶çš„å®½åº¦ï¼Œå³getRight()-getLeft()ã€‚View.getHeight()ï¼šè¡¨ç¤ºçš„æ˜¯å½“å‰æŽ§ä»¶çš„é«˜åº¦ï¼Œå³getBottom()-getTop()ã€‚View.getTop()ï¼šå­Viewçš„é¡¶éƒ¨åˆ°çˆ¶Viewé¡¶éƒ¨çš„è·ç¦»ã€‚View.getRight()ï¼šå­Viewçš„å³è¾¹ç•Œåˆ°çˆ¶Viewçš„å·¦è¾¹ç•Œçš„è·ç¦»ã€‚View.getBottom()ï¼šå­Viewçš„åº•éƒ¨åˆ°çˆ¶Viewçš„é¡¶éƒ¨çš„è·ç¦»ã€‚View.getLeft()ï¼šå­Viewçš„å·¦è¾¹ç•Œåˆ°çˆ¶Viewçš„å·¦è¾¹ç•Œçš„è·ç¦»ã€‚View.getGlobalVisibleRect(rect)ï¼šå¾—åˆ°æ•´ä½“ç›¸å¯¹äºŽå±å¹•ï¼ˆåŒ…æ‹¬çŠ¶æ€æ ï¼‰çš„åŒºåŸŸèŒƒå›´rectï¼Œè¿™ä¸ªrectè¡¨ç¤ºå½“å‰viewçš„èŒƒå›´ã€‚View.getLocalVisibleRect(rect)ï¼šå¾—åˆ°è‡ªå·±æ˜¾ç¤ºçš„åŒºåŸŸï¼Œè¿™ä¸ªåŒºåŸŸçš„åæ ‡æ˜¯ç›¸å¯¹è‡ªèº«çš„ï¼Œä»…ä»…ç”¨æ¥è¡¨ç¤ºè‡ªèº«æ‰€å çš„èŒƒå›´ã€‚å·¦ä¸Šè§’åæ ‡ä¸€ç›´ä¸ºï¼ˆ0ï¼Œ0ï¼‰ï¼Œå³ä¸‹è§’é€šè¿‡è®¡ç®—å¯å¾—ã€‚View.getWindowVisibleDisplayFrame(rect)ï¼šèŽ·å–åˆ°ç¨‹åºæ˜¾ç¤ºçš„åŒºåŸŸï¼ŒåŒ…æ‹¬æ ‡é¢˜æ ï¼ˆActionBarï¼‰ï¼Œä¸åŒ…æ‹¬çŠ¶æ€æ ã€å¯¼èˆªæ ã€é”®ç›˜åŒºåŸŸ(å¦‚å¼¹èµ·)ã€‚ çŸ¥è¯†è¡¥å……1ã€Androidæ‰‹æœºèŽ·å–å±å¹•åˆ†è¾¨çŽ‡é«˜åº¦å› è™šæ‹Ÿå¯¼èˆªæ å¸¦æ¥çš„é—®é¢˜ã€‚2ã€å¦‚ä½•åœ¨onCreateæ–¹æ³•ä¸­èŽ·å–çŠ¶æ€æ ï¼Œåº•éƒ¨å¯¼èˆªæ é«˜åº¦ï¼Ÿï¼ˆæ³¨æ„ï¼šå³ä½¿çŠ¶æ€æ ã€åº•éƒ¨å¯¼èˆªæ è¢«éšè—ï¼Œä»–ä»¬çš„é«˜åº¦ä¾ç„¶å¯ä»¥æŒ‰é“¾æŽ¥ä¸­çš„æ–¹æ³•å¾—åˆ°ã€‚ï¼‰3ã€èŽ·å–Viewé«˜åº¦çš„ä¸‰ç§æ–¹æ³•ã€‚ Android 5.0ä¹‹åŽçš„ä¸»é¢˜é£Žæ ¼ï¼š1ã€å¦‚æžœ app çš„æ ‡é¢˜æ ä»æ˜¯ä½¿ç”¨ actionbarï¼Œåˆ™ç›´æŽ¥åœ¨é£Žæ ¼ (styles) æˆ–æ˜¯ä¸»é¢˜ (themes) é‡Œè¿›è¡Œè®¾å®š colorPrimary å‚æ•°å³å¯ï¼›è‹¥æ˜¯é‡‡ç”¨ toolbar çš„è¯ï¼Œåˆ™è¦åœ¨ç•Œé¢ (layout) é‡Œé¢è®¾å®š toolbar æŽ§ä»¶çš„ background å±žæ€§ã€‚2ã€å¦‚æžœåœ¨ style ä¸­è®¾ç½®äº† statusBarColorï¼Œåˆ™ä¼šè¦†ç›– colorPrimaryDark çš„å½±å“ï¼Œå³ï¼šçŠ¶æ€æ çš„é¢œè‰²å°†æ˜¯ statusBarColorã€‚ è§†å›¾å±‚çº§ getParentï¼šèŽ·å–ä¸Šä¸€çº§å®¹å™¨ã€‚getRootViewï¼š èŽ·å–é¡¶çº§è§†å›¾ ecorViewã€‚getWindow().getDecorView()ï¼šèŽ·å–é¡¶çº§è§†å›¾ DecorViewã€‚findViewById(android.R.id.content)ï¼šèŽ·å– Xml æ ¹å¸ƒå±€çš„çˆ¶å®¹å™¨ã€‚å¯æƒ³è€ŒçŸ¥ï¼Œä¸åŒ…æ‹¬çŠ¶æ€æ ã€æ ‡é¢˜æ ï¼ˆActionBarï¼‰ã€å¯¼èˆªæ ã€‚å¯¹äºŽè§†å›¾å±‚çº§ï¼Œå¦‚æžœè¦æ·±å…¥äº†è§£çš„è¯ï¼Œè¯·å‚è€ƒè¿™ç¯‡æ–‡ç« &gt;&gt;ã€‚ å‚è€ƒèµ„æ–™1.Android å±å¹•åæ ‡ç³»2.å¾—åˆ°viewåæ ‡çš„å„ç§æ–¹æ³•]]></content>
      <categories>
        <category>AndroidåŠ¨ç”»åŸºç¡€</category>
      </categories>
      <tags>
        <tag>åæ ‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[DecimalFormatä½¿ç”¨è¯¦è§£]]></title>
    <url>%2F2018%2F08%2F11%2FDecimalFormat%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[äº§å“ç‹—çš„éœ€æ±‚ï¼šè¦æ±‚å®¢æˆ·ç«¯æ‹¿åˆ°æœåŠ¡å™¨è¿”å›žçš„æ•°æ®åŽï¼Œä»¥æœ€å¤šä¿ç•™2ä½å°æ•°çš„å½¢å¼å±•ç¤ºè¯¥æ•°æ®ã€‚ä¾‹å¦‚ï¼š2.247==&gt;2.25ã€2.20==&gt;2.2ã€‚ æ‹¿åˆ°è¿™ä¸ªéœ€æ±‚åŽï¼Œå½“ç„¶æœ€å…ˆè€ƒè™‘çš„æ˜¯ä½¿ç”¨String.format(&quot;%.2f&quot;, 2.20),å¯æ˜¯ç»“æžœå´æ˜¯ï¼šå¾ˆæ˜¾ç„¶ï¼ŒString.formatçš„å½¢å¼åªèƒ½é€‚ç”¨äºŽå›ºå®šçš„å°æ•°ä¿ç•™éœ€æ±‚ã€‚ä¹‹åŽç¬”è€…åœ¨ç½‘ä¸Šæœç´¢äº†ä¸€åœˆï¼Œå‘çŽ°ä¸»è¦æœ‰DecimalFormatã€BigDecimalã€NumberFormatè¿™å‡ ç§æ–¹æ¡ˆã€‚é‰´äºŽå®ƒä»¬çš„åŠŸèƒ½ä¸€æ ·ï¼Œæœ¬æ–‡å°±å¯¹DecimalFormatåšä¸€ç•ªç ”ç©¶ã€‚ DecimalFormat ä¸­çš„ 0 å’Œ #12345678910111213141516171819202122232425262728293031323334353637383940import java.text.DecimalFormat;public class DecimalFormatTest&#123;public static void main(String[]args)&#123;DecimalFormat df1,df2;System.out.println(&quot;æ•´æ•°éƒ¨åˆ†0/#çš„åŒºåˆ«&quot;);df1 = new DecimalFormat(&quot;#.00&quot;);df2 = new DecimalFormat(&quot;0.00&quot;);System.out.println(df1.format(0.1)); // .10System.out.println(df2.format(0.1)); // 0.10 System.out.println(&quot;å°æ•°éƒ¨åˆ†0/#çš„åŒºåˆ«&quot;);df1 = new DecimalFormat(&quot;0.00&quot;);df2 = new DecimalFormat(&quot;0.##&quot;);System.out.println(df1.format(0.1)); // 0.10System.out.println(df2.format(0.1)); // 0.1System.out.println(df1.format(0.006)); // 0.01System.out.println(df2.format(0.006)); // 0.01System.out.println(&quot;3ã€æ•´æ•°éƒ¨åˆ†æœ‰å¤šä½&quot;);df1 = new DecimalFormat(&quot;0.00&quot;);df2 = new DecimalFormat(&quot;#.00&quot;);System.out.println(df1.format(2)); // 2.00System.out.println(df2.format(2)); // 2.00System.out.println(df1.format(20)); // 20.00System.out.println(df2.format(20)); // 20.00System.out.println(df1.format(200)); // 200.00System.out.println(df2.format(200)); // 200.00&#125;&#125; ç»“è®ºï¼š1ã€å°æ•°éƒ¨åˆ† #ä»£è¡¨æœ€å¤šæœ‰å‡ ä½ï¼Œ0ä»£è¡¨å¿…é¡»æœ‰ä¸”åªèƒ½æœ‰å‡ ä½ã€‚.00 è¡¨ç¤ºæœ€ç»ˆç»“æžœæœ‰ä¸¤ä½å°æ•°,æ²¡æœ‰åˆ™è¡¥0ï¼Œå¤šäº†å°±å››èˆäº”å…¥ç¬¬ä¸‰ä¸ªå°æ•°ã€‚.## è¡¨ç¤ºæœ€ç»ˆç»“æžœæœ€å¤šæœ‰ä¸¤ä½å°æ•°ï¼Œä¸€ä½æˆ–è€…æ²¡æœ‰éƒ½å¯ä»¥ï¼Œå¤šäº†åŒæ ·å››èˆäº”å…¥ç¬¬ä¸‰ä½ã€‚2ã€æ•´æ•°éƒ¨åˆ† 0 å’Œ #ã€‚å½“æ•´æ•°éƒ¨åˆ†ä¸º0æ—¶ï¼Œæ¯”å¦‚ 0.1ï¼Œ# æ­¤æ—¶è®¤ä¸ºæ•´æ•°éƒ¨åˆ†ä¸å­˜åœ¨ï¼Œæ‰€ä»¥ä¸å†™ ã€‚0 è®¤ä¸ºæ²¡æœ‰è‡³å°‘ä¹Ÿå¾—ä¸€ä½ï¼Œå†™ä¸Š0ã€‚ï¼ˆè¿™è·Ÿä¸Šé¢ç¬¬ä¸€éƒ¨åˆ†çš„è¡¨çŽ°æ˜¯ä¸€è‡´çš„ï¼š# æœ‰å°±å†™ï¼Œæ²¡æœ‰å°±ä¸å†™ï¼›0 å¿…é¡»æœ‰ï¼Œæ²¡æœ‰å°±è¡¥0ã€‚ï¼‰3ã€æ•´æ•°éƒ¨åˆ†æœ‰å¤šä½æ—¶ï¼š 2ï¼›20ï¼›200ã€‚ç”±ä¸Šé¢çš„ç»“æžœå¯ä»¥çœ‹å‡º 0å’Œ#å¯¹æ•´æ•°éƒ¨åˆ†å¤šä½æ—¶çš„å¤„ç†æ˜¯ä¸€è‡´çš„ï¼Œå°±æ˜¯æœ‰å‡ ä½å†™å¤šå°‘ä½ã€‚ï¼ˆè¿™è·Ÿä¸Šé¢ä¸¤éƒ¨åˆ†çš„è¡¨çŽ°æ˜¯ä¸ä¸€è‡´çš„ åœ¨æœ‰å¤šä½æ—¶ï¼Œ0å’Œ#éƒ½æ²¡æœ‰åŒ¹é…ä½æ•°ï¼Œè€Œæ˜¯æœ‰å¤šå°‘å†™å¤šå°‘ã€‚ï¼‰é€šå¸¸ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„å¤„ç†æ–¹å¼æœ‰ï¼š 0.00 æˆ–è€… 0.## ã€‚å®žè·µï¼šå¯¹äºŽé—®é¢˜ä¸­çš„2.247==&gt;2.25ã€2.20==&gt;2.2ï¼Œé‡‡ç”¨DecimalFormatå®žçŽ°å¦‚ä¸‹ï¼š1new DecimalFormat(&quot;0.##&quot;).format(dd); é—®é¢˜å»¶ä¼¸1ã€DecimalFormatå¯¹æ•°å€¼æ ¼å¼åŒ–çš„èˆå…¥é—®é¢˜â€”â€”RoundingModeã€‚2ã€æ¶å¿ƒçš„0.5å››èˆäº”å…¥é—®é¢˜ã€‚å¯¹äºŽæ­¤æ¡é—®é¢˜ï¼Œç¬”è€…ä½¿ç”¨çš„æ–¹å¼æ˜¯æ–‡ä¸­æ‰€æåŠçš„åœ¨å…·ä½“æ•°æ®åŽåŠ ä¸Š0.000001ã€‚3ã€String.formatå¯¹äºŽæµ®ç‚¹åž‹æ•°æ®çš„å±•ç¤ºé—®é¢˜ã€‚æ³¨æ„åœ¨ç²¾åº¦è¦æ±‚é«˜çš„æƒ…å†µä¸‹ï¼ŒString.formatä¸­ä½¿ç”¨çš„æµ®ç‚¹æ•°å¿…é¡»æ˜¯åŒç²¾åº¦çš„ï¼Œè¿™æ ·æ‰èƒ½ç¡®ä¿å››èˆäº”å…¥çš„è§„åˆ™æ­£ç¡®ã€‚æ¯”å¦‚ï¼š1System.out.println(String.format(&quot;%.2f&quot;, 2.245f)); æ‰“å°çš„ç»“æžœæ˜¯ 2.24ï¼Œé”™è¯¯ã€‚å¦‚æžœæ˜¯è¿™æ ·ï¼š1System.out.println(String.format(&quot;%.2f&quot;, 2.245)); æ‰“å°çš„ç»“æžœå°±æ˜¯ 2.25ï¼Œæ­£ç¡®ã€‚ä¸ºä»€ä¹ˆä¼šè¿™æ ·å‘¢ï¼Ÿè¿™é‡Œæ¶‰åŠåˆ°ç²¾åº¦æŸè€—çš„é—®é¢˜ã€‚åœ¨String.format(&quot;%.2f&quot;, 2.245f)ä¸­æŽ¥å—çš„æ•°å€¼åº”è¯¥æ˜¯doubleç±»åž‹çš„ï¼Œæ‰€ä»¥2.245f å®žé™…ä¸Šæ˜¯è¢«è½¬æ¢ä¸ºäº†doubleç±»åž‹ã€‚è€Œ java å°†2.245f å¼ºåˆ¶è½¬åŒ–ä¸ºdoubleç±»åž‹åŽï¼Œå¾—åˆ°çš„å®žé™…doubleç±»åž‹å€¼ä¸ºï¼š2.244999885559082ã€‚]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>DecimalFormat</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ç”±View.post()æ–¹æ³•å¼•å‘çš„æƒ³è±¡]]></title>
    <url>%2F2018%2F07%2F21%2F%E7%94%B1View-post-%E6%96%B9%E6%B3%95%E5%BC%95%E5%8F%91%E7%9A%84%E6%83%B3%E8%B1%A1%2F</url>
    <content type="text"><![CDATA[å¦‚é¢˜ï¼Œç¬”è€…åœ¨æƒ³è¿™ä¸ªæ ‡é¢˜çš„æ—¶å€™æ€è€ƒäº†å¾ˆä¹…ï¼Œä¸çŸ¥é“åº”è¯¥å–ä¸€ä¸ªä»€ä¹ˆæ ·çš„æ ‡é¢˜æ‰èƒ½æ¶µç›–å…¨æœ¬ç¯‡è¦æ¶‰åŠçš„å†…å®¹ã€‚ç»žå°½è„‘å­ï¼Œæœ€ç»ˆç¡®å®šèµ·è¿™ä¸ªä¸ç—›ä¸ç—’çš„æ ‡é¢˜ã€‚åŽŸå› æ˜¯ï¼Œå†™è¿™ç¯‡æ–‡ç« ä¹‹å‰çš„ä¸€ç³»åˆ—ç›¸å…³ç–‘æƒ‘å°±æ˜¯ä»ŽView.post()å¼€å§‹çš„ã€‚æœ¬ç¯‡è¦æŽ¢ç©¶è¿™ä¹ˆå‡ ä¸ªé—®é¢˜ï¼š1ã€éƒ½çŸ¥é“éžé™æ€å†…éƒ¨ç±»å’ŒåŒ¿åç±»ä¼šå¼•å‘å†…å­˜æ³„éœ²ï¼Œå¹¶ä¸”æˆ‘ä»¬ä¹ŸçŸ¥é“å¦‚ä½•å–é¿å…è¿™ä¸ªé—®é¢˜çš„å‘ç”Ÿï¼Œä½†æ˜¯æ€Žæ ·åšå¾—æ›´åŠ å®Œç¾Žå‘¢ï¼Ÿ2ã€View.Post()ä¸­çš„runæ–¹æ³•å’ŒHandler.post()æ–¹æ³•ä¸­çš„runæ–¹æ³•è¿è¡Œçº¿ç¨‹æœ‰ä»€ä¹ˆä¸åŒå‘¢ï¼Ÿ3ã€View.Post()ä¸­çš„runæ–¹æ³•åœ¨æ•´ä¸ªActivityçš„ç”Ÿå‘½å‘¨æœŸçš„é‡Œå¤„åœ¨å“ªä¸ªä½ç½®å‘¢ï¼Ÿå¥½ï¼Œä»¥ä¸Šä¸‰ä¸ªé—®é¢˜å°±æ˜¯æˆ‘è¦æ€»ç»“çš„é‡ç‚¹äº†ã€‚æ³¨æ„ï¼Œä¸‹é¢å¯¹postæ–¹æ³•å°†åšçš„æ€»ç»“ï¼Œå¯¹äºŽpostDelayåŒæ ·é€‚ç”¨ã€‚ é—®é¢˜ä¸€çš„æƒ…å†µè¿™ä¸ªé—®é¢˜å‰é¢è¯´è¿‡æˆ‘ä»¬çŸ¥é“å¦‚ä½•åŽ»é¿å…å®ƒçš„å‘ç”Ÿï¼Œé¿å…çš„æ–¹æ³•å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ä½†æ˜¯ï¼Œå¯¹äºŽçœŸæ­£çš„ç”Ÿäº§çŽ¯å¢ƒï¼Œè¿™äº›è¿˜æ˜¯ä¸å¤Ÿçš„ã€‚æ‰€å¼•æ–‡ç« ä¸­æ‰€æè™½ç„¶é¿å…äº† Activity æ³„æ¼ï¼Œä¸è¿‡ Looper çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ä¸­è¿˜æ˜¯å¯èƒ½ä¼šæœ‰å¾…å¤„ç†çš„æ¶ˆæ¯ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ Activity çš„ Destroy æ—¶æˆ–è€… Stop æ—¶åº”è¯¥ç§»é™¤æ¶ˆæ¯é˜Ÿåˆ—MessageQueue ä¸­çš„æ¶ˆæ¯ã€‚ä¸‹é¢å‡ ä¸ªæ–¹æ³•éƒ½å¯ä»¥ç§»é™¤ Messageï¼š123456789public final void removeCallbacks(Runnable r);public final void removeCallbacks(Runnable r, Object token);public final void removeCallbacksAndMessages(Object token);public final void removeMessages(int what);public final void removeMessages(int what, Object object); ä»¥ä¸Šè®¨è®ºçš„å†…å®¹è™½æœªæåŠView.post()ç³»åˆ—ï¼Œä½†æ˜¯å¯¹äºŽView.post()ç³»åˆ—åŒæ ·å­˜åœ¨å†…å­˜æ³„éœ²çš„é—®é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨åŒæ ·çš„æ–¹å¼é¿å…ï¼Œä½†æ˜¯ä¹‹åŽæˆ‘ä»¬ä¾ç„¶è¦è®°ä½removeCallbacks()å™¢ã€‚ é—®é¢˜äºŒçš„æƒ…å†µè¯·å…è®¸æˆ‘ç›´æŽ¥ä»ŽStack Overflowç²˜è¿‡æ¥å§(åˆ«æ‰“æˆ‘ðŸ˜œ)According to the documentation of Handler.postDelayed(Runnable r, long delayMillis): Causes the Runnable r to be added to the message queue, to be run after the specified amount of time elapses. The runnable will be run on the thread to which this handler is attached. On the other hand View.postDelayed(Runnable action, long delayMillis): Causes the Runnable to be added to the message queue, to be run after the specified amount of time elapses. The runnable will be run on the user interface thread. é—®é¢˜ä¸‰çš„æƒ…å†µæŽ¢ç©¶è¿™ä¸ªé—®é¢˜ä¸»è¦æ˜¯ä¸ºäº†ä»¥åŽåœ¨post(new Runnable(){â€¦â€¦})çš„runæ–¹æ³•ä¸­å†™é€»è¾‘æ—¶ï¼Œå¯ä»¥æ¸…æ™°çš„çŸ¥é“å®ƒåœ¨Activityçš„ç”Ÿå‘½å‘¨æœŸä¸­æ‰€å¤„çš„ä½ç½®ï¼ˆè¿™æ˜¯å¾ˆå¿…è¦çš„ï¼Œæ¯”å¦‚AnimationDrawableçš„start()æ–¹æ³•åªèƒ½åœ¨onStart()ä¸­æˆ–è€…ä¹‹åŽæ‰§è¡Œæ‰æœ‰æ•ˆï¼‰ã€‚ä¸ºäº†éªŒè¯ï¼Œæˆ‘ä»¬ç›´æŽ¥ä¸Šä»£ç å§ï¼š123456789101112131415161718192021222324252627282930313233343536373839404142@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;super.onCreate(savedInstanceState);setContentView(R.layout.activity_main);tvContent=findViewById(R.id.tvContent);tvContent.post(new Runnable() &#123;@Overridepublic void run() &#123;Log.d(TAG, &quot;run&quot;);&#125;&#125;);&#125;@Overrideprotected void onStart() &#123;super.onStart();Log.d(TAG, &quot;onStart&quot;);&#125;@Overrideprotected void onStop() &#123;super.onStop();Log.d(TAG, &quot;onStop&quot;);&#125;@Overrideprotected void onPause() &#123;super.onPause();Log.d(TAG, &quot;onPause&quot;);&#125;@Overrideprotected void onResume() &#123;super.onResume();Log.d(TAG, &quot;onResume&quot;);&#125;@Overridepublic void onAttachedToWindow() &#123;super.onAttachedToWindow();Log.d(TAG, &quot;onAttachedToWindow&quot;);&#125;@Overrideprotected void onDestroy() &#123;super.onDestroy();Log.d(TAG, &quot;onDestroy&quot;);&#125; ä»£ç å¾ˆç®€å•ï¼Œè¿™é‡Œä¸å¤šè§£é‡Šäº†ï¼Œç›´æŽ¥çœ‹è¿è¡Œç»“æžœå§ï¼š1234onStartonResumeonAttachedToWindowrun ç»“è®ºå¾ˆæ˜Žæ˜¾äº†ï¼Œæ­¤æ—¶çš„runæ–¹æ³•å¤„åœ¨onAttachedToWindowæ–¹æ³•ä¹‹åŽã€‚é¢˜å¤–è¯ï¼Œå¯¹äºŽonAttachedToWindowæ–¹æ³•Googleçš„è§£é‡Šæ˜¯ä¸‹é¢è¿™æ ·çš„ï¼š This is called when the view is attached to a window. At this point it has a Surface and will start drawing. Note that this function is guaranteed to be called before onDraw(android.graphics.Canvas), however it may be called any time before the first onDraw â€“ including before or after onMeasure(int, int).If you override this method you must call through to the superclass implementation. å¤§æ¦‚æ„æ€æ˜¯onAttachedToWindowå¯ä»¥ä¿è¯åœ¨é¦–ä¸ªondrawæ–¹æ³•è°ƒç”¨å‰è¢«è°ƒç”¨ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆæ”¾å¿ƒåœ°å°†ä¸€äº›ç»˜åˆ¶ä¹‹å‰çš„åˆå§‹åŒ–æ“ä½œæ”¾åœ¨onAttachedToWindowé‡Œé¢ã€‚ é—®é¢˜å»¶ä¼¸Contextçš„åº”ç”¨åœºæ™¯å¯¹äºŽApplicationï¼ŒServiceï¼ŒActivityä¸‰è€…çš„Contextçš„åº”ç”¨åœºæ™¯æ˜¯æ€Žæ ·çš„å‘¢ï¼Ÿç›´æŽ¥ç›—ç”¨ä¸€å¼ å›¾å§ï¼š å¤§å®¶æ³¨æ„çœ‹åˆ°æœ‰ä¸€äº› NO ä¸Šæ·»åŠ äº†ä¸€äº›æ•°å­—ï¼Œå…¶å®žè¿™äº›ä»Žèƒ½åŠ›ä¸Šæ¥è¯´æ˜¯ YES ï¼Œä½†æ˜¯ä¸ºä»€ä¹ˆè¯´æ˜¯ NO å‘¢ï¼Ÿä¸‹é¢é€ä¸ªè§£é‡Šä¸€ä¸‹ï¼šæ•°å­—1ï¼šå¯åŠ¨ Activity åœ¨è¿™äº›ç±»ä¸­æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ task ï¼ˆæ­¤ç±»åœºæ™¯æµ‹è¯•è¿‡ç¨‹ä¸­ï¼Œç¬”è€…å‘çŽ° SDK å·²è‡ªåŠ¨ä¸º Intent åŠ ä¸Šäº† FLAG_ACTIVITY_NEW_TASK æ ‡ç­¾ï¼Œä¸éœ€è¦æ‰‹åŠ¨æ·»åŠ ï¼‰ã€‚ä¸€èˆ¬æƒ…å†µä¸æŽ¨èã€‚æ•°å­—2ï¼šåœ¨è¿™äº›ç±»ä¸­åŽ»layout inflateæ˜¯åˆæ³•çš„ï¼Œä½†æ˜¯ä¼šä½¿ç”¨ç³»ç»Ÿé»˜è®¤çš„ä¸»é¢˜æ ·å¼ï¼Œå¦‚æžœä½ è‡ªå®šä¹‰äº†æŸäº›æ ·å¼å¯èƒ½ä¸ä¼šè¢«ä½¿ç”¨ã€‚æ•°å­—3ï¼šåœ¨ receiver ä¸º null æ—¶å…è®¸ï¼Œåœ¨ 4.2 æˆ–ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­ï¼Œç”¨äºŽèŽ·å–é»æ€§å¹¿æ’­çš„å½“å‰å€¼ã€‚ï¼ˆå¯ä»¥æ— è§†ï¼‰æ³¨ï¼šContentProviderã€BroadcastReceiverä¹‹æ‰€ä»¥åœ¨ä¸Šè¿°è¡¨æ ¼ä¸­ï¼Œæ˜¯å› ä¸ºåœ¨å…¶å†…éƒ¨æ–¹æ³•ä¸­éƒ½æœ‰ä¸€ä¸ª context ç”¨äºŽä½¿ç”¨ã€‚å‚è€ƒé“¾æŽ¥&gt;&gt;]]></content>
      <categories>
        <category>Android å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>å†…å­˜æ³„éœ²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidæ¼”åŒ–åŽ†å²]]></title>
    <url>%2F2018%2F06%2F21%2FAndroid%E5%90%84%E7%89%88%E6%9C%AC%E4%BB%A3%E5%8F%B7%E3%80%81%E7%89%88%E6%9C%AC%E5%8F%B7%E3%80%81API%E7%BA%A7%E5%88%AB%E3%80%81%E5%8F%91%E5%B8%83%E6%97%B6%E9%97%B4%E5%AF%B9%E7%85%A7%E8%A1%A8%2F</url>
    <content type="text"><![CDATA[Androidå¼€å‘è¿‡ç¨‹ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°ç±»ä¼¼äºŽè¿™ä¸ªç‰ˆæœ¬å·å¯¹åº”çš„APIçº§åˆ«æ˜¯å¤šå°‘ï¼Ÿè¿™ä¸ªAPIçº§åˆ«å¯¹åº”çš„ç‰ˆæœ¬å·æ˜¯å¤šå°‘ï¼Ÿè¿™æ ·çš„é—®é¢˜ã€‚æœ¬æ–‡å°±ä»¥æ­¤ä¸ºå‡ºå‘ç‚¹ï¼Œè¯¦ç»†çš„ä»‹ç»ä¸€ä¸‹Androidçš„ç‰ˆæœ¬æ¼”åŒ–è¿›ç¨‹ã€‚ä¸€æ˜¯ä¸ºäº†ä¸‹æ¬¡å†é‡åˆ°å‰é¢è¯´çš„é—®é¢˜æ—¶èƒ½å¤Ÿå¿«é€ŸæŸ¥æ‰¾æœ¬æ–‡å¾—åˆ°ç­”æ¡ˆï¼ŒäºŒæ˜¯è®©è‡ªå·±å¯¹Androidå‘å±•åŽ†ç¨‹æœ‰ä¸€ä¸ªæ¸…æ™°çš„æ€è·¯ã€‚ å¯¹ç…§è¡¨ ç‰ˆæœ¬å· APIçº§åˆ« ä»£å· å‘å¸ƒæ—¶é—´ Android 9.0 28 P 2018-3 Android 8.1 27 Oreo Android 8.0 26 Oreo 2017-3 Android 7.1.1 25 Nougat 2016-10 Android 7.0 24 Nougat 2016-08 Android 6.0 23 Marshmallow 2015-10 Android 5.1 22 Lollipop 2015-03 Android 5.0 21 Lollipop 2014-11 Android 4.4W 20 KitKat 2014-06 Android 4.4 19 KitKat 2013-10 Android 4.3 18 Jelly Bean 2013-07 Android 4.2 17 Jelly Bean 2012-11 Android 4.1 16 Jelly Bean 2012-07 Android 4.0.3 15 Ice Cream Sandwich 2011-12 Android 4.0 14 Ice Cream Sandwich 2011-10 Android 3.2 13 Honeycomb 2011-07 Android 3.1 12 Honeycomb 2011-05 Android 3.0 11 Honeycomb 2011-02 Android 2.3.3 10 Gingerbread 2011-02 Android 2.3 9 Gingerbread 2010-12 Android 2.2 8 Froyo 2010-05 Android 2.1 7 Eclair 2010-01 Android 2.0.1 6 Eclair 2009-12 Android 2.0 5 Eclair 2009-10 Android 1.6 4 Donut 2009-09 Android 1.5 3 Cupcake 2009-04 Android 1.1 2 2009-02 Android 1.0 1 2008-09 Android é‡è¦åŽ†å²ç‰ˆæœ¬åŠŸèƒ½Android 7.0 å¤šè¯­è¨€åŒºåŸŸæ”¯æŒï¼Œæ›´å¤šè¯­è¨€ å¤šçª—å£æ”¯æŒ æ–°å¢žçš„è¡¨æƒ…ç¬¦å·see more>> Android 6.0 è¿è¡Œæ—¶æƒé™åŠå…¶ç®¡ç† ä½Žç”µè€—æ¨¡å¼å’Œåº”ç”¨å¾…æœºæ¨¡å¼ æ–‡æœ¬é€‰æ‹© WLAN å’Œç½‘ç»œè¿žæŽ¥å˜æ›´ æŒ‡çº¹èº«ä»½éªŒè¯ ä¸»é¢˜åŒ– ColorStateListsee more>> Android 5.0 Material Design å…¨æ–°çš„é€šçŸ¥ä¸­å¿ƒè®¾è®¡ æ”¯æŒ64ä½ARTè™šæ‹Ÿæœºsee more>> Android 4.4 å…¨å±æ²‰æµ¸æ¨¡å¼ é€æ˜Žç³»ç»Ÿ UI æ ·å¼ ç”¨äºŽåŠ¨ç”»åœºæ™¯çš„è½¬åœºæ¡†æž¶ å±å¹•å½•åˆ¶ æ­¥æµ‹å™¨å’Œè®¡æ­¥å™¨see more>> å…¶å®ƒçŸ¥è¯†Android ä¸­å¦‚ä½•é€‰æ‹© compileSdkVersion, minSdkVersion å’Œ targetSdkVersionå‚è€ƒæ–‡ç« ä¸€å‚è€ƒæ–‡ç« äºŒ å‚è€ƒèµ„æ–™Androidå¹³å°ç‰ˆæœ¬å¯¹æ¯”]]></content>
      <categories>
        <category>Android å…¶å®ƒ</category>
      </categories>
      <tags>
        <tag>Android æ¼”åŒ–åŽ†å²</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[RecycleViewæŽ¢ç©¶ï¼ˆä¸€ï¼‰ï¼šæ·»åŠ å¤´å°¾å¸ƒå±€]]></title>
    <url>%2F2018%2F05%2F20%2FRecycleView%E6%8E%A2%E7%A9%B6%EF%BC%88%E4%B8%80%EF%BC%89%EF%BC%9A%E6%B7%BB%E5%8A%A0%E5%A4%B4%E5%B0%BE%E5%B8%83%E5%B1%80%2F</url>
    <content type="text"><![CDATA[ç¬”è€…ä½¿ç”¨RecycleViewä¹Ÿæœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œæ¯æ¬¡é‡åˆ°éœ€è¦ä¸ºRecycleViewæ·»åŠ å¤´å°¾å¸ƒå±€çš„æ—¶å€™ï¼Œéƒ½ä¼šæ˜¯ä¸€é˜µå¤´ç–¼ã€‚ä¹‹å‰æˆ‘çš„åšæ³•æ˜¯ç›´æŽ¥ç»™ä¾èµ–çš„å®žä½“é›†åˆæ·»åŠ å¤´å°¾ç±»åž‹çš„Item Dataã€‚æ‰“è„¸çš„è¯´ï¼Œè¿™æ˜¯åœ¨èµ¶éœ€æ±‚çš„ä¸€ç§æ— èµ–åšæ³•ã€‚å¾—ç›ŠäºŽæœ€è¿‘é¡¹ç›®ä¸æ˜¯å¾ˆç´§å¼ ï¼Œæ‰€ä»¥æŠ½ä¸ªå‘¨æœ«çš„æ—¶é—´å¥½å¥½ç ”ç©¶ä¸€ä¸‹è¿™ä¸€å—çš„çŸ¥è¯†ã€‚è¨€å½’æ­£ä¼ ï¼Œæœ¬ç¯‡æ–‡ç« æˆ‘è¦å®žçŽ°çš„æ•ˆæžœæ˜¯ç®€æ´é«˜æ•ˆåœ°ä¸ºRecycleViewæ— é™å¢žåŠ å¤´å°¾å¸ƒå±€ã€‚ å…·ä½“æ€è·¯å¦‚ä¸‹1ã€æ–°å»ºä¸€ä¸ªHeaderFooterWrapAdapterè£…é¥°ç±»ï¼Œå®ƒç»§æ‰¿äºŽRecycleView.Adapterï¼Œè´Ÿè´£æ‹“å±•æ™®é€šRecycleView.Adapterå¯¹è±¡ï¼ˆè¢«è£…é¥°å¯¹è±¡ï¼‰çš„åŠŸèƒ½ã€‚2ã€åœ¨onCreateViewHolderã€onBindViewHolderã€getItemViewTypeã€getItemCountè¿™å‡ ä¸ªæ–¹æ³•åŒºåˆ†æœ‰æ— å¤´å°¾å¸ƒå±€ã€‚å¦‚æžœæ²¡æœ‰å¤´å°¾å¸ƒå±€ï¼Œä¸€å¾‹æŒ‰ç…§è¢«è£…é¥°å¯¹è±¡çš„é€»è¾‘å¤„ç†ã€‚3ã€åœ¨onAttachedToRecyclerViewæ–¹æ³•å†…ï¼Œåšå¥½GridViewçš„é€‚é…ã€‚ ä¸‹é¢æˆ‘ä»¬å°±æŠŠä»¥ä¸Šçš„æ€è·¯è½¬åŒ–æˆå¯çˆ±çš„ä»£ç å§ã€‚ä¸€ã€æˆ‘ä»¬åº”è¯¥è®©HeaderFooterWrapAdapterç»§æ‰¿è‡ªRecycleView.Adapter,å¹¶ä¸”å®šä¹‰å¥½éœ€è¦çš„æˆå‘˜å¯¹è±¡ã€‚123456public class HeaderFooterWrapAdapter extends RecyclerView.Adapter &#123;RecyclerView.Adapter adapter;//è¢«è£…é¥°å¯¹è±¡private List&lt;View&gt; headerViews = new ArrayList&lt;&gt;();private List&lt;View&gt; footerViews = new ArrayList&lt;&gt;();â€¦â€¦&#125; äºŒã€é‡å†™RecyclerView.Adapterä¸­å‡ ä¸ªé‡è¦çš„æ–¹æ³•ã€‚ 1ã€åˆ¤æ–­itemä¸ªæ•°ã€‚1234567891011121314@Overridepublic int getItemCount() &#123;if (headerViews.size() != 0 &amp;&amp; footerViews.size() != 0)//åŒæ—¶åŠ äº†å¤´éƒ¨å’Œå°¾éƒ¨&#123;return adapter.getItemCount() + headerViews.size() + footerViews.size();&#125; else if (headerViews.size() != 0) &#123; //åªæœ‰å¤´éƒ¨return adapter.getItemCount() + headerViews.size();&#125; else if (footerViews.size() != 0) //åªæœ‰å°¾éƒ¨&#123;return adapter.getItemCount() + footerViews.size();&#125; else &#123;return adapter.getItemCount();&#125;&#125; 2ã€åŒºåˆ†Itemç±»åž‹ã€‚1234567891011121314@Overridepublic int getItemViewType(int position) &#123;if (headerViews.size() != 0) &#123;if (position &gt;= 0 &amp;&amp; position &lt; headerViews.size()) &#123;return headerViews.get(position).hashCode();&#125;&#125;if (footerViews.size() != 0) &#123;int i = position - headerViews.size() - adapter.getItemCount();if (i &gt;= 0)return footerViews.get(i).hashCode();&#125;return 0;&#125; 3ã€åˆ›å»ºItemã€‚ 12345678910111213public RecyclerView.ViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) &#123;for (View headerView : headerViews) &#123;if (headerView.hashCode() == viewType) &#123;return new HeaderViewHolder(headerView);&#125;&#125;for (View footerview : footerViews) &#123;if (footerview.hashCode() == viewType) &#123;return new FooterViewHolder(footerview);&#125;&#125;return adapter.onCreateViewHolder(parent, viewType);&#125; 4ã€ç»‘å®šæ•°æ®ã€‚1234567891011121314151617181920@Overridepublic void onBindViewHolder(@NonNull RecyclerView.ViewHolder holder, int position) &#123;if (headerViews.size() != 0 &amp;&amp; footerViews.size() != 0)//åŒæ—¶åŠ äº†å¤´éƒ¨å’Œå°¾éƒ¨&#123;if (position &gt;= headerViews.size() &amp;&amp; position &lt; headerViews.size() + adapter.getItemCount()) &#123;adapter.onBindViewHolder(holder, position - headerViews.size());&#125;&#125; else if (headerViews.size() != 0) &#123; //åªæœ‰å¤´éƒ¨if (position &gt;= headerViews.size()) &#123;adapter.onBindViewHolder(holder, position - headerViews.size());&#125;&#125; else if (footerViews.size() != 0) //åªæœ‰å°¾éƒ¨&#123;if (position &gt;= 0 &amp;&amp; position &lt; adapter.getItemCount()) &#123;adapter.onBindViewHolder(holder, position);&#125;&#125; else &#123;adapter.onBindViewHolder(holder, position);&#125;&#125; ä¸‰ã€æŽ¥ä¸‹æ¥é€‚é…GridViewï¼Œè¿™é‡Œä¸»è¦æ˜¯é€šè¿‡GridLayoutManagerçš„setSpanSizeLookupæ–¹æ³•åŠ¨æ€å¤„ç†å¤´å°¾å¸ƒå±€ã€‚ 1234567891011121314151617181920212223242526272829303132@Overridepublic void onAttachedToRecyclerView(@NonNull RecyclerView recyclerView) &#123;super.onAttachedToRecyclerView(recyclerView);final RecyclerView.LayoutManager layoutManager = recyclerView.getLayoutManager();if (layoutManager instanceof GridLayoutManager) &#123;((GridLayoutManager) layoutManager).setSpanSizeLookup(new GridLayoutManager.SpanSizeLookup() &#123;@Overridepublic int getSpanSize(int position) &#123;if (headerViews.size() != 0 &amp;&amp; footerViews.size() != 0) &#123;if (position &gt;= 0 &amp;&amp; position &lt; headerViews.size()) &#123;return ((GridLayoutManager) layoutManager).getSpanCount();&#125; else if (position &gt;= getItemCount() - footerViews.size() &amp;&amp; position &lt; getItemCount()) &#123;return ((GridLayoutManager) layoutManager).getSpanCount();&#125; else &#123;return 1;&#125;&#125; else if (headerViews.size() != 0) &#123;if (position &gt;= 0 &amp;&amp; position &lt; headerViews.size()) &#123;return ((GridLayoutManager) layoutManager).getSpanCount();&#125;return 1;&#125; else if (footerViews.size() != 0) &#123;if (position &gt;= getItemCount() - footerViews.size() &amp;&amp; position &lt; getItemCount()) &#123;return ((GridLayoutManager) layoutManager).getSpanCount();&#125;return 1;&#125;return 1;&#125;&#125;);&#125;&#125; å››ã€å®šä¹‰æ·»åŠ å¤´éƒ¨å’Œå°¾éƒ¨å¸ƒå±€çš„å…¬å¼€æ–¹æ³•ã€‚ 12345678910//æ·»åŠ å¤´å¸ƒå±€public void addHeaderView(View headerView) &#123;this.headerViews.add(headerView);notifyItemInserted(headerViews.size() - 1);&#125;//æ·»åŠ å°¾å¸ƒå±€public void addFooterView(View footerView) &#123;this.footerViews.add(footerView);notifyItemInserted(headerViews.size() + adapter.getItemCount() + footerViews.size() - 1);&#125; å¥½äº†ï¼Œä»¥ä¸Šå°±æ˜¯ä¸ºRecycleViewæ·»åŠ å¤´å°¾å¸ƒå±€çš„æ ¸å¿ƒä»£ç ã€‚è°ƒç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼Œä¼ªä»£ç å¦‚ä¸‹ã€‚12345678910MyAdapter myAdapter=....;....HeaderFooterWrapAdapter headerFooterWrapAdapter=new HeaderFooterWrapAdapter(myAdapter);headerFooterWrapAdapter.addFooterView(footerView01);headerFooterWrapAdapter.addFooterView(footerView02);headerFooterWrapAdapter.addFooterView(footerView03);headerFooterWrapAdapter.addHeaderView(headerView01);headerFooterWrapAdapter.addHeaderView(headerView02);headerFooterWrapAdapter.addHeaderView(headerView03);....... è¿™é‡Œæœ‰ä¸€ç‚¹éœ€è¦æ³¨æ„å°±æ˜¯Inflateåˆ›å»ºheaderViewæˆ–è€…footerViewæ—¶ï¼Œparentéœ€è¦ä¼ å…¥recyclerViewå¯¹è±¡æ‰èƒ½æ—¶å¸ƒå±€çš„é¡¶å±‚å±žæ€§èµ·æ•ˆæžœ,ä¾‹å¦‚ï¼š1View footerView = LayoutInflater.from(this).inflate(R.layout.footerview, rcv, false); å…³äºŽinflateçš„ä½¿ç”¨æŠ€å·§ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹è¿™ç¯‡æ–‡ç« ã€‚æœ€åŽï¼Œå†è´´ä¸€å¼ å®žçŽ°çš„æ•ˆæžœå›¾ç‰‡å§ï½ž å‚è€ƒèµ„æ–™å­¦ä¼šè‡ªå·±ç»™RecyclerViewæ·»åŠ Headerã€Footerå’ŒåŠ è½½æ›´å¤šå›žè°ƒ]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>RecycleView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PopupWindowä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2018%2F04%2F29%2FPopupWindow%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[PopupWindowæ˜¯android.widgetä¸­ä¸€ä¸ªå¼¹æ¡†æŽ§ä»¶ï¼Œä¸Žæ™®é€šdialogç›¸æ¯”ï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äºŽå¯ä»¥ä»»æ„æ”¹å˜å…¶åœ¨ç•Œé¢ä¸­çš„ä½ç½®ã€‚æœ¬ç¯‡æˆ‘ä»¬å°±æ¥å¥½å¥½ç ”ç©¶ä¸€ä¸‹å®ƒçš„ç”¨æ³•å§ã€‚ åˆ›å»ºPopupWindowæœ‰ä¸¤ç§åˆ›å»ºæ–¹å¼ï¼š1ã€é€šè¿‡è§†å›¾åˆ›å»ºï¼Œè¿™æ˜¯æœ€å¸¸ç”¨çš„æ–¹æ³•ã€‚12345678910PopupWindow () // åˆ›å»ºä¸€ä¸ªç©ºçš„PopupWindowPopupWindow (View contentView) PopupWindow (int width, int height)PopupWindow (View contentView, // PopupWindowçš„å†…å®¹View, ç›¸å½“äºŽsetContentViewint width, // å®½, ç›¸å½“äºŽsetwidth()int height,// é«˜, ç›¸å½“äºŽsetHeightboolean focusable)//æ˜¯å¦å¯èŽ·å–ç„¦ç‚¹, ç›¸å½“äºŽsetFocusable() 2ã€é€šè¿‡ä¸Šä¸‹æ–‡åˆ›å»ºï¼Œä¸€èˆ¬ä¸ä½¿ç”¨ã€‚12345678910111213PopupWindow (Context context)PopupWindow (Context context, AttributeSet attrs)PopupWindow (Context context, AttributeSet attrs, int defStyleAttr)PopupWindow (Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) åˆ›å»ºPopuWindowå¿…è¦çš„ä¸‰ä¸ªæ¡ä»¶:void setHeight (int height) // å› ä¸ºPopupWindowæ²¡æœ‰é»˜è®¤å¸ƒå±€æ‰€ä»¥å¿…é¡»æŒ‡å®šå®½é«˜void setWidth (int width)void setContentView (View contentView) // éœ€è¦æ˜¾ç¤ºçš„å†…å®¹ æ³¨æ„PopupWindowæŒ‡å®šå®½é«˜æ—¶ç”¨LayoutParams.WRAP_CONTENTåŒ…è£¹å¸ƒå±€ï¼Œ è¿™æ—¶å¹¶ä¸æ€»æ˜¯å¸ƒå±€å¤šå¤§å°±æ˜¾ç¤ºå¤šå¤§ï¼Œä¼°è®¡æ˜¯BUGå§ã€‚æ‰€ä»¥é‡åˆ°è¿™ç§æƒ…å†µï¼Œå…·ä½“çš„PopupWindowå¤§å°æˆ‘ä»¬è¿˜æ˜¯éœ€è¦æ‰‹åŠ¨è®¡ç®—ã€‚ æ˜¾ç¤ºæ˜¾ç¤ºPopupWindowå¯ä»¥åˆ†ä¸ºä¸¤ç§æ–¹å¼: 1ã€é™„ç€æŸä¸ªæŽ§ä»¶showAsDropDownã€‚é»˜è®¤æ˜¯PopupWindowçš„å·¦ä¸Šè§’å¯¹å…¶æŽ§ä»¶çš„å·¦ä¸‹è§’,æˆ–è€…è®¾ç½®Gravity.RIGHT, PopupWindowçš„å³ä¸Šè§’å¯¹é½æŽ§ä»¶çš„å³ä¸‹è§’ã€‚ä¸å­˜åœ¨Gravity.TOPæˆ–Gravity.BOTTOMæ•ˆæžœã€‚12345void showAsDropDown (View anchor) //å¼¹çª—æ˜¾ç¤ºåœ¨anchoræŽ§ä»¶å·¦ä¸‹æ–¹void showAsDropDown (View anchor, int xoff, int yoff)//ä»¥æŽ§ä»¶å·¦ä¸‹è§’ä¸ºåŽŸç‚¹çš„åç§»åæ ‡void showAsDropDown (View anchor,int xoff,int yoff,int gravity) //å¼¹çª—æ˜¾ç¤ºåœ¨æŽ§ä»¶çš„å·¦ä¸‹æ–¹è¿˜æ˜¯å³ä¸‹æ–¹, å‚æ•°Gravity.RIGHT/Gravity.LEFT. é»˜è®¤æ˜¯å·¦ä¸‹æ–¹ 2ã€è®¾ç½®å±å¹•åæ ‡showAtLocationã€‚å½“å‰çª—å£çš„ä»»æ„ä½ç½®(setClippingEnabledè®¾ç½®ä¸ºtureæ—¶ï¼Œä¸åŒ…æ‹¬çŠ¶æ€æ ã€‚)12345void showAtLocation (View parent, //åªè¦æ˜¯å±å¹•ä¸Šä»»æ„æŽ§ä»¶å¯¹è±¡å³å¯int gravity, //å±å¹•ä½ç½®int x, //åç§»åæ ‡int y) parent:è¯¥å±žæ€§åªè¦æ˜¯å½“å‰ä»»æ„æŽ§ä»¶å¯¹è±¡å³å¯(Viewå’ŒViewGroupéƒ½è¡Œ), å®˜æ–¹æ–‡æ¡£ä»‹ç»è¯¥å¯¹è±¡å‚æ•°ä¸»è¦æ˜¯ä¸ºäº†å¾—åˆ°è¯¥å¯¹è±¡çš„getWindowToken()æ–¹æ³•ã€‚éœ€è¦æ³¨æ„çš„æ˜¯å¤šæ¬¡è°ƒç”¨showæ–¹æ³•åªä¼šæ‰§è¡Œç¬¬ä¸€å¥1234mPopupWindow.showAtLocation(popupwindow, Gravity.TOP, 100, 0); // åªæœ‰è¯¥è¡Œç”Ÿæ•ˆmPopupWindow.showAtLocation(popupwindow, Gravity.LEFT, 100, 0);mPopupWindow.showAtLocation(popupwindow, Gravity.RIGHT, 100, 0);mPopupWindow.showAtLocation(popupwindow, Gravity.BOTTOM, 100, 0); éšè—PopupWindow1void dismiss () çŠ¶æ€å¤–éƒ¨è¢«ç‚¹å‡»å–æ¶ˆå¦‚æžœä¸ºtrueç‚¹å‡»PopupWindowå¤–éƒ¨åŒºåŸŸå¯ä»¥å–æ¶ˆPopupWindow1void setOutsideTouchable (boolean touchable) // è®¾ç½®å¤–éƒ¨æ˜¯å¦å¯è¢«ç‚¹å‡» ä½†æ˜¯åœ¨android6.0ä»¥ä¸‹è¿˜æ˜¯æ— æ³•ç‚¹å‡»å¤–éƒ¨å–æ¶ˆPopupwindow. å¯ä»¥é€šè¿‡è®¾ç½®èƒŒæ™¯æ¥è§£å†³è¿™ä¸ªBugã€‚1mPopupWindow.setBackgroundDrawable(new BitmapDrawable()); è§£å†³NavigationBaré‡å è¿™æ˜¯Android5.0(API22)åŽæ·»åŠ çš„æ–¹æ³•, é»˜è®¤ä¸ºtrueï¼Œä¸ºtrueæ—¶å°†ä¸ä¼šä¸Žå¯¼èˆªæ é‡å ã€‚1void setAttachedInDecor (boolean enabled) å¯èŽ·å–ç„¦ç‚¹ä¸€èˆ¬æŽ§ä»¶éƒ½ä¸éœ€è¦ç„¦ç‚¹ï¼Œä½†æ˜¯è¾“å…¥æ¡†EditTextéœ€è¦å…ˆèŽ·å–ç„¦ç‚¹æ‰èƒ½è¾“å…¥ã€‚ æœ€é‡è¦çš„æ˜¯å½“PopupWindowå¯èŽ·å–ç„¦ç‚¹æ—¶æŒ‰ä¸‹æ‰‹æœºè¿”å›žé”®å°†ä¸ä¼šé”€æ¯å½“å‰Activityè€Œæ˜¯å…³é—­å½“å‰PopupWindowã€‚æ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬è¿˜æ˜¯è®¾ç½®ä¸ºtrueï¼Œ æ›´åŠ ç¬¦åˆç”¨æˆ·æ“ä½œé€»è¾‘ã€‚è¯¥æ–¹æ³•ä¸ºtrueæ—¶åŒæ—¶æ‹¥æœ‰setOutsideTouchable(true)çš„ä½œç”¨ã€‚1void setFocusable (boolean focusable) é®ç›–é™„ç€View1void setOverlapAnchor (boolean overlapAnchor) PopupWindowå¯¹é½æ–¹å¼ä»ŽView anchorçš„å·¦ä¸‹è§’å˜æˆäº†å·¦ä¸Šè§’äº†ã€‚ çª—å£è£å‰ªPopupWindowé»˜è®¤æ˜¯ä¸ä¼šè¶…å‡ºå±å¹•è¾¹ç•Œçš„. ä½†æ˜¯å¦‚æžœè¯¥æ–¹æ³•ä¸ºfalseæ—¶ä¼šé‡‡ç”¨ç²¾å‡†ä½ç½®, èƒ½è¶…å‡ºå±å¹•èŒƒå›´.1void setClippingEnabled (boolean enabled) åŠ¨ç”»æ•ˆæžœè®¾ç½®åŠ¨ç”»å¯ä»¥è®¾ç½®popupWindowçš„æ˜¾ç¤ºå’Œéšè—åŠ¨ç”»ã€‚1void setAnimationStyle (int animationStyle) å¯ä»¥çœ‹åˆ°æ–¹æ³•æ˜¯ä¼ å…¥ä¸€ä¸ªStyleçš„æ ·å¼idï¼Œç¤ºä¾‹:1234&lt;style name=&quot;popupwindow_anim_style&quot;&gt;&lt;item name=&quot;android:windowEnterAnimation&quot;&gt;@anim/dialog_bottom_enter&lt;/item&gt;&lt;item name=&quot;android:windowExitAnimation&quot;&gt;@anim/dialog_bottom_exit&lt;/item&gt;&lt;/style&gt; åˆ†åˆ«ç”±ä¸¤ä¸ªå±žæ€§ç»„æˆ. ä¸¤ä¸ªå±žæ€§å„ä»£è¡¨ä¸€ä¸ªanimåŠ¨ç”»æ–‡ä»¶. è¿›å…¥å’Œé€€å‡ºåŠ¨ç”»è¿™æ˜¯åœ¨Android6.0(API 23)åŽåŠ å…¥çš„æ–¹æ³•. é…åˆMaterial Designçš„è½¬åœºåŠ¨ç”»ä½¿ç”¨.è¿›å…¥åŠ¨ç”»1void setEnterTransition (Transition enterTransition) é€€å‡ºåŠ¨ç”»1void setExitTransition (Transition exitTransition) è¾“å…¥æ¨¡å¼é’ˆå¯¹PopupWindowä¸­åŒ…å«EditTextæŽ§ä»¶. è¾“å…¥æ¨¡å¼1void setInputMethodMode (int mode) æ”¯æŒä¸‰ç§æ¨¡å¼ï¼š1ã€INPUT_METHOD_FROM_FOCUSABLE æ ¹æ®å¯å¦èŽ·å–ç„¦ç‚¹åˆ¤æ–­æ˜¯å¦å¯è¾“å…¥2ã€INPUT_METHOD_NEEDED å…è®¸è¾“å…¥3ã€INPUT_METHOD_NOT_NEEDED ä¸å…è®¸è¾“å…¥ è½¯é”®ç›˜æ¨¡å¼1void setSoftInputMode (int mode) // modeä¸ºWindowManager.LayoutParamsçš„softInputModeå¸¸é‡ softInputModeåŒ…å«ä¹ç§å–å€¼, å¯ç»„åˆä½¿ç”¨,åˆ†ä¸ºä¸¤ç±»:æ˜¾ç¤ºçŠ¶æ€æ¨¡å¼ SOFT_INPUT_STATE_UNSPECIFIED é»˜è®¤æ¨¡å¼ SOFT_INPUT_STATE_HIDDEN SOFT_INPUT_STATE_ALWAYS_HIDDEN æ€»æ˜¯éšè— SOFT_INPUT_STATE_UNCHANGED SOFT_INPUT_STATE_VISIBLE SOFT_INPUT_STATE_ALWAYS_VISIBLE è‡ªåŠ¨å¼¹å‡ºè½¯é”®ç›˜ è°ƒæ•´æ¨¡å¼ SOFT_INPUT_ADJUST_UNSPECIFIED é»˜è®¤æ¨¡å¼ SOFT_INPUT_ADJUST_RESIZE è½¯é”®ç›˜å¼¹å‡ºåŽPopupWindowä¼šè‡ªåŠ¨è°ƒæ•´åæ ‡,ä¸è¢«é®æŒ¡ SOFT_INPUT_ADJUST_PAN ç›‘å¬äº‹ä»¶éšè—äº‹ä»¶ç›‘å¬å³PopupWindowæ‰§è¡Œdismiss()åŽå›žè°ƒçš„æ–¹æ³•ã€‚1void setOnDismissListener (PopupWindow.OnDismissListener onDismissListener) è§¦æ‘¸äº‹ä»¶æ‹¦æˆª1void setTouchInterceptor (View.OnTouchListener l) æ›´æ–°ä»¥ä¸‹çš„æ›´æ–°PopupWindowéƒ½å¿…é¡»åœ¨PopupWindowå¤„äºŽä»¥åŠè¢«æ˜¾ç¤ºçš„çŠ¶æ€ä¸‹æ‰è¡Œï¼Œä¸”PopupWindowçš„å®½é«˜è®¾ç½®éƒ½å¿…é¡»å¤§äºŽç­‰äºŽ0ï¼Œ å¦‚æžœæƒ³å¿½ç•¥PopupWindowçš„å®½é«˜è®¾ç½®å°±è®¾ä¸º-1ã€‚ æ›´æ–°çŠ¶æ€è¯¥æ–¹æ³•ä¸èƒ½æ›´æ–°PopupWindowçš„å®½é«˜, åªèƒ½æ›´æ–°PopupWindowçš„çŠ¶æ€. ä¾‹å¦‚æ›´æ–°Focusableå’ŒOutsideTouchableã€‚1void update () æ›´æ–°å°ºå¯¸ä¸Šé¢è¯´è¿‡update()ä¸èƒ½æ›´æ–°PopupWindowçš„å®½é«˜, ä½†æ˜¯æä¾›æ›´æ–°å®½é«˜çš„updateæ–¹æ³•ã€‚12void update (int width, // æ›´æ–°PopupWindowçš„å®½é«˜int height) æ›´æ–°æ˜¾ç¤ºä½ç½®è¯¥æ–¹æ³•æ˜¯ç›¸å½“äºŽé‡æ–°showAsDropDown, æ‰€ä»¥è¿™æ˜¯ç›¸å¯¹äºŽæŽ§ä»¶çš„ä½ç½®æ›´æ–°123456789void update (View anchor, // æ›´æ–°æ˜¾ç¤ºæŽ§ä»¶çš„ä½ç½®int width, int height)void update (View anchor, int xoff, // ç›¸å¯¹äºŽæŽ§ä»¶çš„åç§»å€¼int yoff, int width, int height) ç›¸å¯¹ä½ç½®æ›´æ–°ç›¸å¯¹äºŽå½“å‰çš„ä½ç½®è¿›è¡Œåç§»ï¼Œ ä¸åŒçš„æ˜¾ç¤ºä½ç½®å¯¹äºŽçš„ç›¸å¯¹åŽŸç‚¹ä¹Ÿä¸åŒã€‚showAsDropDownçš„ç›¸å¯¹åŽŸç‚¹æ˜¯æ•´ä¸ªå±å¹•å·¦ä¸Šè§’, åŒ…æ‹¬çŠ¶æ€æ ã€‚æ‰€ä»¥ç”±äºŽåŒ…æ‹¬çŠ¶æ€æ æ‰€ä»¥åæ ‡åç§»çš„æ—¶å€™ä¸€å®šè¦yè½´åç§»å¤§äºŽ60è¶…å‡ºçŠ¶æ€æ çš„é«˜åº¦ã€‚ å¦åˆ™å› ä¸ºé®æŒ¡çŠ¶æ€æ å¯¼è‡´PopupWindowæ— æ³•æ˜¾ç¤º.1mPopupWindow.update(50, 60, -1,-1); // xè½´åç§»50 showAtLocationçš„ç›¸å¯¹åŽŸç‚¹æ˜¯è‡ªèº«ä½ç½®ã€‚12345678910void update (int x, // åæ ‡åç§»int y, int width, // PopupWindowå®½é«˜int height)void update (int x, int y, int width, int height, boolean force) // å¯èŽ·å–ç„¦ç‚¹ èƒŒæ™¯å˜ç°å½“æˆ‘ä»¬å¼¹å‡ºPopupWindowæ—¶ï¼Œæœ‰æ—¶å¸Œæœ›èƒŒæ™¯èƒ½å¤Ÿå˜æˆç°è‰²ï¼Œé‚£æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼å®žçŽ°ã€‚1234567891011/*** è®¾ç½®æ·»åŠ å±å¹•çš„èƒŒæ™¯é€æ˜Žåº¦* * @param bgAlpha å±å¹•é€æ˜Žåº¦0.0-1.0 1è¡¨ç¤ºå®Œå…¨ä¸é€æ˜Ž* */public void setBackgroundAlpha(float bgAlpha) &#123;WindowManager.LayoutParams lp = ((Activity) mContext).getWindow().getAttributes();lp.alpha = bgAlpha;((Activity) mContext).getWindow().setAttributes(lp);&#125; å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„å‘ç¬”è€…ä¹‹å‰ä½¿ç”¨PopupWindowåšäº†ä¸€ä¸ªå…¨å±€çš„è½¬èŠèŠ±åŠŸèƒ½ï¼ŒæœŸé—´å°† PopupWindow æˆå‘˜å˜é‡å®šä¹‰æˆé™æ€å˜é‡ï¼Œæ¯æ¬¡ show ä¹‹å‰åˆ¤æ–­è¯¥å˜é‡æ˜¯å¦ä¸º null ï¼Œä¸º null æ—¶èµ‹å€¼ï¼Œæœ€åŽå¯¼è‡´äº†æœ‰æ—¶èŠèŠ±æ— æ³•å¼¹å‡ºçš„é—®é¢˜ã€‚æ‰€ä»¥ï¼Œå¦‚æžœéœ€è¦åšèŠèŠ±åŠŸèƒ½ï¼Œå»ºè®®æ¯ä¸ªç•Œé¢éƒ½åˆ›å»ºä¸€æ¬¡ PopuWindow å®žä¾‹ã€‚å½“ç„¶ä½¿ç”¨ PopuWindow åšèŠèŠ±å¹¶ä¸å¸¸è§ï¼Œä¸€èˆ¬çš„åšæ³•æ˜¯ä½¿ç”¨ DialogFragment å®Œæˆã€‚ å‚è€ƒèµ„æ–™PopupWindowæœ€å…¨ä½¿ç”¨è¯´æ˜Ž]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>PopupWindow</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaæ•°æ®ç±»åž‹è§£æž]]></title>
    <url>%2F2018%2F04%2F24%2FJava%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B%E8%A7%A3%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Java æ•°æ®ç±»åž‹çš„é—®é¢˜ä¸æ˜¯ Java å¼€å‘ä¸­çš„éš¾ç‚¹ï¼Œè€Œä¸”é—®é¢˜ä¸€èˆ¬éƒ½èƒ½åœ¨ç¼–è¯‘çš„æ—¶å€™å°±æ˜¾çŽ°å‡ºæ¥ï¼Œå¯æ˜¯çŸ¥é“å®ƒçš„åŽŸç†å¯¹äºŽå†™å‡ºé«˜è´¨é‡çš„ä»£ç çš„å¾ˆæœ‰å¸®åŠ©çš„ã€‚æœ¬æ–‡å°†è¯¦ç»†ä»‹ç» Java æ•°æ®ç±»åž‹ç›¸å…³çš„çŸ¥è¯†ï¼Œå¿…é¡»è¦æçš„æ˜¯ï¼Œæœ¬æ–‡çš„å¤§éƒ¨åˆ†çŸ¥è¯†æ¥æºäºŽç½‘ä¸Šçš„ä¼˜ç§€æ–‡ç« ï¼ˆæ–‡æœ«æœ‰ç»™é“¾æŽ¥ï¼‰ï¼Œç¬”è€…åªæ˜¯åœ¨ç†è§£å®ƒä»¬çš„åŸºç¡€ä¸Šé‡æ–°æŽ’ç‰ˆå¹¶å¢žåŠ äº†ä¸€äº›è¡¥å……çš„å†…å®¹ã€‚ æ•°æ®ç±»åž‹åˆ†ç±»Java çš„æ•°æ®ç±»åž‹æœ‰ä¸¤ç±»ï¼š1ã€å€¼ç±»åž‹ï¼ˆåˆå«å†…ç½®æ•°æ®ç±»åž‹ï¼ŒåŸºæœ¬æ•°æ®ç±»åž‹ï¼‰2ã€å¼•ç”¨ç±»åž‹ï¼ˆé™¤å€¼ç±»åž‹ä»¥å¤–ï¼Œéƒ½æ˜¯å¼•ç”¨ç±»åž‹ï¼ŒåŒ…æ‹¬ Stringã€æ•°ç»„ï¼‰ å€¼ç±»åž‹Java è¯­è¨€æä¾›äº† 8 ç§å€¼ç±»åž‹ï¼Œå¤§è‡´åˆ†ä¸º 4 ç±»ï¼š æ•´åž‹ï¼šbyte ã€short ã€int ã€long æµ®ç‚¹åž‹ï¼šfloat ã€ double å­—ç¬¦åž‹ï¼šchar å¸ƒå°”åž‹ï¼šboolean å€¼ç±»åž‹å’Œå¼•ç”¨ç±»åž‹çš„åŒºåˆ«ä»Žæ¦‚å¿µæ–¹é¢æ¥è¯´ å€¼ç±»åž‹ï¼šå˜é‡åæŒ‡å‘å…·ä½“çš„æ•°å€¼ã€‚ å¼•ç”¨ç±»åž‹ï¼šå˜é‡åæŒ‡å‘å­˜æ•°æ®å¯¹è±¡çš„å†…å­˜åœ°å€ã€‚ ä»Žå†…å­˜æ–¹é¢æ¥è¯´ å€¼ç±»åž‹ï¼šå˜é‡åœ¨å£°æ˜Žä¹‹åŽï¼ŒJava å°±ä¼šç«‹åˆ»åˆ†é…ç»™ä»–å†…å­˜ç©ºé—´ã€‚ å¼•ç”¨ç±»åž‹ï¼šå®ƒä»¥ç‰¹æ®Šçš„æ–¹å¼ï¼ˆç±»ä¼¼ C æŒ‡é’ˆï¼‰æŒ‡å‘å¯¹è±¡å®žä½“ï¼ˆå…·ä½“çš„å€¼ï¼‰ï¼Œè¿™ç±»å˜é‡å£°æ˜Žæ—¶ä¸ä¼šåˆ†é…å†…å­˜ï¼Œåªæ˜¯å­˜å‚¨äº†ä¸€ä¸ªå†…å­˜åœ°å€ã€‚ ä»Žä½¿ç”¨æ–¹é¢æ¥è¯´ åŸºæœ¬ç±»åž‹ï¼šä½¿ç”¨æ—¶éœ€è¦èµ‹å…·ä½“å€¼,åˆ¤æ–­æ—¶ä½¿ç”¨ == å·ã€‚ å¼•ç”¨ç±»åž‹ï¼šä½¿ç”¨æ—¶å¯ä»¥èµ‹ nullï¼Œåˆ¤æ–­æ—¶ä½¿ç”¨ equals æ–¹æ³•ã€‚ æ‰©å±•é˜…è¯»Java åŸºæœ¬æ•°æ®ç±»åž‹å’Œå¼•ç”¨ç±»åž‹è¿™ç¯‡æ–‡ç« å¯¹äºŽåŸºæœ¬æ•°æ®ç±»åž‹å’Œå¼•ç”¨ç±»åž‹çš„å†…å­˜å­˜å‚¨è®²è¿°æ¯”è¾ƒç”ŸåŠ¨ã€‚Android å†…å­˜æ³„æ¼æ€»ç»“è¿™ç¯‡æ–‡ç« å¯¹äºŽ Java çš„å†…å­˜å­˜å‚¨æœºåˆ¶è®²å¾—æ¯”è¾ƒé€å½»ã€‚ æ•°æ®è½¬æ¢å°†ä¸€ç§ç±»åž‹çš„å€¼èµ‹å€¼ç»™å¦ä¸€ç§ç±»åž‹æ˜¯å¾ˆå¸¸è§çš„ã€‚åœ¨ Java ä¸­ï¼Œboolean ç±»åž‹ä¸Žå…¶ä»– 7 ç§ç±»åž‹çš„æ•°æ®éƒ½ä¸èƒ½è¿›è¡Œè½¬æ¢ï¼Œè¿™ä¸€ç‚¹å¾ˆæ˜Žç¡®ã€‚ä½†å¯¹äºŽå…¶ä»– 7 ç§æ•°æ®ç±»åž‹ï¼Œå®ƒä»¬ä¹‹é—´éƒ½å¯ä»¥è¿›è¡Œè½¬æ¢ï¼Œåªæ˜¯å¯èƒ½ä¼šå­˜åœ¨ç²¾åº¦æŸå¤±æˆ–å…¶ä»–ä¸€äº›å˜åŒ–ã€‚Java ä¸­ï¼Œå€¼ç±»åž‹è½¬æ¢æœ‰ä¸¤ç§æ–¹å¼ï¼š1ã€è‡ªåŠ¨è½¬æ¢ï¼ˆéšå¼ï¼‰ï¼šæ— éœ€ä»»ä½•æ“ä½œã€‚2ã€å¼ºåˆ¶è½¬æ¢ï¼ˆæ˜¾å¼ï¼‰ï¼šéœ€ä½¿ç”¨è½¬æ¢æ“ä½œç¬¦ï¼ˆtypeï¼‰ã€‚å°†6ç§æ•°æ®ç±»åž‹æŒ‰ä¸‹é¢é¡ºåºæŽ’åˆ—ä¸€ä¸‹ï¼šdouble &gt; float &gt; long &gt; int &gt; short &gt; byteå¦‚æžœä»Žå°è½¬æ¢åˆ°å¤§ï¼Œé‚£ä¹ˆå¯ä»¥è‡ªåŠ¨è½¬æ¢ï¼Œè€Œä»Žå¤§åˆ°å°ï¼Œåˆ™å¿…é¡»ä½¿ç”¨å¼ºåˆ¶è½¬æ¢ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¯¹äºŽ char ç±»åž‹ï¼Œé™¤ char è½¬ doubleã€floatã€longã€int å¯ä»¥è‡ªåŠ¨è½¬æ¢å¤–ï¼Œå¯¹äºŽ char çš„å‰©ä½™æƒ…å†µçš„è½¬æ¢å¿…é¡»è¦å¼ºåˆ¶è½¬æ¢ã€‚ æ‰©å±•é˜…è¯»ï¼šJava charæ•°æ®ç±»åž‹å…¨é¢ç†è§£ char åŸºæœ¬ç±»åž‹æ•°æ®çš„ä½¿ç”¨æ–¹æ³•ã€‚åŽŸç åç è¡¥ç ç‰¹åˆ«åœ°ï¼Œå¯¹äºŽ[1000 0000]å’Œ[00000000]çš„åŽŸç ã€è¡¥ç æ˜¯å…¶æœ¬èº«ï¼ˆä»¥8ä½ä¸ºä¾‹ï¼‰ã€‚byteç±»åž‹çš„æœ€å°å€¼ä¸ºä»€ä¹ˆæ˜¯-128è€Œéž-127å…³äºŽæ•°æ®ç±»åž‹è¡¨ç¤ºçš„æ•°æ®èŒƒå›´é—®é¢˜ä½æ“ä½œäº†è§£ä½è¿ç®—çš„æœºåˆ¶ã€‚éœ€è¦æ³¨æ„ï¼Œä½è¿ç®—éƒ½æ˜¯é’ˆå¯¹è¡¥ç çš„è¿ç®—ï¼Œè¿ç®—ç»“æžœä¹Ÿæ˜¯è¡¥ç ã€‚ è‡ªåŠ¨è½¬æ¢è‡ªåŠ¨è½¬æ¢å› ä¸ºè¾ƒå¤§çš„ç±»åž‹ï¼ˆå¦‚intï¼‰è¦ä¿å­˜è¾ƒå°çš„ç±»åž‹ï¼ˆå¦‚byteï¼‰ï¼Œå†…å­˜æ€»æ˜¯è¶³å¤Ÿçš„ï¼Œä¸éœ€è¦å¼ºåˆ¶è½¬æ¢ã€‚å¦‚æžœå°†å­—é¢å€¼ä¿å­˜åˆ°byteã€shortã€charã€longçš„æ—¶å€™ï¼Œä¹Ÿä¼šè‡ªåŠ¨è¿›è¡Œç±»åž‹è½¬æ¢ï¼Œæ³¨æ„åŒºåˆ«ï¼Œæ­¤æ—¶ä»Žintï¼ˆæ²¡æœ‰å¸¦ L çš„æ•´åž‹å­—é¢å€¼ä¸º intï¼‰åˆ°byte/short/charä¹Ÿæ˜¯è‡ªåŠ¨å®Œæˆçš„ï¼Œè™½ç„¶å®ƒä»¬éƒ½æ¯” int å°ï¼Œä½†æ˜¯æœ‰ä¸ªé™åˆ¶æ˜¯å­—é¢å€¼å¿…é¡»è¦åœ¨ç›®æ ‡ç±»åž‹çš„å–å€¼èŒƒå›´å†…ï¼Œè¶…è¿‡äº†ç›®æ ‡çš„å–å€¼èŒƒå›´ï¼Œåˆ™è¿˜æ˜¯éœ€è¦å¼ºè½¬ï¼Œä¾‹å¦‚ï¼šbyte b=1 æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œè€Œbyte b=200 å°±å¿…é¡»å†™æˆ byte b=(byte)200 äº†ï¼Œå› ä¸º byte çš„å–å€¼èŒƒå›´æ˜¯ [-128,127] ã€‚ å¼ºåˆ¶ç±»åž‹è½¬æ¢å¦‚æžœè¦æŠŠå¤§çš„è½¬æˆå°çš„ï¼Œå°±å¿…é¡»å¼ºåˆ¶è½¬æ¢ã€‚å¼ºåˆ¶è½¬æ¢é‡‡ç”¨è½¬æ¢æ“ä½œç¬¦ï¼ˆï¼‰ã€‚ä¸¥æ ¼åœ°è¯´ï¼Œå°†byteè½¬ä¸ºcharä¸å±žäºŽå¼ºåˆ¶è½¬æ¢ï¼Œå› ä¸ºä»Žbyteåˆ°charçš„è¿‡ç¨‹å…¶å®žæ˜¯byteâ€“&gt;intâ€“&gt;charï¼Œæ‰€ä»¥è‡ªåŠ¨è½¬æ¢å’Œå¼ºåˆ¶è½¬æ¢éƒ½æœ‰ã€‚å¼ºåˆ¶è½¬æ¢é™¤äº†å¯èƒ½çš„ç²¾åº¦æŸå¤±å¤–ï¼Œè¿˜å¯èƒ½ä½¿æ¨¡å‘ç”Ÿå˜åŒ–ã€‚å¼ºåˆ¶è½¬æ¢æ ¼å¼å¦‚ä¸‹ï¼š (target-type) value; å¦‚æžœæ•´æ•°çš„å€¼è¶…å‡ºäº†byteæ‰€èƒ½è¡¨ç¤ºçš„èŒƒå›´ï¼Œç»“æžœå°†å¯¹byteç±»åž‹çš„èŒƒå›´å–ä½™æ•°ã€‚ä¾‹å¦‚a=256è¶…å‡ºäº†byteçš„[-128,127]çš„èŒƒå›´ï¼Œæ‰€ä»¥å°†257é™¤ä»¥byteçš„èŒƒå›´ï¼ˆ256ï¼‰å–ä½™æ•°å¾—åˆ°b=1ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“a=200æ—¶ï¼Œæ­¤æ—¶é™¤äº†256å–ä½™æ•°åº”è¯¥ä¸º-56ï¼Œè€Œä¸æ˜¯200ã€‚å°†æµ®ç‚¹ç±»åž‹èµ‹ç»™æ•´æ•°ç±»åž‹çš„æ—¶å€™ï¼Œä¼šå‘ç”Ÿæˆªå°¾ã€‚ä¹Ÿå°±æ˜¯æŠŠå°æ•°çš„éƒ¨åˆ†åŽ»æŽ‰ï¼Œåªç•™ä¸‹æ•´æ•°éƒ¨åˆ†ã€‚æ­¤æ—¶å¦‚æžœæ•´æ•°è¶…å‡ºç›®æ ‡ç±»åž‹èŒƒå›´ï¼Œä¸€æ ·å°†å¯¹ç›®æ ‡ç±»åž‹çš„èŒƒå›´å–ä½™æ•°ã€‚ èµ‹å€¼åŠè¡¨è¾¾å¼ä¸­çš„ç±»åž‹è½¬æ¢1ã€å­—é¢å€¼èµ‹å€¼åœ¨ä½¿ç”¨å­—é¢å€¼å¯¹æ•´æ•°èµ‹å€¼çš„è¿‡ç¨‹ä¸­ï¼Œå¯ä»¥å°† int å­—é¢å€¼èµ‹å€¼ç»™byte short char intï¼Œåªè¦ä¸è¶…å‡ºèŒƒå›´ã€‚è¿™ä¸ªè¿‡ç¨‹ä¸­çš„ç±»åž‹è½¬æ¢æ—¶è‡ªåŠ¨å®Œæˆçš„ï¼Œä½†æ˜¯å¦‚æžœä½ è¯•å›¾å°†long å­—é¢å€¼èµ‹ç»™byteï¼Œå³ä½¿æ²¡æœ‰è¶…å‡ºèŒƒå›´ï¼Œä¹Ÿå¿…é¡»è¿›è¡Œå¼ºåˆ¶ç±»åž‹è½¬æ¢ã€‚ä¾‹å¦‚ byte b = 10Lï¼›æ˜¯é”™çš„ï¼Œè¦è¿›è¡Œå¼ºåˆ¶è½¬æ¢ã€‚2ã€è¡¨è¾¾å¼ä¸­çš„è‡ªåŠ¨ç±»åž‹æå‡é™¤äº†èµ‹å€¼ä»¥å¤–ï¼Œè¡¨è¾¾å¼è®¡ç®—è¿‡ç¨‹ä¸­ä¹Ÿå¯èƒ½å‘ç”Ÿä¸€äº›ç±»åž‹è½¬æ¢ã€‚åœ¨è¡¨è¾¾å¼ä¸­ï¼Œç±»åž‹æå‡è§„åˆ™å¦‚ä¸‹ï¼š æ‰€æœ‰byte/short/charéƒ½è¢«æå‡ä¸ºintã€‚ å¦‚æžœæœ‰ä¸€ä¸ªæ“ä½œæ•°ä¸ºlongï¼Œæ•´ä¸ªè¡¨è¾¾å¼æå‡ä¸ºlongã€‚floatå’Œdoubleæƒ…å†µä¹Ÿä¸€æ ·ã€‚ è£…ç®±å’Œæ‹†ç®±åŒ…è£…ç±»ã€è£…ç®±ã€æ‹†ç®±Java ä¸­ä¸ºæ¯ä¸€ç§åŸºæœ¬æ•°æ®ç±»åž‹æä¾›äº†ç›¸åº”çš„åŒ…è£…ç±»ï¼Œå¦‚ä¸‹ï¼š Byte &lt;-&gt; byteShort &lt;-&gt; shortInteger &lt;-&gt; intLong &lt;-&gt; longFloat &lt;-&gt; floatDouble &lt;-&gt; doubleCharacter &lt;-&gt; charBoolean &lt;-&gt; boolean å¼•å…¥åŒ…è£…ç±»çš„ç›®çš„å°±æ˜¯ï¼šæä¾›ä¸€ç§æœºåˆ¶ï¼Œä½¿å¾—å€¼ç±»åž‹å¯ä»¥ä¸Žå¼•ç”¨ç±»åž‹äº’ç›¸è½¬æ¢ã€‚åŸºæœ¬æ•°æ®ç±»åž‹ä¸ŽåŒ…è£…ç±»çš„è½¬æ¢è¢«ç§°ä¸ºè£…ç®±å’Œæ‹†ç®±ã€‚ è£…ç®±æ˜¯å°†å€¼ç±»åž‹è½¬æ¢ä¸ºå¼•ç”¨ç±»åž‹ï¼Œä¾‹å¦‚ï¼šint è½¬ Integerã€‚è£…ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…ç±»çš„ valueOf æ–¹æ³•å®žçŽ°çš„ã€‚ æ‹†ç®±æ˜¯å°†å¼•ç”¨ç±»åž‹è½¬æ¢ä¸ºå€¼ç±»åž‹ï¼Œä¾‹å¦‚ï¼šInteger è½¬ intã€‚æ‹†ç®±è¿‡ç¨‹æ˜¯é€šè¿‡è°ƒç”¨åŒ…è£…ç±»çš„ xxxValue æ–¹æ³•å®žçŽ°çš„ã€‚ï¼ˆxxx ä»£è¡¨å¯¹åº”çš„åŸºæœ¬æ•°æ®ç±»åž‹ï¼‰ã€‚ è‡ªåŠ¨è£…ç®±ã€è‡ªåŠ¨æ‹†ç®±å€¼ç±»åž‹çš„è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±è‡ª JDK 5 å¼€å§‹æä¾›çš„åŠŸèƒ½ã€‚è‡ªåŠ¨è£…ç®±ä¸Žæ‹†ç®±çš„æœºåˆ¶å¯ä»¥è®©æˆ‘ä»¬åœ¨ Java çš„å˜é‡èµ‹å€¼æˆ–è€…æ˜¯æ–¹æ³•è°ƒç”¨ç­‰æƒ…å†µä¸‹ä½¿ç”¨åŽŸå§‹ç±»åž‹æˆ–è€…å¯¹è±¡ç±»åž‹æ›´åŠ ç®€å•ç›´æŽ¥ã€‚å› ä¸ºè‡ªåŠ¨è£…ç®±ä¼šéšå¼åœ°åˆ›å»ºå¯¹è±¡ï¼Œå¦‚æžœåœ¨ä¸€ä¸ªå¾ªçŽ¯ä½“ä¸­ï¼Œä¼šåˆ›å»ºæ— ç”¨çš„ä¸­é—´å¯¹è±¡ï¼Œè¿™æ ·ä¼šå¢žåŠ  GC åŽ‹åŠ›ï¼Œæ‹‰ä½Žç¨‹åºçš„æ€§èƒ½ã€‚æ‰€ä»¥åœ¨å†™å¾ªçŽ¯æ—¶ä¸€å®šè¦æ³¨æ„ä»£ç ï¼Œé¿å…å¼•å…¥ä¸å¿…è¦çš„è‡ªåŠ¨è£…ç®±æ“ä½œã€‚JDK 5 ä¹‹å‰çš„å½¢å¼ï¼š1Integer i1 = new Integer(10); // éžè‡ªåŠ¨è£…ç®± JDK 5 ä¹‹åŽï¼š1Integer i2 = 10; // è‡ªåŠ¨è£…ç®± Java å¯¹äºŽè‡ªåŠ¨è£…ç®±å’Œæ‹†ç®±çš„è®¾è®¡ï¼Œä¾èµ–äºŽä¸€ç§å«åšäº«å…ƒæ¨¡å¼çš„è®¾è®¡æ¨¡å¼ï¼ˆç¬”è€…ä¹Ÿæ²¡æœ‰å…·ä½“åŽ»äº†è§£è¿‡ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥åŽ»ç ”ç©¶ä¸‹ï¼‰ã€‚ æ‰©å±•é˜…è¯»ï¼šæ·±å…¥å‰–æž Java ä¸­çš„è£…ç®±å’Œæ‹†ç®±ç»“åˆç¤ºä¾‹ï¼Œä¸€æ­¥æ­¥é˜è¿°è£…ç®±å’Œæ‹†ç®±åŽŸç†ã€‚ è£…ç®±ã€æ‹†ç®±çš„åº”ç”¨å’Œæ³¨æ„ç‚¹è£…ç®±ã€æ‹†ç®±åº”ç”¨åœºæ™¯:1ã€ä¸€ç§æœ€æ™®é€šçš„åœºæ™¯æ˜¯ï¼šè°ƒç”¨ä¸€ä¸ªå«ç±»åž‹ä¸º Object å‚æ•°çš„æ–¹æ³•ï¼Œè¯¥ Object å¯æ”¯æŒä»»æ„ç±»åž‹ï¼ˆå› ä¸º Object æ˜¯æ‰€æœ‰ç±»çš„çˆ¶ç±»ï¼‰ï¼Œä»¥ä¾¿é€šç”¨ã€‚å½“ä½ éœ€è¦å°†ä¸€ä¸ªå€¼ç±»åž‹ï¼ˆå¦‚ intï¼‰ä¼ å…¥æ—¶ï¼Œéœ€è¦ä½¿ç”¨ Integer è£…ç®±ã€‚2ã€ä¸€ä¸ªéžæ³›åž‹çš„å®¹å™¨ï¼ŒåŒæ ·æ˜¯ä¸ºäº†ä¿è¯é€šç”¨ï¼Œè€Œå°†å…ƒç´ ç±»åž‹å®šä¹‰ä¸º Objectã€‚äºŽæ˜¯ï¼Œè¦å°†å€¼ç±»åž‹æ•°æ®åŠ å…¥å®¹å™¨æ—¶ï¼Œéœ€è¦è£…ç®±ã€‚3ã€å½“ == è¿ç®—ç¬¦çš„ä¸¤ä¸ªæ“ä½œï¼Œä¸€ä¸ªæ“ä½œæ•°æ˜¯åŒ…è£…ç±»ï¼Œå¦ä¸€ä¸ªæ“ä½œæ•°æ˜¯è¡¨è¾¾å¼ï¼ˆå³åŒ…å«ç®—æœ¯è¿ç®—ï¼‰åˆ™æ¯”è¾ƒçš„æ˜¯æ•°å€¼ï¼ˆå³ä¼šè§¦å‘è‡ªåŠ¨æ‹†ç®±çš„è¿‡ç¨‹ï¼‰ã€‚ç¤ºä¾‹ï¼š1234567891011121314151617181920Integer i1 = 10; // è‡ªåŠ¨è£…ç®±Integer i2 = new Integer(10); // éžè‡ªåŠ¨è£…ç®±Integer i3 = Integer.valueOf(10); // éžè‡ªåŠ¨è£…ç®±int i4 = new Integer(10); // è‡ªåŠ¨æ‹†ç®±int i5 = i2.intValue(); // éžè‡ªåŠ¨æ‹†ç®±System.out.println(&quot;i1 = [&quot; + i1 + &quot;]&quot;);System.out.println(&quot;i2 = [&quot; + i2 + &quot;]&quot;);System.out.println(&quot;i3 = [&quot; + i3 + &quot;]&quot;);System.out.println(&quot;i4 = [&quot; + i4 + &quot;]&quot;);System.out.println(&quot;i5 = [&quot; + i5 + &quot;]&quot;);System.out.println(&quot;i1 == i2 is [&quot; + (i1 == i2) + &quot;]&quot;);System.out.println(&quot;i1 == i4 is [&quot; + (i1 == i4) + &quot;]&quot;); // è‡ªåŠ¨æ‹†ç®±// Output:// i1 = [10]// i2 = [10]// i3 = [10]// i4 = [10]// i5 = [10]// i1 == i2 is [false]// i1 == i4 is [true] ç¤ºä¾‹è¯´æ˜Žï¼šä¸Šé¢çš„ä¾‹å­ï¼Œè™½ç„¶ç®€å•ï¼Œä½†å´éšè—äº†è‡ªåŠ¨è£…ç®±ã€æ‹†ç®±å’Œéžè‡ªåŠ¨è£…ç®±ã€æ‹†ç®±çš„åº”ç”¨ã€‚ä»Žä¾‹å­ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæ˜Žæ˜Žæ‰€æœ‰å˜é‡éƒ½åˆå§‹åŒ–ä¸ºæ•°å€¼ 10 äº†ï¼Œä½†ä¸ºä½•ä¼šå‡ºçŽ° i1 == i2 is [false] è€Œ i1 == i4 is [true] ï¼ŸåŽŸå› åœ¨äºŽï¼ši1ã€i2 éƒ½æ˜¯åŒ…è£…ç±»ï¼Œä½¿ç”¨ == æ—¶ï¼ŒJava å°†å®ƒä»¬å½“åšä¸¤ä¸ªå¯¹è±¡ï¼Œè€Œéžä¸¤ä¸ª int å€¼æ¥æ¯”è¾ƒï¼Œæ‰€ä»¥ä¸¤ä¸ªå¯¹è±¡è‡ªç„¶æ˜¯ä¸ç›¸ç­‰çš„ã€‚æ­£ç¡®çš„æ¯”è¾ƒæ“ä½œåº”è¯¥ä½¿ç”¨ equals æ–¹æ³•ã€‚i1 æ˜¯åŒ…è£…ç±»ï¼Œi4 æ˜¯åŸºç¡€æ•°æ®ç±»åž‹ï¼Œä½¿ç”¨ == æ—¶ï¼ŒJava ä¼šå°†ä¸¤ä¸ª i1 è¿™ä¸ªåŒ…è£…ç±»å¯¹è±¡è‡ªåŠ¨æ‹†ç®±ä¸ºä¸€ä¸ª int å€¼ï¼Œå†ä»£å…¥åˆ° == è¿ç®—è¡¨è¾¾å¼ä¸­è®¡ç®—ï¼›æœ€ç»ˆï¼Œç›¸å½“äºŽä¸¤ä¸ª int è¿›è¡Œæ¯”è¾ƒï¼Œç”±äºŽå€¼ç›¸åŒï¼Œæ‰€ä»¥ç»“æžœç›¸ç­‰ã€‚ è£…ç®±ã€æ‹†ç®±åº”ç”¨æ³¨æ„ç‚¹:1ã€è£…ç®±æ“ä½œä¼šåˆ›å»ºå¯¹è±¡ï¼Œé¢‘ç¹çš„è£…ç®±æ“ä½œä¼šé€ æˆä¸å¿…è¦çš„å†…å­˜æ¶ˆè€—ï¼Œå½±å“æ€§èƒ½ã€‚æ‰€ä»¥åº”è¯¥å°½é‡é¿å…è£…ç®±ã€‚2ã€åŸºç¡€æ•°æ®ç±»åž‹çš„æ¯”è¾ƒæ“ä½œä½¿ç”¨ ==ï¼ŒåŒ…è£…ç±»çš„æ¯”è¾ƒæ“ä½œä½¿ç”¨ equals æ–¹æ³•ã€‚ å‚è€ƒèµ„æ–™æ·±å…¥ç†è§£ Java åŸºæœ¬æ•°æ®ç±»åž‹Java åŸºæœ¬æ•°æ®ç±»åž‹ - å››ç±»å…«ç§]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>æ•°æ®ç±»åž‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaæžšä¸¾ç”¨æ³•æ€»ç»“]]></title>
    <url>%2F2018%2F03%2F24%2FJava%E6%9E%9A%E4%B8%BE%E7%94%A8%E6%B3%95%E6%80%BB%E7%BB%93%2F</url>
    <content type="text"><![CDATA[æžšä¸¾æ˜¯JDK1.5å¼•å…¥çš„æ–°ç±»åž‹ï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªå°åŠŸèƒ½ï¼Œä½†æ˜¯å®ƒå´ç»™æˆ‘ä»¬çš„ç¨‹åºå¼€å‘å¸¦æ¥äº†æžå¤§çš„ä¾¿æ·ï¼Œæœ¬æ–‡å°±å¯¹å®ƒçš„ç”¨æ³•åšä¸€ä¸ªå°ç»“ã€‚ å¸¸é‡åœ¨JDK 1.5ä¹‹å‰ï¼Œæˆ‘ä»¬å®šä¹‰å¸¸é‡éƒ½æ˜¯public final static â€¦â€¦ï¼Œè¿™ç§å®šä¹‰æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„å¼Šç«¯å°±æ˜¯ä»£ç ç´Šä¹±ï¼Œéœ€è¦å¤§é‡çš„æ³¨é‡Šã€‚æœ‰äº†æžšä¸¾ç±»åž‹ï¼Œäº‹æƒ…å°±å¥½åŠžäº†ã€‚æ¯”å¦‚æˆ‘ä»¬è¦å®šä¹‰ä¸€ç»„é¢œè‰²å¸¸é‡ï¼Œå¯ä»¥è¿™æ ·ï¼š123public enum Color&#123;WHITE,BLACK,RED&#125; æ˜¯ä¸æ˜¯å¾ˆæ¸…æ™°äº†å‘¢ï¼Œé™¤äº†ä¼šä½¿ä»£ç ç»“æž„æ¸…æ™°ä¹‹å¤–ï¼Œæžšä¸¾è¿˜æä¾›äº†è®¸å¤šä¾¿æ·çš„æ“ä½œâ€¦â€¦ Switch12345678910111213141516171819enum Signal &#123; GREEN, YELLOW, RED &#125; public class TrafficLight &#123; Signal color = Signal.RED; public void change() &#123; switch (color) &#123; case RED: color = Signal.GREEN; break; case YELLOW: color = Signal.RED; break; case GREEN: color = Signal.YELLOW; break; &#125; &#125; &#125; å‘æžšä¸¾ä¸­æ·»åŠ æ–°æ–¹æ³•æžšä¸¾ä¸­å¯ä»¥è‡ªå®šä¹‰æ–¹æ³•ï¼Œä½†æ˜¯å¿…é¡»ä¿è¯å…ˆå®šä¹‰æžšä¸¾çš„å®žä¾‹ï¼Œå¹¶ä¸”åœ¨æœ€åŽä¸€ä¸ªå®žä¾‹åŽé¢ç”¨åˆ†å·ç»“å°¾ã€‚123456789101112131415161718192021222324252627282930313233public enum Color &#123; RED(&quot;çº¢è‰²&quot;, 1), GREEN(&quot;ç»¿è‰²&quot;, 2), BLANK(&quot;ç™½è‰²&quot;, 3), YELLO(&quot;é»„è‰²&quot;, 4); // æˆå‘˜å˜é‡ private String name; private int index; // æž„é€ æ–¹æ³• private Color(String name, int index) &#123; this.name = name; this.index = index; &#125; // æ™®é€šæ–¹æ³• public static String getName(int index) &#123; for (Color c : Color.values()) &#123; if (c.getIndex() == index) &#123; return c.name; &#125; &#125; return null; &#125; // get set æ–¹æ³• public String getName() &#123; return name; &#125; public void setName(String name) &#123; this.name = name; &#125; public int getIndex() &#123; return index; &#125; public void setIndex(int index) &#123; this.index = index; &#125; &#125; è¡¥å……æžšä¸¾æœ‰ä¸¤ä¸ªé»˜è®¤çš„æ–¹æ³•ï¼Œname()ã€ordinal()æ–¹æ³•ã€‚å‰è€…å¯ä»¥ç†è§£ä¸ºæ˜¯æžšä¸¾å®žä¾‹çš„åç§°ã€‚åŽè€…ç†è§£ä¸ºæžšä¸¾çš„ç¼–å·ï¼Œä»Ž0é€’å¢žã€‚ è¦†ç›–æžšä¸¾çš„æ–¹æ³•ä¸‹é¢ç»™å‡ºè¦†ç›–toString()æ–¹æ³•çš„ä¾‹å­ã€‚12345678910111213141516public enum Color &#123; RED(&quot;çº¢è‰²&quot;, 1), GREEN(&quot;ç»¿è‰²&quot;, 2), BLANK(&quot;ç™½è‰²&quot;, 3), YELLO(&quot;é»„è‰²&quot;, 4); // æˆå‘˜å˜é‡ private String name; private int index; // æž„é€ æ–¹æ³• private Color(String name, int index) &#123; this.name = name; this.index = index; &#125; //è¦†ç›–æ–¹æ³• @Override public String toString() &#123; return this.index+&quot;_&quot;+this.name; &#125; &#125; å®žçŽ°æŽ¥å£æ‰€æœ‰æžšä¸¾éƒ½è‡ªåŠ¨ç»§æ‰¿è‡ªjava.lang.Enumç±»ã€‚ç”±äºŽJavaä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å°†æžšä¸¾ç±»ç»§æ‰¿å…¶å®ƒçš„ç±»ï¼Œä½†æ˜¯æžšä¸¾ç±»å¯ä»¥å®žçŽ°å¤šä¸ªæŽ¥å£ã€‚12345678910111213141516171819202122232425public interface Behaviour &#123; void print(); String getInfo(); &#125; public enum Color implements Behaviour&#123; RED(&quot;çº¢è‰²&quot;, 1), GREEN(&quot;ç»¿è‰²&quot;, 2), BLANK(&quot;ç™½è‰²&quot;, 3), YELLO(&quot;é»„è‰²&quot;, 4); // æˆå‘˜å˜é‡ private String name; private int index; // æž„é€ æ–¹æ³• private Color(String name, int index) &#123; this.name = name; this.index = index; &#125; //æŽ¥å£æ–¹æ³• @Override public String getInfo() &#123; return this.name; &#125; //æŽ¥å£æ–¹æ³• @Override public void print() &#123; System.out.println(this.index+&quot;:&quot;+this.name); &#125; &#125; ä½¿ç”¨æŽ¥å£ç»„ç»‡æžšä¸¾æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­ç»Ÿä¸€ç®¡ç†å¸¸é‡è¯ï¼Œå¯ä»¥ä½¿ç”¨æŽ¥å£ç»„ç»‡æžšä¸¾ã€‚12345678public interface Food &#123; enum Coffee implements Food&#123; BLACK_COFFEE,DECAF_COFFEE,LATTE,CAPPUCCINO &#125; enum Dessert implements Food&#123; FRUIT, CAKE, GELATO &#125; &#125; å‚è€ƒèµ„æ–™Java æžšä¸¾(enum) è¯¦è§£7ç§å¸¸è§çš„ç”¨æ³•]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>æžšä¸¾</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaçº¿ç¨‹æ± ]]></title>
    <url>%2F2018%2F03%2F13%2FJava%E7%BA%BF%E7%A8%8B%E6%B1%A0%2F</url>
    <content type="text"><![CDATA[åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œåˆ›å»ºå’Œé”€æ¯å¯¹è±¡æ˜¯å¾ˆè€—æ—¶é—´å’Œèµ„æºçš„ï¼Œå› æ­¤ï¼Œåœ¨å¤šçº¿ç¨‹ç¼–ç¨‹è¿‡ç¨‹ä¸­å¦‚æžœèƒ½å‡å°‘çº¿ç¨‹çš„åˆ›å»ºå’Œé”€æ¯æ“ä½œï¼Œé‚£ä¹ˆå¯¹äºŽç¨‹åºçš„æ€§èƒ½å°†å¾—åˆ°å¾ˆå¤§çš„æé«˜ã€‚Javaçº¿ç¨‹æ± çš„å‡ºçŽ°ï¼Œè§£å†³äº†è¿™ä¸ªé—®é¢˜ã€‚ä¸ä»…å¦‚æ­¤ï¼Œçº¿ç¨‹æ± è¿˜å¯ä»¥æŽ§åˆ¶çº¿ç¨‹çš„åˆ›å»ºæ•°é‡ï¼Œé¿å…å†…å­˜æ¶ˆè€—è¿‡å¤šã€‚å­¦ä¹ çº¿ç¨‹æ± ï¼Œéœ€è¦ç”¨åˆ°ä»¥ä¸‹å‡ ä¸ªå…³é”®ç±»ã€‚1ã€Executor2ã€Executors3ã€ExecutorSevice4ã€ThreadPoolExecutoråœ¨åˆ†åˆ«ä»‹ç»å®ƒä»¬ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆæ‹æ¸…ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„å…³ç³»ã€‚å›¾ä¸­çš„AbstractExecutorServiceç±»å¯ä»¥ä¸ç”¨ç†ä¼šï¼Œæˆ‘ä»¬ä¸è®²å®ƒã€‚å¦å¤–ï¼ŒExcutorsç±»ä¸å¥½åœ¨UMLç±»å›¾ä¸­å°†å…¶æ¶µç›–è¿›åŽ»ï¼Œç­‰ä¼šæˆ‘ä»¬å†ä»‹ç»ã€‚ ExecutoræŸ¥çœ‹Executorçš„APIï¼Œæœ‰è¿™ä¹ˆä¸€æ®µè¯ï¼š The Executor implementations provided in this package implement ExecutorService, which is a more extensive interface. The ThreadPoolExecutor class provides an extensible thread pool implementation. The Executors class provides convenient factory methods for these Executors. å¤§æ¦‚æ„æ€æ˜¯ï¼ŒExecutorServiceæŽ¥å£åœ¨ExecutoræŽ¥å£çš„åŸºç¡€ä¸Šåˆæ‹“å±•äº†ä¸€äº›åŠŸèƒ½ï¼›è€ŒThreadPoolExecutorç±»æä¾›äº†ä¸€ä¸ªå¯æ‹“å±•çš„çº¿ç¨‹æ± å®žçŽ°ï¼›Executorsç±»æ˜¯ä¸€ä¸ªå·¥åŽ‚ç±»ï¼Œå®ƒä¸ºExecutorç±»çš„å®žçŽ°æä¾›äº†ä¾¿æ·çš„é€šé“ã€‚è¿™é‡Œæˆ‘ä»¬æ³¨æ„åˆ°äº†ä¹‹å‰æåˆ°çš„Executorsç±»ï¼Œå®ƒæ˜¯ä¸€ä¸ªå·¥åŽ‚æ–¹æ³•ï¼Œç”¨æ¥äº§ç”ŸExecutorå¯¹è±¡ã€‚123456Executor excutor = Executors.newFixedThreadPool(10); excutor.execute(new Runnable() &#123; public void run() &#123; System.out.println(&quot;Asynchronous task&quot;); &#125; &#125;); æ³¨æ„ä»¥ä¸Šæ˜¯ä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ã€‚åŒæ—¶ï¼Œé™¤äº†å¯ä»¥ä½¿ç”¨newFixedThreadPoolåˆ›å»ºExecutorå¯¹è±¡ä¹‹å¤–è¿˜å¯ä»¥ä½¿ç”¨12Executors.newSingleThreadExecutor(); Executors.newScheduledThreadPool(size); ç”Ÿäº§Executorå¯¹è±¡ï¼Œå…·ä½“ç”¨æ³•ä¹‹åŽä¼šä»‹ç»ã€‚ ExecutorSeviceå¦‚ä¸Šæ‰€æï¼ŒExecutorSeviceå®žé™…ä¸Šåªæ˜¯æ¯”Executorå¤šäº†ä¸€äº›æ–¹æ³•è€Œå·²ï¼Œå®ƒåŒæ ·å¯ä»¥é€šè¿‡Executorsæä¾›çš„å·¥åŽ‚æ–¹æ³•åˆ›é€ å‡ºæ¥ã€‚1ExecutorSevice executorService = Executors.newFixedThreadPool(10); é™¤äº†execute()ï¼ŒExecutorSeviceæä¾›äº†å…è®¸è¿”å›žä»»åŠ¡æ‰§è¡Œç»“æžœçš„submit()ï¼Œè¿”å›žç»“æžœçš„æ–¹å¼æœ‰ä¸¤ç§ï¼š1ã€ä¼ å…¥Runnableå¯¹è±¡ã€‚123456Future&lt;String&gt; future=executor.submit(new Runnable() &#123;@Overridepublic void run() &#123;System.out.println(&quot;Asynchronous task&quot;);&#125;&#125;); 2ã€ä¼ å…¥Callableå¯¹è±¡ã€‚1234567Future&lt;String&gt; future = executor.submit(new Callable&lt;String&gt;() &#123;@Overridepublic String call() throws Exception &#123;System.out.println(&quot;Asynchronous task&quot;);return &quot;result&quot;;&#125;&#125;); è¿™ä¸ªä¸¤ç§æ–¹å¼éƒ½å¯ä»¥é€šè¿‡future.getï¼ˆï¼‰èŽ·å¾—è¿”å›žçš„ç»“æžœï¼Œå¹¶ä¸”future.getï¼ˆï¼‰æ˜¯ä¸€ä¸ªé˜»å¡žæ–¹æ³•ã€‚ä¸åŒçš„æ˜¯ï¼ŒRunnableæ–¹å¼çš„è¿”å›žå€¼å§‹ç»ˆä¸ºnullï¼ŒCallableæ–¹å¼çš„è¿”å›žå€¼å°†å–å†³äºŽç”¨æˆ·çš„è®¾å®šã€‚ç‰¹åˆ«åœ°ï¼ŒExecutorSeviceè¿˜æä¾›äº†å¯ä»¥å¤„ç†Callableé›†åˆçš„æ–¹æ³•invokeAnyå’ŒinvokeAll,å…·ä½“ç”¨æ³•å¯ä»¥å‚è€ƒè¿™ä¸€ç¯‡æ–‡ç« ã€‚å°†invokeAllè¿ç”¨åœ¨éœ€è¦å¹¶è¡Œè¿è¡Œçš„åœºæ™¯ï¼Œå¯ä»¥å‡å°‘æ¯”è¾ƒå¤šçš„æ–¹æ³•æ‰§è¡Œæ—¶é—´ã€‚æ¯”å¦‚ï¼šæ–¹æ³•Aå’Œæ–¹æ³•Båˆ†åˆ«éƒ½æ‰§è¡Œäº†ä¸€äº›è€—æ—¶æ“ä½œï¼Œè€Œæˆ‘ä»¬æœ€åŽçš„å€¼ä¾èµ–äºŽè¿™ä¸¤ä¸ªæ–¹æ³•çš„æ‰§è¡Œç»“æžœã€‚é‚£ä¹ˆç¬¬ä¸€ç§æ–¹æ³•æ˜¯è®©Aã€Bä¸²è¡Œæ‰§è¡Œï¼Œç¬¬äºŒç§æ–¹æ³•æ˜¯å°†Aã€Bé€»è¾‘åˆ†åˆ«è®¾ç½®ä¸ºcallableå¯¹è±¡ï¼Œä¹‹åŽé€šè¿‡invokeAllå¹¶è¡Œæ‰§è¡Œå®ƒä¿©ï¼Œå®žéªŒç»“æžœæ˜¯ç¬¬äºŒç§æ–¹æ³•ä¼˜äºŽç¬¬ä¸€ç§æ–¹æ³•çš„å®žçŽ°ã€‚ ThreadPoolExecutorThreadPoolExecutoræ”¯æŒé€šè¿‡è°ƒæ•´æž„é€ å‚æ•°æ¥é…ç½®ä¸åŒçš„å¤„ç†ç­–ç•¥ï¼Œä¸‹é¢ä¸»è¦ä»‹ç»ä¸€ä¸‹å¸¸ç”¨çš„ç­–ç•¥é…ç½®æ–¹æ³•ä»¥åŠåº”ç”¨åœºæ™¯ã€‚ ThreadPoolExecutor çš„å¤„ç†é€»è¾‘é¦–å…ˆçœ‹ä¸€ä¸‹ ThreadPoolExecutor æž„é€ å‡½æ•°çš„å®šä¹‰ï¼š1234567public ThreadPoolExecutor(int corePoolSize, //çº¿ç¨‹æ± æ ¸å¿ƒçº¿ç¨‹æ•°é‡int maximumPoolSize, //çº¿ç¨‹æ± æœ€å¤§çº¿ç¨‹æ•°é‡long keepAliveTime, //çº¿ç¨‹KeepAliveæ—¶é—´ï¼Œå½“çº¿ç¨‹æ± æ•°é‡è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°é‡ä»¥åŽï¼Œidleæ—¶é—´è¶…è¿‡è¿™ä¸ªå€¼çš„çº¿ç¨‹ä¼šè¢«ç»ˆæ­¢TimeUnit unit, //çº¿ç¨‹KeepAliveæ—¶é—´å•ä½BlockingQueue&lt;Runnable&gt; workQueue, //ä»»åŠ¡é˜Ÿåˆ—ThreadFactory threadFactory, //åˆ›å»ºçº¿ç¨‹çš„å·¥åŽ‚å¯¹è±¡RejectedExecutionHandler handler) //ä»»åŠ¡è¢«æ‹’ç»åŽè°ƒç”¨çš„handler ThreadPoolExecutor å¯¹çº¿ç¨‹æ± å’Œé˜Ÿåˆ—çš„ä½¿ç”¨æ–¹å¼å¦‚ä¸‹ï¼š1ã€ä»Žçº¿ç¨‹æ± ä¸­èŽ·å–å¯ç”¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æžœæ²¡æœ‰å¯ç”¨çº¿ç¨‹åˆ™ä½¿ç”¨ThreadFactoryåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ°corePoolSizeé™åˆ¶ï¼›2ã€çº¿ç¨‹æ± çº¿ç¨‹æ•°è¾¾åˆ°corePoolSizeä»¥åŽï¼Œæ–°çš„ä»»åŠ¡å°†è¢«æ”¾å…¥é˜Ÿåˆ—ï¼Œç›´åˆ°é˜Ÿåˆ—ä¸èƒ½å†å®¹çº³æ›´å¤šçš„ä»»åŠ¡ï¼›3ã€å½“é˜Ÿåˆ—ä¸èƒ½å†å®¹çº³æ›´å¤šçš„ä»»åŠ¡ä»¥åŽï¼Œä¼šåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ°maxinumPoolSizeé™åˆ¶ï¼›4ã€çº¿ç¨‹æ•°è¾¾åˆ°maxinumPoolSizeé™åˆ¶ä»¥åŽæ–°ä»»åŠ¡ä¼šè¢«æ‹’ç»æ‰§è¡Œï¼Œè°ƒç”¨ RejectedExecutionHandler è¿›è¡Œå¤„ç†ã€‚ ä¸‰ç§å¸¸ç”¨çš„ ThreadPoolExecutorExecutors æ˜¯æä¾›äº†ä¸€ç»„å·¥åŽ‚æ–¹æ³•ç”¨äºŽåˆ›å»ºå¸¸ç”¨çš„ ExecutorService ï¼Œåˆ†åˆ«æ˜¯ FixedThreadPoolï¼ŒCachedThreadPool ä»¥åŠ SingleThreadExecutorã€‚è¿™ä¸‰ç§ThreadPoolExecutoréƒ½æ˜¯è°ƒç”¨ ThreadPoolExecutor æž„é€ å‡½æ•°è¿›è¡Œåˆ›å»ºï¼ŒåŒºåˆ«åœ¨äºŽå‚æ•°ä¸åŒã€‚1ã€FixedThreadPool - çº¿ç¨‹æ± å¤§å°å›ºå®šï¼Œä»»åŠ¡é˜Ÿåˆ—æ— ç•Œã€‚ä¸‹é¢æ˜¯ Executors ç±» newFixedThreadPool æ–¹æ³•çš„æºç ï¼š12345public static ExecutorService newFixedThreadPool(int nThreads) &#123;return new ThreadPoolExecutor(nThreads, nThreads,0L, TimeUnit.MILLISECONDS,new LinkedBlockingQueue&lt;Runnable&gt;());&#125; å¯ä»¥çœ‹åˆ° corePoolSize å’Œ maximumPoolSize è®¾ç½®æˆäº†ç›¸åŒçš„å€¼ï¼Œæ­¤æ—¶ä¸å­˜åœ¨çº¿ç¨‹æ•°é‡å¤§äºŽæ ¸å¿ƒçº¿ç¨‹æ•°é‡çš„æƒ…å†µï¼Œæ‰€ä»¥KeepAliveæ—¶é—´è®¾ç½®ä¸ä¼šç”Ÿæ•ˆã€‚ä»»åŠ¡é˜Ÿåˆ—ä½¿ç”¨çš„æ˜¯ä¸é™åˆ¶å¤§å°çš„ LinkedBlockingQueue ï¼Œç”±äºŽæ˜¯æ— ç•Œé˜Ÿåˆ—æ‰€ä»¥å®¹çº³çš„ä»»åŠ¡æ•°é‡æ²¡æœ‰ä¸Šé™ã€‚å› æ­¤ï¼ŒFixedThreadPoolçš„è¡Œä¸ºå¦‚ä¸‹ï¼š1ã€ä»Žçº¿ç¨‹æ± ä¸­èŽ·å–å¯ç”¨çº¿ç¨‹æ‰§è¡Œä»»åŠ¡ï¼Œå¦‚æžœæ²¡æœ‰å¯ç”¨çº¿ç¨‹åˆ™ä½¿ç”¨ThreadFactoryåˆ›å»ºæ–°çš„çº¿ç¨‹ï¼Œç›´åˆ°çº¿ç¨‹æ•°è¾¾åˆ°nThreadsï¼›2ã€çº¿ç¨‹æ± çº¿ç¨‹æ•°è¾¾åˆ°nThreadsä»¥åŽï¼Œæ–°çš„ä»»åŠ¡å°†è¢«æ”¾å…¥é˜Ÿåˆ—ã€‚FixedThreadPoolçš„ä¼˜ç‚¹æ˜¯èƒ½å¤Ÿä¿è¯æ‰€æœ‰çš„ä»»åŠ¡éƒ½è¢«æ‰§è¡Œï¼Œæ°¸è¿œä¸ä¼šæ‹’ç»æ–°çš„ä»»åŠ¡ï¼›åŒæ—¶ç¼ºç‚¹æ˜¯é˜Ÿåˆ—æ•°é‡æ²¡æœ‰é™åˆ¶ï¼Œåœ¨ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ— é™å»¶é•¿çš„è¿™ç§æžç«¯æƒ…å†µä¸‹ä¼šé€ æˆå†…å­˜é—®é¢˜ã€‚2ã€SingleThreadExecutor - çº¿ç¨‹æ± å¤§å°å›ºå®šä¸º1ï¼Œä»»åŠ¡é˜Ÿåˆ—æ— ç•Œ123456public static ExecutorService newSingleThreadExecutor() &#123;return new FinalizableDelegatedExecutorService(new ThreadPoolExecutor(1, 1,0L, TimeUnit.MILLISECONDS,new LinkedBlockingQueue&lt;Runnable&gt;()));&#125; è¿™ä¸ªå·¥åŽ‚æ–¹æ³•ä¸­ä½¿ç”¨æ— ç•ŒLinkedBlockingQueueï¼Œå¹¶çš„å°†çº¿ç¨‹æ•°è®¾ç½®æˆ1ã€‚è™½ç„¶æ˜¯å•çº¿ç¨‹å¤„ç†ï¼Œä¸€æ—¦çº¿ç¨‹å› ä¸ºå¤„ç†å¼‚å¸¸ç­‰åŽŸå› ç»ˆæ­¢çš„æ—¶å€™ï¼ŒThreadPoolExecutorä¼šè‡ªåŠ¨åˆ›å»ºä¸€ä¸ªæ–°çš„çº¿ç¨‹ç»§ç»­è¿›è¡Œå·¥ä½œã€‚SingleThreadExecutor é€‚ç”¨äºŽåœ¨é€»è¾‘ä¸Šéœ€è¦å•çº¿ç¨‹å¤„ç†ä»»åŠ¡çš„åœºæ™¯ï¼ŒåŒæ—¶æ— ç•Œçš„LinkedBlockingQueueä¿è¯æ–°ä»»åŠ¡éƒ½èƒ½å¤Ÿæ”¾å…¥é˜Ÿåˆ—ï¼Œä¸ä¼šè¢«æ‹’ç»ï¼›ç¼ºç‚¹å’ŒFixedThreadPoolç›¸åŒï¼Œå½“å¤„ç†ä»»åŠ¡æ— é™ç­‰å¾…çš„æ—¶å€™ä¼šé€ æˆå†…å­˜é—®é¢˜ã€‚3ã€CachedThreadPool - çº¿ç¨‹æ± æ— é™å¤§ï¼ˆMAX INTï¼‰ï¼Œç­‰å¾…é˜Ÿåˆ—é•¿åº¦ä¸º112345public static ExecutorService newCachedThreadPool() &#123;return new ThreadPoolExecutor(0, Integer.MAX_VALUE,60L, TimeUnit.SECONDS,new SynchronousQueue&lt;Runnable&gt;());&#125; SynchronousQueueæ˜¯ä¸€ä¸ªåªæœ‰1ä¸ªå…ƒç´ çš„é˜Ÿåˆ—ï¼Œå…¥é˜Ÿçš„ä»»åŠ¡éœ€è¦ä¸€ç›´ç­‰å¾…ç›´åˆ°é˜Ÿåˆ—ä¸­çš„å…ƒç´ è¢«ç§»å‡ºã€‚æ ¸å¿ƒçº¿ç¨‹æ•°æ˜¯0ï¼Œæ„å‘³ç€æ‰€æœ‰ä»»åŠ¡ä¼šå…ˆå…¥é˜Ÿåˆ—ï¼›æœ€å¤§çº¿ç¨‹æ•°æ˜¯Integer.MAX_VALUEï¼Œå¯ä»¥è®¤ä¸ºçº¿ç¨‹æ•°é‡æ˜¯æ²¡æœ‰é™åˆ¶çš„ã€‚KeepAliveæ—¶é—´è¢«è®¾ç½®æˆ60ç§’ï¼Œæ„å‘³ç€åœ¨æ²¡æœ‰ä»»åŠ¡çš„æ—¶å€™è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°çš„çº¿ç¨‹ç­‰å¾…60ç§’ä»¥åŽé€€å‡ºã€‚CachedThreadPoolå¯¹ä»»åŠ¡çš„å¤„ç†ç­–ç•¥æ˜¯æäº¤çš„ä»»åŠ¡ä¼šç«‹å³åˆ†é…ä¸€ä¸ªçº¿ç¨‹è¿›è¡Œæ‰§è¡Œï¼Œçº¿ç¨‹æ± ä¸­çº¿ç¨‹æ•°é‡ä¼šéšç€ä»»åŠ¡æ•°çš„å˜åŒ–è‡ªåŠ¨æ‰©å¼ å’Œç¼©å‡ï¼Œåœ¨ä»»åŠ¡æ‰§è¡Œæ—¶é—´æ— é™å»¶é•¿çš„æžç«¯æƒ…å†µä¸‹ä¼šåˆ›å»ºè¿‡å¤šçš„çº¿ç¨‹ã€‚ è¯´æ˜Žï¼šå®žéªŒè¯æ˜Žï¼Œå½“è¶…è¿‡æ ¸å¿ƒçº¿ç¨‹æ•°åŽï¼Œçº¿ç¨‹æ± çš„æœºåˆ¶æ˜¯å°½é‡é‡ç”¨è¿˜åœ¨KeepAliveæ—¶é—´å†…çš„çº¿ç¨‹ã€‚ å‚è€ƒèµ„æ–™ThreadPoolExecutorç­–ç•¥é…ç½®ä»¥åŠåº”ç”¨åœºæ™¯]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
        <tag>çº¿ç¨‹æ± </tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå›¾ç‰‡åŽ‹ç¼©æ–¹ç•¥]]></title>
    <url>%2F2018%2F02%2F22%2FAndroid%E5%9B%BE%E7%89%87%E5%8E%8B%E7%BC%A9%E6%96%B9%E7%95%A5%2F</url>
    <content type="text"><![CDATA[æˆ‘ä»¬é€šå¸¸é‡‡ç”¨å¤šç§æ–¹å¼ç»“åˆçš„æ–¹æ³•å®žçŽ°å›¾ç‰‡åŽ‹ç¼©éœ€æ±‚ï¼Œè¿™äº›æ–¹å¼åŒ…æ‹¬è´¨é‡åŽ‹ç¼©ã€å°ºå¯¸åŽ‹ç¼©ã€‚æœ¬ç« å°†åˆ†åˆ«ä»‹ç»è¿™ä¸¤ç§æ–¹å¼ï¼Œå¹¶ä¸”æœ€åŽå°†ç»“åˆè¿™ä¸¤ç§æ–¹å¼å®žçŽ°å›¾ç‰‡åŽ‹ç¼©çš„æœ€ä¼˜è§£å†³æ–¹æ¡ˆã€‚ è´¨é‡åŽ‹ç¼©è®¾ç½®bitmap optionså±žæ€§ï¼Œé™ä½Žå›¾ç‰‡çš„è´¨é‡ï¼Œä½†åƒç´ ä¸ä¼šå‡å°‘ï¼Œoptions å±žæ€§çš„å€¼ä¸º0-100ï¼Œæ¥å®žçŽ°åŽ‹ç¼©ã€‚123456789101112131415public static void compressImageToFile(Bitmap bmp,File file) &#123;// 0-100 100ä¸ºä¸åŽ‹ç¼©int options = 100; ByteArrayOutputStream baos = new ByteArrayOutputStream();// æŠŠåŽ‹ç¼©åŽçš„æ•°æ®å­˜æ”¾åˆ°baosä¸­bmp.compress(Bitmap.CompressFormat.JPEG, options, baos);try &#123; FileOutputStream fos = new FileOutputStream(file); fos.write(baos.toByteArray()); fos.flush(); fos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; å°ºå¯¸åŽ‹ç¼©é€šè¿‡ç¼©æ”¾å›¾ç‰‡åƒç´ æ¥å‡å°‘å›¾ç‰‡æ‰€å å†…å­˜ã€‚123456789101112131415161718192021public static void compressBitmapToFile(Bitmap bmp, File file)&#123;// å°ºå¯¸åŽ‹ç¼©å€æ•°,å€¼è¶Šå¤§ï¼Œå›¾ç‰‡å°ºå¯¸è¶Šå°int ratio = 2;// åŽ‹ç¼©Bitmapåˆ°å¯¹åº”å°ºå¯¸Bitmap result = Bitmap.createBitmap(bmp.getWidth() / ratio, bmp.getHeight() / ratio, Config.ARGB_8888);Canvas canvas = new Canvas(result);Rect rect = new Rect(0, 0, bmp.getWidth() / ratio, bmp.getHeight() / ratio);canvas.drawBitmap(bmp, null, rect, null);ByteArrayOutputStream baos = new ByteArrayOutputStream();// æŠŠåŽ‹ç¼©åŽçš„æ•°æ®å­˜æ”¾åˆ°baosä¸­result.compress(Bitmap.CompressFormat.JPEG, 100 ,baos);try &#123; FileOutputStream fos = new FileOutputStream(file); fos.write(baos.toByteArray()); fos.flush(); fos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; é€šè¿‡è®¾ç½® Bitmap çš„ Matrix å±žæ€§ã€‚ï¼ˆä¸å¤±çœŸï¼‰12345678// ç¼©æ”¾çš„çŸ©é˜µMatrix scaleMatrix = new Matrix();int width = originalBitmap.getWidth();int height = originalBitmap.getHeight();scaleMatrix.setScale(ratio, ratio, width / 2, heigith / 2);//å®žæ—¶å˜æ¢çš„å›¾ç‰‡èµ„æºbitmaptargetBitmap = Bitmap.createBitmap(originalBitmap, 0, 0,width, height, scaleMatrix, true); è®¾ç½®å›¾ç‰‡é‡‡æ ·çŽ‡ï¼Œå‡å°‘å›¾ç‰‡åƒç´ ã€‚12345678910111213141516171819public static void compressBitmap(String filePath, File file)&#123;// æ•°å€¼è¶Šé«˜ï¼Œå›¾ç‰‡åƒç´ è¶Šä½Žint inSampleSize = 2;BitmapFactory.Options options = new BitmapFactory.Options();//é‡‡æ ·çŽ‡options.inSampleSize = inSampleSize;Bitmap bitmap = BitmapFactory.decodeFile(filePath, options); ByteArrayOutputStream baos = new ByteArrayOutputStream();// æŠŠåŽ‹ç¼©åŽçš„æ•°æ®å­˜æ”¾åˆ°baosä¸­bitmap.compress(Bitmap.CompressFormat.JPEG, 100 ,baos);try &#123; FileOutputStream fos = new FileOutputStream(file); fos.write(baos.toByteArray()); fos.flush(); fos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); &#125; &#125; å°çŸ¥è¯†1ã€æ–‡ä»¶å¤§å°æ¢ç®—å…¬å¼ï¼š1Byte=8bit1KB=1024Byte(å­—èŠ‚)=8*1024bit1MB=1024KB1GB=1024MB1TB=1024GB2ã€å›¾åƒå ç”¨å†…å­˜ç©ºé—´çš„å¤§å°ï¼šåˆ†è¾¨çŽ‡ * ä½æ·± ï¼ 8åˆ†è¾¨çŽ‡ï¼šå®½ * é«˜ä½æ·±åº¦ï¼šæŒ‡å®šå›¾åƒä¸­çš„æ¯ä¸ªåƒç´ å¯ä»¥ä½¿ç”¨çš„é¢œè‰²ä¿¡æ¯æ•°é‡ã€‚æ¯ä¸ªåƒç´ ä½¿ç”¨çš„ä¿¡æ¯ä½æ•°è¶Šå¤šï¼Œå¯ç”¨çš„é¢œè‰²å°±è¶Šå¤šï¼Œé¢œè‰²è¡¨çŽ°å°±æ›´é€¼çœŸã€‚ä¾‹å¦‚ï¼šä¸€å¹…å›¾åƒåˆ†è¾¨çŽ‡ï¼š1024*768,24ä½ï¼Œåˆ™å…¶å¤§å°è®¡ç®—å¦‚ä¸‹ï¼šå¤§å° = 1024 * 768 * 24 / 8 = 2359296 byte = 2304 KB æœ€ä½³å®žè·µå®žé™…ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œé¦–å…ˆæ˜¯å°†å›¾ç‰‡çš„å°ºå¯¸åŽ‹ç¼©åˆ°ä¸€å®šå¤§å°ï¼Œç„¶åŽé™ä½Žå›¾ç‰‡çš„è´¨é‡åˆ°ç‰¹å®šçš„å†…å­˜è¦æ±‚ã€‚1234567891011121314151617Bitmap obtainBitmap() &#123;Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.imag);Bitmap bg = Bitmap.createBitmap(bitmap.getWidth() / 2, bitmap.getHeight() / 2, Bitmap.Config.ARGB_8888);Canvas canvas = new Canvas(bg);Rect rect = new Rect(0, 0, bitmap.getWidth() / 2, bitmap.getHeight() / 2);canvas.drawBitmap(bitmap, null, rect, null);ByteArrayOutputStream outputStream = new ByteArrayOutputStream();int quality = 100;//ç›´åˆ°å›¾ç‰‡çš„å¤§å°å°äºŽ100kbdo &#123;outputStream.reset();bg.compress(Bitmap.CompressFormat.JPEG, quality, outputStream);quality = quality - 3;&#125; while (outputStream.toByteArray().length / 1024 &gt;= 100 &amp;&amp; quality &gt; 0);Bitmap result = BitmapFactory.decodeByteArray(outputStream.toByteArray(), 0, outputStream.size());return result;&#125; å‚è€ƒèµ„æ–™Android å›¾ç‰‡åŽ‹ç¼©ä¹‹å¤šç§åŽ‹ç¼©æ–¹å¼ç»“åˆä½¿ç”¨]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>Bitmap</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Coordinatorlayoutä½¿ç”¨å…¨æ”»ç•¥]]></title>
    <url>%2F2018%2F01%2F20%2FCoordinatorlayout%E4%BD%BF%E7%94%A8%E5%85%A8%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[1.è‡ªå®šä¹‰BehavioråŸºç¡€æ¦‚å¿µå…¶å®žBehaviorå°±æ˜¯ä¸€ä¸ªåº”ç”¨äºŽViewçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼Œä¸€ä¸ªViewè·Ÿéšè€…å¦ä¸€ä¸ªViewçš„å˜åŒ–è€Œå˜åŒ–ï¼Œæˆ–è€…è¯´ä¸€ä¸ªViewç›‘å¬å¦ä¸€ä¸ªViewã€‚åœ¨Behaviorä¸­ï¼Œè¢«è§‚å¯ŸViewä¹Ÿå°±æ˜¯äº‹ä»¶æºè¢«ç§°ä¸ºdenpendcyï¼Œè€Œè§‚å¯ŸViewï¼Œåˆ™è¢«ç§°ä¸ºchildã€‚Buttonä¸ŽTextViewçš„çˆ±æ¨æƒ…ä»‡é¦–å…ˆåœ¨å¸ƒå±€æ–‡ä»¶ä¸­è·Ÿå¸ƒå±€è®¾ç½®ä¸ºCoordinatorLayoutï¼Œé‡Œé¢æ”¾ä¸€ä¸ªButtonå’Œä¸€ä¸ªTextViewã€‚12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;android.support.design.widget.CoordinatorLayout android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;&gt;&lt;TextView app:layout_behavior=&quot;.EasyBehavior&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:text=&quot;è§‚å¯Ÿè€…View child&quot;/&gt;&lt;Button android:id=&quot;@+id/btn&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:layout_gravity=&quot;center&quot;android:text=&quot;è¢«è§‚å¯ŸView dependency&quot;/&gt;&lt;/android.support.design.widget.CoordinatorLayout&gt; è¿™é‡Œæˆ‘ä»¬åœ¨Activityä¸­åšä¸€äº›æ‰‹è„šï¼Œè®©ButtonåŠ¨èµ·æ¥(ä¸è¦åœ¨æ„åæ ‡è¿™äº›ç»†èŠ‚)123456789101112@Override protected void onCreate(Bundle savedInstanceState) &#123;super.onCreate(savedInstanceState);setContentView(R.layout.activity_easy_behavior);findViewById(R.id.btn).setOnTouchListener(new View.OnTouchListener() &#123;@Override public boolean onTouch(View v, MotionEvent event) &#123; switch (event.getAction())&#123; case MotionEvent.ACTION_MOVE:v.setX(event.getRawX()-v.getWidth()/2);v.setY(event.getRawY()-v.getHeight()/2); break;&#125; return false;&#125;&#125;);&#125; æ­¤æ—¶ï¼ŒButtonå·²ç»å¯ä»¥è·Ÿéšæ‰‹æŒ‡ç§»åŠ¨äº†ã€‚çŽ°åœ¨åŽ»è‡ªå®šä¹‰ä¸€ä¸ªBehaviorè®©TextViewè·ŸéšButtonä¸€èµ·åŠ¨ï¼åˆ›å»ºä¸€ä¸ªEasyBehaviorç±»ï¼Œç»§æ‰¿äºŽBehavior12345678910111213141516public class EasyBehavior extends CoordinatorLayout.Behavior&lt;TextView&gt; &#123;//è¿™é‡Œçš„æ³›åž‹æ˜¯childçš„ç±»åž‹ï¼Œä¹Ÿå°±æ˜¯è§‚å¯Ÿè€…Viewpublic EasyBehavior(Context context, AttributeSet attrs) &#123;super(context, attrs);&#125;@Override public boolean layoutDependsOn(CoordinatorLayout parent, TextView child, View dependency) &#123; //å‘ŠçŸ¥ç›‘å¬çš„dependencyæ˜¯Buttonreturn dependency instanceof Button;&#125;@Override //å½“ dependency(Button)å˜åŒ–çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹child(TextView)è¿›è¡Œæ“ä½œpublic boolean onDependentViewChanged(CoordinatorLayout parent, TextView child, View dependency) &#123;child.setX(dependency.getX()+200);child.setY(dependency.getY()+200);child.setText(dependency.getX()+&quot;,&quot;+dependency.getY()); return true;&#125;&#125; æ³¨æ„ä¸¤ä¸ªæ–¹æ³•layoutDependsOn() ä»£è¡¨å¯»æ‰¾è¢«è§‚å¯ŸViewonDependentViewChanged() è¢«è§‚å¯ŸViewå˜åŒ–çš„æ—¶å€™å›žè°ƒç”¨çš„æ–¹æ³•åœ¨onDependentViewChangedä¸­ï¼Œæˆ‘ä»¬è®©TextViewè·ŸéšButtonçš„ç§»åŠ¨è€Œç§»åŠ¨ã€‚ä»£ç æ¯”è¾ƒç®€å•ï¼Œä¸€çœ‹å°±æ‡‚ã€‚Tipå¿…é¡»é‡å†™å¸¦åŒå‚çš„æž„é€ å™¨ï¼Œå› ä¸ºä»Žxmlåå°„éœ€è¦è°ƒç”¨ã€‚æŽ¥ä¸‹æ¥ï¼Œåœ¨xmlä¸­ï¼Œç»™TextViewè®¾ç½®æˆ‘ä»¬çš„Behaviorã€‚123456&lt;TextView app:layout_behavior=&quot;.EasyBehavior&quot;android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:text=&quot;è§‚å¯Ÿè€…View child&quot;/&gt; è¿è¡Œæ•ˆæžœå¦‚ä¸‹ï¼š 2.CoordinatorLayoutä½¿ç”¨CoordinatorLayoutæ˜¯è°·æ­Œæä¾›çš„Material Designè®¸å¤šåŠŸèƒ½çš„åŸºç¡€ï¼Œä½¿ç”¨å®ƒä½ å¯ä»¥è½»æ¾åœ°å®žçŽ°è®¸å¤šåŠ¨ç”»æ•ˆæžœã€‚è¿™äº›æ•ˆæžœåŒ…æ‹¬ï¼š1.æ»‘åŠ¨Floating Action Buttonä¸ºSnackBarçš„å¼¹èµ·æä¾›ç©ºé—´ã€‚2.å±•å¼€æˆ–è€…æ”¶èµ·Toolbarä¸ºå±å¹•çš„ä¸»å†…å®¹æä¾›ç©ºé—´ã€‚3.æŽ§åˆ¶æŸä¸ªåº”è¯¥è¢«æ”¶èµ·æˆ–å±•å¼€çš„Viewä»¥ä¸€å®šåœ°è§†å·®æ•ˆæžœå®ŒæˆåŠ¨ä½œï¼ŒåŒ…æ‹¬parallax scrolling effects åŠ¨ç”»ã€‚ Floating Action Buttons å’Œ SnackbarsFloatingActionButtonå¯ä»¥é€šè¿‡layout_anchorå’Œlayout_anchorGravityæ¥æŽ§åˆ¶æ˜¾ç¤ºçš„ä½ç½®ã€‚å½“æˆ‘ä»¬å°†å…¶æ˜¾ç¤ºåˆ°å±å¹•çš„åº•ç«¯æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨å“åº”SnackBarçš„å¼¹èµ·æˆ–æ”¶èµ·ï¼šSnackBarå¼¹èµ·åŽFloatingActionButtonä¹Ÿå¼¹èµ·SnackBarçš„é«˜åº¦ï¼Œæ”¶èµ·åŽFloatingActionButtonä¹Ÿæ”¶èµ·ã€‚123456789101112131415161718192021&lt;android.support.design.widget.CoordinatorLayoutandroid:id=&quot;@+id/main_content&quot;xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;android.support.v7.widget.RecyclerViewandroid:id=&quot;@+id/rvToDoList&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;/&gt;&lt;android.support.design.widget.FloatingActionButtonandroid:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:layout_gravity=&quot;bottom|right&quot;android:layout_margin=&quot;16dp&quot;android:src=&quot;@mipmap/ic_launcher&quot;app:layout_anchor=&quot;@id/rvToDoList&quot;app:layout_anchorGravity=&quot;bottom|right|end&quot;/&gt;&lt;/android.support.design.widget.CoordinatorLayout&gt; Expanding å’Œ Collapsing Toolbars1.ç¡®ä¿CoordinatorLayoutæ˜¯ä¸»å®¹å™¨ã€‚1234567891011121314&lt;android.support.design.widget.CoordinatorLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;android:id=&quot;@+id/main_content&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;android:fitsSystemWindows=&quot;true&quot;&gt;&lt;android.support.v7.widget.Toolbarandroid:id=&quot;@+id/toolbar&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;?attr/actionBarSize&quot;app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot; /&gt;&lt;/android.support.design.widget.CoordinatorLayout&gt; 2.ä¸ºäº†å“åº”æ»‘åŠ¨äº‹ä»¶ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨AppBarLayout:1234567891011121314&lt;android.support.design.widget.AppBarLayoutandroid:id=&quot;@+id/appbar&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;@dimen/detail_backdrop_height&quot;android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;android:fitsSystemWindows=&quot;true&quot;&gt;&lt;android.support.v7.widget.Toolbarandroid:id=&quot;@+id/toolbar&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;?attr/actionBarSize&quot;app:popupTheme=&quot;@style/ThemeOverlay.AppCompat.Light&quot; /&gt;&lt;/android.support.design.widget.AppBarLayout&gt; ä¸ºäº†è®©æ»‘åŠ¨çš„Viewå§‹ç»ˆåœ¨AppBarLayoutçš„ä¸‹é¢ï¼Œéœ€è¦ä¸ºæ»‘åŠ¨çš„Viewå®šä¹‰layout_behaviorä¸º@string/appbar_scrolling_view_behaviorã€‚æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡app:layout_scrollFlagsæŽ§åˆ¶AppBarLayoutä¸­çš„å­Viewå“åº”RecycleViewçš„æ»‘åŠ¨ã€‚1234567891011121314151617&lt;android.support.design.widget.AppBarLayoutandroid:layout_width=&quot;match_parent&quot;android:layout_height=&quot;wrap_content&quot;android:fitsSystemWindows=&quot;true&quot;android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot;&gt;&lt;android.support.v7.widget.Toolbarandroid:id=&quot;@+id/toolbar&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;?attr/actionBarSize&quot;app:layout_scrollFlags=&quot;scroll|enterAlways&quot;/&gt;&lt;android.support.v7.widget.RecyclerViewandroid:id=&quot;@+id/rvToDoList&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;/&gt;&lt;/android.support.design.widget.AppBarLayout&gt; å…³äºŽlayout_scrollFlagsçš„å€¼è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼š scroll - æƒ³æ»šåŠ¨å°±å¿…é¡»è®¾ç½®è¿™ä¸ªã€‚ enterAlways - å®žçŽ°quick returnæ•ˆæžœ, å½“å‘ä¸‹ç§»åŠ¨æ—¶ï¼Œç«‹å³æ˜¾ç¤ºViewï¼ˆæ¯”å¦‚Toolbar)ã€‚ exitUntilCollapsed - å‘ä¸Šæ»šåŠ¨æ—¶æ”¶ç¼©Viewï¼Œä½†å¯ä»¥å›ºå®šToolbarä¸€ç›´åœ¨ä¸Šé¢(å¯é€šè¿‡minHeightè®¾ç½®)ã€‚ enterAlwaysCollapsed - å½“ä½ çš„Viewå·²ç»è®¾ç½®minHeightå±žæ€§åˆä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼Œä½ çš„Viewåªèƒ½ä»¥æœ€å°é«˜åº¦è¿›å…¥ï¼Œåªæœ‰å½“æ»šåŠ¨è§†å›¾åˆ°è¾¾é¡¶éƒ¨æ—¶æ‰æ‰©å¤§åˆ°å®Œæ•´é«˜åº¦ã€‚ snap - å¦‚æžœå¤´éƒ¨æ»‘åŠ¨æ“ä½œè¶…è¿‡50%çš„è·ç¦»ï¼Œåˆ™è‡ªåŠ¨å…³é—­ã€‚å¦‚æžœå¤´éƒ¨æ»‘åŠ¨æ“ä½œä¸è¶…è¿‡50%çš„è·ç¦»ï¼Œåˆ™ä¸å…³é—­ã€‚ åˆ›å»ºæŠ˜å æ•ˆæžœCollapsingToolbarLayoutä½œç”¨æ˜¯æä¾›äº†ä¸€ä¸ªå¯ä»¥æŠ˜å çš„Toolbarï¼Œå®ƒç»§æ‰¿è‡³FrameLayoutï¼Œç»™å®ƒè®¾ç½®layout_scrollFlagsï¼Œå®ƒå¯ä»¥æŽ§åˆ¶åŒ…å«åœ¨CollapsingToolbarLayoutä¸­çš„æŽ§ä»¶(å¦‚ï¼šImageViewã€Toolbar)åœ¨å“åº”layout_behavioräº‹ä»¶æ—¶ä½œå‡ºç›¸åº”çš„scrollFlagsæ»šåŠ¨äº‹ä»¶(ç§»é™¤å±å¹•æˆ–å›ºå®šåœ¨å±å¹•é¡¶ç«¯)ã€‚123456789101112131415161718192021222324252627282930313233&lt;android.support.design.widget.AppBarLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;256dp&quot; android:fitsSystemWindows=&quot;true&quot;&gt; &lt;android.support.design.widget.CollapsingToolbarLayout android:id=&quot;@+id/collapsing_toolbar_layout&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; app:contentScrim=&quot;#30469b&quot; app:expandedTitleMarginStart=&quot;48dp&quot; app:layout_scrollFlags=&quot;scroll|exitUntilCollapsed&quot;&gt; &lt;ImageView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:scaleType=&quot;centerCrop&quot; android:src=&quot;@mipmap/bg&quot; app:layout_collapseMode=&quot;parallax&quot; app:layout_collapseParallaxMultiplier=&quot;0.7&quot; /&gt; &lt;android.support.v7.widget.Toolbar android:id=&quot;@+id/toolbar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;?attr/actionBarSize&quot; app:layout_collapseMode=&quot;pin&quot; /&gt; &lt;/android.support.design.widget.CollapsingToolbarLayout&gt; &lt;android.support.v7.widget.RecyclerView android:id=&quot;@+id/recyclerView&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;app:layout_behavior=&quot;@string/appbar_scrolling_view_behavior&quot;android:scrollbars=&quot;none&quot; /&gt; &lt;/android.support.design.widget.AppBarLayout&gt; 1ã€åœ¨CollapsingToolbarLayoutä¸­è®¾ç½®äº†ä¸€ä¸ªImageViewå’Œä¸€ä¸ªToolbarã€‚å¹¶æŠŠè¿™ä¸ªCollapsingToolbarLayoutæ”¾åˆ°AppBarLayoutä¸­ä½œä¸ºä¸€ä¸ªæ•´ä½“ã€‚åœ¨CollapsingToolbarLayoutä¸­ï¼Œæˆ‘ä»¬é™¤äº†è®¾ç½®layout_scrollFlagsï¼Œè¿˜å¯ä»¥è®¾ç½®ä¸€äº›å…¶å®ƒçš„å±žæ€§ï¼Œç®€è¦è¯´æ˜Žä¸€ä¸‹ï¼š contentScrim - è®¾ç½®å½“å®Œå…¨CollapsingToolbarLayoutæŠ˜å (æ”¶ç¼©)åŽçš„èƒŒæ™¯é¢œè‰²ã€‚ expandedTitleMarginStart - è®¾ç½®æ‰©å¼ æ—¶å€™(è¿˜æ²¡æœ‰æ”¶ç¼©æ—¶)titleå‘å·¦å¡«å……çš„è·ç¦»ã€‚ æ²¡æ‰©å¼ æ—¶å€™å¦‚å›¾ï¼š2ã€åœ¨ImageViewæŽ§ä»¶ä¸­ï¼šæˆ‘ä»¬è®¾ç½®äº†layout_collapseMode (æŠ˜å æ¨¡å¼) - æœ‰ä¸¤ä¸ªå€¼: pin - è®¾ç½®ä¸ºè¿™ä¸ªæ¨¡å¼æ—¶ï¼Œå½“CollapsingToolbarLayoutå®Œå…¨æ”¶ç¼©åŽï¼ŒToolbarè¿˜å¯ä»¥ä¿ç•™åœ¨å±å¹•ä¸Šã€‚ parallax - è®¾ç½®ä¸ºè¿™ä¸ªæ¨¡å¼æ—¶ï¼Œåœ¨å†…å®¹æ»šåŠ¨æ—¶ï¼ŒCollapsingToolbarLayoutä¸­çš„Viewï¼ˆæ¯”å¦‚ImageView)ä¹Ÿå¯ä»¥åŒæ—¶æ»šåŠ¨ï¼Œå®žçŽ°è§†å·®æ»šåŠ¨æ•ˆæžœï¼Œé€šå¸¸å’Œlayout_collapseParallaxMultiplier(è®¾ç½®è§†å·®å› å­)æ­é…ä½¿ç”¨ã€‚ layout_collapseParallaxMultiplier(è§†å·®å› å­) - è®¾ç½®è§†å·®æ»šåŠ¨å› å­ï¼Œå€¼ä¸ºï¼š0~1ã€‚ 3ã€åœ¨ToolbaræŽ§ä»¶ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†layout_collapseMode(æŠ˜å æ¨¡å¼)ä¸ºpinã€‚æ•ˆæžœå¦‚å›¾:ç»¼ä¸Šåˆ†æžï¼šå½“è®¾ç½®äº†layout_behaviorçš„æŽ§ä»¶å“åº”èµ·äº†CollapsingToolbarLayoutä¸­çš„layout_scrollFlagsäº‹ä»¶æ—¶ï¼ŒImageViewä¼šæœ‰è§†å·®æ•ˆæžœçš„å‘ä¸Šæ»šåŠ¨ç§»é™¤å±å¹•ï¼Œå½“å¼€å§‹æŠ˜å æ—¶CollapsingToolbarLayoutçš„èƒŒæ™¯è‰²(ä¹Ÿå°±æ˜¯Toolbarçš„èƒŒæ™¯è‰²)å°±ä¼šå˜ä¸ºæˆ‘ä»¬è®¾ç½®å¥½çš„èƒŒæ™¯è‰²ï¼ŒToolbarä¹Ÿä¸€ç›´ä¼šå›ºå®šåœ¨æœ€é¡¶ç«¯ã€‚ æ³¨æ„ï¼šä½¿ç”¨CollapsingToolbarLayoutæ—¶å¿…é¡»æŠŠtitleè®¾ç½®åˆ°CollapsingToolbarLayoutä¸Šï¼Œè®¾ç½®åˆ°Toolbarä¸Šä¸ä¼šæ˜¾ç¤ºã€‚å³ï¼šmCollapsingToolbarLayout.setTitle(â€œ â€œ); Bottom Sheetæœ‰ä¸¤ç§ç±»åž‹çš„Bottom Sheetï¼š1.Persistent bottom sheet :é€šå¸¸ç”¨äºŽæ˜¾ç¤ºä¸»ç•Œé¢ä¹‹å¤–çš„é¢å¤–ä¿¡æ¯ï¼Œå®ƒæ˜¯ä¸»ç•Œé¢çš„ä¸€éƒ¨åˆ†ï¼Œåªä¸è¿‡é»˜è®¤è¢«éšè—äº†ï¼Œå…¶æ·±åº¦ï¼ˆelevationï¼‰è·Ÿä¸»ç•Œé¢å¤„äºŽåŒä¸€çº§åˆ«ï¼›è¿˜æœ‰ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯åœ¨Persistent bottom sheetæ‰“å¼€çš„æ—¶å€™ï¼Œä¸»ç•Œé¢ä»ç„¶æ˜¯å¯ä»¥æ“ä½œçš„ã€‚psï¼šPersistent bottom sheetè¯¥å¦‚ä½•ç¿»è¯‘å‘¢ï¼Ÿæˆ‘è§‰å¾—ç¿»è¯‘ä¸ºæ™®é€šbottom sheetå°±å¥½äº†ï¼Œè¿˜çœ‹åˆ°æœ‰äººç¿»è¯‘ä¸ºâ€œå¸¸é©»bottom sheetâ€ï¼Œå¯èƒ½æ›´æŽ¥è¿‘äºŽè‹±è¯­çš„å­—é¢æ„æ€ï¼Œå¯æ˜¯åè€Œä¸æ˜“ç†è§£ã€‚2.æ¨¡æ€bottom sheet :é¡¾åæ€ä¹‰ï¼Œæ¨¡æ€çš„bottom sheetåœ¨æ‰“å¼€çš„æ—¶å€™ä¼šé˜»æ­¢å’Œä¸»ç•Œé¢çš„äº¤äº’ï¼Œå¹¶ä¸”åœ¨è§†è§‰ä¸Šä¼šåœ¨bottom sheetèƒŒåŽåŠ ä¸€å±‚åŠé€æ˜Žçš„é˜´å½±ï¼Œä½¿å¾—çœ‹ä¸ŠåŽ»æ·±åº¦ï¼ˆelevationï¼‰æ›´æ·±ã€‚æ€»ç»“èµ·æ¥è¿™ä¸¤ç§Bottom Sheetçš„åŒºåˆ«ä¸»è¦åœ¨äºŽè§†è§‰å’Œäº¤äº’ä¸Šï¼Œå½“ç„¶ä½¿ç”¨æ–¹æ³•ä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚ å‚è€ƒèµ„æ–™CoordinatorLayoutä»‹ç»]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>Coordinatorlayout</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Gitä½¿ç”¨è§„åˆ™è¡¥å……]]></title>
    <url>%2F2017%2F12%2F16%2FGit%E4%BD%BF%E7%94%A8%E8%A7%84%E5%88%99%E8%A1%A5%E5%85%85%2F</url>
    <content type="text"><![CDATA[å­¦ä¹ çš„gitçš„åŒå­¦æƒ³å¿…çœ‹è¿‡äº†å»–é›ªå³°è€å¸ˆçš„Gitæ•™ç¨‹ï¼Œç¬”è€…åœ¨å­¦ä¹ è¿‡ç¨‹ä¸­ä¹Ÿæ·±å—è¿™ç¯‡æ–‡ç« çš„å¯å‘ã€‚ä½†æ˜¯åœ¨å­¦ä¹ æˆ–ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œç¬”è€…ä¹Ÿé‡åˆ°äº†ä¸€äº›æ¯”è¾ƒå®žé™…çš„ä½†æ˜¯å»–è€å¸ˆæ²¡æœ‰æåˆ°æˆ–è€…åªæ˜¯ä¸€ç¬”å¸¦è¿‡çš„é—®é¢˜ã€‚è¿™ç¯‡æ–‡ç« å°±æŠŠè¿™äº›é—®é¢˜çš„è§£å†³åŠžæ³•è®°å½•ä¸€ä¸‹å§ï½ž1.å¦‚ä½•æ–¹ä¾¿çš„ä½¿ç”¨ä¸€å°æœºå™¨å‘ä¸åŒçš„è¿œç«¯ä»“åº“ï¼ˆå¦‚ï¼šgithubï¼‰æäº¤ä»£ç ?æˆ‘ä»¬çŸ¥é“åœ¨å¾€githubçš„æŸä¸€ä¸ªä»“åº“æäº¤ä»£ç æ—¶ï¼Œéœ€è¦åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªSSH Keyï¼Œç„¶åŽå°†å…¶æ·»åŠ åˆ°githubä¸­ï¼Œå¦‚ä¸‹ã€‚ä½†æ˜¯çŽ°åœ¨éœ€è¦ä¸ºgithubä¸­çš„å¦å¤–ä¸€ä¸ªåº“æ·»åŠ SSH keyï¼Œç†æ‰€å½“ç„¶åœ°ï¼Œæˆ‘ä»¬è¦å†æ¬¡åœ¨æœ¬åœ°ç”Ÿæˆä¸€ä¸ªSSH keyï¼Œå‘½ä»¤å¦‚ä¸‹ã€‚1ssh-keygen -t rsa -C &quot;youremail@yourcompany.com&quot; è‹¥ä¸€è·¯å›žè½¦ï¼ˆå¯†ç å¯ä»¥ä¸å†™ï¼‰ï¼Œè¿™æ ·ä¼šè¦†ç›–~/.ssh/ ç›®å½•ä¸‹ç”Ÿæˆ id_rsa å’Œ id_rsa.pub ä¸¤ä¸ªæ–‡ä»¶ã€‚ä¸ºäº†åŒºåˆ†ï¼Œæˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªå›žè½¦åŽè®¾ç½®è·¯å¾„ï¼š1Enter file in which to save the key (/root/.ssh/id_rsa):~/.ssh/æ–‡ä»¶å ç”±æ­¤æˆ‘ä»¬åˆ†åˆ«ä¸ºgithubä¸­çš„ä¸¤ä¸ªåº“ï¼ˆAåº“å’ŒBåº“ï¼‰ç”Ÿæˆå¯¹åº”çš„å…¬é’¥å’Œç§é’¥ï¼Œå®ŒæˆåŽçš„ç›®å½•ï¼šid_rsaid_rsa.pubid_subid_sub.pubä¹‹åŽæˆ‘ä»¬å°†æ–°ç”Ÿæˆçš„SSH keyè®¾ç½®ç»™Båº“ï¼Œæ­¤æ—¶ï¼Œç†æ‰€å½“ç„¶åœ°æˆ‘ä»¬å¼€å§‹å¾€Båº“ä¸­æäº¤ä»£ç ï¼Œä½†æ˜¯äº‹å®žæ²¡æœ‰é‚£ä¹ˆç¾Žå¥½ï¼Œæç¤ºï¼šæ²¡æœ‰æƒé™ã€‚å¦‚ä½•è§£å†³å‘¢ï¼Ÿ1ã€ é¦–å…ˆæŸ¥çœ‹ä»£ç†1ssh-add -l è‹¥æç¤º1Could not open a connection to your authentication agent. åˆ™ç³»ç»Ÿä»£ç†é‡Œæ²¡æœ‰ä»»ä½•keyï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œ1exec ssh-agent bash è‹¥ç³»ç»Ÿå·²ç»æœ‰ssh-key ä»£ç† ,å¯ä»¥åˆ é™¤1ssh-add -D 2.æ·»åŠ ç§é’¥12ssh-add ~/.ssh/id_rsa ssh-add ~/.ssh/id_sub 3.æ·»åŠ å…¬é’¥åœ¨githubå¯¹åº”çš„ç®¡ç†é¡µé¢ï¼Œæ·»åŠ å¯¹åº”çš„å…¬é’¥ï¼ˆ.pub æ–‡ä»¶å†…å®¹ï¼‰ï¼Œä¿å­˜åˆ°ä»£ç ç®¡ç†æœåŠ¡å™¨ã€‚4.æ·»åŠ å’Œç¼–è¾‘é…ç½®æ–‡ä»¶configåœ¨ ~/.ssh ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªconfigæ–‡ä»¶1touch ~/.ssh/config æ·»åŠ å†…å®¹1234567# github Host github.com HostName github.com PreferredAuthentications publickey # IdentityFile ~/.ssh/id_subIdentityFile ~/.ssh/id_rsa user git æ³¨æ„åˆ°ç¬¬äº”ã€å…­è¡Œ,å¦‚æžœæˆ‘ä»¬éœ€è¦å¾€å¯¹åº”çš„è¿œç«¯ç‰ˆæœ¬åº“ä¸­æäº¤ä»£ç ï¼Œé‚£ä¹ˆå®šä¹‰ç›¸åº”çš„IdentityFileè¡Œå³å¯ã€‚ä½†æ˜¯ï¼ŒåŒä¸€ä¸ªæ—¶é—´åªèƒ½é…ç½®ä¸€ä¸ªIdentityFileï¼Œåˆ‡æ¢çš„æ—¶å€™åªéœ€æ›´æ¢IdentityFileå³å¯ã€‚2.å¦‚ä½•ä¿®æ”¹commitçš„å¤‡æ³¨ï¼Ÿè¯•æƒ³ä½ åœ¨è°ƒç”¨git commit -m &quot;å¤‡æ³¨&quot;åŽï¼Œå¦‚æžœçªç„¶åæ‚”äº†ï¼Œæƒ³é‡æ–°ä¿®æ”¹commitçš„å¤‡æ³¨è¯­ï¼Œå¯ä»¥è°ƒç”¨git commit â€”amend,ä¹‹åŽå¯ä»¥åœ¨viç¼–è¾‘å™¨ä¸­é‡æ–°ç¼–è¾‘æˆ‘ä»¬çš„å¤‡æ³¨äº†ã€‚3.Gitå¿½ç•¥è§„åˆ™åŠ.gitignoreè§„åˆ™ä¸ç”Ÿæ•ˆçš„è§£å†³åŠžæ³•åœ¨gitä¸­å¦‚æžœæƒ³å¿½ç•¥æŽ‰æŸä¸ªæ–‡ä»¶ï¼Œä¸è®©è¿™ä¸ªæ–‡ä»¶æäº¤åˆ°ç‰ˆæœ¬åº“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ä¿®æ”¹æ ¹ç›®å½•ä¸­ .gitignore æ–‡ä»¶çš„æ–¹æ³•ï¼ˆå¦‚æ— ï¼Œåˆ™éœ€è‡ªå·±æ‰‹å·¥å»ºç«‹æ­¤æ–‡ä»¶ï¼‰ã€‚è¿™ä¸ªæ–‡ä»¶æ¯ä¸€è¡Œä¿å­˜äº†ä¸€ä¸ªåŒ¹é…çš„è§„åˆ™ä¾‹å¦‚ï¼š1234567# æ­¤ä¸ºæ³¨é‡Š â€“ å°†è¢« Git å¿½ç•¥*.a # å¿½ç•¥æ‰€æœ‰ .a ç»“å°¾çš„æ–‡ä»¶!lib.a # ä½† lib.a é™¤å¤–/TODO # ä»…ä»…å¿½ç•¥é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ TODO æ–‡ä»¶ï¼Œä¸åŒ…æ‹¬ subdir/TODObuild/ # å¿½ç•¥ build/ ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶doc/*.txt # ä¼šå¿½ç•¥ doc/notes.txt ä½†ä¸åŒ…æ‹¬ doc/server/arch.txt è§„åˆ™å¾ˆç®€å•ï¼Œä¸åšè¿‡å¤šè§£é‡Šï¼Œä½†æ˜¯æœ‰æ—¶å€™åœ¨é¡¹ç›®å¼€å‘è¿‡ç¨‹ä¸­ï¼Œçªç„¶å¿ƒè¡€æ¥æ½®æƒ³æŠŠæŸäº›ç›®å½•æˆ–æ–‡ä»¶åŠ å…¥å¿½ç•¥è§„åˆ™ï¼ŒæŒ‰ç…§ä¸Šè¿°æ–¹æ³•å®šä¹‰åŽå‘çŽ°å¹¶æœªç”Ÿæ•ˆï¼ŒåŽŸå› æ˜¯.gitignoreåªèƒ½å¿½ç•¥é‚£äº›åŽŸæ¥æ²¡æœ‰è¢«trackçš„æ–‡ä»¶ï¼Œå¦‚æžœæŸäº›æ–‡ä»¶å·²ç»è¢«çº³å…¥äº†ç‰ˆæœ¬ç®¡ç†ä¸­ï¼Œåˆ™ä¿®æ”¹.gitignoreæ˜¯æ— æ•ˆçš„ã€‚é‚£ä¹ˆè§£å†³æ–¹æ³•å°±æ˜¯å…ˆæŠŠæœ¬åœ°ç¼“å­˜åˆ é™¤ï¼ˆæ”¹å˜æˆæœªtrackçŠ¶æ€ï¼‰ï¼Œç„¶åŽå†æäº¤ï¼š123git rm -r --cached .git add .git commit -m &apos;update .gitignore&apos; 4.Git åˆå¹¶æ—¶ â€“no-ff çš„ä½œç”¨ã€‚ä¼ é€é—¨&gt;&gt;5.Git åˆ†æ”¯ç®¡ç†ç­–ç•¥åˆ†æžã€‚ä¼ é€é—¨&gt;&gt;6.Git åˆ†æ”¯ç®¡ç†å·¥å…·ï¼šGit flowã€‚ä¼ é€é—¨&gt;&gt;7.å¸¸ç”¨ Git å‘½ä»¤æ¸…å•ã€‚ä¼ é€é—¨&gt;&gt;]]></content>
      <categories>
        <category>Gitä½¿ç”¨</category>
      </categories>
      <tags>
        <tag>Git</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AndroidèŽ·å–ç³»ç»Ÿå›¾ç‰‡çš„ç ”ç©¶]]></title>
    <url>%2F2017%2F11%2F13%2FAndroid%E8%8E%B7%E5%8F%96%E7%B3%BB%E7%BB%9F%E5%9B%BE%E7%89%87%E7%9A%84%E7%A0%94%E7%A9%B6%2F</url>
    <content type="text"><![CDATA[åœ¨Androidå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°ä»Žç›¸å†Œä¸­èŽ·å–å›¾ç‰‡ã€æ‹ç…§èŽ·å–å›¾ç‰‡ã€ç›¸å†Œå¤šé€‰çš„éœ€æ±‚ï¼Œé‚£ä¹ˆä»Šå¤©å°±ä»Žè¿™ä¸‰ç‚¹å‡ºå‘æ¥ç ”ç©¶ä¸€ä¸‹AndroidèŽ·å–ç³»ç»Ÿçš„å›¾ç‰‡çš„æ–¹æ³•å§ï½ž 1.ç›¸å†ŒèŽ·å–å›¾ç‰‡ï¼ˆå•å¼ ï¼‰ä»Žç›¸å†ŒèŽ·å–å•å¼ å›¾ç‰‡çš„æ–¹å¼ä¸»è¦æœ‰ä¸¤ä¸ªï¼Œä¸€ç§æ˜¯ç›´æŽ¥èŽ·å–ï¼Œå¦å¤–ä¸€ç§æ˜¯åœ¨è¿›å…¥å†…å®¹ï¼ˆå›¾ç‰‡ï¼‰é€‰æ‹©ç•Œé¢ä¹‹å‰å¼¹å‡ºä¸€ä¸ªç±»åˆ«é€‰æ‹©çª—ã€‚ ç›´æŽ¥èŽ·å–12345void getImageFromAlbum() &#123; Intent intent = new Intent(Intent.ACTION_PICK); intent.setType(&quot;image/*&quot;);//ç›¸ç‰‡ç±»åž‹ startActivityForResult(intent, REQUEST_CODE_PICK_IMAGE); &#125; è¿›è¡Œå†…å®¹ç±»åˆ«é€‰æ‹©ä¹‹åŽï¼Œæ‰è¿›å…¥å…·ä½“çš„å†…å®¹ç•Œé¢123456void getContent() &#123;Intent intent = new Intent();intent.setType(&quot;image/*&quot;);intent.setAction(Intent.ACTION_GET_CONTENT);startActivityForResult(Intent.createChooser(intent, &quot;Select Picture&quot;), 1);//å®šä¹‰å¼¹çª—çš„æ ‡é¢˜ã€‚&#125; 2.ä»Žç…§ç›¸æœºèŽ·å–ç…§ç‰‡1234567891011protected void getImageFromCamera() &#123; String state = Environment.getExternalStorageState(); if (state.equals(Environment.MEDIA_MOUNTED)) &#123; Intent intent = new Intent();intent.setAction(&quot;android.media.action.IMAGE_CAPTURE&quot;);startActivityForResult(intent, 2); &#125; else &#123; Toast.makeText(getApplicationContext(), &quot;è¯·ç¡®è®¤å·²ç»æ’å…¥SDå¡&quot;, Toast.LENGTH_LONG).show(); &#125; &#125; å½“å›¾ç‰‡çš„ä¿¡æ¯è¿”å›žåŽï¼Œæˆ‘ä»¬è¦åœ¨onActivityResultæ–¹æ³•ä¸­èŽ·å–è¿”å›žçš„å›¾ç‰‡ä¿¡æ¯ã€‚12345678910@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if (requestCode == 1) &#123; Uri uri = data.getData(); //to do find the path of pic &#125; else if (requestCode == 2 ) &#123; Uri uri = data.getData(); //to do find the path of pic &#125; &#125; ä¸åŒçš„æœºå™¨èŽ·å¾—ç›¸ç‰‡çš„æ–¹å¼ä¸å¤ªä¸€æ ·ï¼Œå¯èƒ½æœ‰çš„ç›¸æœºèƒ½å¤Ÿé€šè¿‡ inten.getData()èŽ·å–åˆ°uriç„¶åŽå†æ ¹æ®urièŽ·å–æ•°æ®çš„è·¯å¾„ï¼Œåœ¨å°è£…æˆbitmapï¼Œä½†æœ‰æ—¶å€™æœ‰çš„ç›¸æœºèŽ·å–åˆ°çš„æ˜¯nullçš„ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è¯¥æ€Žä¹ˆåŠžå‘¢ï¼Ÿå…¶å®žè¿™æ—¶å€™æˆ‘ä»¬å°±åº”è¯¥ä»Žbundleä¸­èŽ·å–æ•°æ®ï¼Œé€šè¿‡(Bitmap) bundle.get(â€œdataâ€)ç›´æŽ¥èŽ·å–åˆ°ç›¸æœºå›¾ç‰‡çš„bitmapæ•°æ®ã€‚ä¸ºäº†èƒ½å¤ŸåŒæ—¶é€‚åº”ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼Œæˆ‘ä»¬è¿™æ—¶å€™å°±åº”è¯¥åœ¨èŽ·å–å›¾ç‰‡æ—¶åšåˆ¤æ–­äº†ã€‚æˆ‘ä»¬å¯ä»¥åœ¨å“åº”çš„æ—¶å€™åšä¸€ä¸ªåˆ¤æ–­ï¼š123456789101112131415161718192021222324@Override protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123; if (requestCode == 1) &#123; Uri uri = data.getData(); //to do find the path of pic by uri &#125; else if (requestCode == 2 ) &#123; Uri uri = data.getData(); if(uri == null)&#123; //use bundle to get data Bundle bundle = data.getExtras(); if (bundle != null) &#123; Bitmap photo = (Bitmap) bundle.get(&quot;data&quot;); //get bitmap //spath :ç”Ÿæˆå›¾ç‰‡å–ä¸ªåå­—å’Œè·¯å¾„åŒ…å«ç±»åž‹ saveImage(Bitmap photo, String spath); &#125; else &#123; Toast.makeText(getApplicationContext(), &quot;err****&quot;, Toast.LENGTH_LONG).show(); return; &#125; &#125;else&#123; //to do find the path of pic by uri &#125; &#125; &#125; åŽé¢çš„è¿‡ç¨‹å°±éœ€è¦é€šè¿‡bitmapè½¬åŒ–æˆç›¸åº”çš„å›¾ç‰‡æ–‡ä»¶äº†ã€‚ä¸è¿‡å¾—åˆ°æœ€ç»ˆçš„å›¾ç‰‡æ˜¯è¢«åŽ‹ç¼©äº†çš„ã€‚12345678910111213public static void saveImage(Bitmap photo, String spath) &#123; try &#123; BufferedOutputStream bos = new BufferedOutputStream( new FileOutputStream(spath, false)); photo.compress(Bitmap.CompressFormat.JPEG, 100, bos); bos.flush(); bos.close(); &#125; catch (Exception e) &#123; e.printStackTrace(); return false; &#125; return true; &#125; 3.å®žçŽ°ç›¸å†Œå¤šé€‰åŠŸèƒ½Androidè‡ªèº«æ²¡æœ‰å®žçŽ°ç›¸å†Œå¤šé€‰åŠŸèƒ½ï¼Œå¦‚æžœæƒ³è¦å®žçŽ°çš„è¯ï¼Œè¿˜æ˜¯æœ‰åŠžæ³•çš„ã€‚é€šè¿‡getContentResolver().query()éåŽ†æ•´ä¸ªç›¸å†Œå³å¯èŽ·å–æ‰€æœ‰çš„æœ¬åœ°å›¾ç‰‡ï¼Œç„¶åŽåˆ©ç”¨GridViewæˆ–è€…å…¶å®ƒçš„æ–¹å¼å°†è¿™äº›å›¾ç‰‡å±•ç¤ºå³å¯ã€‚123456789ContentResolver contentResolver = getContentResolver();Cursor cursor = contentResolver.query(MediaStore.Images.Media.EXTERNAL_CONTENT_URI, null, null, null, null);if (cursor.moveToFirst()) &#123;do &#123;String uriStr = cursor.getString(cursor.getColumnIndex(MediaStore.Images.ImageColumns.DATA));//è¿™é‡Œå¯ä»¥å…ˆå°†uriSträ¿å­˜åˆ°å†…å­˜ï¼Œä¹‹åŽå†åŠ è½½åˆ°Adapterä¸­ã€‚Log.d(&quot;TAG&quot;, &quot;query: &quot; + column);&#125; while (cursor.moveToNext());&#125; 4.æœ€ä½³å®žè·µèŽ·å–æƒé™ä¸è¦å¿˜è®°äº†ï¼ŒAndroidåœ¨è¯»å–å¤–éƒ¨å­˜å‚¨ç©ºé—´æ—¶éœ€è¦èŽ·å–android.permission.READ_EXTERNAL_STORAGEæƒé™ã€‚ä½†æ˜¯6.0ä»¥ä¸Šçš„Androidç³»ç»Ÿæœ‰äº†åŠ¨æ€èŽ·å–æƒé™çš„æ¦‚å¿µï¼Œå…·ä½“è¯·æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ä¸Šé¢æåˆ°è¯»å–å¤–éƒ¨å­˜å‚¨ç©ºé—´æ—¶éœ€è¦è¯»å–æƒé™ï¼Œå…¶å®žæ‰€æœ‰éœ€è¦è®¿é—®å¤–éƒ¨å­˜å‚¨ç©ºé—´çš„æ“ä½œéƒ½æ˜¯éœ€è¦è®¿é—®æƒé™çš„ã€‚ä½†æ˜¯å¯¹äºŽå†…éƒ¨å­˜å‚¨ç©ºé—´çš„è®¿é—®åˆ™ä¸éœ€è¦æƒé™çš„ç”³è¯·ã€‚å…³äºŽå†…éƒ¨å­˜å‚¨ç©ºé—´ä¸Žå¤–éƒ¨å­˜å‚¨ç©ºé—´çš„åŒºåˆ«ï¼Œå…·ä½“è¯·æŸ¥çœ‹è¿™ç¯‡æ–‡ç« ã€‚ å‚è€ƒèµ„æ–™Androidå¼€å‘ä¹‹èŽ·å–ç›¸å†Œç…§ç‰‡å’ŒèŽ·å–æ‹ç…§ç…§ç‰‡]]></content>
      <categories>
        <category>Androidå¤šåª’ä½“æ“ä½œ</category>
      </categories>
      <tags>
        <tag>èŽ·å–æ‹ç…§æˆ–ç›¸å†Œå›¾ç‰‡</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè‡ªå®šä¹‰Viewè¯¦ç»†æ•™ç¨‹]]></title>
    <url>%2F2017%2F10%2F09%2FAndroid%E8%87%AA%E5%AE%9A%E4%B9%89View%E8%AF%A6%E7%BB%86%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[è‡ªå®šä¹‰Viewæ˜¯Androidå¼€å‘çš„ä¸€ä¸ªé‡è¦æ¨¡å—ï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶åˆ†ä¸ºä¸‰å¤§ç±»ã€‚ä¸€ã€å¸ƒå±€ã€‚äºŒã€ç»˜åˆ¶ã€‚ä¸‰ã€è§¦æ‘¸åé¦ˆã€‚ä»¥ä¸Šåœ¨æ‰”ç‰©çº¿è€å¸ˆå†™çš„ Hencoder ç³»åˆ—æ•™ç¨‹ä¸­å†™å¾—å·²ç»å¾ˆè¯¦ç»†äº†ï¼Œæœ¬æ–‡æ˜¯ç«™åœ¨æ­¤è‚©è†€ä¸Šåšçš„ä¸€äº›è¡¥å……è¯´æ˜Žã€‚ ä»Žæž„é€ æ–¹æ³•è®²èµ·Viewæœ‰å››ç§å½¢å¼çš„æž„é€ æ–¹æ³•ï¼Œå…¶ä¸­å››ä¸ªå‚æ•°çš„æž„é€ æ–¹æ³•æ˜¯API 21æ‰å‡ºçŽ°ï¼Œæ‰€ä»¥ä¸€èˆ¬æˆ‘ä»¬åªéœ€è¦é‡å†™å…¶ä»–ä¸‰ä¸ªæž„é€ æ–¹æ³•å³å¯ã€‚å®ƒä»¬çš„å‚æ•°ä¸ä¸€æ ·åˆ†åˆ«å¯¹åº”ä¸åŒçš„åˆ›å»ºæ–¹å¼ï¼Œæ¯”å¦‚åªæœ‰ä¸€ä¸ªContextå‚æ•°çš„æž„é€ æ–¹æ³•é€šå¸¸æ˜¯é€šè¿‡ä»£ç åˆå§‹åŒ–æŽ§ä»¶æ—¶ä½¿ç”¨ï¼›è€Œä¸¤ä¸ªå‚æ•°çš„æž„é€ æ–¹æ³•é€šå¸¸å¯¹åº”å¸ƒå±€æ–‡ä»¶ä¸­æŽ§ä»¶è¢«æ˜ å°„æˆå¯¹è±¡æ—¶è°ƒç”¨ï¼ˆéœ€è¦è§£æžå±žæ€§ï¼‰ï¼›é€šå¸¸æˆ‘ä»¬è®©è¿™ä¸¤ä¸ªæž„é€ æ–¹æ³•æœ€ç»ˆè°ƒç”¨ä¸‰ä¸ªå‚æ•°çš„æž„é€ æ–¹æ³•ï¼Œç„¶åŽåœ¨ç¬¬ä¸‰ä¸ªæž„é€ æ–¹æ³•ä¸­è¿›è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œã€‚1234567891011public MyTextView(Context context) &#123;this(context, null);&#125;public MyTextView(Context context, AttributeSet attrs) &#123;this(context, attrs, 0);&#125;public MyTextView(Context context, AttributeSet attrs, int defStyleAttr) &#123;super(context, attrs, defStyleAttr);//åˆå§‹åŒ–æ“ä½œâ€¦â€¦&#125; è‡ªå®šä¹‰å¸ƒå±€å±žæ€§å¦‚æžœæœ‰äº›å±žæ€§æˆ‘ä»¬å¸Œæœ›ç”±ç”¨æˆ·æŒ‡å®šï¼Œåªæœ‰å½“ç”¨æˆ·ä¸æŒ‡å®šçš„æ—¶å€™æ‰ç”¨æˆ‘ä»¬ç¡¬ç¼–ç çš„å€¼ï¼Œæ¯”å¦‚ä¸Šé¢çš„é»˜è®¤å°ºå¯¸ï¼Œæˆ‘ä»¬æƒ³è¦ç”±ç”¨æˆ·è‡ªå·±åœ¨å¸ƒå±€æ–‡ä»¶é‡Œé¢æŒ‡å®šè¯¥æ€Žä¹ˆåšå‘¢ï¼Ÿé‚£å½“ç„¶æ˜¯é€šè¿‡è‡ªå®šä¹‰å±žæ€§ï¼Œè®©ç”¨æˆ·ç”¨æˆ‘ä»¬å®šä¹‰çš„å±žæ€§å•¦~é¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨res/values/styles.xmlæ–‡ä»¶ï¼ˆå¦‚æžœæ²¡æœ‰è¯·è‡ªå·±æ–°å»ºï¼‰é‡Œé¢å£°æ˜Žä¸€ä¸ªæˆ‘ä»¬è‡ªå®šä¹‰çš„å±žæ€§ï¼š1234567&lt;resources&gt;&lt;!--nameä¸ºå£°æ˜Žçš„&quot;å±žæ€§é›†åˆ&quot;åï¼Œå¯ä»¥éšä¾¿å–ï¼Œä½†æ˜¯æœ€å¥½æ˜¯è®¾ç½®ä¸ºè·Ÿæˆ‘ä»¬çš„Viewä¸€æ ·çš„åç§°--&gt;&lt;declare-styleable name=&quot;MyView&quot;&gt;&lt;!--å£°æ˜Žæˆ‘ä»¬çš„å±žæ€§ï¼Œåç§°ä¸ºdefault_size,å–å€¼ç±»åž‹ä¸ºå°ºå¯¸ç±»åž‹ï¼ˆdp,pxç­‰ï¼‰--&gt;&lt;attr name=&quot;default_size&quot; format=&quot;dimension&quot; /&gt;&lt;/declare-styleable&gt;&lt;/resources&gt; æŽ¥ä¸‹æ¥å°±æ˜¯åœ¨å¸ƒå±€æ–‡ä»¶ç”¨ä¸Šæˆ‘ä»¬çš„è‡ªå®šä¹‰çš„å±žæ€§å•¦~123456789101112&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:hc=&quot;http://schemas.android.com/apk/res-auto&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;com.hc.studyview.MyViewandroid:layout_width=&quot;match_parent&quot;android:layout_height=&quot;100dp&quot;hc:default_size=&quot;100dp&quot; /&gt;&lt;/LinearLayout&gt; æ³¨æ„ï¼šå¦‚æžœæ˜¯æˆ‘ä»¬çš„è‡ªå®šä¹‰å±žæ€§ï¼Œå°±éœ€è¦åœ¨æ ¹æ ‡ç­¾ï¼ˆLinearLayoutï¼‰é‡Œé¢è®¾å®šå‘½åç©ºé—´ã€‚å‘½åç©ºé—´çš„ä¸€ç§å†™æ³•æ˜¯xmlns:hc=â€http://schemas.android.com/apk/res-auto&quot;ï¼Œres-autoè¡¨ç¤ºè‡ªåŠ¨æŸ¥æ‰¾ï¼Œè¿˜æœ‰ä¸€ç§å†™æ³•æ˜¯xmlns:hc=&quot;http://schemas.android.com/apk/com.hc.studyview.MyView&quot;ï¼Œ`com.hc.studyview.MyView`ä¸ºæˆ‘ä»¬çš„åº”ç”¨ç¨‹åºåŒ…åã€‚è€Œå‘½åç©ºé—´çš„åç§°å¯ä»¥éšæ„å–ï¼Œå¦‚ä¸Šå°±æ˜¯`hc`ã€‚æœ€åŽå°±æ˜¯åœ¨æˆ‘ä»¬çš„è‡ªå®šä¹‰çš„Viewé‡Œé¢æŠŠæˆ‘ä»¬è‡ªå®šä¹‰çš„å±žæ€§çš„å€¼å–å‡ºæ¥ï¼Œåœ¨æž„é€ å‡½æ•°ä¸­ï¼Œè¿˜è®°å¾—æœ‰ä¸ªAttributeSetå±žæ€§å—ï¼Ÿå°±æ˜¯é å®ƒå¸®æˆ‘ä»¬æŠŠå¸ƒå±€é‡Œé¢çš„å±žæ€§å–å‡ºæ¥ï¼š12345678910111213private int defalutSize;public MyView(Context context, AttributeSet attrs) &#123;super(context, attrs);//ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æˆ‘ä»¬åœ¨styles.xmlæ–‡ä»¶ä¸­çš„&lt;declare-styleable&gt;æ ‡ç­¾//å³å±žæ€§é›†åˆçš„æ ‡ç­¾ï¼Œåœ¨Ræ–‡ä»¶ä¸­åç§°ä¸ºR.styleable+nameTypedArray a = context.obtainStyledAttributes(attrs, R.styleable.MyView);//ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºå±žæ€§é›†åˆé‡Œé¢çš„å±žæ€§ï¼ŒRæ–‡ä»¶åç§°ï¼šR.styleable+å±žæ€§é›†åˆåç§°+ä¸‹åˆ’çº¿+å±žæ€§åç§°//ç¬¬äºŒä¸ªå‚æ•°ä¸ºé»˜è®¤å€¼defalutSize = a.getDimensionPixelSize(R.styleable.MyView_default_size, 100);//æœ€åŽè®°å¾—å°†TypedArrayå¯¹è±¡å›žæ”¶a.recycle();&#125; è‡ªå®šä¹‰LayoutParamsViewGroupä¸­æœ‰ä¸¤ä¸ªå†…éƒ¨ç±»ViewGroup.LayoutParamså’ŒViewGroup.MarginLayoutParamsï¼ŒMarginLayoutParamsç»§æ‰¿è‡ªLayoutParamsï¼Œè¿™ä¸¤ä¸ªå†…éƒ¨ç±»å°±æ˜¯ViewGroupçš„å¸ƒå±€å‚æ•°ç±»ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨LinearLayoutç­‰å¸ƒå±€ä¸­ä½¿ç”¨çš„layout_width\layoutheightç­‰ä»¥â€œlayout â€å¼€å¤´çš„å±žæ€§éƒ½æ˜¯å¸ƒå±€å±žæ€§ã€‚ ä¸ºä»€ä¹ˆLayoutParams ç±»è¦å®šä¹‰åœ¨ViewGroupä¸­ï¼Ÿå¤§å®¶éƒ½çŸ¥é“ViewGroupæ˜¯æ‰€æœ‰å®¹å™¨çš„åŸºç±»ï¼Œä¸€ä¸ªæŽ§ä»¶éœ€è¦è¢«åŒ…è£¹åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œè¿™ä¸ªå®¹å™¨å¿…é¡»æä¾›ä¸€ç§è§„åˆ™æŽ§åˆ¶å­æŽ§ä»¶çš„æ‘†æ”¾ï¼Œæ¯”å¦‚ä½ çš„å®½é«˜æ˜¯å¤šå°‘ï¼Œè·ç¦»é‚£ä¸ªä½ç½®å¤šè¿œç­‰ã€‚æ‰€ä»¥ViewGroupæœ‰ä¹‰åŠ¡æä¾›ä¸€ä¸ªå¸ƒå±€å±žæ€§ç±»ï¼Œç”¨äºŽæŽ§åˆ¶å­æŽ§ä»¶çš„å¸ƒå±€å±žæ€§ã€‚ åœ¨Viewä¸­æœ‰ä¸€ä¸ªmLayoutParamsçš„å˜é‡ç”¨æ¥ä¿å­˜è¿™ä¸ªViewçš„æ‰€æœ‰å¸ƒå±€å±žæ€§ã€‚ViewGroup.LayoutParamsæœ‰ä¸¤ä¸ªå±žæ€§layout_widthå’Œlayout_heightï¼Œå› ä¸ºæ‰€æœ‰çš„å®¹å™¨éƒ½éœ€è¦è®¾ç½®å­æŽ§ä»¶çš„å®½é«˜ï¼Œæ‰€ä»¥è¿™ä¸ªLayoutParamsæ˜¯æ‰€æœ‰å¸ƒå±€å‚æ•°çš„åŸºç±»ï¼Œå¦‚æžœéœ€è¦æ‰©å±•å…¶ä»–å±žæ€§ï¼Œéƒ½åº”è¯¥ç»§æ‰¿è‡ªå®ƒã€‚æ¯”å¦‚RelativeLayoutä¸­å°±æä¾›äº†å®ƒè‡ªå·±çš„å¸ƒå±€å‚æ•°ç±»RelativeLayout.LayoutParamsï¼Œå¹¶æ‰©å±•äº†å¾ˆå¤šå¸ƒå±€å‚æ•°ï¼Œæˆ‘ä»¬å¹³æ—¶åœ¨RelativeLayoutä¸­ä½¿ç”¨çš„å¸ƒå±€å±žæ€§éƒ½æ¥è‡ªå®ƒï¼š123456789101112131415161718192021222324&lt;declare-styleable name= &quot;RelativeLayout_Layout&quot;&gt;&lt;attr name =&quot;layout_toLeftOf&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_toRightOf&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_above&quot; format=&quot;reference&quot; /&gt;&lt;attr name =&quot;layout_below&quot; format=&quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignBaseline&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignLeft&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignTop&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignRight&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignBottom&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignParentLeft&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_alignParentTop&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_alignParentRight&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_alignParentBottom&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_centerInParent&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_centerVertical&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_alignWithParentIfMissing&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_toStartOf&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_toEndOf&quot; format=&quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignStart&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignEnd&quot; format= &quot;reference&quot; /&gt;&lt;attr name =&quot;layout_alignParentStart&quot; format= &quot;boolean&quot; /&gt;&lt;attr name =&quot;layout_alignParentEnd&quot; format= &quot;boolean&quot; /&gt;&lt;/declare-styleable &gt; ä¸ºä»€ä¹ˆViewä¸­ä¼šæœ‰ä¸€ä¸ªmLayoutParamså˜é‡ï¼Ÿæˆ‘ä»¬åœ¨ä¹‹å‰å­¦ä¹ è‡ªå®šä¹‰æŽ§ä»¶çš„æ—¶å€™å­¦è¿‡è‡ªå®šä¹‰å±žæ€§ï¼Œæˆ‘ä»¬åœ¨æž„é€ æ–¹æ³•ä¸­ï¼Œåˆå§‹åŒ–å¸ƒå±€æ–‡ä»¶ä¸­çš„å±žæ€§å€¼ï¼Œæˆ‘ä»¬å§‘ä¸”æŠŠå±žæ€§åˆ†ä¸ºä¸¤ç§ã€‚ä¸€ç§æ˜¯æœ¬Viewçš„ç»˜åˆ¶å±žæ€§ï¼Œæ¯”å¦‚TextViewçš„æ–‡æœ¬ã€æ–‡å­—é¢œè‰²ã€èƒŒæ™¯ç­‰ï¼Œè¿™äº›å±žæ€§æ˜¯è·ŸViewçš„ç»˜åˆ¶ç›¸å…³çš„ã€‚å¦ä¸€ç§å°±æ˜¯ä»¥â€œlayout_â€æ‰“å¤´çš„å«åšå¸ƒå±€å±žæ€§ï¼Œè¿™äº›å±žæ€§æ˜¯çˆ¶æŽ§ä»¶å¯¹å­æŽ§ä»¶çš„å¤§å°åŠä½ç½®çš„ä¸€äº›æè¿°å±žæ€§ï¼Œè¿™äº›å±žæ€§åœ¨çˆ¶æŽ§ä»¶æ‘†æ”¾å®ƒçš„æ—¶å€™ä¼šä½¿ç”¨åˆ°ï¼Œæ‰€ä»¥å…ˆä¿å­˜èµ·æ¥ï¼Œè€Œè¿™äº›å±žæ€§éƒ½æ˜¯ViewGroup.LayoutParamså®šä¹‰çš„ï¼Œæ‰€ä»¥ç”¨ä¸€ä¸ªå˜é‡ä¿å­˜ç€ã€‚ çœ‹äº†ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬å¤§æ¦‚çŸ¥é“æ€Žä¹ˆä¸ºæˆ‘ä»¬çš„å¸ƒå±€å®¹å™¨å®šä¹‰è‡ªå·±çš„å¸ƒå±€å±žæ€§äº†å§ï¼Œå°±ä¸ç»•å¼¯å­äº†ï¼ŒæŒ‰ç…§ä¸‹é¢çš„æ­¥éª¤åšï¼š â‘ . å¤§è‡´æ˜Žç¡®å¸ƒå±€å®¹å™¨çš„éœ€æ±‚ï¼Œåˆæ­¥å®šä¹‰å¸ƒå±€å±žæ€§åœ¨å®šä¹‰å±žæ€§ä¹‹å‰è¦å¼„æ¸…æ¥šï¼Œæˆ‘ä»¬è‡ªå®šä¹‰çš„å¸ƒå±€å®¹å™¨éœ€è¦æ»¡è¶³é‚£äº›éœ€æ±‚ï¼Œéœ€è¦å“ªäº›å±žæ€§ï¼Œæ¯”å¦‚ï¼Œæˆ‘ä»¬çŽ°åœ¨è¦å®žçŽ°åƒç›¸å¯¹å¸ƒå±€ä¸€æ ·ï¼Œä¸ºå­æŽ§ä»¶è®¾ç½®ä¸€ä¸ªä½ç½®å±žæ€§layout_position=â€â€œï¼Œæ¥æŽ§åˆ¶å­æŽ§ä»¶åœ¨å¸ƒå±€ä¸­æ˜¾ç¤ºçš„ä½ç½®ã€‚æš‚å®šä½ç½®æœ‰äº”ç§ï¼šå·¦ä¸Šã€å·¦ä¸‹ã€å³ä¸Šã€å³ä¸‹ã€å±…ä¸­ã€‚æœ‰äº†éœ€æ±‚ï¼Œæˆ‘ä»¬å°±åœ¨attr.xmlå®šä¹‰è‡ªå·±çš„å¸ƒå±€å±žæ€§ï¼ˆå’Œä¹‹å‰è®²çš„è‡ªå®šä¹‰å±žæ€§ä¸€æ ·çš„æ“ä½œ)ã€‚123456789101112&lt;?xml version=&quot;1.0&quot; encoding= &quot;utf-8&quot;?&gt;&lt;resources&gt; &lt;declare-styleable name =&quot;CustomLayout&quot;&gt;&lt;attr name =&quot;layout_position&quot;&gt;&lt;enum name =&quot;center&quot; value=&quot;0&quot; /&gt;&lt;enum name =&quot;left&quot; value=&quot;1&quot; /&gt;&lt;enum name =&quot;right&quot; value=&quot;2&quot; /&gt;&lt;enum name =&quot;bottom&quot; value=&quot;3&quot; /&gt;&lt;enum name =&quot;rightAndBottom&quot; value=&quot;4&quot; /&gt;&lt;/attr &gt;&lt;/declare-styleable&gt;&lt;/resources&gt; leftå°±ä»£è¡¨æ˜¯å·¦ä¸Šï¼ˆæŒ‰å¸¸ç†é»˜è®¤å°±æ˜¯å·¦ä¸Šæ–¹å¼€å§‹ï¼Œå°±ä¸ç”¨å†™leftTopäº†ï¼Œç®€æ´ä¸€ç‚¹ï¼‰ï¼Œbottomå·¦ä¸‹ï¼Œright å³ä¸Šï¼ŒrightAndBottomå³ä¸‹ï¼Œcenterå±…ä¸­ã€‚å±žæ€§ç±»åž‹æ˜¯æžšä¸¾ï¼ŒåŒæ—¶åªèƒ½è®¾ç½®ä¸€ä¸ªå€¼ã€‚ â‘¡. ç»§æ‰¿LayoutParamsï¼Œå®šä¹‰å¸ƒå±€å‚æ•°ç±»æˆ‘ä»¬å¯ä»¥é€‰æ‹©ç»§æ‰¿ViewGroup.LayoutParamsï¼Œè¿™æ ·çš„è¯æˆ‘ä»¬çš„å¸ƒå±€åªæ˜¯ç®€å•çš„æ”¯æŒlayout_widthå’Œlayout_heightï¼›ä¹Ÿå¯ä»¥ç»§æ‰¿MarginLayoutParamsï¼Œå°±èƒ½ä½¿ç”¨layout_marginxxxå±žæ€§äº†ã€‚å› ä¸ºåŽé¢æˆ‘ä»¬è¿˜è¦ç”¨åˆ°marginå±žæ€§ï¼Œæ‰€ä»¥è¿™é‡Œæ–¹ä¾¿èµ·è§å°±ç›´æŽ¥ç»§æ‰¿MarginLayoutParamsäº†ã€‚è¦†ç›–æž„é€ æ–¹æ³•ï¼Œç„¶åŽåœ¨æœ‰AttributeSetå‚æ•°çš„æž„é€ æ–¹æ³•ä¸­åˆå§‹åŒ–å‚æ•°å€¼ï¼Œè¿™ä¸ªæž„é€ æ–¹æ³•æ‰æ˜¯å¸ƒå±€æ–‡ä»¶è¢«æ˜ å°„ä¸ºå¯¹è±¡çš„æ—¶å€™è¢«è°ƒç”¨çš„ã€‚123456789101112131415161718192021222324252627public static class CustomLayoutParams extends MarginLayoutParams &#123;public static final int POSITION_MIDDLE = 0; // ä¸­é—´public static final int POSITION_LEFT = 1; // å·¦ä¸Šæ–¹public static final int POSITION_RIGHT = 2; // å³ä¸Šæ–¹public static final int POSITION_BOTTOM = 3; // å·¦ä¸‹è§’public static final int POSITION_RIGHTANDBOTTOM = 4; // å³ä¸‹è§’public int position = POSITION_LEFT; // é»˜è®¤æˆ‘ä»¬çš„ä½ç½®å°±æ˜¯å·¦ä¸Šè§’public CustomLayoutParams(Context c, AttributeSet attrs) &#123;super(c, attrs);TypedArray a = c.obtainStyledAttributes(attrs,R.styleable.CustomLayout );//èŽ·å–è®¾ç½®åœ¨å­æŽ§ä»¶ä¸Šçš„ä½ç½®å±žæ€§position = a.getInt(R.styleable.CustomLayout_layout_position ,position );a.recycle();&#125;public CustomLayoutParams( int width, int height) &#123;super(width, height);&#125;public CustomLayoutParams(ViewGroup.LayoutParams source) &#123;super(source);&#125;&#125; â‘¢. é‡å†™generateLayoutParams()åœ¨ViewGroupä¸­æœ‰ä¸‹é¢å‡ ä¸ªå…³äºŽLayoutParamsçš„æ–¹æ³•ï¼ŒgenerateLayoutParams (AttributeSet attrs)æ˜¯åœ¨å¸ƒå±€æ–‡ä»¶è¢«å¡«å……ä¸ºå¯¹è±¡çš„æ—¶å€™è°ƒç”¨çš„ï¼Œè¿™ä¸ªæ–¹æ³•æ˜¯ä¸‹é¢å‡ ä¸ªæ–¹æ³•ä¸­æœ€é‡è¦çš„ï¼Œå¦‚æžœä¸é‡å†™å®ƒï¼Œæˆ‘ä»¬å¸ƒå±€æ–‡ä»¶ä¸­è®¾ç½®çš„å¸ƒå±€å‚æ•°éƒ½ä¸èƒ½æ‹¿åˆ°ã€‚å…¶ä»–å‡ ä¸ªæ–¹æ³•æˆ‘ä»¬æœ€å¥½ä¹Ÿèƒ½é‡å†™ä¸€ä¸‹ï¼Œå°†é‡Œé¢çš„LayoutParamsæ¢æˆæˆ‘ä»¬è‡ªå®šä¹‰çš„CustomLayoutParamsç±»ï¼Œé¿å…ä»¥åŽä¼šé‡åˆ°å¸ƒå±€å‚æ•°ç±»åž‹è½¬æ¢å¼‚å¸¸ã€‚12345678910111213141516@Overridepublic LayoutParams generateLayoutParams(AttributeSet attrs) &#123;return new CustomLayoutParams(getContext(), attrs);&#125;@Overrideprotected ViewGroup.LayoutParams generateLayoutParams(ViewGroup.LayoutParams p) &#123;return new CustomLayoutParams (p);&#125;@Overrideprotected LayoutParams generateDefaultLayoutParams() &#123;return new CustomLayoutParams (LayoutParams.MATCH_PARENT , LayoutParams.MATCH_PARENT);&#125;@Overrideprotected boolean checkLayoutParams(ViewGroup.LayoutParams p) &#123;return p instanceof CustomLayoutParams ;&#125; â‘£. åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨å¸ƒå±€å±žæ€§æ³¨æ„å¼•å…¥å‘½åç©ºé—´xmlns:openxu= â€œhttp://schemas.android.com/apk/res/åŒ…åâ€œ1234567891011121314151617181920212223242526272829303132333435363738&lt;?xml version=&quot;1.0&quot; encoding= &quot;utf-8&quot;?&gt;&lt;com.openxu.costomlayout.CustomLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:openxu= &quot;http://schemas.android.com/apk/res/com.openxu.costomlayout&quot;android:background=&quot;#33000000&quot;android:layout_width= &quot;match_parent &quot;android:layout_height= &quot;match_parent&quot; &gt;&lt;Buttonandroid:layout_width= &quot;wrap_content&quot;android:layout_height= &quot;wrap_content&quot;openxu:layout_position= &quot;left&quot;android:background= &quot;#FF8247&quot;android:textColor= &quot;#ffffff&quot;android:textSize=&quot;20dip&quot;android:padding= &quot;20dip&quot;android:text= &quot;æŒ‰é’®1&quot; /&gt;&lt;Buttonandroid:layout_width= &quot;wrap_content&quot;android:layout_height= &quot;wrap_content&quot;openxu:layout_position= &quot;right&quot;android:background= &quot;#8B0A50&quot;android:textColor= &quot;#ffffff&quot;android:textSize= &quot;18dip&quot;android:padding= &quot;10dip&quot;android:text= &quot;æŒ‰é’®2222222222222&quot; /&gt;&lt;Buttonandroid:layout_width= &quot;wrap_content&quot;android:layout_height= &quot;wrap_content&quot;openxu:layout_position= &quot;bottom&quot;android:background= &quot;#7CFC00&quot;android:textColor= &quot;#ffffff&quot;android:textSize= &quot;20dip&quot;android:padding= &quot;15dip&quot;android:text= &quot;æŒ‰é’®333333&quot; /&gt;&lt;/com.openxu.costomlayout.CustomLayout&gt; â‘¤. åœ¨onMeasureå’ŒonLayoutä¸­ä½¿ç”¨å¸ƒå±€å‚æ•°ç»è¿‡ä¸Šé¢å‡ æ­¥ä¹‹åŽï¼Œæˆ‘ä»¬è¿è¡Œç¨‹åºï¼Œå°±èƒ½èŽ·å–å­æŽ§ä»¶çš„å¸ƒå±€å‚æ•°äº†ï¼Œåœ¨onMeasureæ–¹æ³•å’ŒonLayoutæ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬æŒ‰ç…§è‡ªå®šä¹‰å¸ƒå±€å®¹å™¨çš„ç‰¹æ®Šéœ€æ±‚ï¼Œå¯¹å®½åº¦å’Œä½ç½®åç‰¹æ®Šå¤„ç†ã€‚ 3. æ”¯æŒlayout_marginå±žæ€§å¦‚æžœæˆ‘ä»¬è‡ªå®šä¹‰çš„å¸ƒå±€å‚æ•°ç±»ç»§æ‰¿è‡ªMarginLayoutParamsï¼Œå°±è‡ªåŠ¨æ”¯æŒäº†layout_marginå±žæ€§äº†ï¼Œæˆ‘ä»¬éœ€è¦åšçš„å°±æ˜¯ç›´æŽ¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä½¿ç”¨layout_marginå±žæ€§ï¼Œç„¶åŽåœ¨onMeasureå’ŒonLayoutä¸­ä½¿ç”¨marginå±žæ€§å€¼æµ‹é‡å’Œæ‘†æ”¾å­æŽ§ä»¶ã€‚éœ€è¦æ³¨æ„çš„æ˜¯æˆ‘ä»¬æµ‹é‡å­æŽ§ä»¶çš„æ—¶å€™åº”è¯¥è°ƒç”¨measureChildWithMargin()æ–¹æ³•ï¼Œä»¥ä¿è¯æµ‹é‡å­Viewå¤§å°æ—¶å°†marginè€ƒè™‘åœ¨å†…ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475//ä»…ä»…ä½œä¸ºçŸ¥è¯†çš„è§£é‡Šï¼Œå®žé™…ä½¿ç”¨æ—¶éœ€è¦è‡ªæˆ‘å®Œå–„//æ¯”å¦‚ï¼Œè¯¥TagLayoutå¯¹marginTopå’ŒmarginBottomå±žæ€§æ”¯æŒçš„ä¸å¥½ã€‚public class TagLayout extends ViewGroup &#123; List&lt;Rect&gt; rects = new ArrayList&lt;&gt;(); public TagLayout(Context context) &#123; super(context); &#125; public TagLayout(Context context, AttributeSet attrs) &#123; super(context, attrs); &#125; public TagLayout(Context context, AttributeSet attrs, int defStyleAttr) &#123; super(context, attrs, defStyleAttr); &#125; public TagLayout(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) &#123; super(context, attrs, defStyleAttr, defStyleRes); &#125; @Override protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) &#123; int lineWidth = 0;//å½“å‰è¡Œçš„å®½åº¦ int lineHeight = 0;//å½“å‰è¡Œçš„é«˜åº¦ï¼Œå–æœ€å¤§çš„ int usedWidth = 0;//ä½¿ç”¨äº†çš„å®½åº¦ï¼Œå–æœ€å¤§çš„ int usedHeight = 0;//ä½¿ç”¨äº†çš„é«˜åº¦ int width = MeasureSpec.getSize(widthMeasureSpec); int childCount = getChildCount(); for (int i = 0; i &lt; childCount; i++) &#123; View child = getChildAt(i); measureChildWithMargins(child, widthMeasureSpec, 0, heightMeasureSpec, 0); MarginLayoutParams params = (MarginLayoutParams) child.getLayoutParams(); usedWidth = Math.max(lineWidth, usedWidth); if (lineWidth + params.leftMargin + params.rightMargin + child.getMeasuredWidth() &gt; width) &#123;//æ¢è¡Œ usedHeight += lineHeight; lineWidth = 0; lineHeight = 0; &#125; else &#123; lineWidth += params.leftMargin + params.rightMargin + child.getMeasuredWidth(); lineHeight = Math.max(lineHeight, params.topMargin + params.bottomMargin + child.getMeasuredHeight()); &#125; Rect rect = new Rect(); rect.left = lineWidth == 0 ? params.leftMargin : lineWidth - child.getMeasuredWidth() - params.rightMargin; rect.top = usedHeight; rect.right = rect.left + child.getMeasuredWidth(); rect.bottom = rect.top + child.getMeasuredHeight(); rects.add(rect); &#125; usedHeight += lineHeight; setMeasuredDimension(resolveSize(usedWidth, widthMeasureSpec), resolveSize(usedHeight, heightMeasureSpec)); &#125; @Override public LayoutParams generateLayoutParams(AttributeSet attrs) &#123; return new MarginLayoutParams(getContext(), attrs); &#125; @Override protected void onLayout(boolean changed, int l, int t, int r, int b) &#123; int childCount = getChildCount(); for (int i = 0; i &lt; childCount; i++) &#123; View child = getChildAt(i); Rect rect = rects.get(i); child.layout(rect.left, rect.top, rect.right, rect.bottom); &#125; &#125;&#125; TagLayoutæœ‰çŽ°æˆçš„è½®å­ï¼Ÿç¬”è€…ä»ŽåŒäº‹é‚£é‡Œäº†è§£åˆ°ï¼ŒGoogleç¡®å®žæä¾›äº†è¿™æ ·ä¸€ä¸ªæŽ§ä»¶ï¼Œä½†æˆ‘æ²¡æœ‰ä½¿ç”¨è¿‡ï¼Œå…ˆæ”¾åœ¨è¿™é‡Œï¼Œä¸‹æ¬¡æœ‰ç±»ä¼¼éœ€æ±‚çš„æ—¶å€™å†è¯•è¯•ã€‚google/flexbox-layout]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>è‡ªå®šä¹‰View</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Retrofitä½¿ç”¨è¯¦è§£]]></title>
    <url>%2F2017%2F09%2F06%2FRetrofit%E4%BD%BF%E7%94%A8%E8%AF%A6%E8%A7%A3%E5%8F%8A%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90%2F</url>
    <content type="text"><![CDATA[Retrofitæ˜¯Squareå›¢é˜Ÿæ——ä¸‹ä¸€ä¸ªçŸ¥åçš„Androidç½‘ç»œè¯·æ±‚åº“ï¼Œå‡†ç¡®çš„è¯´ï¼Œå®ƒæ˜¯ç”±Squareå¯¹okhttpå†æ¬¡å°è£…æ‰€æˆã€‚æœ¬ç« åœ¨è¯¦ç»†çš„ä»‹ç»Retrofitç”¨æ³•çš„åŒæ—¶ï¼Œè¿˜ä¼šåˆ†æžå®ƒçš„å‰ä¸–ä»Šç”Ÿï¼ŒåŒ…æ‹¬okhttpä»‹ç»ã€æºç åˆ†æžã€javaæ³¨è§£çš„æŽŒæ¡ä»¥åŠRetrofitçš„äºŒæ¬¡å°è£…çŸ¥è¯†ã€‚ ä»Žokhttpçš„ä½¿ç”¨è®²èµ·å‰é¢è¯´äº†Retrofitæ˜¯åœ¨Okhttpçš„åŸºç¡€ä¹‹ä¸Šå‘å±•èµ·æ¥ï¼Œé‚£ä¹ˆè¦æƒ³å…¨é¢çš„ç†è§£ä¹‹ï¼Œè¿˜æ˜¯è¦æŠŠokhttpè¿™å—çš„ç”¨æ³•æžæ‡‚çš„ï¼ˆä¸æ¶‰åŠæºç ï¼‰ï¼Œä¸‹é¢å°±ä»Žokhttpå¼€å§‹å§ï½ž okHttpä¸»è¦ç±»ä¸‹é¢æ˜¯okhttpçš„å‡ å¤§ä¸»è¦ç±»ï¼Œè¿™ä¸€éƒ¨åˆ†çš„å†…å®¹å°±å›´ç»•å®ƒä»¬è¿›è¡Œã€‚OkHttpClient.javaRequest.javaCall.javaRequestBody.javaResponse.java ç”¨æ³•HTTP GET12345678910111213141516171819202122232425package okhttp3.guide;import java.io.IOException;import okhttp3.OkHttpClient;import okhttp3.Request;import okhttp3.Response;public class GetExample &#123;OkHttpClient client = new OkHttpClient();String run(String url) throws IOException &#123;Request request = new Request.Builder().url(url).build();Response response = client.newCall(request).execute();return response.body().string();&#125;public static void main(String[] args) throws IOException &#123;GetExample example = new GetExample();String response = example.run(&quot;https://raw.github.com/square/okhttp/master/README.md&quot;);System.out.println(response);&#125;&#125; ä¸Šé¢æ‰§è¡Œçš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼šç¬¬ä¸€æ­¥ï¼Œåœ¨ç¨‹åºç¬¬9è¡Œå¤„èŽ·å–äº†okhttpclientçš„å®žä¾‹ï¼›ç¬¬äºŒæ­¥ï¼Œåœ¨ç¨‹åºç¬¬12è¡Œå¤„ï¼Œé€šè¿‡Request.Builder()æž„å»ºä¸€ä¸ªrequestè¯·æ±‚å¯¹è±¡ï¼Œè¿™é‡Œå¯ä»¥é…ç½®è®¸å¤šç½‘ç»œè¯·æ±‚æ‰€éœ€çš„å‚æ•°ï¼šurlã€headerã€postå¯¹è±¡ç­‰ã€‚ç¬¬ä¸‰æ­¥ï¼Œåœ¨ç¨‹åºç¬¬16è¡Œå¤„ï¼Œé€šè¿‡Callç±»çš„execute()åŒæ­¥æ–¹æ³•è¿”å›žä¸€ä¸ªresponseå“åº”å¯¹è±¡ï¼Œå¯¹è±¡ä¸­åŒ…å«äº†æœåŠ¡ç«¯è¿”å›žçš„å­—ç¬¦ä¸²ä¿¡æ¯ã€‚è‡³æ­¤ï¼Œä¸€ä¸ªç®€å•çš„Http Getæµç¨‹ç®—æ˜¯å®Œæˆäº†ã€‚è¿™é‡Œè¦æ³¨æ„çš„æ˜¯:1ã€åœ¨ç¬¬äºŒæ­¥ä¸­ï¼Œæˆ‘ä»¬è¯´é€šè¿‡Request.Builder()å¯ä»¥é…ç½®è®¸å¤šç½‘ç»œè¯·æ±‚ç›¸å…³çš„ä¿¡æ¯ï¼Œå…¶å®žæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡okHttpClient.newBuilder()æ–¹æ³•é…ç½®ä¸€äº›æ›´åŠ å…¨å±€çš„ç½‘ç»œå‚æ•°ï¼Œæ¯”å¦‚ï¼šæ‹¦æˆªå™¨ã€è¶…æ—¶æ—¶é—´ç­‰ã€‚2ã€åœ¨ç¬¬äºŒæ­¥ä¸­æåˆ°é…ç½®çš„å‚æ•°å¯ä»¥æ˜¯postå¯¹è±¡ï¼Œå®ƒå¯¹åº”çš„æ–¹æ³•æ˜¯post(RequestBody body)ï¼Œé‚£ä¹ˆæœ‰æ²¡æœ‰æä¾›ç±»ä¼¼get(T params)çš„æ–¹æ³•ä¾›è¯·æ±‚å‚æ•°çš„é…ç½®å‘¢ï¼Ÿç­”æ¡ˆæ˜¯æ²¡æœ‰ã€‚æ‰€ä»¥å¦‚æžœéœ€è¦åœ¨urlä¸­é…ç½®è¯·æ±‚å‚æ•°ï¼Œè¿˜éœ€è¦ä»¥æ‹¼æŽ¥å­—ç¬¦ä¸²çš„æ–¹å¼å®Œæˆã€‚3ã€åœ¨ç¬¬ä¸‰æ­¥ä¸­é™¤äº†èƒ½ç”¨Callç±»çš„execute()åŒæ­¥æ–¹æ³•è¿”å›žå“åº”ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨å®ƒçš„enqueue()æ–¹æ³•å¼‚æ­¥è¿”å›žå“åº”ä¿¡æ¯ï¼Œè¿™é‡Œè¦çœ‹å…·ä½“çš„ä½¿ç”¨åœºæ™¯äº†ã€‚ HTTP POST123456789101112131415161718192021222324252627282930313233343536public class PostExample &#123;public static final MediaType JSON= MediaType.parse(&quot;application/json; charset=utf-8&quot;);OkHttpClient client = new OkHttpClient();String post(String url, String json) throws IOException &#123;RequestBody body = RequestBody.create(JSON, json);Request request = new Request.Builder().url(url).post(body).build();try (Response response = client.newCall(request).execute()) &#123;return response.body().string();&#125;&#125;String bowlingJson(String player1, String player2) &#123;return &quot;&#123;&apos;winCondition&apos;:&apos;HIGH_SCORE&apos;,&quot;+ &quot;&apos;name&apos;:&apos;Bowling&apos;,&quot;+ &quot;&apos;round&apos;:4,&quot;+ &quot;&apos;lastSaved&apos;:1367702411696,&quot;+ &quot;&apos;dateStarted&apos;:1367702378785,&quot;+ &quot;&apos;players&apos;:[&quot;+ &quot;&#123;&apos;name&apos;:&apos;&quot; + player1 + &quot;&apos;,&apos;history&apos;:[10,8,6,7,8],&apos;color&apos;:-13388315,&apos;total&apos;:39&#125;,&quot;+ &quot;&#123;&apos;name&apos;:&apos;&quot; + player2 + &quot;&apos;,&apos;history&apos;:[6,10,5,10,10],&apos;color&apos;:-48060,&apos;total&apos;:41&#125;&quot;+ &quot;]&#125;&quot;;&#125;public static void main(String[] args) throws IOException &#123;PostExample example = new PostExample();String json = example.bowlingJson(&quot;Jesse&quot;, &quot;Jake&quot;);String response = example.post(&quot;http://www.roundsapp.com/post&quot;, json);System.out.println(response);&#125;&#125; ä¸Šé¢æ˜¯ä¸€ä¸ªå‘æœåŠ¡ç«¯å‘é€Postè¯·æ±‚çš„ä¾‹å­ï¼Œä»”ç»†è§‚å¯Ÿå‘çŽ°å®ƒå’ŒGetéƒ¨åˆ†çš„ä¸åŒä¹‹å¤„ä¸»è¦åœ¨äºŽç¬¬11è¡Œçš„post(body)é…ç½®æ–¹æ³•ã€‚å‚æ•°bodyæ˜¯æˆ‘ä»¬éœ€è¦ä¸Šä¼ åˆ°æœåŠ¡å™¨çš„æ•°æ®ï¼Œä»–æ˜¯RequestBodyç±»åž‹çš„å¯¹è±¡ï¼Œè¯¥å¯¹è±¡ç”±RequestBody.create(MediaType contentType, T t)æ–¹æ³•ç”Ÿæˆã€‚MediaTypeä»£è¡¨æ¶ˆæ¯å†…å®¹çš„ç±»åž‹ï¼Œå…·ä½“å¯ç¿»é˜…Media Typesã€MIME å‚è€ƒæ‰‹å†Œè¿™ä¸¤ç¯‡æ–‡ç« ã€‚åŽé¢çš„Tå¯¹è±¡ç”±MediaTypeçš„ç±»åž‹å†³å®šï¼Œå¯ä»¥çœ‹å‡ºRequestBody.createæ˜¯ä¸€ä¸ªé‡è½½æ–¹æ³•ã€‚å¯¹äºŽRequestBodyï¼Œapiè¿˜æä¾›äº†å®ƒçš„ä¸¤ä¸ªå®žçŽ°ç±»ï¼šFormBodyã€MultipartBodyï¼Œåˆ†åˆ«å¯¹åº”è¡¨å•å’Œæ–‡ä»¶çš„ä¸Šä¼ ã€‚å½“ç„¶ï¼ŒOkHttpåœ¨å®žé™…åº”ç”¨ä¸­å¯èƒ½è¿˜ä¼šæ¶‰åŠåˆ°éœ€è¦é‡å¤éªŒè¯çš„é—®é¢˜ï¼Œå…·ä½“è¯·ç»“åˆè¿™ç¯‡æ–‡ç« ä»¥åŠæŽ˜é‡‘ç½‘çš„è¿™ç¯‡æ–‡ç« çœ‹çœ‹ã€‚ Retrofitçš„ä½¿ç”¨æœ‰äº†å‰é¢okhttpçš„ä½¿ç”¨ç»éªŒï¼Œå†æ¥è¯´Retrofitçš„ä½¿ç”¨å°±ç®€å•äº†ã€‚Retrofitå…¶å®žè´¨å°±æ˜¯å¯¹okHttpçš„å°è£…ï¼Œä½¿ç”¨é¢å‘æŽ¥å£çš„æ–¹å¼è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œåˆ©ç”¨åŠ¨æ€ç”Ÿæˆçš„ä»£ç†ç±»å°è£…äº†ç½‘ç»œæŽ¥å£ã€‚Retrofitéžå¸¸é€‚åˆäºŽ RESTful é£Žæ ¼çš„è¯·æ±‚ï¼Œä½¿ç”¨æ³¨è§£çš„æ–¹å¼æä¾›åŠŸèƒ½ï¼Œå¯¹äºŽæ³¨è§£ä¸äº†è§£çš„åŒå­¦ï¼Œè¿˜å¯ä»¥ç»“åˆè¿™ç¯‡æ–‡ç« çœ‹çœ‹ã€‚ RESTfulç‰¹å¾ï¼šURLå®šä½èµ„æºï¼Œç”¨HTTPåŠ¨è¯ï¼ˆGET,POST,DELETE,DETCï¼‰æè¿°æ“ä½œã€‚ ç”¨æ³•ä»‹ç»åˆ›å»ºAPIæŽ¥å£åœ¨retrofitä¸­é€šè¿‡ä¸€ä¸ªJavaæŽ¥å£ä½œä¸ºhttpè¯·æ±‚çš„apiæŽ¥å£ã€‚12345//å®šä»¥æŽ¥å£public interface GitHubService &#123;@GET(&quot;users/&#123;user&#125;/repos&quot;)Call&lt;List&lt;Repo&gt;&gt; listRepos(@Path(&quot;user&quot;) String user);&#125; åˆ›å»ºRetrofitå®žä¾‹123456789/**èŽ·å–å®žä¾‹*/Retrofit retrofit = new Retrofit.Builder()//è®¾ç½®OKHttpClient,å¦‚æžœä¸è®¾ç½®ä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„.client(new OkHttpClient())//è®¾ç½®baseUrl.baseUrl(&quot;https://api.github.com/&quot;)//æ·»åŠ Gsonè½¬æ¢å™¨.addConverterFactory(GsonConverterFactory.create()).build(); æ³¨æ„ï¼š1.retrofit2.0åŽï¼šBaseUrlè¦ä»¥/ç»“å°¾ï¼›@GET ç­‰è¯·æ±‚ä¸è¦ä»¥/å¼€å¤´ï¼›@Url: å¯ä»¥å®šä¹‰å®Œæ•´urlï¼Œä¸è¦ä»¥ / å¼€å¤´ã€‚2.addConverterFactoryæä¾›Gsonæ”¯æŒï¼Œå¯ä»¥æ·»åŠ å¤šç§åºåˆ—åŒ–Factoryï¼Œä½†æ˜¯GsonConverterFactoryå¿…é¡»æ”¾åœ¨æœ€åŽ,å¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ è°ƒç”¨APIæŽ¥å£1234567891011121314151617181920212223242526272829303132GitHubService service = retrofit.create(GitHubService.class);//åŒæ­¥è¯·æ±‚//https://api.github.com/users/octocat/reposCall&lt;List&lt;Repo&gt;&gt; call = service.listRepos(&quot;octocat&quot;);try &#123;Response&lt;List&lt;Repo&gt;&gt; repos = call.execute();&#125; catch (IOException e) &#123;e.printStackTrace();&#125;//ä¸ç®¡åŒæ­¥è¿˜æ˜¯å¼‚æ­¥ï¼Œcallåªèƒ½æ‰§è¡Œä¸€æ¬¡ã€‚å¦åˆ™ä¼šæŠ› IllegalStateExceptionCall&lt;List&lt;Repo&gt;&gt; clone = call.clone();//å¼‚æ­¥è¯·æ±‚clone.enqueue(new Callback&lt;List&lt;Repo&gt;&gt;() &#123;@Overridepublic void onResponse(Response&lt;List&lt;Repo&gt;&gt; response, Retrofit retrofit) &#123;// Get result bean from response.body()List&lt;Repo&gt; repos = response.body();// Get header item from responseString links = response.headers().get(&quot;Link&quot;);/*** ä¸åŒäºŽretrofit1 å¯ä»¥åŒæ—¶æ“ä½œåºåˆ—åŒ–æ•°æ®javabeanå’Œheader*/&#125;@Overridepublic void onFailure(Throwable throwable) &#123;showlog(throwable.getCause().toString()); &#125;&#125;); å–æ¶ˆè¯·æ±‚æˆ‘ä»¬å¯ä»¥ç»ˆæ­¢ä¸€ä¸ªè¯·æ±‚ã€‚ç»ˆæ­¢æ“ä½œæ˜¯å¯¹åº•å±‚çš„httpclientæ‰§è¡Œcancelæ“ä½œã€‚å³ä½¿æ˜¯æ­£åœ¨æ‰§è¡Œçš„è¯·æ±‚ï¼Œä¹Ÿèƒ½å¤Ÿç«‹å³ç»ˆæ­¢ã€‚1call.cancel(); retrofitæ³¨è§£ æ–¹æ³•æ³¨è§£ï¼ŒåŒ…å«@GETã€@POSTã€@PUTã€@DELETEã€@PATHã€@HEADã€@OPTIONSã€@HTTPã€‚ æ ‡è®°æ³¨è§£ï¼ŒåŒ…å«@FormUrlEncodedã€@Multipartã€@Streamingã€‚ å‚æ•°æ³¨è§£ï¼ŒåŒ…å«@Queryã€@QueryMapã€@Bodyã€@Fieldï¼Œ@FieldMapã€@Partï¼Œ@PartMapã€‚ å…¶ä»–æ³¨è§£ï¼ŒåŒ…å«@Pathã€@Headerã€@Headersã€@Urlã€‚ (1)ä¸€èˆ¬çš„getè¯·æ±‚1234public interface IWeatherGet &#123;@GET(&quot;GetMoreWeather?cityCode=101020100&amp;weatherType=0&quot;)Call&lt;Weather&gt; getWeather();&#125; å¯ä»¥çœ‹åˆ°æœ‰ä¸€ä¸ªgetWeather(ï¼‰æ–¹æ³•ï¼Œé€šè¿‡@GETæ³¨è§£æ ‡è¯†ä¸ºgetè¯·æ±‚ï¼Œ@GETä¸­æ‰€å¡«å†™çš„valueå’ŒbaseUrlç»„æˆå®Œæ•´çš„è·¯å¾„ï¼ŒbaseUrlåœ¨æž„é€ retrofitå¯¹è±¡æ—¶ç»™å‡ºã€‚123456789101112131415161718192021Retrofit retrofit = new Retrofit.Builder()/**http://weather.51wnl.com/weatherinfo/GetMoreWeather?cityCode=101020100&amp;weatherType=0*///æ³¨æ„baseurlè¦ä»¥/ç»“å°¾.baseUrl(&quot;http://weather.51wnl.com/weatherinfo/&quot;).addConverterFactory(GsonConverterFactory.create()).build();IWeatherGet weather = retrofit.create(IWeatherGet.class);Call&lt;Weather&gt; call = weather.getWeather();call.enqueue(new Callback&lt;Weather&gt;() &#123;@Overridepublic void onResponse(Response&lt;Weather&gt; response, Retrofit retrofit) &#123;Weather weather = response.body();WeatherInfo weatherinfo = weather.weatherinfo;showlog(&quot;weather=&quot;+weatherinfo.toString());&#125;@Overridepublic void onFailure(Throwable throwable) &#123;showlog(throwable.getCause().toString()); &#125;&#125;); ï¼ˆ2ï¼‰åŠ¨æ€urlè®¿é—®@PATHä¸Šé¢è¯´çš„@GETæ³¨è§£æ˜¯å°†baseUrlå’Œ@GETä¸­çš„valueç»„æˆå®Œæ•´çš„è·¯å¾„ã€‚æœ‰æ—¶å€™æˆ‘ä»¬å¯ä»¥å°†è·¯å¾„ä¸­æŸä¸ªå­—ç¬¦ä¸²è®¾ç½®ä¸ºä¸åŒçš„å€¼æ¥è¯·æ±‚ä¸åŒçš„æ•°æ®ï¼Œè¿™æ—¶å€™æ€Žä¹ˆåŠžå‘¢ï¼Ÿè­¬å¦‚ï¼šå¯ä»¥é€šè¿‡retrofitæä¾›çš„@PATHæ³¨è§£éžå¸¸æ–¹ä¾¿çš„å®Œæˆä¸Šè¿°éœ€æ±‚ã€‚1234public interface IWeatherPath &#123;@GET(&quot;&#123;info&#125;?cityCode=101020100&amp;weatherType=0&quot;)Call&lt;Weather&gt; getWeather(@Path(&quot;info&quot;) String info);&#125; å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªgetWeatheræ–¹æ³•ï¼Œæ–¹æ³•æŽ¥æ”¶ä¸€ä¸ªinfoå‚æ•°ï¼Œå¹¶ä¸”æˆ‘ä»¬çš„@GETæ³¨è§£ä¸­ä½¿ç”¨{info}?cityCode=101020100&amp;weatherType=0å£°æ˜Žäº†è®¿é—®è·¯å¾„ï¼Œè¿™é‡Œä½ å¯ä»¥æŠŠ{info}å½“åšå ä½ç¬¦ï¼Œè€Œå®žé™…è¿è¡Œä¸­ä¼šé€šè¿‡@PATH(â€œinfoâ€)æ‰€æ ‡æ³¨çš„å‚æ•°è¿›è¡Œæ›¿æ¢ã€‚ ï¼ˆ3ï¼‰æŸ¥è¯¢å‚æ•°çš„è®¾ç½®@Query@QueryMapæ–‡ç« å¼€å¤´æè¿‡ï¼Œretrofitéžå¸¸é€‚ç”¨äºŽrestful urlçš„æ ¼å¼ï¼Œé‚£ä¹ˆä¾‹å¦‚ä¸‹é¢è¿™æ ·çš„urlï¼š12345//ç”¨äºŽè®¿é—®ä¸Šæµ·å¤©æ°”http://weather.51wnl.com/weatherinfo/GetMoreWeather?cityCode=101020100&amp;weatherType=0//ç”¨äºŽè®¿é—®åŒ—äº¬å¤©æ°”http://weather.51wnl.com/weatherinfo/GetMoreWeather?cityCode=101010100&amp;weatherType=0 å³é€šè¿‡ä¼ å‚æ–¹å¼ä½¿ç”¨ä¸åŒçš„citycodeè®¿é—®ä¸åŒåŸŽå¸‚çš„å¤©æ°”ï¼Œè¿”å›žæ•°æ®ä¸ºjsonå­—ç¬¦ä¸²ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡@Queryæ³¨è§£æ–¹ä¾¿çš„å®Œæˆï¼Œæˆ‘ä»¬å†æ¬¡åœ¨æŽ¥å£ä¸­æ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼š12345678public interface IWeatherQuery &#123;@GET(&quot;GetMoreWeather&quot;)Call&lt;Weather&gt; getWeather(@Query(&quot;cityCode&quot;) String cityCode, @Query(&quot;weatherType&quot;) String weatherType);&#125;/**çœç•¥retrofitçš„æž„å»ºä»£ç */Call&lt;Weather&gt; call = weather.getWeather(&quot;101020100&quot;, &quot;0&quot;);//Call&lt;Weather&gt; call = weather.getWeather(&quot;101010100&quot;, &quot;0&quot;);/**çœç•¥callæ‰§è¡Œç›¸å…³ä»£ç */ å½“æˆ‘ä»¬çš„å‚æ•°è¿‡å¤šçš„æ—¶å€™æˆ‘ä»¬å¯ä»¥é€šè¿‡@QueryMapæ³¨è§£å’Œmapå¯¹è±¡å‚æ•°æ¥æŒ‡å®šæ¯ä¸ªè¡¨å•é¡¹çš„Keyï¼Œvalueçš„å€¼ï¼ŒåŒæ ·æ˜¯ä¸Šé¢çš„ä¾‹å­ï¼Œè¿˜å¯ä»¥è¿™æ ·å†™ï¼š12345678910public interface IWeatherQueryMap &#123;@GET(&quot;GetMoreWeather&quot;)Call&lt;Weather&gt; getWeather(@QueryMap Map&lt;String,String&gt; map);&#125;//çœç•¥retrofitçš„æž„å»ºä»£ç Map&lt;String, String&gt; map = new HashMap&lt;String, String&gt;();map.put(&quot;cityCode&quot;, &quot;101020100&quot;);map.put(&quot;weatherType&quot;, &quot;0&quot;);Call&lt;Weather&gt; call = weather.getWeather(map);//çœç•¥callæ‰§è¡Œç›¸å…³ä»£ç  ï¼ˆ4ï¼‰POSTè¯·æ±‚ä½“æ–¹å¼å‘æœåŠ¡å™¨ä¼ å…¥jsonå­—ç¬¦ä¸²@Bodyæˆ‘ä»¬appå¾ˆå¤šæ—¶å€™è·ŸæœåŠ¡å™¨é€šä¿¡ï¼Œä¼šé€‰æ‹©ç›´æŽ¥ä½¿ç”¨POSTæ–¹å¼å°†jsonå­—ç¬¦ä¸²ä½œä¸ºè¯·æ±‚ä½“å‘é€åˆ°æœåŠ¡å™¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬çœ‹çœ‹è¿™ä¸ªéœ€æ±‚ä½¿ç”¨retrofitè¯¥å¦‚ä½•å®žçŽ°ã€‚1234567public interface IUser &#123;@POST(&quot;add&quot;)Call&lt;List&lt;User&gt;&gt; addUser(@Body User user);&#125;/çœç•¥retrofitçš„æž„å»ºä»£ç Call&lt;List&lt;User&gt;&gt; call = user.addUser(new User(&quot;watson&quot;, &quot;male&quot;, &quot;28&quot;));//çœç•¥callæ‰§è¡Œç›¸å…³ä»£ç  å¯ä»¥çœ‹åˆ°å…¶å®žå°±æ˜¯ä½¿ç”¨@Bodyè¿™ä¸ªæ³¨è§£æ ‡è¯†æˆ‘ä»¬çš„å‚æ•°å¯¹è±¡å³å¯ï¼Œé‚£ä¹ˆè¿™é‡Œéœ€è¦è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼Œretrofitæ˜¯å¦‚ä½•å°†userå¯¹è±¡è½¬åŒ–ä¸ºå­—ç¬¦ä¸²å‘¢ï¼Ÿå°†å®žä¾‹å¯¹è±¡æ ¹æ®è½¬æ¢æ–¹å¼è½¬æ¢ä¸ºå¯¹åº”çš„jsonå­—ç¬¦ä¸²å‚æ•°ï¼Œè¿™ä¸ªè½¬åŒ–æ–¹å¼æ˜¯GsonConverterFactoryå®šä¹‰çš„ã€‚å¯¹åº”okhttpï¼Œè¿˜æœ‰ä¸¤ç§requestBodyï¼Œä¸€ä¸ªæ˜¯FormBodyï¼Œä¸€ä¸ªæ˜¯MultipartBodyï¼Œå‰è€…ä»¥è¡¨å•çš„æ–¹å¼ä¼ é€’ç®€å•çš„é”®å€¼å¯¹ï¼ŒåŽè€…ä»¥è¡¨å•çš„æ–¹å¼ä¸Šä¼ æ–‡ä»¶å¯ä»¥æºå¸¦å‚æ•°ï¼Œretrofitä¹ŸäºŒè€…ä¹Ÿæœ‰å¯¹åº”çš„æ³¨è§£ï¼Œä¸‹é¢ç»§ç»­~ ï¼ˆ5ï¼‰è¡¨å•çš„æ–¹å¼ä¼ é€’é”®å€¼å¯¹@FormUrlEncoded + @Field@FieldMapè¿™é‡Œæˆ‘ä»¬æ¨¡æ‹Ÿä¸€ä¸ªç™»å½•çš„æ–¹æ³•ï¼Œæ·»åŠ ä¸€ä¸ªæ–¹æ³•ï¼š12345678public interface IUser &#123;@FormUrlEncoded@POST(&quot;login&quot;) Call&lt;User&gt; login(@Field(&quot;username&quot;) String username, @Field(&quot;password&quot;) String password);&#125;//çœç•¥retrofitçš„æž„å»ºä»£ç Call&lt;User&gt; call = user.login(&quot;watson&quot;, &quot;123&quot;);//çœç•¥callæ‰§è¡Œç›¸å…³ä»£ç  çœ‹èµ·æ¥ä¹Ÿå¾ˆç®€å•ï¼Œé€šè¿‡@POSTæŒ‡æ˜Žurlï¼Œæ·»åŠ FormUrlEncodedï¼Œç„¶åŽé€šè¿‡@Fieldæ·»åŠ å‚æ•°å³å¯ã€‚å½“æˆ‘ä»¬æœ‰å¾ˆå¤šä¸ªè¡¨å•å‚æ•°æ—¶ä¹Ÿå¯ä»¥é€šè¿‡@FieldMapæ³¨è§£å’ŒMapå¯¹è±¡å‚æ•°æ¥æŒ‡å®šæ¯ä¸ªè¡¨å•é¡¹çš„Keyï¼Œvalueçš„å€¼ã€‚1234567891011public interface IUser &#123;@FormUrlEncoded@POST(&quot;login&quot;) Call&lt;User&gt; login(@FieldMap Map&lt;String,String&gt; fieldMap);&#125;//çœç•¥retrofitçš„æž„å»ºä»£ç Map&lt;String, String&gt; propertity = new HashMap&lt;String, String&gt;();positories.put(&quot;name&quot;, &quot;watson&quot;);positories.put(&quot;password&quot;, &quot;123&quot;);Call&lt;User&gt; call = user.login(propertity);//çœç•¥callæ‰§è¡Œç›¸å…³ä»£ç  ï¼ˆ6ï¼‰æ–‡ä»¶ä¸Šä¼ @Multipart + @Part@PartMap1.ä¸‹é¢å…ˆçœ‹ä¸€ä¸‹å•æ–‡ä»¶ä¸Šä¼ ï¼Œä¾ç„¶æ˜¯å†æ¬¡æ·»åŠ ä¸ªæ–¹æ³•ï¼š12345public interface IUser &#123;@Multipart@POST(&quot;register&quot;)Call&lt;User&gt; registerUser(@Part MultipartBody.Part photo, @Part(&quot;username&quot;) RequestBody username, @Part(&quot;password&quot;) RequestBody password);&#125; è¿™é‡Œ@MultiPartçš„æ„æ€å°±æ˜¯å…è®¸å¤šä¸ª@Partäº†ï¼Œæˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº†3ä¸ª@Partï¼Œç¬¬ä¸€ä¸ªæˆ‘ä»¬å‡†å¤‡ä¸Šä¼ ä¸ªæ–‡ä»¶ï¼Œä½¿ç”¨äº†MultipartBody.Partç±»åž‹ï¼Œå…¶ä½™ä¸¤ä¸ªå‡ä¸ºç®€å•çš„é”®å€¼å¯¹ã€‚12345File file = new File(Environment.getExternalStorageDirectory(), &quot;icon.png&quot;);RequestBody photoRequestBody = RequestBody.create(MediaType.parse(&quot;image/png&quot;), file);MultipartBody.Part photo = MultipartBody.Part.createFormData(&quot;photos&quot;, &quot;icon.png&quot;, photoRequestBody);Call&lt;User&gt; call = user.registerUser(photo, RequestBody.create(null, &quot;abc&quot;), RequestBody.create(null, &quot;123&quot;)); è¿™é‡Œæ„Ÿè§‰ç•¥ä¸ºéº»çƒ¦ã€‚ä¸è¿‡è¿˜æ˜¯è›®å¥½ç†è§£~~å¤šä¸ª@Partï¼Œæ¯ä¸ªPartå¯¹åº”ä¸€ä¸ªRequestBodyã€‚æ³¨ï¼šè¿™é‡Œè¿˜æœ‰å¦å¤–ä¸€ä¸ªæ–¹æ¡ˆä¹Ÿæ˜¯å¯è¡Œçš„ï¼š12345public interface ApiInterface &#123;@Multipart@POST (&quot;/api/Accounts/editaccount&quot;)Call&lt;User&gt; editUser (@Header(&quot;Authorization&quot;) String authorization, @Part(&quot;photos\&quot;; filename=\&quot;icon.png&quot;) RequestBody file , @Part(&quot;FirstName&quot;) RequestBody fname, @Part(&quot;Id&quot;) RequestBody id);&#125; è¿™ä¸ªvalueè®¾ç½®çš„å€¼ä¸ç”¨çœ‹å°±ä¼šè§‰å¾—ç‰¹åˆ«å¥‡æ€ªï¼Œç„¶è€Œå´å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼ŒåŽŸå› æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå½“ä¸Šä¼ key-valueçš„æ—¶å€™ï¼Œå®žé™…ä¸Šå¯¹åº”è¿™æ ·çš„ä»£ç ï¼š1builder.addPart(Headers.of(&quot;Content-Disposition&quot;, &quot;form-data; name=\&quot;&quot; + key + &quot;\&quot;&quot;), RequestBody.create(null, params.get(key))); ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬çš„@Partè½¬åŒ–ä¸ºäº†1Headers.of(&quot;Content-Disposition&quot;, &quot;form-data; name=\&quot;&quot; + key + &quot;\&quot;&quot;) è¿™ä¹ˆä¸€çœ‹ï¼Œå¾ˆéšæ„ï¼Œåªè¦æŠŠkeyæ”¾è¿›åŽ»å°±å¯ä»¥äº†ã€‚ä½†æ˜¯ï¼Œretrofit2å¹¶æ²¡æœ‰å¯¹æ–‡ä»¶åšç‰¹æ®Šå¤„ç†ï¼Œæ–‡ä»¶çš„å¯¹åº”çš„å­—ç¬¦ä¸²åº”è¯¥æ˜¯è¿™æ ·çš„1Headers.of(&quot;Content-Disposition&quot;, &quot;form-data; name=&quot;photos&quot;;filename=&quot;icon.png&quot;&quot;); ä¸Žé”®å€¼å¯¹å¯¹åº”çš„å­—ç¬¦ä¸²ç›¸æ¯”ï¼Œå¤šäº†ä¸ª\â€; filename=\â€icon.pngï¼Œå°±å› ä¸ºretrofitæ²¡æœ‰åšç‰¹æ®Šå¤„ç†ï¼Œæ‰€ä»¥ä½ çŽ°åœ¨çœ‹è¿™äº›hackçš„åšæ³•123456@Part(&quot;photos\&quot;; filename=\&quot;icon.png&quot;)==&gt; key = photos\&quot;; filename=\&quot;icon.pngform-data; name=\&quot;&quot; + key + &quot;\&quot;æ‹¼æŽ¥ç»“æžœï¼š==&gt;form-data; name=&quot;photos&quot;; filename=&quot;icon.png&quot; å› ä¸ºè¿™ç§æ–¹å¼æ–‡ä»¶åå†™æ­»äº†ï¼Œæˆ‘ä»¬ä¸Šæ–‡ä½¿ç”¨çš„çš„æ˜¯@Part MultipartBody.Part file,å¯ä»¥æ»¡è¶³æ–‡ä»¶ååŠ¨æ€è®¾ç½®ã€‚ 2.å¦‚æžœæ˜¯å¤šæ–‡ä»¶ä¸Šä¼ å‘¢ï¼Ÿ12345public interface IUser &#123;@Multipart@POST(&quot;register&quot;)Call&lt;User&gt; registerUser(@PartMap Map&lt;String, RequestBody&gt; params, @Part(&quot;password&quot;) RequestBody password);&#125; è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„æ³¨è§£@PartMapï¼Œè¿™ä¸ªæ³¨è§£ç”¨äºŽæ ‡è¯†ä¸€ä¸ªMapï¼ŒMapçš„keyä¸ºStringç±»åž‹ï¼Œä»£è¡¨ä¸Šä¼ çš„é”®å€¼å¯¹çš„key(ä¸ŽæœåŠ¡å™¨æŽ¥å—çš„keyå¯¹åº”),valueå³ä¸ºRequestBodyï¼Œæœ‰ç‚¹ç±»ä¼¼@Partçš„å°è£…ç‰ˆæœ¬ã€‚1234567File file = new File(Environment.getExternalStorageDirectory(), &quot;local.png&quot;);RequestBody photo = RequestBody.create(MediaType.parse(&quot;image/png&quot;, file);Map&lt;String, RequestBody&gt; map = new HashMap&lt;&gt;(String, RequestBody);map.put(&quot;photos\&quot;; filename=\&quot;icon.png&quot;, photo);map.put(&quot;username&quot;, RequestBody.create(null, &quot;abc&quot;));Call&lt;User&gt; call = user.registerUser(map, RequestBody.create(null, &quot;123&quot;)); å¯ä»¥çœ‹åˆ°ï¼Œå¯ä»¥åœ¨Mapä¸­putè¿›ä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶ï¼Œé”®å€¼å¯¹ç­‰ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åˆ†å¼€ï¼Œå•ç‹¬çš„é”®å€¼å¯¹ä¹Ÿå¯ä»¥ä½¿ç”¨@Partï¼Œè¿™é‡Œåˆçœ‹åˆ°è®¾ç½®æ–‡ä»¶çš„æ—¶å€™ï¼Œç›¸å¯¹åº”çš„keyå¾ˆå¥‡æ€ªï¼Œä¾‹å¦‚ä¸Šä¾‹â€photos\â€; filename=\â€icon.pngâ€,å‰é¢çš„photoså°±æ˜¯ä¸ŽæœåŠ¡å™¨å¯¹åº”çš„keyï¼ŒåŽé¢filenameæ˜¯æœåŠ¡å™¨å¾—åˆ°çš„æ–‡ä»¶åï¼Œokï¼Œå‚æ•°è™½ç„¶å¥‡æ€ªï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åŠ¨æ€çš„è®¾ç½®æ–‡ä»¶åï¼Œä¸å½±å“ä½¿ç”¨ã€‚ ï¼ˆ7ï¼‰ä¸‹è½½æ–‡ä»¶1234567891011121314@GET(&quot;download&quot;)Call&lt;ResponseBody&gt; downloadTest();Call&lt;ResponseBody&gt; call = user.downloadTest();call.enqueue(new Callback&lt;ResponseBody&gt;() &#123;@Overridepublic void onResponse(Call&lt;ResponseBody&gt; call, Response&lt;ResponseBody&gt; response) &#123;InputStream is = response.body().byteStream();//save file&#125;@Overridepublic void onFailure(Call&lt;ResponseBody&gt; call, Throwable t)&#123;&#125;&#125;); ï¼ˆ8ï¼‰æ·»åŠ è¯·æ±‚å¤´@Header@Headers@Headerï¼šheaderå¤„ç†ï¼Œä¸èƒ½è¢«äº’ç›¸è¦†ç›–ï¼Œæ‰€æœ‰å…·æœ‰ç›¸åŒåå­—çš„headerå°†ä¼šè¢«åŒ…å«åˆ°è¯·æ±‚ä¸­ã€‚1234//é™æ€è®¾ç½®Headerå€¼@Headers(&quot;Authorization: authorization&quot;)@GET(&quot;widget/list&quot;)Call&lt;User&gt; getUser() @Headers ç”¨äºŽä¿®é¥°æ–¹æ³•,ç”¨äºŽè®¾ç½®å¤šä¸ªHeaderå€¼ã€‚123456@Headers(&#123;&quot;Accept: application/vnd.github.v3.full+json&quot;,&quot;User-Agent: Retrofit-Sample-App&quot;&#125;)@GET(&quot;users/&#123;username&#125;&quot;)Call&lt;User&gt; getUser(@Path(&quot;username&quot;) String username); è¿˜å¯ä»¥ä½¿ç”¨@Headeræ³¨è§£åŠ¨æ€çš„æ›´æ–°ä¸€ä¸ªè¯·æ±‚çš„headerã€‚å¿…é¡»ç»™@Headeræä¾›ç›¸åº”çš„å‚æ•°ï¼Œå¦‚æžœå‚æ•°çš„å€¼ä¸ºç©ºheaderå°†ä¼šè¢«å¿½ç•¥ï¼Œå¦åˆ™å°±è°ƒç”¨å‚æ•°å€¼çš„toString()æ–¹æ³•å¹¶ä½¿ç”¨è¿”å›žç»“æžœã€‚123//åŠ¨æ€è®¾ç½®Headerå€¼@GET(&quot;user&quot;)Call&lt;User&gt; getUser(@Header(&quot;Authorization&quot;) String authorization) é…ç½®OkHttpClientå¾ˆå¤šæ—¶å€™ï¼Œæ¯”å¦‚ä½ ä½¿ç”¨retrofitéœ€è¦ç»Ÿä¸€çš„logç®¡ç†ï¼Œç¼“å­˜ç®¡ç†ï¼Œç»™æ¯ä¸ªè¯·æ±‚æ·»åŠ ç»Ÿä¸€çš„headerç­‰ï¼Œè¿™äº›éƒ½åº”è¯¥é€šè¿‡okhttpclientåŽ»æ“ä½œã€‚Retrofit 2.0 åº•å±‚ä¾èµ–äºŽokHttpï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨okHttpçš„Interceptorsæ¥å¯¹æ‰€æœ‰è¯·æ±‚è¿›è¡Œæ‹¦æˆªã€‚12345678910111213141516OkHttpClient client = new OkHttpClient();client.networkInterceptors().add(new Interceptor() &#123;@Overridepublic com.squareup.okhttp.Response intercept(Chain chain) throws IOException &#123;com.squareup.okhttp.Response response = chain.proceed(chain.request());// Do anything with response herereturn response;&#125;&#125;);Retrofit retrofit = new Retrofit.Builder().baseUrl(BASE_URL)....client(client) //ä¼ å…¥è‡ªå·±å®šä¹‰çš„client.build(); æˆ–è®¸ä½ éœ€è¦æ›´å¤šçš„é…ç½®ï¼Œä½ å¯ä»¥å•ç‹¬å†™ä¸€ä¸ªOkhttpClientçš„å•ä¾‹ç”Ÿæˆç±»ï¼Œåœ¨è¿™ä¸ªé‡Œé¢å®Œæˆä½ æ‰€éœ€çš„æ‰€æœ‰çš„é…ç½®ï¼Œç„¶åŽå°†OkhttpClientå®žä¾‹é€šè¿‡æ–¹æ³•å…¬å¸ƒå‡ºæ¥ï¼Œè®¾ç½®ç»™retrofitã€‚123Retrofit retrofit = new Retrofit.Builder().callFactory(OkHttpUtils.getClient()).build(); callFactoryæ–¹æ³•æŽ¥å—ä¸€ä¸ªokhttp3.Call.Factoryå¯¹è±¡ï¼ŒOkHttpClientå³ä¸ºä¸€ä¸ªå®žçŽ°ç±»ã€‚ ç»“æŸè¯­æœ€åŽåœ¨æŽ¨èä¸€ä¸ªéžå¸¸ç«çš„ç½‘ç»œè°ƒè¯•å·¥å…·ï¼šstethoã€‚åˆ©ç”¨å®ƒä½ å¯ä»¥éžå¸¸æ–¹ä¾¿åœ°æŸ¥çœ‹åº”ç”¨çš„æœ¬åœ°æ•°æ®åº“ã€SharePerenceã€ç½‘ç»œè¯·æ±‚ç­‰æ•°æ®ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡å…³äºŽå®ƒçš„ä½¿ç”¨æŒ‡å—ã€‚ å‚è€ƒèµ„æ–™OkHttpAndroid Retrofitæ¡†æž¶è§£æž]]></content>
      <categories>
        <category>Androidæ¡†æž¶</category>
      </categories>
      <tags>
        <tag>Retrofit</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå±å¹•é€‚é…æ–¹æ¡ˆ]]></title>
    <url>%2F2017%2F08%2F03%2FAndroid%E5%B1%8F%E5%B9%95%E9%80%82%E9%85%8D%2F</url>
    <content type="text"><![CDATA[Androidçš„å±å¹•é€‚é…ä¸€ç›´ä»¥æ¥éƒ½åœ¨æŠ˜ç£¨ç€æˆ‘ä»¬è¿™äº›å¼€å‘è€…ï¼Œæœ¬ç¯‡æ–‡ç« å°†ä»¥Googleçš„å®˜æ–¹æ–‡æ¡£ä¸ºåŸºç¡€ï¼Œå…¨é¢è€Œæ·±å…¥çš„è®²è§£Androidå±å¹•é€‚é…çš„åŽŸå› ã€é‡è¦æ¦‚å¿µã€è§£å†³æ–¹æ¡ˆåŠæœ€ä½³å®žè·µã€‚ Androidå±å¹•é€‚é…å‡ºçŽ°çš„åŽŸå› Androidçš„å±å¹•å°ºå¯¸å¾ˆå¤šï¼Œä¸ºäº†è®©æˆ‘ä»¬å¼€å‘çš„ç¨‹åºèƒ½å¤Ÿæ¯”è¾ƒç¾Žè§‚çš„æ˜¾ç¤ºåœ¨ä¸åŒå°ºå¯¸ã€åˆ†è¾¨çŽ‡ã€åƒç´ å¯†åº¦(è¿™äº›æ¦‚å¿µæˆ‘ä¼šåœ¨ä¸‹é¢è¯¦ç»†è®²è§£)çš„è®¾å¤‡ä¸Šï¼Œé‚£å°±è¦åœ¨å¼€å‘çš„è¿‡ç¨‹ä¸­è¿›è¡Œå¤„ç†ï¼Œè‡³äºŽå¦‚ä½•åŽ»è¿›è¡Œå¤„ç†ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬ä»Šå¤©çš„ä¸»é¢˜äº†ã€‚ é‡è¦æ¦‚å¿µä»€ä¹ˆæ˜¯å±å¹•å°ºå¯¸ã€å±å¹•åˆ†è¾¨çŽ‡ã€å±å¹•åƒç´ å¯†åº¦ï¼Ÿä»€ä¹ˆæ˜¯dpã€dipã€dpiã€spã€pxï¼Ÿä»–ä»¬ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿä»€ä¹ˆæ˜¯mdpiã€hdpiã€xdpiã€xxdpiï¼Ÿå¦‚ä½•è®¡ç®—å’ŒåŒºåˆ†ï¼Ÿåœ¨ä¸‹é¢çš„å†…å®¹ä¸­æˆ‘ä»¬å°†ä»‹ç»è¿™äº›æ¦‚å¿µã€‚ å±å¹•å°ºå¯¸å±å¹•å°ºå¯¸æŒ‡å±å¹•çš„å¯¹è§’çº¿çš„é•¿åº¦ï¼Œå•ä½æ˜¯è‹±å¯¸ï¼Œ1è‹±å¯¸=2.54åŽ˜ç±³ã€‚æ¯”å¦‚å¸¸è§çš„å±å¹•å°ºå¯¸æœ‰2.4ã€2.8ã€3.5ã€3.7ã€4.2ã€5.0ã€5.5ã€6.0ç­‰ã€‚ å±å¹•åˆ†è¾¨çŽ‡å±å¹•åˆ†è¾¨çŽ‡æ˜¯æŒ‡åœ¨æ¨ªçºµå‘ä¸Šçš„åƒç´ ç‚¹æ•°ï¼Œå•ä½æ˜¯pxï¼Œ1px=1ä¸ªåƒç´ ç‚¹ã€‚ä¸€èˆ¬ä»¥çºµå‘åƒç´ *æ¨ªå‘åƒç´ ï¼Œå¦‚1960*1080ã€‚ å±å¹•åƒç´ å¯†åº¦å±å¹•åƒç´ å¯†åº¦æ˜¯æŒ‡æ¯è‹±å¯¸ä¸Šçš„åƒç´ ç‚¹æ•°ï¼Œå•ä½æ˜¯dpiï¼Œå³â€œdot per inchâ€çš„ç¼©å†™ã€‚å±å¹•åƒç´ å¯†åº¦ä¸Žå±å¹•å°ºå¯¸å’Œå±å¹•åˆ†è¾¨çŽ‡æœ‰å…³ï¼Œåœ¨å•ä¸€å˜åŒ–æ¡ä»¶ä¸‹ï¼Œå±å¹•å°ºå¯¸è¶Šå°ã€åˆ†è¾¨çŽ‡è¶Šé«˜ï¼Œåƒç´ å¯†åº¦è¶Šå¤§ï¼Œåä¹‹è¶Šå°ã€‚ dpã€dipã€dpiã€spã€pxpxæˆ‘ä»¬åº”è¯¥æ˜¯æ¯”è¾ƒç†Ÿæ‚‰çš„ï¼Œå‰é¢çš„åˆ†è¾¨çŽ‡å°±æ˜¯ç”¨çš„åƒç´ ä¸ºå•ä½ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæ¯”å¦‚UIè®¾è®¡ã€AndroidåŽŸç”ŸAPIéƒ½ä¼šä»¥pxä½œä¸ºç»Ÿä¸€çš„è®¡é‡å•ä½ï¼Œåƒæ˜¯èŽ·å–å±å¹•å®½é«˜ç­‰ã€‚dipå’Œdpæ˜¯ä¸€ä¸ªæ„æ€ï¼Œéƒ½æ˜¯Density Independent Pixelsçš„ç¼©å†™ï¼Œå³å¯†åº¦æ— å…³åƒç´ ï¼Œä¸Šé¢æˆ‘ä»¬è¯´è¿‡ï¼Œdpiæ˜¯å±å¹•åƒç´ å¯†åº¦ï¼Œå‡å¦‚ä¸€è‹±å¯¸é‡Œé¢æœ‰160ä¸ªåƒç´ ï¼Œè¿™ä¸ªå±å¹•çš„åƒç´ å¯†åº¦å°±æ˜¯160dpiï¼Œé‚£ä¹ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œdpå’Œpxå¦‚ä½•æ¢ç®—å‘¢ï¼Ÿåœ¨Androidä¸­ï¼Œè§„å®šä»¥160dpiä¸ºåŸºå‡†ï¼Œ1dip=1pxï¼Œå¦‚æžœå¯†åº¦æ˜¯320dpiï¼Œåˆ™1dip=2pxï¼Œä»¥æ­¤ç±»æŽ¨ã€‚å‡å¦‚åŒæ ·éƒ½æ˜¯ç”»ä¸€æ¡320pxçš„çº¿ï¼Œåœ¨480*800åˆ†è¾¨çŽ‡æ‰‹æœºä¸Šæ˜¾ç¤ºä¸º2/3å±å¹•å®½åº¦ï¼Œåœ¨320*480çš„æ‰‹æœºä¸Šåˆ™å æ»¡äº†å…¨å±ï¼Œå¦‚æžœä½¿ç”¨dpä¸ºå•ä½ï¼Œåœ¨è¿™ä¸¤ç§åˆ†è¾¨çŽ‡ä¸‹ï¼Œ160dpéƒ½æ˜¾ç¤ºä¸ºå±å¹•ä¸€åŠçš„é•¿åº¦ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆåœ¨Androidå¼€å‘ä¸­ï¼Œå†™å¸ƒå±€çš„æ—¶å€™è¦å°½é‡ä½¿ç”¨dpè€Œä¸æ˜¯pxçš„åŽŸå› ã€‚è€Œspï¼Œå³scale-independent pixelsï¼Œé™¤äº†æ‹¥æœ‰dpçš„ç‰¹æ€§ï¼Œè¿˜ä¼šéšç€ç³»ç»Ÿçš„å­—ä½“å¤§å°æ”¹å˜è€Œæ”¹å˜ï¼Œå»ºè®®åœ¨è®¾ç½®å­—ä½“å¤§å°çš„æ•°å€¼è¦ä½¿ç”¨spä½œä¸ºå•ä½ï¼Œå…·ä½“å¯å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚spä¸Ždpä¹‹é—´çš„è½¬æ¢æ–¹æ³•å¦‚ä¸‹ï¼š12345678910111213141516171819public static int px2dip(float pxValue) &#123;final float scale = Resources.getSystem().displayMetrics.density;return (int) (pxValue / scale + 0.5f); &#125; public static int dip2px(float dipValue) &#123;final float scale = Resources.getSystem().displayMetrics.density;return (int) (dipValue * scale + 0.5f); &#125;public static int px2sp(float pxValue) &#123;final float fontScale = Resources.getSystem().displayMetrics.scaledDensity;return (int) (pxValue / fontScale + 0.5f); &#125; public static int sp2px(float spValue) &#123;final float fontScale = Resources.getSystem().displayMetrics.scaledDensity;return (int) (spValue * fontScale + 0.5f); &#125; mdpiã€hdpiã€xdpiã€xxdpiå…¶å®žä¹‹å‰è¿˜æœ‰ä¸ªldpiï¼Œä½†æ˜¯éšç€ç§»åŠ¨è®¾å¤‡é…ç½®çš„ä¸æ–­å‡çº§ï¼Œè¿™ä¸ªåƒç´ å¯†åº¦çš„è®¾å¤‡å·²ç»å¾ˆç½•è§äº†ï¼Œæ‰€åœ¨çŽ°åœ¨é€‚é…æ—¶ä¸éœ€è€ƒè™‘ã€‚mdpiã€hdpiã€xdpiã€xxdpiç”¨æ¥ä¿®é¥°Androidä¸­çš„drawableæ–‡ä»¶å¤¹åŠvaluesæ–‡ä»¶å¤¹ï¼Œç”¨æ¥åŒºåˆ†ä¸åŒåƒç´ å¯†åº¦ä¸‹çš„å›¾ç‰‡å’Œdimenå€¼ã€‚é‚£ä¹ˆå¦‚ä½•åŒºåˆ†å‘¢ï¼ŸGoogleå®˜æ–¹æŒ‡å®šæŒ‰ç…§ä¸‹åˆ—æ ‡å‡†è¿›è¡ŒåŒºåˆ†ï¼š åç§° åƒç´ å¯†åº¦èŒƒå›´ mdpi 120dpi~160dpi hdpi 160dpi~240dpi xhdpi 240dpi~320dpi xxhdpi 320dpi~480dpi xxxhdpi 480dpi~640dpi åœ¨è¿›è¡Œå¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦æŠŠåˆé€‚å¤§å°çš„å›¾ç‰‡æ”¾åœ¨åˆé€‚çš„æ–‡ä»¶å¤¹é‡Œé¢ã€‚ä¸‹é¢ä»¥å›¾æ ‡è®¾è®¡ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚åœ¨è®¾è®¡å›¾æ ‡æ—¶ï¼Œå¯¹äºŽäº”ç§ä¸»æµçš„åƒç´ å¯†åº¦ï¼ˆMDPIã€HDPIã€XHDPIã€XXHDPI å’Œ XXXHDPIï¼‰åº”æŒ‰ç…§ 2:3:4:6:8 çš„æ¯”ä¾‹è¿›è¡Œç¼©æ”¾ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ªå¯åŠ¨å›¾æ ‡çš„å°ºå¯¸ä¸º48x48 dpï¼Œè¿™è¡¨ç¤ºåœ¨ MDPI çš„å±å¹•ä¸Šå…¶å®žé™…å°ºå¯¸åº”ä¸º 48x48 pxï¼Œåœ¨ HDPI çš„å±å¹•ä¸Šå…¶å®žé™…å¤§å°æ˜¯ MDPI çš„ 1.5 å€ (72x72 px)ï¼Œåœ¨ XDPI çš„å±å¹•ä¸Šå…¶å®žé™…å¤§å°æ˜¯ MDPI çš„ 2 å€ (96x96 px)ï¼Œä¾æ­¤ç±»æŽ¨ã€‚è™½ç„¶ Android ä¹Ÿæ”¯æŒä½Žåƒç´ å¯†åº¦ (LDPI) çš„å±å¹•ï¼Œä½†æ— éœ€ä¸ºæ­¤è´¹ç¥žï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°† HDPI å°ºå¯¸çš„å›¾æ ‡ç¼©å°åˆ° 1/2 è¿›è¡ŒåŒ¹é…ã€‚ä¸‹å›¾ä¸ºå›¾æ ‡çš„å„ä¸ªå±å¹•å¯†åº¦çš„å¯¹åº”å°ºå¯¸: å±å¹•å¯†åº¦ å›¾æ ‡å°ºå¯¸ mdpi 48x48px hdpi 72x72px xhdpi 96x96px xxhdpi 144x144px xxxhdpi 192x192px è§£å†³æ–¹æ¡ˆæ”¯æŒå„ç§å±å¹•å°ºå¯¸ä½¿ç”¨wrap_contentã€match_parentã€weightä¸ºäº†ç¡®ä¿å¸ƒå±€çš„çµæ´»æ€§å¹¶é€‚åº”å„ç§å°ºå¯¸çš„å±å¹•ï¼Œåº”å°½é‡ä½¿ç”¨ â€œwrap_contentâ€ å’Œ â€œmatch_parentâ€ æŽ§åˆ¶æŸäº›è§†å›¾ç»„ä»¶çš„å®½åº¦å’Œé«˜åº¦ã€‚ä½¿ç”¨ â€œwrap_contentâ€ï¼Œç³»ç»Ÿå°±ä¼šå°†è§†å›¾çš„å®½åº¦æˆ–é«˜åº¦è®¾ç½®æˆæ‰€éœ€çš„æœ€å°å°ºå¯¸ä»¥é€‚åº”è§†å›¾ä¸­çš„å†…å®¹ï¼Œè€Œ â€œmatch_parentâ€ï¼ˆåœ¨ä½ŽäºŽ API çº§åˆ« 8 çš„çº§åˆ«ä¸­ç§°ä¸º â€œfill_parentâ€ï¼‰åˆ™ä¼šå±•å¼€ç»„ä»¶ä»¥åŒ¹é…å…¶çˆ¶è§†å›¾çš„å°ºå¯¸ã€‚weightæ˜¯çº¿æ€§å¸ƒå±€çš„ä¸€ä¸ªç‹¬ç‰¹çš„å±žæ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨è¿™ä¸ªå±žæ€§æ¥æŒ‰ç…§æ¯”ä¾‹å¯¹ç•Œé¢è¿›è¡Œåˆ†é…ï¼Œå®Œæˆä¸€äº›ç‰¹æ®Šçš„éœ€æ±‚ã€‚ä½†æ˜¯ï¼Œæˆ‘ä»¬å¯¹äºŽè¿™ä¸ªå±žæ€§çš„è®¡ç®—åº”è¯¥å¦‚ä½•ç†è§£å‘¢ï¼Ÿé¦–å…ˆï¼Œæˆ‘ä»¬å°†å¸ƒå±€è®¾ç½®ä¸ºçº¿æ€§å¸ƒå±€ï¼Œæ¨ªå‘æŽ’åˆ—ï¼Œç„¶åŽæ”¾ç½®ä¸¤ä¸ªå®½åº¦ä¸º0dpçš„æŒ‰é’®ï¼Œåˆ†åˆ«è®¾ç½®weightä¸º1å’Œ2ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³è±¡åˆ°ä¸¤ä¸ªæŒ‰é’®æŒ‰ç…§1ï¼š2çš„å®½åº¦æ¯”ä¾‹æ­£å¸¸æŽ’åˆ—äº†ï¼Œè¿™ä¹Ÿæ˜¯æˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°çš„åœºæ™¯ã€‚ä½†æ˜¯å‡å¦‚æˆ‘ä»¬çš„å®½åº¦ä¸æ˜¯0dp(wrap_contentå’Œ0dpçš„æ•ˆæžœç›¸åŒ)ï¼Œè€Œæ˜¯match_parentå‘¢ï¼Ÿåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå æ¯”å’Œä¸Šé¢æ­£å¥½ç›¸åï¼Œè¿™æ˜¯æ€Žä¹ˆå›žäº‹å‘¢ï¼Ÿè¯´åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬å°±ä¸å¾—ä¸æä¸€ä¸‹weightçš„è®¡ç®—æ–¹æ³•äº†ã€‚android:layout_weightçš„çœŸå®žå«ä¹‰æ˜¯:å¦‚æžœViewè®¾ç½®äº†è¯¥å±žæ€§å¹¶ä¸”æœ‰æ•ˆï¼Œé‚£ä¹ˆè¯¥ Viewçš„å®½åº¦ç­‰äºŽåŽŸæœ‰å®½åº¦+å‰©ä½™ç©ºé—´çš„å æ¯”ã€‚ä»Žè¿™ä¸ªè§’åº¦æˆ‘ä»¬æ¥è§£é‡Šä¸€ä¸‹ä¸Šé¢çš„çŽ°è±¡ã€‚åœ¨ä¸Šé¢çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®æ¯ä¸ªButtonçš„å®½åº¦éƒ½æ˜¯match_parentï¼Œå‡è®¾å±å¹•å®½åº¦ä¸ºLï¼Œé‚£ä¹ˆæ¯ä¸ªButtonçš„å®½åº¦ä¹Ÿåº”è¯¥éƒ½ä¸ºLï¼Œå‰©ä½™å®½åº¦å°±ç­‰äºŽL-ï¼ˆL+Lï¼‰= -Lã€‚Button1çš„weight=1ï¼Œæ‰€ä»¥æœ€ç»ˆå®½åº¦ä¸ºL+1/3*(-L)=2/3Lï¼ŒButton2çš„è®¡ç®—ç±»ä¼¼ï¼Œæœ€ç»ˆå®½åº¦ä¸ºL+2/3(-L)=1/3Lã€‚åŒæ—¶ï¼Œåž‚ç›´æ–¹å‘ä¸Šçš„ç»“è®ºå’Œæ°´å¹³æ˜¯å®Œå…¨ä¸€æ ·çš„ã€‚è™½ç„¶è¯´æˆ‘ä»¬æ¼”ç¤ºäº†match_parentçš„æ˜¾ç¤ºæ•ˆæžœï¼Œå¹¶è¯´æ˜Žäº†åŽŸå› ï¼Œä½†æ˜¯åœ¨çœŸæ­£ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬éƒ½æ˜¯è®¾ç½®æŸä¸€ä¸ªå±žæ€§ä¸º0dpï¼Œç„¶åŽæŒ‰ç…§æƒé‡è®¡ç®—æ‰€å ç™¾åˆ†æ¯”ã€‚ ä½¿ç”¨ç›¸å¯¹å¸ƒå±€ï¼Œç¦ç”¨ç»å¯¹å¸ƒå±€åœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¤§éƒ¨åˆ†æ—¶å€™ä½¿ç”¨çš„éƒ½æ˜¯çº¿æ€§å¸ƒå±€ã€ç›¸å¯¹å¸ƒå±€å’Œå¸§å¸ƒå±€ï¼Œç»å¯¹å¸ƒå±€ç”±äºŽé€‚é…æ€§æžå·®ï¼Œæ‰€ä»¥æžå°‘ä½¿ç”¨ã€‚ç”±äºŽå„ç§å¸ƒå±€çš„ç‰¹ç‚¹ä¸ä¸€æ ·ï¼Œæ‰€ä»¥ä¸èƒ½è¯´å“ªä¸ªå¸ƒå±€å¥½ç”¨ï¼Œåˆ°åº•åº”è¯¥ä½¿ç”¨ä»€ä¹ˆå¸ƒå±€åªèƒ½æ ¹æ®å®žé™…éœ€æ±‚æ¥ç¡®å®šã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ LinearLayout çš„åµŒå¥—å®žä¾‹å¹¶ç»“åˆ â€œwrap_contentâ€ å’Œ â€œmatch_parentâ€ï¼Œä»¥ä¾¿æž„å»ºç›¸å½“å¤æ‚çš„å¸ƒå±€ã€‚ä¸è¿‡ï¼Œæˆ‘ä»¬æ— æ³•é€šè¿‡ LinearLayout ç²¾ç¡®æŽ§åˆ¶å­è§†å›¾çš„ç‰¹æ®Šå…³ç³»ï¼›ç³»ç»Ÿä¼šå°† LinearLayout ä¸­çš„è§†å›¾ç›´æŽ¥å¹¶æŽ’åˆ—å‡ºã€‚å¦‚æžœæˆ‘ä»¬éœ€è¦å°†å­è§†å›¾æŽ’åˆ—å‡ºå„ç§æ•ˆæžœè€Œä¸æ˜¯ä¸€æ¡ç›´çº¿ï¼Œé€šå¸¸æ›´åˆé€‚çš„è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ RelativeLayoutï¼Œè¿™æ ·å°±å¯ä»¥æ ¹æ®å„ç»„ä»¶ä¹‹é—´çš„ç‰¹æ®Šå…³ç³»æŒ‡å®šå¸ƒå±€äº†ã€‚ä¾‹å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥å°†æŸä¸ªå­è§†å›¾å¯¹é½åˆ°å±å¹•å·¦ä¾§ï¼ŒåŒæ—¶å°†å¦ä¸€ä¸ªè§†å›¾å¯¹é½åˆ°å±å¹•å³ä¾§ã€‚ ä½¿ç”¨é™å®šç¬¦ä½¿ç”¨å°ºå¯¸é™å®šç¬¦ä¸Šé¢æ‰€æåˆ°çš„çµæ´»å¸ƒå±€æˆ–è€…æ˜¯ç›¸å¯¹å¸ƒå±€ï¼Œå¯ä»¥ä¸ºæˆ‘ä»¬å¸¦æ¥çš„ä¼˜åŠ¿å°±åªæœ‰è¿™ä¹ˆå¤šäº†ã€‚è™½ç„¶è¿™äº›å¸ƒå±€å¯ä»¥æ‹‰ä¼¸ç»„ä»¶å†…å¤–çš„ç©ºé—´ä»¥é€‚åº”å„ç§å±å¹•ï¼Œä½†å®ƒä»¬ä¸ä¸€å®šèƒ½ä¸ºæ¯ç§å±å¹•éƒ½æä¾›æœ€ä½³çš„ç”¨æˆ·ä½“éªŒã€‚å› æ­¤ï¼Œæˆ‘ä»¬çš„åº”ç”¨ä¸ä»…ä»…åªå®žæ–½çµæ´»å¸ƒå±€ï¼Œè¿˜åº”è¯¥åº”é’ˆå¯¹å„ç§å±å¹•é…ç½®æä¾›ä¸€äº›å¤‡ç”¨å¸ƒå±€ã€‚å¦‚ä½•åšåˆ°è¿™ä¸€ç‚¹å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨é…ç½®é™å®šç¬¦ï¼Œåœ¨è¿è¡Œæ—¶æ ¹æ®å½“å‰çš„è®¾å¤‡é…ç½®è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„èµ„æºäº†ï¼Œä¾‹å¦‚æ ¹æ®å„ç§å±å¹•å°ºå¯¸é€‰æ‹©ä¸åŒçš„å¸ƒå±€ã€‚å¾ˆå¤šåº”ç”¨ä¼šåœ¨è¾ƒå¤§çš„å±å¹•ä¸Šå®žæ–½â€œåŒé¢æ¿â€æ¨¡å¼ï¼Œå³åœ¨ä¸€ä¸ªé¢æ¿ä¸Šæ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨ï¼Œè€Œåœ¨å¦ä¸€é¢æ¿ä¸Šæ˜¾ç¤ºå¯¹åº”å†…å®¹ã€‚å¹³æ¿ç”µè„‘å’Œç”µè§†çš„å±å¹•å·²ç»å¤§åˆ°å¯ä»¥åŒæ—¶å®¹çº³è¿™ä¸¤ä¸ªé¢æ¿äº†ï¼Œä½†æ‰‹æœºå±å¹•å°±éœ€è¦åˆ†åˆ«æ˜¾ç¤ºã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–‡ä»¶ä»¥ä¾¿å®žæ–½è¿™äº›å¸ƒå±€ï¼šres/layout/main.xmlï¼Œå•é¢æ¿ï¼ˆé»˜è®¤ï¼‰å¸ƒå±€ï¼š12345678910&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:orientation=&quot;vertical&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;match_parent&quot; /&gt;&lt;/LinearLayout&gt; res/layout-large/main.xmlï¼ŒåŒé¢æ¿å¸ƒå±€ï¼š1234567891011121314&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:layout_width=&quot;fill_parent&quot;android:layout_height=&quot;fill_parent&quot;android:orientation=&quot;horizontal&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;400dp&quot;android:layout_marginRight=&quot;10dp&quot;/&gt;&lt;fragment android:id=&quot;@+id/article&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.ArticleFragment&quot;android:layout_width=&quot;fill_parent&quot; /&gt;&lt;/LinearLayout&gt; è¯·æ³¨æ„ç¬¬äºŒç§å¸ƒå±€åç§°ç›®å½•ä¸­çš„ large é™å®šç¬¦ã€‚ç³»ç»Ÿä¼šåœ¨å±žäºŽè¾ƒå¤§å±å¹•ï¼ˆä¾‹å¦‚ 7 è‹±å¯¸æˆ–æ›´å¤§çš„å¹³æ¿ç”µè„‘ï¼‰çš„è®¾å¤‡ä¸Šé€‰æ‹©æ­¤å¸ƒå±€ã€‚ç³»ç»Ÿä¼šåœ¨è¾ƒå°çš„å±å¹•ä¸Šé€‰æ‹©å…¶ä»–å¸ƒå±€ï¼ˆæ— é™å®šç¬¦ï¼‰ã€‚ ä½¿ç”¨æœ€å°å®½åº¦é™å®šç¬¦åœ¨ç‰ˆæœ¬ä½ŽäºŽ 3.2 çš„ Android è®¾å¤‡ä¸Šï¼Œå¼€å‘äººå‘˜é‡åˆ°çš„é—®é¢˜ä¹‹ä¸€æ˜¯â€œè¾ƒå¤§â€å±å¹•çš„å°ºå¯¸èŒƒå›´ï¼Œè¯¥é—®é¢˜ä¼šå½±å“æˆ´å°” Streakã€æ—©æœŸçš„ Galaxy Tab ä»¥åŠå¤§éƒ¨åˆ† 7 è‹±å¯¸å¹³æ¿ç”µè„‘ã€‚å³ä½¿è¿™äº›è®¾å¤‡çš„å±å¹•å±žäºŽâ€œè¾ƒå¤§â€çš„å°ºå¯¸ï¼Œä½†å¾ˆå¤šåº”ç”¨å¯èƒ½ä¼šé’ˆå¯¹æ­¤ç±»åˆ«ä¸­çš„å„ç§è®¾å¤‡æ˜¾ç¤ºä¸åŒçš„å¸ƒå±€ï¼ˆâ€œè¾ƒå¤§â€çš„æ¦‚å¿µä¸æ¸…æ™°å¯¼è‡´çš„ï¼‰ã€‚è¿™å°±æ˜¯ Android 3.2 ç‰ˆåœ¨å¼•å…¥å…¶ä»–é™å®šç¬¦çš„åŒæ—¶å¼•å…¥â€œæœ€å°å®½åº¦â€é™å®šç¬¦çš„åŽŸå› ã€‚æœ€å°å®½åº¦é™å®šç¬¦å¯è®©æ‚¨é€šè¿‡æŒ‡å®šæŸä¸ªæœ€å°å®½åº¦ï¼ˆä»¥ dp ä¸ºå•ä½ï¼‰æ¥å®šä½å±å¹•ã€‚ä¾‹å¦‚ï¼Œæ ‡å‡† 7 è‹±å¯¸å¹³æ¿ç”µè„‘çš„æœ€å°å®½åº¦ä¸º 600 dpï¼Œå› æ­¤å¦‚æžœæ‚¨è¦åœ¨æ­¤ç±»å±å¹•ä¸Šçš„ç”¨æˆ·ç•Œé¢ä¸­ä½¿ç”¨åŒé¢æ¿ï¼ˆä½†åœ¨è¾ƒå°çš„å±å¹•ä¸Šåªæ˜¾ç¤ºåˆ—è¡¨ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ä¸Šæ–‡ä¸­æ‰€è¿°çš„å•é¢æ¿å’ŒåŒé¢æ¿è¿™ä¸¤ç§å¸ƒå±€ï¼Œä½†æ‚¨åº”ä½¿ç”¨ sw600dp æŒ‡æ˜ŽåŒé¢æ¿å¸ƒå±€ä»…é€‚ç”¨äºŽæœ€å°å®½åº¦ä¸º 600 dp çš„å±å¹•ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ large å°ºå¯¸é™å®šç¬¦ã€‚res/layout/main.xmlï¼Œå•é¢æ¿ï¼ˆé»˜è®¤ï¼‰å¸ƒå±€ï¼š12345678910&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:orientation=&quot;vertical&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;match_parent&quot; /&gt;&lt;/LinearLayout&gt; res/layout-sw600dp/main.xmlï¼ŒåŒé¢æ¿å¸ƒå±€ï¼š1234567891011121314&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:layout_width=&quot;fill_parent&quot;android:layout_height=&quot;fill_parent&quot;android:orientation=&quot;horizontal&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;400dp&quot;android:layout_marginRight=&quot;10dp&quot;/&gt;&lt;fragment android:id=&quot;@+id/article&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.ArticleFragment&quot;android:layout_width=&quot;fill_parent&quot; /&gt;&lt;/LinearLayout&gt; ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯¹äºŽæœ€å°å®½åº¦å¤§äºŽç­‰äºŽ 600 dp çš„è®¾å¤‡ï¼Œç³»ç»Ÿä¼šé€‰æ‹© layout-sw600dp/main.xmlï¼ˆåŒé¢æ¿ï¼‰å¸ƒå±€ï¼Œå¦åˆ™ç³»ç»Ÿå°±ä¼šé€‰æ‹© layout/main.xmlï¼ˆå•é¢æ¿ï¼‰å¸ƒå±€ã€‚ä½† Android ç‰ˆæœ¬ä½ŽäºŽ 3.2 çš„è®¾å¤‡ä¸æ”¯æŒæ­¤æŠ€æœ¯ï¼ŒåŽŸå› æ˜¯è¿™äº›è®¾å¤‡æ— æ³•å°† sw600dp è¯†åˆ«ä¸ºå°ºå¯¸é™å®šç¬¦ï¼Œå› æ­¤æˆ‘ä»¬ä»éœ€ä½¿ç”¨ large é™å®šç¬¦ã€‚è¿™æ ·ä¸€æ¥ï¼Œå°±ä¼šæœ‰ä¸€ä¸ªåç§°ä¸º res/layout-large/main.xml çš„æ–‡ä»¶ï¼ˆä¸Ž res/layout-sw600dp/main.xml ä¸€æ ·ï¼‰ã€‚ä½†æ˜¯æ²¡æœ‰å¤ªå¤§å…³ç³»ï¼Œæˆ‘ä»¬å°†é©¬ä¸Šå­¦ä¹ å¦‚ä½•é¿å…æ­¤ç±»å¸ƒå±€æ–‡ä»¶å‡ºçŽ°çš„é‡å¤ã€‚ ä½¿ç”¨å¸ƒå±€åˆ«åæœ€å°å®½åº¦é™å®šç¬¦ä»…é€‚ç”¨äºŽ Android 3.2 åŠæ›´é«˜ç‰ˆæœ¬ã€‚å› æ­¤ï¼Œå¦‚æžœæˆ‘ä»¬ä»éœ€ä½¿ç”¨ä¸Žè¾ƒä½Žç‰ˆæœ¬å…¼å®¹çš„æ¦‚æ‹¬å°ºå¯¸èŒƒå›´ï¼ˆå°ã€æ­£å¸¸ã€å¤§å’Œç‰¹å¤§ï¼‰ã€‚ä¾‹å¦‚ï¼Œå¦‚æžœè¦å°†ç”¨æˆ·ç•Œé¢è®¾è®¡æˆåœ¨æ‰‹æœºä¸Šæ˜¾ç¤ºå•é¢æ¿ï¼Œä½†åœ¨ 7 è‹±å¯¸å¹³æ¿ç”µè„‘ã€ç”µè§†å’Œå…¶ä»–è¾ƒå¤§çš„è®¾å¤‡ä¸Šæ˜¾ç¤ºå¤šé¢æ¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æä¾›ä»¥ä¸‹æ–‡ä»¶ï¼š res/layout/main.xml: å•é¢æ¿å¸ƒå±€ res/layout-large: å¤šé¢æ¿å¸ƒå±€ res/layout-sw600dp: å¤šé¢æ¿å¸ƒå±€ åŽä¸¤ä¸ªæ–‡ä»¶æ˜¯ç›¸åŒçš„ï¼Œå› ä¸ºå…¶ä¸­ä¸€ä¸ªç”¨äºŽå’Œ Android 3.2 è®¾å¤‡åŒ¹é…ï¼Œè€Œå¦ä¸€ä¸ªåˆ™æ˜¯ä¸ºä½¿ç”¨è¾ƒä½Žç‰ˆæœ¬ Android çš„å¹³æ¿ç”µè„‘å’Œç”µè§†å‡†å¤‡çš„ã€‚è¦é¿å…å¹³æ¿ç”µè„‘å’Œç”µè§†çš„æ–‡ä»¶å‡ºçŽ°é‡å¤ï¼ˆä»¥åŠç”±æ­¤å¸¦æ¥çš„ç»´æŠ¤é—®é¢˜ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨åˆ«åæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥å®šä¹‰ä»¥ä¸‹å¸ƒå±€ï¼š res/layout/main.xmlï¼Œå•é¢æ¿å¸ƒå±€ res/layout/main_twopanes.xmlï¼ŒåŒé¢æ¿å¸ƒå±€ ç„¶åŽæ·»åŠ è¿™ä¸¤ä¸ªæ–‡ä»¶ï¼šres/values-large/layout.xml:123&lt;resources&gt;&lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main_twopanes&lt;/item&gt;&lt;/resources&gt; res/values-sw600dp/layout.xml:123&lt;resources&gt;&lt;item name=&quot;main&quot; type=&quot;layout&quot;&gt;@layout/main_twopanes&lt;/item&gt;&lt;/resources&gt; åŽä¸¤ä¸ªæ–‡ä»¶çš„å†…å®¹ç›¸åŒï¼Œä½†å®ƒä»¬å¹¶æœªå®žé™…å®šä¹‰å¸ƒå±€ã€‚å®ƒä»¬åªæ˜¯å°† main è®¾ç½®æˆäº† main_twopanes çš„åˆ«åã€‚ç”±äºŽè¿™äº›æ–‡ä»¶åŒ…å« large å’Œ sw600dp é€‰æ‹©å™¨ï¼Œå› æ­¤æ— è®º Android ç‰ˆæœ¬å¦‚ä½•ï¼Œç³»ç»Ÿéƒ½ä¼šå°†è¿™äº›æ–‡ä»¶åº”ç”¨åˆ°å¹³æ¿ç”µè„‘å’Œç”µè§†ä¸Šï¼ˆç‰ˆæœ¬ä½ŽäºŽ 3.2 çš„å¹³æ¿ç”µè„‘å’Œç”µè§†ä¼šåŒ¹é… largeï¼Œç‰ˆæœ¬é«˜äºŽ 3.2 çš„å¹³æ¿ç”µè„‘å’Œç”µè§†åˆ™ä¼šåŒ¹é… sw600dpï¼‰ã€‚ ä½¿ç”¨å±å¹•æ–¹å‘é™å®šç¬¦æŸäº›å¸ƒå±€ä¼šåŒæ—¶æ”¯æŒæ¨ªå‘æ¨¡å¼å’Œçºµå‘æ¨¡å¼ï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡è°ƒæ•´ä¼˜åŒ–å…¶ä¸­å¤§éƒ¨åˆ†å¸ƒå±€çš„æ•ˆæžœã€‚åœ¨æ–°é—»é˜…è¯»å™¨ç¤ºä¾‹åº”ç”¨ä¸­ï¼Œæ¯ç§å±å¹•å°ºå¯¸å’Œå±å¹•æ–¹å‘ä¸‹çš„å¸ƒå±€è¡Œä¸ºæ–¹å¼å¦‚ä¸‹æ‰€ç¤ºï¼š å°å±å¹•ï¼Œçºµå‘ï¼šå•é¢æ¿ï¼Œå¸¦å¾½æ ‡ å°å±å¹•ï¼Œæ¨ªå‘ï¼šå•é¢æ¿ï¼Œå¸¦å¾½æ ‡ 7 è‹±å¯¸å¹³æ¿ç”µè„‘ï¼Œçºµå‘ï¼šå•é¢æ¿ï¼Œå¸¦æ“ä½œæ  7 è‹±å¯¸å¹³æ¿ç”µè„‘ï¼Œæ¨ªå‘ï¼šåŒé¢æ¿ï¼Œå®½ï¼Œå¸¦æ“ä½œæ  10 è‹±å¯¸å¹³æ¿ç”µè„‘ï¼Œçºµå‘ï¼šåŒé¢æ¿ï¼Œçª„ï¼Œå¸¦æ“ä½œæ  10 è‹±å¯¸å¹³æ¿ç”µè„‘ï¼Œæ¨ªå‘ï¼šåŒé¢æ¿ï¼Œå®½ï¼Œå¸¦æ“ä½œæ  ç”µè§†ï¼Œæ¨ªå‘ï¼šåŒé¢æ¿ï¼Œå®½ï¼Œå¸¦æ“ä½œæ  å› æ­¤ï¼Œè¿™äº›å¸ƒå±€ä¸­çš„æ¯ä¸€ç§éƒ½å®šä¹‰åœ¨äº† res/layout/ ç›®å½•ä¸‹çš„æŸä¸ª XML æ–‡ä»¶ä¸­ã€‚ä¸ºäº†ç»§ç»­å°†æ¯ä¸ªå¸ƒå±€åˆ†é…ç»™å„ç§å±å¹•é…ç½®ï¼Œè¯¥åº”ç”¨ä¼šä½¿ç”¨å¸ƒå±€åˆ«åå°†ä¸¤è€…ç›¸åŒ¹é…ï¼šres/layout/onepane.xml:(å•é¢æ¿)12345678910&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:orientation=&quot;vertical&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;match_parent&quot; /&gt;&lt;/LinearLayout&gt; res/layout/onepane_with_bar.xml:(å•é¢æ¿å¸¦æ“ä½œæ )1234567891011121314151617181920212223242526272829303132&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:orientation=&quot;vertical&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;&gt;&lt;LinearLayout android:layout_width=&quot;match_parent&quot;android:id=&quot;@+id/linearLayout1&quot; android:gravity=&quot;center&quot;android:layout_height=&quot;50dp&quot;&gt;&lt;ImageView android:id=&quot;@+id/imageView1&quot;android:layout_height=&quot;wrap_content&quot;android:layout_width=&quot;wrap_content&quot;android:src=&quot;@drawable/logo&quot;android:paddingRight=&quot;30dp&quot;android:layout_gravity=&quot;left&quot;android:layout_weight=&quot;0&quot; /&gt;&lt;View android:layout_height=&quot;wrap_content&quot;android:id=&quot;@+id/view1&quot;android:layout_width=&quot;wrap_content&quot;android:layout_weight=&quot;1&quot; /&gt;&lt;Button android:id=&quot;@+id/categorybutton&quot;android:background=&quot;@drawable/button_bg&quot;android:layout_height=&quot;match_parent&quot;android:layout_weight=&quot;0&quot;android:layout_width=&quot;120dp&quot;style=&quot;@style/CategoryButtonStyle&quot;/&gt;&lt;/LinearLayout&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;match_parent&quot; /&gt;&lt;/LinearLayout&gt; res/layout/twopanes.xml:(åŒé¢æ¿ï¼Œå®½å¸ƒå±€)1234567891011121314&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:layout_width=&quot;fill_parent&quot;android:layout_height=&quot;fill_parent&quot;android:orientation=&quot;horizontal&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;400dp&quot;android:layout_marginRight=&quot;10dp&quot;/&gt;&lt;fragment android:id=&quot;@+id/article&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.ArticleFragment&quot;android:layout_width=&quot;fill_parent&quot; /&gt;&lt;/LinearLayout&gt; res/layout/twopanes_narrow.xml:(åŒé¢æ¿ï¼Œçª„å¸ƒå±€)1234567891011121314&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:layout_width=&quot;fill_parent&quot;android:layout_height=&quot;fill_parent&quot;android:orientation=&quot;horizontal&quot;&gt;&lt;fragment android:id=&quot;@+id/headlines&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.HeadlinesFragment&quot;android:layout_width=&quot;200dp&quot;android:layout_marginRight=&quot;10dp&quot;/&gt;&lt;fragment android:id=&quot;@+id/article&quot;android:layout_height=&quot;fill_parent&quot;android:name=&quot;com.example.android.newsreader.ArticleFragment&quot;android:layout_width=&quot;fill_parent&quot; /&gt;&lt;/LinearLayout&gt; æ—¢ç„¶æˆ‘ä»¬å·²å®šä¹‰äº†æ‰€æœ‰å¯èƒ½çš„å¸ƒå±€ï¼Œé‚£å°±åªéœ€ä½¿ç”¨é…ç½®é™å®šç¬¦å°†æ­£ç¡®çš„å¸ƒå±€æ˜ å°„åˆ°å„ç§é…ç½®å³å¯ã€‚çŽ°åœ¨åªéœ€ä½¿ç”¨å¸ƒå±€åˆ«åæŠ€æœ¯å³å¯åšåˆ°è¿™ä¸€ç‚¹ï¼šres/values/layouts.xml:1234&lt;resources&gt;&lt;item name=&quot;main_layout&quot; type=&quot;layout&quot;&gt;@layout/onepane_with_bar&lt;/item&gt;&lt;bool name=&quot;has_two_panes&quot;&gt;false&lt;/bool&gt;&lt;/resources&gt; res/values-sw600dp-land/layouts.xml:1234&lt;resources&gt;&lt;item name=&quot;main_layout&quot; type=&quot;layout&quot;&gt;@layout/twopanes&lt;/item&gt;&lt;bool name=&quot;has_two_panes&quot;&gt;true&lt;/bool&gt;&lt;/resources&gt; res/values-sw600dp-port/layouts.xml:1234&lt;resources&gt;&lt;item name=&quot;main_layout&quot; type=&quot;layout&quot;&gt;@layout/onepane&lt;/item&gt;&lt;bool name=&quot;has_two_panes&quot;&gt;false&lt;/bool&gt;&lt;/resources&gt; res/values-large-land/layouts.xml:1234&lt;resources&gt;&lt;item name=&quot;main_layout&quot; type=&quot;layout&quot;&gt;@layout/twopanes&lt;/item&gt;&lt;bool name=&quot;has_two_panes&quot;&gt;true&lt;/bool&gt;&lt;/resources&gt; res/values-large-port/layouts.xml:1234&lt;resources&gt;&lt;item name=&quot;main_layout&quot; type=&quot;layout&quot;&gt;@layout/twopanes_narrow&lt;/item&gt;&lt;bool name=&quot;has_two_panes&quot;&gt;true&lt;/bool&gt;&lt;/resources&gt; ä½¿ç”¨è‡ªåŠ¨æ‹‰ä¼¸ä½å›¾(.9å›¾)åœ¨Androidçš„è®¾è®¡è¿‡ç¨‹ä¸­ï¼Œä¸ºäº†é€‚é…ä¸åŒçš„æ‰‹æœºåˆ†è¾¨çŽ‡ï¼Œå›¾ç‰‡å¤§å¤šéœ€è¦æ‹‰ä¼¸æˆ–è€…åŽ‹ç¼©ï¼Œè¿™æ ·å°±å‡ºçŽ°äº†å¯ä»¥ä»»æ„è°ƒæ•´å¤§å°çš„ä¸€ç§å›¾ç‰‡æ ¼å¼â€œ.9.pngâ€ã€‚è¯¦ç»†æ•™ç¨‹è¯·å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ æ”¯æŒå„ç§å±å¹•å¯†åº¦ä½¿ç”¨å¯†åº¦æ— å…³åƒç´ ç”±äºŽå„ç§å±å¹•çš„åƒç´ å¯†åº¦éƒ½æœ‰æ‰€ä¸åŒï¼Œå› æ­¤ç›¸åŒæ•°é‡çš„åƒç´ åœ¨ä¸åŒè®¾å¤‡ä¸Šçš„å®žé™…å¤§å°ä¹Ÿæœ‰æ‰€å·®å¼‚ï¼Œè¿™æ ·ä½¿ç”¨åƒç´ å®šä¹‰å¸ƒå±€å°ºå¯¸å°±ä¼šäº§ç”Ÿé—®é¢˜ã€‚å› æ­¤ï¼Œè¯·åŠ¡å¿…ä½¿ç”¨ dp æˆ– sp å•ä½æŒ‡å®šå°ºå¯¸ã€‚ä¾‹å¦‚ï¼Œè¯·ä½¿ç”¨ dpï¼ˆè€Œéž pxï¼‰æŒ‡å®šä¸¤ä¸ªè§†å›¾é—´çš„é—´è·ï¼š1234&lt;Button android:layout_width=&quot;wrap_content&quot;android:layout_height=&quot;wrap_content&quot;android:text=&quot;@string/clickme&quot;android:layout_marginTop=&quot;20dp&quot; /&gt; è¯·åŠ¡å¿…ä½¿ç”¨ sp æŒ‡å®šæ–‡å­—å¤§å°ï¼š 1234&lt;TextViewandroid:layout_width=&quot;match_parent&quot;android:layout_height=&quot;wrap_content&quot;android:textSize=&quot;20sp&quot; /&gt; é™¤äº†ä»‹ç»è¿™äº›æœ€åŸºç¡€çš„çŸ¥è¯†ä¹‹å¤–ï¼Œæˆ‘ä»¬ä¸‹é¢å†æ¥è®¨è®ºä¸€ä¸‹å¦å¤–ä¸€ä¸ªé—®é¢˜ã€‚ç»è¿‡ä¸Šé¢çš„ä»‹ç»ï¼Œæˆ‘ä»¬éƒ½æ¸…æ¥šï¼Œä¸ºäº†èƒ½å¤Ÿè§„é¿ä¸åŒåƒç´ å¯†åº¦çš„é™·é˜±ï¼ŒGoogleæŽ¨èä½¿ç”¨dpæ¥ä»£æ›¿pxä½œä¸ºæŽ§ä»¶é•¿åº¦çš„åº¦é‡å•ä½ï¼Œä½†æ˜¯æˆ‘ä»¬æ¥çœ‹ä¸‹é¢çš„ä¸€ä¸ªåœºæ™¯ã€‚å‡å¦‚æˆ‘ä»¬ä»¥Nexus5ä½œä¸ºä¹¦å†™ä»£ç æ—¶æŸ¥çœ‹æ•ˆæžœçš„æµ‹è¯•æœºåž‹ï¼ŒNexus5çš„æ€»å®½åº¦ä¸º360dpï¼Œæˆ‘ä»¬çŽ°åœ¨éœ€è¦åœ¨æ°´å¹³æ–¹å‘ä¸Šæ”¾ç½®ä¸¤ä¸ªæŒ‰é’®ï¼Œä¸€ä¸ªæ˜¯150dpå·¦å¯¹é½ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯200dpå³å¯¹é½ï¼Œæœ€åŽä¸­é—´ç•™æœ‰10dpé—´éš”ã€‚ä½†æ˜¯å¦‚æžœåœ¨Nexus Sæˆ–è€…æ˜¯Nexus Oneè¿è¡Œï¼Œä¸¤ä¸ªæŒ‰é’®å°±å‘ç”Ÿäº†é‡å ã€‚æˆ‘ä»¬éƒ½å·²ç»ç”¨äº†dpäº†ï¼Œä¸ºä»€ä¹ˆä¼šå‡ºçŽ°è¿™ç§æƒ…å†µå‘¢ï¼Ÿè™½ç„¶è¯´dpå¯ä»¥åŽ»é™¤ä¸åŒåƒç´ å¯†åº¦çš„é—®é¢˜ï¼Œä½¿å¾—1dpåœ¨ä¸åŒåƒç´ å¯†åº¦ä¸Šé¢çš„ç‰©ç†é•¿åº¦åŸºæœ¬ç›¸åŒ(å¦‚æžœxdpiï¼Œydpiä¸ŽdensityDpiä¸ä¸€æ ·ï¼Œåˆ™ç‰©ç†é•¿åº¦ä¼šæœ‰åå·®)ï¼Œä½†æ˜¯è¿˜æ˜¯ç”±äºŽAndroidå±å¹•è®¾å¤‡çš„å¤šæ ·æ€§ï¼Œå¦‚æžœä½¿ç”¨dpæ¥ä½œä¸ºåº¦é‡å•ä½ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„å±å¹•çš„å®½åº¦éƒ½æ˜¯ç›¸åŒçš„dpé•¿åº¦ï¼Œæ¯”å¦‚è¯´ï¼ŒNexus Så’ŒNexus Oneå±žäºŽhdpiï¼Œå±å¹•å®½åº¦æ˜¯320dpï¼Œè€ŒNexus 5å±žäºŽxxhdpiï¼Œå±å¹•å®½åº¦æ˜¯360dpï¼ŒGalaxy Nexuså±žäºŽxhdpiï¼Œå±å¹•å®½åº¦æ˜¯384dpï¼ŒNexus 6 å±žäºŽxxxhdpiï¼Œå±å¹•å®½åº¦æ˜¯410dpã€‚æ‰€ä»¥è¯´ï¼Œå…‰Googleè‡ªå·±ä¸€å®¶çš„äº§å“å°±å·²ç»æœ‰è¿™ä¹ˆå¤šçš„æ ‡å‡†ï¼Œè€Œä¸”å±å¹•å®½åº¦å’Œåƒç´ å¯†åº¦æ²¡æœ‰ä»»ä½•å…³è”å…³ç³»ï¼Œå³ä½¿æˆ‘ä»¬ä½¿ç”¨dpï¼Œåœ¨320dpå®½åº¦çš„è®¾å¤‡å’Œ410dpçš„è®¾å¤‡ä¸Šï¼Œè¿˜æ˜¯ä¼šæœ‰90dpçš„å·®åˆ«ã€‚æ‰€ä»¥æ€»ç»“çš„ç»“æžœæ˜¯ï¼Œæˆ‘ä»¬è¦å°½é‡ä½¿ç”¨match_parentå’Œwrap_contentï¼Œå°½å¯èƒ½å°‘çš„ç”¨dpæ¥æŒ‡å®šæŽ§ä»¶çš„å…·ä½“é•¿å®½ï¼Œå†ç»“åˆä¸Šæƒé‡ï¼Œå¤§éƒ¨åˆ†çš„æƒ…å†µæˆ‘ä»¬éƒ½æ˜¯å¯ä»¥åšåˆ°é€‚é…çš„ã€‚å¦‚æžœé‡åˆ°ä¸Šè¿°æƒ…å†µçš„è¯ï¼Œè¿™é‡Œæœ‰ä¸€ç§æ–¹æ³•å°±æ˜¯ï¼Œæˆ‘ä»¬å‡è®¾æ‰‹æœºå±å¹•çš„å®½åº¦éƒ½æ˜¯320æŸå•ä½ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°†ä¸€ä¸ªå±å¹•å®½åº¦çš„æ€»åƒç´ æ•°å¹³å‡åˆ†æˆ320ä»½ï¼Œæ¯ä¸€ä»½å¯¹åº”å…·ä½“çš„åƒç´ å°±å¯ä»¥äº†ã€‚å…·ä½“ä»‹ç»å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ æä¾›å¤‡ç”¨ä½å›¾ç”±äºŽ Android å¯åœ¨å…·æœ‰å„ç§å±å¹•å¯†åº¦çš„è®¾å¤‡ä¸Šè¿è¡Œï¼Œå› æ­¤æˆ‘ä»¬æä¾›çš„ä½å›¾èµ„æºåº”å§‹ç»ˆå¯ä»¥æ»¡è¶³å„ç±»æ™®éå¯†åº¦èŒƒå›´çš„è¦æ±‚ï¼šä½Žå¯†åº¦ã€ä¸­ç­‰å¯†åº¦ã€é«˜å¯†åº¦ä»¥åŠè¶…é«˜å¯†åº¦ã€‚è¿™å°†æœ‰åŠ©äºŽæˆ‘ä»¬çš„å›¾ç‰‡åœ¨æ‰€æœ‰å±å¹•å¯†åº¦ä¸Šéƒ½èƒ½å¾—åˆ°å‡ºè‰²çš„è´¨é‡å’Œæ•ˆæžœã€‚è¦ç”Ÿæˆè¿™äº›å›¾ç‰‡ï¼Œæˆ‘ä»¬åº”å…ˆæå–çŸ¢é‡æ ¼å¼çš„åŽŸå§‹èµ„æºï¼Œç„¶åŽæ ¹æ®ä»¥ä¸‹å°ºå¯¸èŒƒå›´é’ˆå¯¹å„å¯†åº¦ç”Ÿæˆç›¸åº”çš„å›¾ç‰‡ã€‚ xhdpiï¼š2.0 hdpiï¼š1.5 mdpiï¼š1.0ï¼ˆæœ€ä½Žè¦æ±‚ï¼‰ ldpiï¼š0.75 ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æžœæˆ‘ä»¬ä¸º xhdpi è®¾å¤‡ç”Ÿæˆäº† 200x200 pxå°ºå¯¸çš„å›¾ç‰‡ï¼Œå°±åº”è¯¥ä½¿ç”¨åŒä¸€èµ„æºä¸º hdpiã€mdpi å’Œ ldpi è®¾å¤‡åˆ†åˆ«ç”Ÿæˆ 150x150ã€100x100 å’Œ 75x75 å°ºå¯¸çš„å›¾ç‰‡ã€‚ç„¶åŽï¼Œå°†ç”Ÿæˆçš„å›¾ç‰‡æ–‡ä»¶æ”¾åœ¨ res/ ä¸‹çš„ç›¸åº”å­ç›®å½•ä¸­(mdpiã€hdpiã€xhdpiã€xxhdpi)ï¼Œç³»ç»Ÿå°±ä¼šæ ¹æ®è¿è¡Œæ‚¨åº”ç”¨çš„è®¾å¤‡çš„å±å¹•å¯†åº¦è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„å›¾ç‰‡ã€‚ æ³¨æ„ï¼šå®žé™…å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œé€šå¸¸éƒ½ä¼šåšä¸‰å¥—é…å›¾ï¼Œå¯¹åº”ç€drawable-hdpiã€drawable-xhdpiã€drawable-xxhdpiä¸‰ä¸ªæ–‡ä»¶å¤¹ã€‚å½“ç„¶æ—¶é—´èµ¶çš„è¯ï¼Œåšä¸€å¥—ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚å…·ä½“å¯ä»¥å‚è€ƒçŽ‹æœˆåŠå­çš„æ–‡ç« å’Œæ…•è¯¾ç½‘çš„è¿™ç¯‡æ–‡ç« ã€‚å¯¹äºŽæ…•è¯¾ç½‘çš„è¿™ç¯‡ï¼Œå…¶ä¸­å¯¹èµ„æºçš„åŠ è½½ç­–ç•¥åšäº†è¯¦ç»†çš„è®²è§£ï¼Œå€¼å¾—ä¸€çœ‹ï¼ŒåŒæ—¶ï¼Œæ…•è¯¾ç½‘ä¸€æ–‡æ‰€æåŠçš„èµ„æºåŠ è½½ç­–ç•¥åŒæ ·é€‚ç”¨äºŽvaluesæ–‡ä»¶å¤¹ã€‚å¯¹äºŽçŽ‹æœˆåŠå­çš„æ–‡ç« ä¸­æœ‰æåŠè¿‡mipmapå’Œdrawableçš„åŒºåˆ«ï¼Œæˆ‘åœ¨æ­¤åŸºç¡€ä¸Šçš„æ€»ç»“æ˜¯APPçš„æ¡Œé¢å›¾æ ‡åšå†³ç”¨mipmap-[]dpiï¼Œå…¶å®ƒçš„èµ„æºé™¤æ‰€æåŠçš„å¿…é¡»æ”¾åœ¨drawableæ–‡ä»¶å¤¹ä¸­çš„å¤–ï¼Œgoogleå¹¶æ²¡æœ‰ç»™å‡ºæ˜Žç¡®çš„æŒ‡ç¤ºï¼Œæ‰€ä»¥æ”¾mipmap-[]dpiä¸­å’Œdrawable-[*]dpiéƒ½å¯ä»¥ã€‚æœ€åŽè¿˜éœ€è¦æ³¨æ„çš„ä¸€ç‚¹æ˜¯ï¼Œå¦‚æžœæœ‰çš„æ‰‹æœºå°ºå¯¸æ¯”è¾ƒå¥‡è‘©ï¼Œå¯ä»¥è¯•è¯•wdpé™å®šç¬¦ï¼Œè¿˜æ˜¯ä¸è¡Œçš„è¯ï¼Œå°±å»ºè®®åŠ¨æ€è®¾ç½®äº†ã€‚ è¿™æ ·ä¸€æ¥ï¼Œåªè¦æˆ‘ä»¬å¼•ç”¨ @drawable/idï¼Œç³»ç»Ÿéƒ½èƒ½æ ¹æ®ç›¸åº”å±å¹•çš„ dpi é€‰å–åˆé€‚çš„ä½å›¾ã€‚è¿˜è®°å¾—æˆ‘ä»¬ä¸Šé¢æåˆ°çš„å›¾æ ‡è®¾è®¡å°ºå¯¸å—ï¼Ÿå’Œè¿™ä¸ªå…¶å®žæ˜¯ä¸€ä¸ªæ„æ€ã€‚ä½†æ˜¯è¿˜æœ‰ä¸ªé—®é¢˜éœ€è¦æ³¨æ„ä¸‹ï¼Œå¦‚æžœæ˜¯.9å›¾æˆ–è€…æ˜¯ä¸éœ€è¦å¤šä¸ªåˆ†è¾¨çŽ‡çš„å›¾ç‰‡ï¼Œå°±æ”¾åœ¨drawableæ–‡ä»¶å¤¹å³å¯ã€‚ drawableå¯¹åº”çš„dpiæ˜¯160dpiï¼Œç›¸å½“äºŽdrawable-mdpiï¼Œä½†æ˜¯ä¸ä¼šä½œä¸ºä¸€ä¸ªç‰¹å®šdpiçš„æ–‡ä»¶å¤¹ä½¿ç”¨ã€‚å®ƒçš„ä½œç”¨æ˜¯å­˜æ”¾ä¸€äº›xmlæ–‡ä»¶ã€.9å›¾ä»¥åŠä¸€äº›ä¸éœ€è¦é€‚é…å¤šä¸ªåˆ†è¾¨çŽ‡çš„å›¾ç‰‡ã€‚ Android 8.0 å›¾æ ‡é€‚é…å‚è€ƒé“¾æŽ¥&gt;&gt; æœ€ä½³å®žè·µå…³äºŽé«˜æ¸…è®¾è®¡å›¾å°ºå¯¸Googleå®˜æ–¹ç»™å‡ºçš„é«˜æ¸…è®¾è®¡å›¾å°ºå¯¸æœ‰ä¸¤ç§æ–¹æ¡ˆï¼Œä¸€ç§æ˜¯ä»¥mdpiè®¾è®¡ï¼Œç„¶åŽå¯¹åº”æ”¾å¤§å¾—åˆ°æ›´é«˜åˆ†è¾¨çŽ‡çš„å›¾ç‰‡ï¼Œå¦å¤–ä¸€ç§åˆ™æ˜¯ä»¥é«˜åˆ†è¾¨çŽ‡ä½œä¸ºè®¾è®¡å¤§å°ï¼Œç„¶åŽæŒ‰ç…§å€æ•°å¯¹åº”ç¼©å°åˆ°å°åˆ†è¾¨çŽ‡çš„å›¾ç‰‡ã€‚æ ¹æ®ç»éªŒï¼Œæˆ‘æ›´æŽ¨èç¬¬äºŒç§æ–¹æ³•ï¼Œå› ä¸ºå°åˆ†è¾¨çŽ‡åœ¨ç”Ÿæˆé«˜åˆ†è¾¨çŽ‡å›¾ç‰‡çš„æ—¶å€™ï¼Œä¼šå‡ºçŽ°åƒç´ ä¸¢å¤±ï¼Œæˆ‘ä¸çŸ¥é“æ˜¯ä¸æ˜¯æœ‰æ–¹æ³•å¯ä»¥é˜»æ­¢è¿™ç§æƒ…å†µå‘ç”Ÿã€‚è€Œåˆ†è¾¨çŽ‡å¯ä»¥ä»¥1280*720æˆ–è€…æ˜¯1960*1080ä½œä¸ºä¸»è¦åˆ†è¾¨çŽ‡è¿›è¡Œè®¾è®¡ã€‚è¿™é‡Œæœ‰ä¸€ç¯‡å…³äºŽUIè®¾è®¡çš„è§„èŒƒè¯´æ˜Ž,UIè®¾è®¡æ—¶å¯ä»¥å‚è€ƒã€‚ ImageViewçš„ScaleTypeå±žæ€§è®¾ç½®ä¸åŒçš„ScaleTypeä¼šå¾—åˆ°ä¸åŒçš„æ˜¾ç¤ºæ•ˆæžœï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œè®¾ç½®ä¸ºcenterCropèƒ½èŽ·å¾—è¾ƒå¥½çš„é€‚é…æ•ˆæžœã€‚ åŠ¨æ€è®¾ç½®æœ‰ä¸€äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éœ€è¦åŠ¨æ€çš„è®¾ç½®æŽ§ä»¶å¤§å°æˆ–è€…æ˜¯ä½ç½®ï¼Œæ¯”å¦‚è¯´popwindowçš„æ˜¾ç¤ºä½ç½®å’Œåç§»é‡ç­‰ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬å¯ä»¥åŠ¨æ€çš„èŽ·å–å½“å‰çš„å±å¹•å±žæ€§ï¼Œç„¶åŽè®¾ç½®åˆé€‚çš„æ•°å€¼ã€‚1234567891011public class ScreenSizeUtil &#123;public static int getScreenWidth(Activity activity) &#123;return activity.getWindowManager().getDefaultDisplay().getWidth();&#125;public static int getScreenHeight(Activity activity) &#123;return activity.getWindowManager().getDefaultDisplay().getHeight();&#125;&#125; å‚è€ƒèµ„æ–™Androidå±å¹•é€‚é…å…¨æ”»ç•¥(æœ€æƒå¨çš„å®˜æ–¹é€‚é…æŒ‡å¯¼)]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>å±å¹•é€‚é…</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidè½¯é”®ç›˜]]></title>
    <url>%2F2017%2F07%2F01%2FAndroid%E8%BD%AF%E9%94%AE%E7%9B%98%2F</url>
    <content type="text"><![CDATA[è¯´èµ·Androidè½¯é”®ç›˜ï¼Œè¿™é‡Œé‡åˆ°çš„å‘å¤šæ•°å°±æ˜¯å¯¹å®ƒç†è§£ä¸å¤Ÿå…¨é¢å¯¼è‡´çš„ï¼Œæ‰€ä»¥å†³å®šå¥½å¥½æ€»ç»“ä¸€ä¸‹å®ƒã€‚åœ¨é¿å…è‡ªå·±äºŒæ¬¡æŽ‰å‘çš„åŒæ—¶ï¼Œå¦‚æžœèƒ½å¸®åŠ©åˆ°åœ¨è¿™ä¸ªçŸ¥è¯†åŒºæ­£ç–‘æƒ‘çš„ä½ ï¼Œé‚£å°±å¤ªå¥½äº†ã€‚æœ¬ç¯‡çš„è®²è§£å°†åˆ†ä»¥ä¸‹å‡ ä¸ªä¸»é¢˜ï¼š1ã€æ“ä½œè½¯é”®ç›˜2ã€ç›‘å¬é”®ç›˜çš„å¼¹èµ·ä¸Žéšè—3ã€å¦‚ä½•é¿å…é”®ç›˜é®æŒ¡è¾“å…¥æ¡† æ“ä½œè½¯é”®ç›˜æƒ³è¦æ“ä½œè½¯é”®ç›˜ï¼Œéœ€è¦ä½¿ç”¨åˆ° InputMethodManager ï¼Œå®ƒæ˜¯ä¸€ä¸ªç³»ç»ŸæœåŠ¡ï¼Œå¯ä»¥ä½¿ç”¨ Context.getSystemService() èŽ·å–åˆ°å®ƒã€‚ æ˜¾ç¤ºè½¯é”®ç›˜åœ¨ InputMethodManagerä¸­ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ³•showSoftInput()å’ŒshowSoftInputFromInputMethod()ï¼Œè€Œå®žé™…ä¸Šï¼Œåªæœ‰showSoftInput()æ˜¯æœ‰æ•ˆçš„ã€‚è¿™é‡Œæˆ‘ä»¬åªéœ€è¦ä¼ é€’ä¸¤ä¸ªå‚æ•°ã€‚å®ƒé¦–å…ˆéœ€è¦ä¸€ä¸ªView ï¼Œä½¿ç”¨è½¯é”®ç›˜å°±æ˜¯ä¸ºäº†è¾“å…¥ï¼Œè€Œè¾“å…¥å°±éœ€è¦æœ‰æŽ¥æ”¶è¾“å…¥å†…å®¹çš„View ï¼Œè¿™é‡ŒæŽ¥æ”¶è¾“å…¥çš„View ï¼Œæœ€å¥½æ˜¯ä¸€ä¸ªEditTextï¼ˆä½†è¿™ä¸æ˜¯å¿…é¡»çš„ï¼‰ã€‚è€Œç¬¬äºŒä¸ªå‚æ•°flagså°±æ˜¯ä¸ªæ ‡å¿—ä½ï¼Œä»Žä¸Šé¢æˆªå›¾çš„æ–¹æ³•ç­¾åä¸Šçš„æ–‡æ¡£ä¸Šå¯ä»¥çœ‹åˆ°ï¼Œå®ƒæŽ¥æ”¶0æˆ–è€…SHOW_INPYT_IMPLICIT ä¸¤ä¸ªå‚æ•°ï¼Œä½†æ˜¯å®žé™…ä¸Šï¼Œå®ƒæœ‰ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œå¦å¤–ä¸€ä¸ªæ˜¯SHOW_FORCEDã€‚ä¸€èˆ¬æ²¡æœ‰ç‰¹åˆ«éœ€è¦çš„è¯ï¼Œæˆ‘ä»¬ç›´æŽ¥ä¼ é€’0å°±å¥½äº†(å®žé™…ä¸ŠSHOW_INPYT_IMPLICITã€SHOW_FORCEDå¹¶ä¸å½±å“æ˜¾ç¤ºï¼Œåªæ˜¯åœ¨éšè—çš„æ—¶å€™ï¼Œä¼šæœ‰ä¸€äº›é™åˆ¶ã€‚è€Œä¸”æˆ‘ä»¬ä¸€èˆ¬çš„è¯ï¼Œä¸ç®¡æ˜¾ç¤ºæˆ–è€…éšè—éƒ½å°†flagè®¾ç½®ä¸º0ï¼Œç‰¹æ®Šæƒ…å†µé‡åˆ°å†åšåˆ†æž)ã€‚çŽ°åœ¨ï¼Œç®€å•æ€»ç»“ä¸€ä¸‹è°ƒç”¨showSoftInput()ä¼šç”Ÿæ•ˆçš„å…³é”®ç‚¹ï¼š1ã€ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œæœ€å¥½æ˜¯EditTextæˆ–è€…å®ƒçš„å­ç±»ã€‚è€ƒè™‘åˆ°è½¯é”®ç›˜å°±æ˜¯ä¸ºäº†è¾“å…¥ï¼ŒEditTextå°±æ˜¯ä¸€ä¸ªæŽ¥æ”¶è¾“å…¥çš„æŽ§ä»¶ã€‚è€Œè¿™ä¸æ˜¯ç»å¯¹çš„ï¼Œå¦‚æžœä¸æ˜¯ä¸€ä¸ªEditText ï¼Œå°±å¿…é¡»è¦æ±‚è¿™ä¸ªViewæœ‰ä¸¤ä¸ªå±žæ€§ï¼Œåˆ†åˆ«æ˜¯ï¼šandroid:focusable=â€trueâ€ å’Œandroid:focusableInTouchMode=â€trueâ€ã€‚2ã€ç¬¬ä¸€ä¸ªå‚æ•°ï¼Œå¿…é¡»æ˜¯å¯èŽ·å–ç„¦ç‚¹çš„ï¼Œå¹¶ä¸”å½“å‰å·²ç»èŽ·å–åˆ°ç„¦ç‚¹ã€‚EditTexté»˜è®¤æ˜¯å…è®¸èŽ·å–ç„¦ç‚¹çš„ï¼Œä½†æ˜¯å‡å¦‚å¸ƒå±€ä¸­ï¼Œå­˜åœ¨å¤šä¸ªå¯èŽ·å–ç„¦ç‚¹çš„æŽ§ä»¶ï¼Œå°±éœ€è¦æå‰è®©æˆ‘ä»¬ä¼ é€’è¿›åŽ»çš„ViewèŽ·å–åˆ°ç„¦ç‚¹ã€‚èŽ·å–ç„¦ç‚¹å¯ä»¥ä½¿ç”¨requestFocus()æ–¹æ³•ã€‚3ã€å¸ƒå±€å¿…é¡»åŠ è½½å®Œæˆã€‚åœ¨onCreate()ä¸­ï¼Œå¦‚æžœç«‹å³è°ƒç”¨showSoftInput()æ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚æƒ³è¦åœ¨é¡µé¢ä¸€å¯åŠ¨çš„æ—¶å€™å°±å¼¹å‡ºé”®ç›˜ï¼Œå¯ä»¥åœ¨Activityä¸Šï¼Œè®¾ç½® android:windowSoftInputModeå±žæ€§æ¥å®Œæˆï¼Œæˆ–è€…åšä¸€ä¸ªå»¶è¿ŸåŠ è½½ï¼ŒView.postDelayed()ä¹Ÿæ˜¯ä¸€ä¸ªè§£å†³æ–¹æ¡ˆã€‚æ‰€ä»¥æœ€ç»ˆï¼Œå®Œæ•´çš„æ˜¾ç¤ºè½¯é”®ç›˜çš„ä»£ç å°±å¦‚ä¸‹æ‰€ç¤ºäº†ã€‚ éšè—è½¯é”®ç›˜è™½ç„¶showSoftInput()æ–¹æ³•æ˜¯æœ‰æ•ˆçš„ï¼Œä½†æ˜¯æƒ³è¦éšè—è½¯é”®ç›˜ï¼Œå°±æ²¡æœ‰æä¾›å¯¹åº”çš„hideSoftInput()æ–¹æ³•ï¼Œä½†æ˜¯å´æœ‰ä¸€ä¸ªhideSoftInputFromWindow()æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥éšè—è½¯é”®ç›˜ã€‚å…ˆæ¥çœ‹çœ‹è¿™ä¸ªæ–¹æ³•çš„ç­¾åï¼Œå®ƒåŒæ ·æœ‰ä¸¤ä¸ªæ–¹æ³•å¯ä»¥è°ƒç”¨ã€‚å®ƒæŽ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªIBinder ï¼Œå¯ä»¥ç›´æŽ¥ä¼ é€’ä¸€ä¸ª View.getWindowToken()çš„windowTokenå¯¹è±¡å°±å¯ä»¥äº†ã€‚è€Œç¬¬äºŒä¸ªå‚æ•°ï¼Œå°±æ˜¯éšè—è½¯é”®ç›˜çš„æ ‡å¿—ä½ï¼Œå¦‚æžœæ²¡æœ‰ç‰¹æ®Šè¦æ±‚çš„è¯ï¼Œç›´æŽ¥ä¼ é€’0å°±å¥½äº†ã€‚ æ³¨æ„ï¼šè¿™é‡Œè™½ç„¶åŽŸåˆ™ä¸Šéœ€è¦ä¼ é€’ä¸€ä¸ªä¹‹å‰å¼¹å‡ºé”®ç›˜ä¼ é€’çš„æ—¶å€™ï¼Œä¼ é€’çš„Viewçš„windowTokenï¼Œä½†æ˜¯å®žé™…æƒ…å†µæ˜¯ä½ åªéœ€è¦ä¼ é€’ä¸€ä¸ªå­˜åœ¨äºŽå½“å‰å¸ƒå±€ViewTreeä¸­ï¼Œéšæ„ä¸€ä¸ªViewçš„windowTokenå°±å¯ä»¥äº†ã€‚ æœ€ç»ˆéšè—è½¯ä»¶çš„ä»£ç å°±æ˜¯è¿™æ ·çš„ã€‚ åˆ‡æ¢é”®ç›˜çš„å¼¹å‡ºå’Œéšè—åœ¨InputMethodManagerä¸­ï¼Œè¿˜æä¾›äº†ä¸€ä¸ªtoggleSoftInput()æ–¹æ³•ï¼Œå¦‚åŒå®ƒçš„åå­—ä¸€æ ·ï¼Œå®ƒå¯ä»¥è®©è½¯é”®ç›˜åœ¨æ˜¾ç¤ºå’Œéšè—ä¹‹é—´åˆ‡æ¢ã€‚è¯¥æ–¹æ³•ï¼ŒæŽ¥æ”¶ä¸¤ä¸ªflags ï¼Œåˆ†åˆ«æ˜¯æŽ§åˆ¶showå’Œhideæ—¶å€™çš„æ ‡è¯†ï¼Œå®ƒä»¬çš„å«ä¹‰å’Œå‰é¢ä»‹ç»çš„showSoftInput()å’ŒhideSoftInputFromWindow()ä¸€è‡´ï¼Œæ‰€ä»¥æ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œç›´æŽ¥ä¼ é€’0å°±å¥½äº†ã€‚toggleSoftInput()æ–¹æ³•ä¸è¦æ±‚ä¼ é€’ä¸€ä¸ªViewæˆ–è€…windowTokenï¼Œæ‰€ä»¥å®ƒå¹¶æ²¡æœ‰showSoftInput()ä¸­çš„ä¸€äº›é™åˆ¶ï¼Œä½†æ˜¯ä¾ç„¶è¿˜æœ‰éœ€è¦åœ¨å¸ƒå±€ç»˜åˆ¶å®Œæˆä¹‹åŽè°ƒç”¨æ‰ä¼šæœ‰æ•ˆæžœã€‚è™½ç„¶è¿™ä¸ªæ–¹æ³•ï¼Œé™åˆ¶å¾ˆå°‘ï¼Œä½†æ˜¯æˆ‘ä»¬åŸºæœ¬ä¸Šä¸ä¼šä½¿ç”¨å®ƒã€‚ä¸»è¦åŽŸå› åœ¨äºŽï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€å…³çš„æ–¹æ³•ï¼Œä¼šæ ¹æ®å½“å‰çš„çŠ¶æ€åšç›¸åçš„æ“ä½œã€‚è¿™å°±å¯¼è‡´å¾ˆå¤šæ—¶å€™ï¼Œæˆ‘ä»¬åœ¨ä»£ç ä¸­ï¼Œæ— æ³•ç›´æŽ¥æ ¹æ®InputMethodManageræä¾›çš„æ–¹æ³•åˆ¤æ–­å½“å‰è½¯é”®ç›˜çš„æ˜¾ç¤ºçŠ¶æ€ï¼Œè¿™æ ·ä¹Ÿå°±æ— æ³•ç¡®å®šè°ƒç”¨å®ƒçš„æ—¶å€™çš„æ•ˆæžœäº†ã€‚ ç›‘å¬é”®ç›˜çš„å¼¹èµ·ä¸Žéšè—å¦‚æžœæƒ³è¦ç›‘å¬é”®ç›˜çš„å¼¹å‡ºå’Œæ”¶èµ·ï¼Œå¯ä»¥ä½¿ç”¨ViewTreeObserver.OnGlobalLayoutListenerè¿™ä¸ªç›‘å¬ï¼Œæ¥ç›‘å¬å¸ƒå±€çš„è°ƒæ•´ï¼Œä»Žè€Œåˆ¤æ–­å‡ºé”®ç›˜çš„å¼¹å‡ºå’Œéšè—ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªä½¿ç”¨ViewTreeObserver.OnGlobalLayoutListeneråŽèŽ·å–å±å¹•ä¸­å„ä¸ªç±»åž‹é«˜åº¦çš„ä¾‹å­ï¼Œè¯·æ³¨æ„ä»£ç ä¸­çš„æ³¨é‡Šï¼š123456789101112getWindow().getDecorView().getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() &#123;@Overridepublic void onGlobalLayout() &#123;Log.d(&quot;sss_main&quot;, &quot;root.getHeight(): &quot; + root.getHeight());//å½“å‰æ‰€å¼•ç”¨è§†å›¾çš„é«˜åº¦Log.d(&quot;sss_main&quot;, &quot;root.getRootView().getHeight(): &quot; + root.getRootView().getHeight());//å±å¹•é«˜åº¦Log.d(&quot;sss_main&quot;, &quot;getWindow().getDecorView(): &quot; + getWindow().getDecorView().getHeight());//å±å¹•é«˜åº¦Rect r = new Rect();getWindow().getDecorView().getWindowVisibleDisplayFrame(r);Log.d(&quot;sss_main&quot;, &quot;r.top: &quot; + r.top);//çŠ¶æ€æ é«˜åº¦Log.d(&quot;sss_main&quot;, &quot;r.bottom-r.top: &quot; + (r.bottom - r.top));//ç”¨æˆ·ç•Œé¢çš„å¯è§†é«˜åº¦ï¼ˆé™¤åŽ»çŠ¶æ€æ å’Œåº•éƒ¨å¯¼èˆªï¼‰&#125;&#125;); ä»£ç ä¸­r.bottom - r.topä»£è¡¨äº†é™¤åŽ»çŠ¶æ€æ ã€åº•éƒ¨å¯¼èˆªæ åŽï¼Œæ‰‹æœºå±å¹•å‰©ä½™å¯è§†é«˜åº¦ã€‚æ³¨æ„ï¼Œè¿™ä¸ªå‰©ä½™å¯è§†é«˜åº¦ä¹Ÿä¸åŒ…æ‹¬è¾“å…¥æ³•å¼¹çª—çš„é«˜åº¦ï¼ˆå¦‚æžœå±å¹•ä¸­æœ‰è¾“å…¥æ³•å¼¹çª—çš„è¯ï¼‰ã€‚æœ‰äº†ä»¥ä¸Šçš„åŸºç¡€ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡getWindow().getDecorView().getHeight()-r.bottom&gt;100?é”®ç›˜å¼¹å‡ºï¼šé”®ç›˜éšè—æ¥åˆ¤æ–­é”®ç›˜æ˜¯å¦éšè—äº†ã€‚ æ³¨æ„ï¼šä¸ºä»€ä¹ˆè¦å¤§äºŽ100å‘¢ï¼Ÿå› ä¸ºå¦‚æžœæ‰‹æœºå…·å¤‡åº•éƒ¨å¯¼èˆªåŒºåŸŸçš„è¯ï¼Œè¦æŽ’é™¤è¿™ä¸ªå€¼çš„å¹²æ‰°ã€‚å½“ç„¶äº†ï¼Œç›´æŽ¥é»˜è®¤åº•éƒ¨å¯¼èˆªåŒºåŸŸé«˜åº¦ä¸º100è‚¯å®šæ˜¯ä¸ç²¾ç¡®çš„ï¼Œå®žé™…åº”ç”¨ä¸­æˆ‘ä»¬åº”è¯¥èŽ·å–åˆ°çœŸå®žçš„åº•éƒ¨å¯¼èˆªåŒºåŸŸé«˜åº¦ï¼Œå…·ä½“å¦‚ä½•èŽ·å–åº•éƒ¨å¯¼èˆªåŒºåŸŸé«˜åº¦å¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚ å¦‚ä½•é¿å…é”®ç›˜é®æŒ¡è¾“å…¥æ¡†åœ¨å¼€å‘ä¸­ï¼Œç»å¸¸ä¼šé‡åˆ°é”®ç›˜æŒ¡ä½è¾“å…¥æ¡†çš„æƒ…å†µï¼Œæ¯”å¦‚ç™»å½•ç•Œé¢æˆ–æ³¨å†Œç•Œé¢ï¼Œå¼¹å‡ºçš„è½¯é”®ç›˜æŠŠç™»å½•æˆ–æ³¨å†ŒæŒ‰é’®æŒ¡ä½äº†ï¼Œç”¨æˆ·å¿…é¡»æŠŠè½¯é”®ç›˜æ”¶èµ·ï¼Œæ‰èƒ½ç‚¹å‡»ç›¸åº”æŒ‰é’®ï¼Œè¿™æ ·çš„ç”¨æˆ·ä½“éªŒéžå¸¸ä¸å¥½ã€‚ä¸‹é¢å¯¹å‡ ç§åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„é¿å…é”®ç›˜é®æŒ¡è¾“å…¥æ¡†çš„æ–¹æ³•è¿›è¡Œæ€»ç»“ã€‚ æ–¹æ³•ä¸€ï¼šwindowSoftInputMode:adjustResizeå’ŒadjustPanä¸»è¦å®žçŽ°æ–¹æ³•ï¼šåœ¨ AndroidManifest.xml å¯¹åº”çš„Activityé‡Œæ·»åŠ  android:windowSoftInputMode=â€adjustPanâ€ æˆ–æ˜¯ android:windowSoftInputMode=â€adjustResizeâ€å±žæ€§è¿™ä¸¤ç§å±žæ€§çš„åŒºåˆ«ï¼Œå®˜æ–¹çš„è§£é‡Šæ˜¯ï¼šè¿™ä¸¤ä¸ªå±žæ€§ä½œç”¨éƒ½æ˜¯ä¸ºäº†è°ƒæ•´ç•Œé¢ä½¿é”®ç›˜ä¸æŒ¡ä½è¾“å…¥æ¡†,è¿™é‡Œå¯¹è¿™ä¸¤ç§å±žæ€§ä½¿ç”¨åœºæ™¯ã€ä¼˜ç¼ºç‚¹ã€æ³¨æ„äº‹é¡¹è¿›è¡Œäº†å…¨æ–¹é¢æ€»ç»“ã€‚å¯¹äºŽfitsystemwindowsè¿˜æ¯”è¾ƒæ‡µé€¼çš„ä½ ï¼Œå¯ä»¥å‚è€ƒè¿™ç¯‡æ–‡ç« ã€‚æœ€åŽé™„ä¸€å¼ å®˜æ–¹çš„æˆªå›¾ã€‚ æ’æ’­çŸ¥è¯†ï¼šè¿™é‡Œå†æä¸€ä¸‹clipToPaddingå’ŒclipChildrenè¿™ä¸¤ä¸ªå±žæ€§å§ï¼Œè™½ç„¶å’Œæœ¬ç¯‡æ²¡æœ‰å…³ç³»ä½†æ˜¯åŒæ ·æ˜¯æœ‰ä¸€å®šæ¦‚çŽ‡å‡ºçŽ°çš„ï¼Œæ‰€ä»¥è¦è®²ä¸€ä¸‹ã€‚clipToPaddingå°±æ˜¯è¯´æŽ§ä»¶çš„ç»˜åˆ¶åŒºåŸŸæ˜¯å¦åœ¨paddingé‡Œé¢çš„ï¼Œtrueçš„æƒ…å†µä¸‹å¦‚æžœä½ è®¾ç½®äº†paddingé‚£ä¹ˆç»˜åˆ¶çš„åŒºåŸŸå°±å¾€é‡Œç¼©ï¼ŒclipToPaddingä¸»è¦åº”ç”¨åœ¨listviewå¤´éƒ¨å’Œå°¾éƒ¨è®¾ç½®paddingåŽå¸Œæœ›å¯ä»¥åœ¨æ»‘åŠ¨itemæ—¶èƒ½æ»‘åŠ¨åˆ°paddingåŒºåŸŸã€‚clipChildrenè¡¨ç¤ºæ˜¯å¦é™åˆ¶å­Viewåœ¨æ‰€å±žçˆ¶Viewçš„èŒƒå›´å†…ï¼Œæˆ‘ä»¬å°†å…¶å€¼è®¾ç½®ä¸ºfalseåŽé‚£ä¹ˆå½“å­æŽ§ä»¶çš„é«˜åº¦é«˜äºŽçˆ¶æŽ§ä»¶æ—¶ä¹Ÿä¼šå®Œå…¨æ˜¾ç¤º,è€Œä¸ä¼šè¢«åŽ‹ç¼©ã€‚æ³¨æ„clipChildrenä¸€å®šæ˜¯åœ¨å¸ƒå±€æ–‡ä»¶çš„æ ¹èŠ‚ç‚¹è®¾ç½®ï¼Œå¦åˆ™ä¸èµ·ä½œç”¨,å…·ä½“çš„ä½¿ç”¨è¯·çœ‹è¿™ç¯‡æ–‡ç« ä»¥åŠè¿™ç¯‡æ–‡ç« ã€‚æ³¨æ„ï¼šæœ‰æ—¶å€™clipChildrenä¼šä¸èµ·ä½œç”¨ï¼Œå¦‚æžœç¡®å®šè€ƒè™‘åˆ°äº†ä¹‹å‰ä¸¤ç¯‡æ–‡ç« æ‰€æåŠçš„å†…å®¹ï¼Œåˆ™åº”è¯¥æƒ³å…¶å®ƒçš„åŠžæ³•æ›¿ä»£clipChildrenï¼Œè¿™å¯ä»¥è®¤ä¸ºæ˜¯clipChildrençš„BUGã€‚ æ–¹æ³•äºŒï¼šå½“é”®ç›˜å¼¹èµ·æ—¶ï¼Œè®©ç•Œé¢æ•´ä½“ä¸Šç§»ï¼›é”®ç›˜æ”¶èµ·ï¼Œè®©ç•Œé¢æ•´ä½“ä¸‹ç§»ä½¿ç”¨åœºæ™¯ï¼šé’ˆå¯¹ç•Œé¢å…¨å±æ¨¡å¼ï¼Œè¾“å…¥æ¡†ä¸ä¼šè¢«é”®ç›˜é®æŒ¡ã€‚ä¸»è¦ç”¨äºŽä¸€äº›ç™»å½•ç•Œé¢ï¼Œæˆ–æ˜¯éœ€è¦æŠŠç•Œé¢æ•´ä½“éƒ½é¡¶ä¸ŠåŽ»çš„åœºæ™¯ã€‚ 1ï½¤ä¸»è¦å®žçŽ°æ­¥éª¤(1). èŽ·å–Activityå¸ƒå±€xmlçš„æœ€å¤–å±‚æŽ§ä»¶ï¼Œå¦‚xmlæ–‡ä»¶å¦‚ä¸‹ï¼š123456789101112131415161718192021222324252627282930&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;xmlns:tools=&quot;http://schemas.android.com/tools&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;match_parent&quot;android:id=&quot;@+id/main&quot;tools:context=&quot;com.example.liubin1.softkeyboardhelper.MainActivity&quot;&gt;&lt;EditTextandroid:id=&quot;@+id/name&quot;android:hint=&quot;è¯·è¾“å…¥ç”¨æˆ·åï¼š&quot;android:layout_centerInParent=&quot;true&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;50dp&quot;/&gt;&lt;EditTextandroid:id=&quot;@+id/pas&quot;android:layout_below=&quot;@id/name&quot;android:hint=&quot;è¯·è¾“å…¥å¯†ç ï¼š&quot;android:layout_centerInParent=&quot;true&quot;android:layout_width=&quot;match_parent&quot;android:layout_height=&quot;50dp&quot;/&gt;&lt;Buttonandroid:id=&quot;@+id/login_btn&quot;android:layout_below=&quot;@id/rpas&quot;android:layout_centerHorizontal=&quot;true&quot;android:text=&quot;ç™»å½•&quot;android:layout_width=&quot;180dp&quot;android:layout_height=&quot;50dp&quot; /&gt;&lt;/RelativeLayout&gt; å…ˆèŽ·å–åˆ°æœ€å¤–å±‚æŽ§ä»¶:RelativeLayout main = (RelativeLayout) findViewById(R.id.main);(2). èŽ·å–åˆ°æœ€åŽä¸€ä¸ªæŽ§ä»¶ï¼Œå¦‚ä¸Šé¢çš„xmlæ–‡ä»¶ï¼Œæœ€åŽä¸€ä¸ªæŽ§ä»¶æ˜¯Button:Button login_btn = (Button) findViewById(R.id.login_btn);(3). ç»™æœ€å¤–å±‚æŽ§ä»¶å’Œæœ€åŽä¸€ä¸ªæŽ§ä»¶æ·»åŠ ç›‘å¬äº‹ä»¶:123456789101112131415161718192021222324252627282930313233//åœ¨Activityçš„onCreateé‡Œæ·»åŠ å¦‚ä¸‹æ–¹æ³•addLayoutListener(main,login_btn);/** * addLayoutListeneræ–¹æ³•å¦‚ä¸‹* @param main æ ¹å¸ƒå±€* @param scroll éœ€è¦æ˜¾ç¤ºçš„æœ€ä¸‹æ–¹View*/public void addLayoutListener(final View main, final View scroll) &#123;main.getViewTreeObserver().addOnGlobalLayoutListener(new ViewTreeObserver.OnGlobalLayoutListener() &#123;@Overridepublic void onGlobalLayout() &#123;Rect rect = new Rect();//1ã€èŽ·å–mainåœ¨çª—ä½“çš„å¯è§†åŒºåŸŸmain.getWindowVisibleDisplayFrame(rect);//2ã€èŽ·å–mainåœ¨çª—ä½“çš„ä¸å¯è§†åŒºåŸŸé«˜åº¦ï¼Œåœ¨é”®ç›˜æ²¡æœ‰å¼¹èµ·æ—¶ï¼Œmain.getRootView().getHeight()è°ƒèŠ‚åº¦åº”è¯¥å’Œrect.bottomé«˜åº¦ä¸€æ ·int mainInvisibleHeight = main.getRootView().getHeight() - rect.bottom;int screenHeight = main.getRootView().getHeight();//å±å¹•é«˜åº¦//3ã€ä¸å¯è§åŒºåŸŸå¤§äºŽå±å¹•æœ¬èº«é«˜åº¦çš„1/4ï¼šè¯´æ˜Žé”®ç›˜å¼¹èµ·äº†if (mainInvisibleHeight &gt; screenHeight / 4) &#123;int[] location = new int[2];scroll.getLocationInWindow(location);// 4ï½¤èŽ·å–Scrollçš„çª—ä½“åæ ‡ï¼Œç®—å‡ºmainéœ€è¦æ»šåŠ¨çš„é«˜åº¦int srollHeight = (location[1] + scroll.getHeight()) - rect.bottom;//5ï½¤è®©ç•Œé¢æ•´ä½“ä¸Šç§»é”®ç›˜çš„é«˜åº¦main.scrollTo(0, srollHeight);&#125; else &#123;//3ã€ä¸å¯è§åŒºåŸŸå°äºŽå±å¹•é«˜åº¦1/4æ—¶,è¯´æ˜Žé”®ç›˜éšè—äº†ï¼ŒæŠŠç•Œé¢ä¸‹ç§»ï¼Œç§»å›žåˆ°åŽŸæœ‰é«˜åº¦main.scrollTo(0, 0);&#125;&#125;&#125;);&#125;&#125; 2ï½¤å®žçŽ°åŽŸç†æ­¤æ–¹æ³•é€šè¿‡ç›‘å¬ Activity æœ€å¤–å±‚å¸ƒå±€æŽ§ä»¶æ¥æ£€æµ‹è½¯é”®ç›˜æ˜¯å¦å¼¹å‡ºï¼Œç„¶åŽåŽ»æ‰‹åŠ¨è°ƒç”¨æŽ§ä»¶çš„scrollToæ–¹æ³•è¾¾åˆ°è°ƒæ•´å¸ƒå±€ç›®çš„ã€‚ å‚è€ƒèµ„æ–™1.Androidè½¯é”®ç›˜çš„æ˜¾ç¤ºä¸Žéšè—2.Androidå„ç§é”®ç›˜æŒ¡ä½è¾“å…¥æ¡†è§£å†³åŠžæ³•3.APIæŒ‡å—4.stackoverflow:ç›‘å¬è½¯ä»¶çš„å¼¹å‡ºä¸Žéšè—]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>è½¯é”®ç›˜</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidä¸­é€€å‡ºAPPçš„è§£å†³æ–¹æ¡ˆ]]></title>
    <url>%2F2017%2F06%2F20%2FAndroid%E4%B8%AD%E9%80%80%E5%87%BAAPP%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%2F</url>
    <content type="text"><![CDATA[å¯¹äºŽå•ä¸€Activityçš„åº”ç”¨æ¥è¯´ï¼Œé€€å‡ºå¾ˆç®€å•ï¼Œç›´æŽ¥è°ƒç”¨finishï¼ˆï¼‰æ–¹æ³•å³å¯ã€‚ä½†æ˜¯å¯¹äºŽå¤šä¸ªactivityçš„åº”ç”¨æ¥è¯´ï¼Œå½“æ‰“å¼€å¤šä¸ªactivityåŽï¼Œæƒ³å†æœ€åŽä¸€ä¸ªactivityä¸­ç›´æŽ¥é€€å‡ºappï¼Œè¿™å°±éœ€è¦æ¯ä¸ªactivityéƒ½å…³æŽ‰ï¼Œç„¶åŽé€€å‡ºã€‚ä¸‹é¢ä»‹ç»å››ç§å®‰å…¨é€€å‡ºå·²è°ƒç”¨å¤šä¸ªactivityçš„applicationçš„æ–¹æ³•ã€‚ æŠ›å‡ºå¼‚å¸¸é€€å‡ºè¯¥æ–¹æ³•é€šè¿‡æŠ›å‡ºå¼‚å¸¸ï¼Œä½¿ç¨‹åºå¼ºåˆ¶å…³é—­ã€‚ä½†æ˜¯ï¼Œè¿™ç§æ–¹æ³•ä¼šè®©ç¨‹åºå¼¹å‡ºForce closeçš„å¼¹çª—ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå·®ã€‚ è®°å½•æ‰“å¼€çš„activityå¹¶é€ä¸€å…³é—­è¿™ç§æ–¹æ³•çš„æ“ä½œéœ€è¦æŠ½å–åˆ°Activityçš„çˆ¶ç±»ä¸­è¿›è¡Œï¼Œåœ¨çˆ¶ç±»çš„onCreate()ä¸­å°†æ¯ä¸ªæ‰“å¼€çš„ActivityåŠ è½½åˆ°ä¸€ä¸ªactivityçš„é›†åˆä¸­ã€‚å½“é€€å‡ºæ—¶ï¼Œéœ€è¦åœ¨çˆ¶ç±»å®šä¹‰ä¸€ä¸ªkillAll()æ–¹æ³•ï¼Œåœ¨è¯¥æ–¹æ³•å¤åˆ¶ä¸€ä¸ªActivityçš„é›†åˆï¼Œç„¶åŽéåŽ†å¤åˆ¶åŽçš„é›†åˆå…³é—­æ‰€æœ‰æ‰“å¼€çš„Activityã€‚ å‘é€ç‰¹å®šå¹¿æ’­å®žçŽ°å®‰å…¨é€€å‡ºï¼ˆæŽ¨èï¼‰åœ¨éœ€è¦ç»“æŸåº”ç”¨æ—¶ï¼Œå‘é€ä¸€ä¸ªç‰¹å®šå¹¿æ’­ï¼Œæ¯ä¸ªActivityæ”¶åˆ°å¹¿æ’­åŽï¼Œå…³é—­å³å¯ã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­ï¼Œæ³¨å†Œå¹¿æ’­æŽ¥å—è€…çš„é€»è¾‘å¯ä»¥æŠ½å–åˆ°çˆ¶ç±»ä¸­å®žçŽ°ï¼Œéœ€è¦å®‰å…¨é€€å‡ºæ—¶ï¼Œå‘é€çš„actionä¸ºæ³¨å†Œæ—¶æŒ‡å®šçš„actionå³å¯ï¼Œæ‰€æœ‰å¼€å¯çš„activityéƒ½æ³¨å†Œæœ‰èƒ½å¤Ÿå“åº”æ”¹actionçš„å¹¿æ’­æŽ¥å—è€…ï¼Œå¹¿æ’­æŽ¥å—è€…æŽ¥å—åˆ°æ­¤ç±»å¹¿æ’­åŽï¼Œå°†ç›´æŽ¥è°ƒç”¨finishï¼ˆï¼‰æ–¹æ³•ï¼Œå…³é—­å½“å‰Activityã€‚ é€’å½’é€€å‡ºæ¯ä¸ªActivityå½“éœ€è¦æ‰“å¼€æ–°çš„activityæ—¶ï¼Œä½¿ç”¨startActivityForResult()æ–¹æ³•æ‰“å¼€Activity,éœ€è¦é€€å‡ºæ•´ä¸ªåº”ç”¨æ—¶ï¼Œè‡ªå®šä¹‰ä¸€ä¸ªæ ‡å¿—é€€å‡ºçš„Flagï¼Œåœ¨å„ä¸ªactivityçš„onActivityResultæ–¹æ³•ä¸­å¤„ç†è¯¥Flayï¼Œæ¥å®žçŽ°é€’å½’å…³é—­ã€‚]]></content>
      <categories>
        <category>å››å¤§ç»„ä»¶</category>
      </categories>
      <tags>
        <tag>é€€å‡ºAPP</tag>
        <tag>å¹¿æ’­</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[GlobalDialogæ¡†æž¶ä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2017%2F06%2F10%2FGlobalDialog%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[GlobalDialogæ˜¯ç”±ITalkåº”ç”¨å¼€æºçš„ä¸€æ¬¾å…¨å±€å¯¹è¯æ¡†åº“ã€‚ç›¸æ¯”äºŽAndroidåŽŸç”Ÿå¯¹è¯æ¡†çš„ç¹çé…ç½®ï¼ŒGlobalDialogçš„ä¼˜åŠ¿åœ¨äºŽèƒ½å¤Ÿå¿«é€Ÿå®žçŽ°å…¨å±€å¯¹è¯æ¡†çš„åŠŸèƒ½ï¼ˆé€šçŸ¥è´¦å·ä¸‹çº¿ã€é€šçŸ¥è´¦å·å¼‚å¸¸ç­‰ï¼‰ã€‚è¿›ä¸€æ­¥äº†è§£ï¼Œè¯·è®¿é—®ç¬”è€…çš„Githubã€‚ #é›†æˆæ–¹æ³•åœ¨Moduleçš„build.gradleæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯ã€‚1compile &apos;com.txm.topcodes.globaldialog:globaldialog:0.1.6&apos; #è°ƒç”¨æ–¹å¼å¸¸è§„æ–¹å¼ï¼š1234567891011new GlobalDialog.Builder().setContext(context) .setDescription(&quot;hello world&quot;) //å¼¹å‡ºæ¡†çš„æç¤ºä¿¡æ¯ã€‚.setStyle(GlobalDialog.Style.SingleAlert) //å¼¹çª—çš„æ ·å¼ã€‚æœ‰DoubleAlertã€SingleAlertä¸¤ç§ï¼Œé»˜è®¤ä¸ºåŽè€…ã€‚.setForce(ture) //è®¾ç½®å¼¹æ¡†é”€æ¯çš„ç­–ç•¥ã€‚é»˜è®¤ä¸ºtrueã€‚.setDialogClickListener(new OnDialogClickListener() &#123; //è®¾ç½®å›žè°ƒï¼Œä¹Ÿå¯ä»¥ä¸è®¾ç½®ã€‚@Overridepublic void onSure() &#123;super.onSure();&#125;&#125;).build().show(); ç²¾ç®€æ–¹å¼ï¼š1234new GlobalDialog.Builder().setContext(context) .setDescription(&quot;hello world&quot;) .build().show(); #FAQ æˆ‘å‘çŽ°GlobalDialogè¿˜å­˜åœ¨BUGï¼ŸGlobalDialogæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„æ¡†æž¶ï¼Œå¦‚æžœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘çŽ°é—®é¢˜ï¼Œæ¬¢è¿Žåœ¨ç¬”è€…çš„GitHubåˆ›å»ºä¸€ä¸ªIssueã€‚ æˆ‘æ˜¯Eclipseç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨GlobalDialogä¹ˆï¼Ÿä¸å¯ä»¥ã€‚ æˆ‘åœ¨Android studioä¸­é“¾æŽ¥GlobalDialogåº“å¤±è´¥äº†ï¼Ÿç¡®ä¿æ‚¨çš„å·¥ç¨‹ä½¿ç”¨çš„è¿œç¨‹ä»“åº“ä¸ºjcenterã€‚12345allprojects &#123;repositories &#123;jcenter()&#125;&#125;]]></content>
      <categories>
        <category>æˆ‘çš„Androidæ¡†æž¶</category>
      </categories>
      <tags>
        <tag>View</tag>
        <tag>æ¡†æž¶</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Androidå®žçŽ°é˜´å½±æ•ˆæžœçš„ä¸‰ç§æ–¹å¼]]></title>
    <url>%2F2017%2F05%2F20%2FAndroid%E5%AE%9E%E7%8E%B0%E9%98%B4%E5%BD%B1%E6%95%88%E6%9E%9C%E7%9A%84%E4%B8%89%E7%A7%8D%E6%96%B9%E5%BC%8F%2F</url>
    <content type="text"><![CDATA[å®žçŽ°Androidé˜´å½±å…±æœ‰ä¸‰ç§æ–¹å¼ï¼šä½¿ç”¨.9å›¾ï¼ˆç•¥ï¼‰ã€è®¾ç½®è§†å›¾çš„é«˜åº¦ã€åœ¨layer-listèµ„æºæ–‡ä»¶ä¸­æ¨¡æ‹Ÿé˜´å½±æ•ˆæžœï¼Œæœ¬ç¯‡æ–‡ç« å°†å¯¹åŽä¸¤ç§æ–¹å¼åšä»‹ç»ã€‚ è§†å›¾é«˜åº¦ï¼ˆZå€¼ï¼‰å®žçŽ°é˜´å½±Material Designä¸ºUIå…ƒç´ å¼•å…¥äº†é«˜åº¦ï¼ˆZå€¼ï¼‰æ¦‚å¿µï¼Œæ‹¥æœ‰è¾ƒé«˜ Z å€¼çš„è§†å›¾å°†æŠ•å°„æ›´å¤§ä¸”æ›´æŸ”å’Œçš„é˜´å½±ï¼Œå¹¶å°†æŒ¡ä½æ‹¥æœ‰è¾ƒä½ŽZå€¼çš„è§†å›¾ï¼Œä¸è¿‡è§†å›¾çš„Zå€¼å¹¶ä¸å½±å“è§†å›¾çš„å¤§å°ã€‚é˜´å½±çš„æ•ˆæžœæ˜¯ç”±è¢«æå‡è§†å›¾çš„çˆ¶é¡¹æ‰€æä¾›çš„ï¼Œå› æ­¤é˜´å½±è£å‰ªä¹Ÿæ˜¯å—çˆ¶è§†å›¾å½±å“çš„ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æžœçˆ¶è§†å›¾æ²¡æœ‰æä¾›é¢å¤–çš„ç©ºé—´ç»™è¢«æå‡è§†å›¾ï¼Œåˆ™é˜´å½±æ•ˆæžœä¸ä¼šè¢«å±•çŽ°ã€‚ æŒ‡å®šè§†å›¾é«˜åº¦è§†å›¾çš„Zå€¼åŒ…å«ä¸¤ä¸ªç»„ä»¶ï¼š é«˜åº¦ï¼šé™æ€ç»„ä»¶ã€‚ è½¬æ¢ï¼šç”¨äºŽåŠ¨ç”»çš„åŠ¨æ€ç»„ä»¶ã€‚ Z = elevation + translationZå¦‚æžœè¦åœ¨å¸ƒå±€å®šä¹‰ä¸­è®¾ç½®è§†å›¾çš„é«˜åº¦ï¼Œè¯·ä½¿ç”¨ android:elevation å±žæ€§ã€‚å¦‚æžœè¦åœ¨Activityçš„ä»£ç ä¸­è®¾ç½®è§†å›¾é«˜åº¦ï¼Œè¯·ä½¿ç”¨ View.setElevation() æ–¹æ³•ã€‚å¦‚æžœè¦è®¾ç½®è§†å›¾è½¬æ¢ï¼Œè¯·ä½¿ç”¨ View.setTranslationZ() æ–¹æ³•ï¼ŒåŒæ—¶ï¼Œè¯¥æ–¹æ³•å¯ä»¥é€šè¿‡å±žæ€§åŠ¨ç”»ä¸ºè§†å›¾é«˜åº¦æ·»åŠ åŠ¨ç”»ã€‚ è‡ªå®šä¹‰è§†å›¾é˜´å½±è§†å›¾çš„èƒŒæ™¯å°†å†³å®šå…¶é˜´å½±çš„é»˜è®¤å½¢çŠ¶ï¼Œä¸‹é¢ä¸¾ä¸€ä¸ªä¾‹å­ï¼š12345&lt;TextViewandroid:id=&quot;@+id/myview&quot;...android:elevation=&quot;2dp&quot;android:background=&quot;@drawable/myrect&quot; /&gt; èƒŒæ™¯è¢«å®šä¹‰ä¸ºä¸€ä¸ªæ‹¥æœ‰åœ†è§’çš„çŸ©å½¢ï¼š123456&lt;!-- res/drawable/myrect.xml --&gt;&lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;android:shape=&quot;rectangle&quot;&gt;&lt;solid android:color=&quot;#42000000&quot; /&gt;&lt;corners android:radius=&quot;5dp&quot; /&gt;&lt;/shape&gt; è§†å›¾å°†æŠ•å°„ä¸€ä¸ªå¸¦æœ‰åœ†è§’çš„é˜´å½±ï¼Œå› ä¸ºèƒŒæ™¯å°†å®šä¹‰è§†å›¾çš„è½®å»“ã€‚ å¦‚æžœæä¾›ä¸€ä¸ªè‡ªå®šä¹‰è½®å»“ï¼Œåˆ™æ­¤è½®å»“å°†æ›¿æ¢è§†å›¾é˜´å½±çš„é»˜è®¤å½¢çŠ¶ã€‚ layer-listæ¨¡æ‹Ÿé˜´å½±æ•ˆæžœä½¿ç”¨layer-listå¯ä»¥å°†å¤šä¸ªdrawableæŒ‰ç…§é¡ºåºå±‚å åœ¨ä¸€èµ·æ˜¾ç¤ºï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œæ‰€æœ‰çš„itemä¸­çš„drawableéƒ½ä¼šè‡ªåŠ¨æ ¹æ®æ‰€ä¾é™„viewçš„å¤§å°è€Œè¿›è¡Œç¼©æ”¾ï¼Œlayer-listä¸­çš„itemæ˜¯æŒ‰ç…§é¡ºåºä»Žä¸‹å¾€ä¸Šå åŠ çš„ï¼Œå³å…ˆå®šä¹‰çš„itemåœ¨ä¸‹é¢ï¼ŒåŽé¢çš„ä¾æ¬¡å¾€ä¸Šé¢å æ”¾ã€‚ä»¥ä¸‹æ˜¯å¸¦é˜´å½±çš„åœ†è§’çŸ©å½¢ï¼š12345678910111213141516171819&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;&lt;itemandroid:left=&quot;2dp&quot;android:top=&quot;2dp&quot;&gt;&lt;shape&gt;&lt;corners android:radius=&quot;20dp&quot; /&gt;&lt;solid android:color=&quot;#acacac&quot; /&gt;&lt;/shape&gt;&lt;/item&gt;&lt;itemandroid:right=&quot;2dp&quot;android:bottom=&quot;2dp&quot;&gt;&lt;shape&gt;&lt;corners android:radius=&quot;20dp&quot; /&gt;&lt;solid android:color=&quot;#FFFFFF&quot; /&gt;&lt;/shape&gt;&lt;/item&gt;&lt;/layer-list&gt; layer-listå¯ä»¥æ·»åŠ å¤šä¸ªitemå­èŠ‚ç‚¹ï¼Œæ¯ä¸ªitemå­èŠ‚ç‚¹å¯¹åº”ä¸€ä¸ªdrawableèµ„æºï¼ŒæŒ‰ç…§itemä»Žä¸Šåˆ°ä¸‹çš„é¡ºåºå åŠ åœ¨ä¸€èµ·ï¼Œå†é€šè¿‡è®¾ç½®æ¯ä¸ªitemçš„åç§»é‡å°±å¯ä»¥çœ‹åˆ°é˜´å½±ç­‰æ•ˆæžœäº†ã€‚layer-listçš„itemå¯ä»¥é€šè¿‡ä¸‹é¢å››ä¸ªå±žæ€§è®¾ç½®åç§»é‡ï¼šandroid:top é¡¶éƒ¨çš„åç§»é‡android:bottom åº•éƒ¨çš„åç§»é‡android:left å·¦è¾¹çš„åç§»é‡android:right å³è¾¹çš„åç§»é‡è¿™å››ä¸ªåç§»é‡å’ŒæŽ§ä»¶çš„marginè®¾ç½®å·®ä¸å¤šï¼Œéƒ½æ˜¯å¤–é—´è·çš„æ•ˆæžœã€‚ ä¸¤ç§æ–¹å¼å¯¹æ¯” è§†å›¾é«˜åº¦ layer-listèµ„æº åªå…¼å®¹Android 5.0ä»¥ä¸Šç‰ˆæœ¬ éƒ½å…¼å®¹ æ•ˆæžœé€¼çœŸ æ•ˆæžœä¸çœŸå®ž éœ€è¦é¢å¤–çš„ç©ºé—´å±•ç¤ºé˜´å½± ä¸éœ€è¦é¢å¤–çš„ç©ºé—´ å‚è€ƒèµ„æ–™1.å®šä¹‰é˜´å½±2.Androidä¸­layer-listä½¿ç”¨è¯¦è§£]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>layer-list</tag>
        <tag>elevation</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[SurfaceViewä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2017%2F04%2F26%2FSurfaceView%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[ä»‹ç»SurfaceViewæ˜¯è§†å›¾(View)çš„ç»§æ‰¿ç±»ï¼Œè¿™ä¸ªè§†å›¾é‡Œå†…åµŒäº†ä¸€ä¸ªä¸“é—¨ç”¨äºŽç»˜åˆ¶çš„Surfaceã€‚ä½ å¯ä»¥æŽ§åˆ¶è¿™ä¸ªSurfaceçš„æ ¼å¼å’Œå°ºå¯¸ã€‚SurfaceviewæŽ§åˆ¶è¿™ä¸ªSurfaceçš„ç»˜åˆ¶ä½ç½®ã€‚Surfaceæ˜¯çºµæ·±æŽ’åº(Z-ordered)çš„ï¼Œè¿™è¡¨æ˜Žå®ƒæ€»åœ¨è‡ªå·±æ‰€åœ¨çª—å£çš„åŽé¢ã€‚Surfaceviewæä¾›äº†ä¸€ä¸ªå¯è§åŒºåŸŸï¼Œåªæœ‰åœ¨è¿™ä¸ªå¯è§åŒºåŸŸå†…Surfaceéƒ¨åˆ†å†…å®¹æ‰å¯è§ï¼Œå¯è§åŒºåŸŸå¤–çš„éƒ¨åˆ†ä¸å¯è§ã€‚Surfaceçš„æŽ’ç‰ˆæ˜¾ç¤ºå—åˆ°è§†å›¾å±‚çº§å…³ç³»çš„å½±å“ï¼Œå®ƒçš„å…„å¼Ÿè§†å›¾ç»“ç‚¹ä¼šåœ¨é¡¶ç«¯æ˜¾ç¤ºã€‚è¿™æ„å‘³è€… surface çš„å†…å®¹ä¼šè¢«å®ƒçš„å…„å¼Ÿè§†å›¾é®æŒ¡ï¼Œè¿™ä¸€ç‰¹æ€§å¯ä»¥ç”¨æ¥æ”¾ç½®é®ç›–ç‰©(overlays)(ä¾‹å¦‚ï¼Œæ–‡æœ¬å’ŒæŒ‰é’®ç­‰æŽ§ä»¶)ã€‚å¦‚æžœ surface ä¸Šé¢æœ‰é€æ˜ŽæŽ§ä»¶ï¼Œé‚£ä¹ˆå®ƒçš„æ¯æ¬¡å˜åŒ–éƒ½ä¼šå¼•èµ·æ¡†æž¶é‡æ–°è®¡ç®—å®ƒå’Œé¡¶å±‚æŽ§ä»¶ä¹‹é—´çš„é€æ˜Žæ•ˆæžœï¼Œè¿™ä¼šå½±å“æ€§èƒ½ã€‚ä½ å¯ä»¥é€šè¿‡getHolder()è¿”å›žçš„SurfaceHolderå®žä¾‹è®¿é—®Surfaceã€‚Surfaceviewå˜å¾—å¯è§æ—¶ï¼ŒSurfaceè¢«åˆ›å»ºï¼›Surfaceviewéšè—å‰ï¼ŒSurfaceè¢«é”€æ¯ï¼Œè¿™æ ·èƒ½èŠ‚çœèµ„æºã€‚å¦‚æžœä½ è¦æŸ¥çœ‹Surfaceè¢«åˆ›å»ºå’Œé”€æ¯çš„æ—¶æœºï¼Œå¯ä»¥é‡è½½surfaceCreated(SurfaceHolder)å’Œ surfaceDestroyed(SurfaceHolder)ã€‚è¿™é‡Œåº”æ³¨æ„ï¼š æ‰€æœ‰SurfaceViewå’ŒSurfaceHolder.Callbackçš„æ–¹æ³•éƒ½ä¼šåœ¨UIçº¿ç¨‹é‡Œè°ƒç”¨ï¼Œä¸€èˆ¬æ¥è¯´å°±æ˜¯åº”ç”¨ç¨‹åºä¸»çº¿ç¨‹ã€‚æ‰€ä»¥æ¸²æŸ“çº¿ç¨‹æ‰€è¦è®¿é—®çš„å„ç§å˜é‡åº”è¯¥ä½œåŒæ­¥å¤„ç†ã€‚ ç”±äºŽSurfaceå¯èƒ½è¢«é”€æ¯ï¼Œå®ƒåªåœ¨SurfaceHolder.Callback.surfaceCreated()å’ŒSurfaceHolder.Callback.surfaceDestroyed()ä¹‹é—´æœ‰æ•ˆï¼Œæ‰€ä»¥è¦ç¡®ä¿æ¸²æŸ“çº¿ç¨‹è®¿é—®çš„æ˜¯åˆæ³•æœ‰æ•ˆçš„Surfaceã€‚ SurfaceViewæœ€ç»ˆä¼šå’ŒUIçº¿ç¨‹æ‰“äº¤é“ï¼šSurfaceViewå¸¦æœ‰ç‹¬ç«‹çš„Surfaceï¼ˆç‹¬ç«‹ä¸ŽWindowçš„Surfaceï¼‰ï¼Œè¿™å¯ä»¥è®©å­çº¿ç¨‹åœ¨ç‹¬ç«‹çš„Surfaceä¸Šé¢ç»˜åˆ¶ä¸œè¥¿ï¼Œè¿›è¡ŒSurfaceViewçš„ç•Œé¢ç»˜åˆ¶ï¼Œè¿™ä¸ªå­çº¿ç¨‹å°±å«åšæ¸²æŸ“çº¿ç¨‹ï¼Œä½†æ˜¯è¦è®©ç‹¬ç«‹çš„Surfaceä¸Šé¢çš„ä¸œè¥¿åœ¨Viewä¸Šé¢å±•ç¤ºå‡ºæ¥ï¼Œéœ€è¦postä¸€ä¸ªæ¶ˆæ¯ç»™ä¸»çº¿ç¨‹ï¼Œç›®çš„æ˜¯æŠŠè¯¥Surfaceä¸­canvas ä¸Šçš„ä¸œè¥¿ç»˜åˆ¶åˆ°Viewçš„çœŸæ­£çš„ç”»å¸ƒä¸Šé¢ï¼ˆwindowçš„Surfaceçš„canvasä¸Šï¼‰ã€‚ SurfaceViewå’ŒViewçš„ä¸åŒä¹‹å¤„ View SurfaceView é€‚ç”¨äºŽä¸»åŠ¨æ›´æ–° é€‚ç”¨äºŽè¢«åŠ¨åˆ·æ–° åœ¨ä¸»çº¿ç¨‹ä¸­è¿›è¡Œç”»é¢æ›´æ–° é€šå¸¸é€šè¿‡ä¸€ä¸ªå­çº¿ç¨‹æ¥è¿›è¡Œç”»é¢æ›´æ–° ç»˜å›¾ä¸­æ²¡æœ‰ä½¿ç”¨åŒç¼“å†²æœºåˆ¶ åœ¨åº•å±‚å®žçŽ°ä¸­å°±å®žçŽ°äº†åŒç¼“å†²æœºåˆ¶ æ¯”è¾ƒäº†ä¸Šé¢çš„ä¸åŒä¹‹å¤„ï¼Œæ˜¾ç„¶å¯ä»¥å‘çŽ°ï¼Œå¦‚æžœä¸€ä¸ªViewéœ€è¦é¢‘ç¹çš„åˆ·æ–°ï¼Œæˆ–è€…åœ¨åˆ·æ–°æ—¶æ•°æ®å¤„ç†é‡å¤§ï¼ˆå¯èƒ½å¼•èµ·å¡é¡¿ï¼‰ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨SurfaceViewæ¥æ›¿ä»£Viewã€‚ SurfaceViewçš„åŒç¼“å†²æœºåˆ¶å¯¹äºŽæ¯ä¸€ä¸ªSurfaceViewå¯¹è±¡è€Œè¨€ï¼Œæœ‰ä¸¤ä¸ªç‹¬ç«‹çš„graphic bufferã€‚åœ¨Android SurfaceViewçš„åŒç¼“å†²æœºåˆ¶ä¸­æ˜¯è¿™æ ·å®žçŽ°çš„ï¼šåœ¨Buffer Aä¸­ç»˜åˆ¶å†…å®¹ï¼Œç„¶åŽè®©å±å¹•æ˜¾ç¤ºBuffer Aï¼›åœ¨ä¸‹ä¸€ä¸ªå¾ªçŽ¯ä¸­ï¼Œåœ¨Buffer Bä¸­ç»˜åˆ¶å†…å®¹ï¼Œç„¶åŽè®©å±å¹•æ˜¾ç¤ºBuffer Bï¼Œå¦‚æ­¤å¾€å¤ã€‚è€Œç”±äºŽè¿™ä¸ªåŒç¼“å†²æœºåˆ¶çš„å­˜åœ¨ï¼Œå¯èƒ½ä¼šå¼•èµ·é—ªå±çŽ°è±¡ã€‚åœ¨ç¬¬ä¸€ä¸ªâ€lockCanvas-drawCanvas-unlockCanvasAndPost â€œå¾ªçŽ¯ä¸­ï¼Œæ›´æ–°çš„æ˜¯buffer Açš„å†…å®¹ï¼›åˆ°ä¸‹ä¸€ä¸ªâ€lockCanvas-drawCanvas-unlockCanvasAndPostâ€å¾ªçŽ¯ä¸­ï¼Œæ›´æ–°çš„æ˜¯buffer Bçš„å†…å®¹ã€‚ å¦‚æžœbuffer Aä¸Žbuffer Bä¸­æŸä¸ªbufferå†…å®¹ä¸ºç©ºï¼Œå½“å±å¹•è½®æµæ˜¾ç¤ºå®ƒä»¬æ—¶ï¼Œå°±ä¼šå‡ºçŽ°ç”»é¢é»‘å±é—ªçƒçŽ°è±¡ã€‚è§£å†³æ–¹æ³•:å½“å‡†å¤‡æ›´æ–°å†…å®¹æ—¶ï¼Œå…ˆåˆ¤æ–­å†…å®¹æ˜¯å¦ä¸ºç©ºï¼Œåªæœ‰éžç©ºæ—¶æ‰å¯åŠ¨â€lockCanvas-drawCanvas-unlockCanvasAndPostâ€è¿™ä¸ªæµç¨‹ã€‚ SurfaceViewä½¿ç”¨æ­¥éª¤ èŽ·å–åˆ°SurfaceViewå¯¹åº”çš„SurfaceHolderï¼Œé€šè¿‡addCallback()æ–¹æ³•è®¾ç½®SurfaceHolder.Callbackç”¨äºŽç›‘å¬Surfaceçš„åˆ›å»ºå’Œé”€æ¯ã€‚ åˆ›å»ºæ¸²æŸ“çº¿ç¨‹å¯¹è±¡ã€‚ åœ¨å­çº¿ç¨‹ä¸­ä½¿ç”¨SurfaceHolderçš„lockCanvasèŽ·å–Surfaceä¸Šé¢æŒ‡å®šåŒºåŸŸçš„Canvasã€‚ åœ¨è¯¥Canvasä¸Šç»˜åˆ¶å›¾å½¢ã€‚ç»˜åˆ¶ç»“æŸåŽï¼Œä½¿ç”¨SurfaceHolderçš„unlockCanvasAndPostï¼ˆï¼‰æ–¹æ³•è§£é”Canvasï¼Œå¹¶ä¸”è®©UIçº¿ç¨‹æŠŠSurfaceä¸Šé¢çš„ä¸œè¥¿ç»˜åˆ¶åˆ°Viewçš„Canvasä¸Šé¢ã€‚ ä½¿ç”¨SurfaceHolderçš„ä¾‹å­12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667public class GameUI extends SurfaceView implements SurfaceHolder.Callback &#123;private SurfaceHolder holder;private RenderThread renderThread;private boolean isDraw = false;public GameUI(Context context) &#123;super(context);holder = getHolder();holder.addCallback(this);renderThread = new RenderThread();&#125;public GameUI(Context context, AttributeSet attrs) &#123;super(context, attrs);&#125;public GameUI(Context context, AttributeSet attrs, int defStyleAttr) &#123;super(context, attrs, defStyleAttr);&#125;@Overridepublic void surfaceCreated(SurfaceHolder holder) &#123;isDraw = true;if (!renderThread.isAlive()) &#123;renderThread.start();&#125;&#125;@Overridepublic void surfaceChanged(SurfaceHolder holder, int format, int width, int height) &#123;&#125;@Overridepublic void surfaceDestroyed(SurfaceHolder holder) &#123;isDraw = false;&#125;private class RenderThread extends Thread &#123;@Overridepublic void run() &#123;super.run();while (isDraw) &#123;drawUI();&#125;&#125;&#125;private void drawUI() &#123;try &#123;Canvas canvas = holder.lockCanvas();drawCanvas(canvas);&#125; catch (Exception e) &#123;e.printStackTrace();&#125; finally &#123;//ç”±äºŽåŒç¼“å†²æœºåˆ¶çš„å­˜åœ¨ï¼Œåˆ¤æ–­ç”»å¸ƒæ˜¯å¦ä¸ºç©ºï¼Œä»Žè€Œé¿å…é»‘å±æƒ…å†µã€‚if(canvas!=null)&#123;holder.unlockCanvasAndPost(canvas);&#125;&#125;&#125;private void drawCanvas(Canvas canvas) &#123;// åœ¨ canvas ä¸Šç»˜åˆ¶éœ€è¦çš„å›¾å½¢&#125;&#125; éœ€è¦æ³¨æ„çš„å‘ï¼š1ã€æŸäº›æ‰‹æœºæŒ‰HOMEé”®å›žåˆ°æ¡Œé¢åŽå†ä»ŽåŽå°åˆ‡å›žAPPå‰å°æ—¶ï¼Œå¹¶æ²¡æœ‰é‡æ–°èµ°surfaceCreatedã€surfaceChangedæ–¹æ³•ã€‚ï¼ˆæŒ‰HOMEé”®å›žåˆ°æ¡Œé¢ä¼šè°ƒç”¨surfaceDestroyedæ–¹æ³•ã€‚ï¼‰2ã€å¯¹äºŽä¸Šé¢ç¬¬ä¸€ç‚¹ï¼Œæˆ‘åœ¨SurfaceViewä¸­ä½¿ç”¨camera1åˆä¸ä¼šå‡ºçŽ°é—®é¢˜ï¼Œä½†ç±»ä¼¼ä¸Šæ–‡ä¸­çš„ä¾‹å­ä¼šå‡ºçŽ°ç¬¬ä¸€ç‚¹æ‰€è¯´çš„é—®é¢˜ã€‚ å‚è€ƒèµ„æ–™1.SurfaceView2.SurfaceViewçš„åŸºæœ¬ä½¿ç”¨3.SurfaceViewåŸºç¡€ç”¨æ³•]]></content>
      <categories>
        <category>Android View</category>
      </categories>
      <tags>
        <tag>SurfaceView</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Java å¹¶å‘ç¼–ç¨‹ä¹‹ Volatile å’Œ Automic]]></title>
    <url>%2F2017%2F02%2F21%2FJava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BVolatile%E5%92%8CAutomic%2F</url>
    <content type="text"><![CDATA[volatile çš„ç‰¹æ€§è¿™ç¯‡æ–‡ç« å¯¹äºŽ volatile ä»‹ç»å¾—å¾ˆç›´è§‚ï¼Œä¸€å®šè¦é€šè¯»ã€‚æ–‡ç« é“¾æŽ¥&gt;&gt;ä»¥ä¸‹æ˜¯å¯¹ volatile ä½œçš„è¡¥å……ã€‚ volatile çš„å…¸åž‹ä½¿ç”¨åœºæ™¯1ã€ç”¨æ¥æ ‡ç¤ºçŠ¶æ€é‡ã€‚ çŠ¶æ€é‡æ ‡ç¤ºå°±æ˜¯é€šè¿‡ä¸€ä¸ª boolean ç±»åž‹å˜é‡æ¥åˆ¤æ–­é€»è¾‘æ˜¯å¦éœ€è¦æ‰§è¡Œã€‚1234567891011121314151617181920212223242526272829303132333435363738private static volatile boolean flag = false; private static void refershFlag() throws InterruptedException &#123; Thread threadA = new Thread(new Runnable() &#123; @Override public void run() &#123; while (!flag) &#123; //do something &#125; &#125; &#125;); Thread threadB = new Thread(new Runnable() &#123; @Override public void run() &#123; flag = true; &#125; &#125;); DateFormat dateFormat = new SimpleDateFormat(&quot;yyyy/MM/dd HH:mm:ss&quot;); System.out.println(&quot;threadA start&quot; + dateFormat.format(new java.util.Date())); threadA.start(); Thread.sleep(100); threadB.start(); threadA.join(); System.out.println(&quot;threadA end&quot; + dateFormat.format(new java.util.Date()));&#125;//threadA start2017/02/21 10:48:41//threadA end2017/02/21 10:48:41 2ã€double-check é—®é¢˜åº”è¯¥æ˜¯ volatile ä½¿ç”¨æœ€å¤šçš„åœºæ™¯äº†ã€‚å¦‚ä¸‹ä»£ç æ‰€ç¤ºï¼š12345678910111213141516171819202122232425public class DoubleCheck &#123; private volatile static DoubleCheck instance = null; private DoubleCheck() &#123; &#125; public static DoubleCheck getInstance() &#123; if (null == instance) &#123; //æ­¥éª¤ä¸€ synchronized (DoubleCheck.class) &#123; if (null == instance) &#123; //æ­¥éª¤äºŒ instance = new DoubleCheck(); //æ­¥éª¤ä¸‰ &#125; &#125; &#125; return instance; &#125; public static void main(String[] args) throws InterruptedException &#123; DoubleCheck doubleCheck = DoubleCheck.getInstance(); &#125;&#125; ä»£ç ä¸­æ­¥éª¤ä¸‰å¹¶ä¸æ˜¯åŽŸå­æ€§çš„ï¼Œå¯ä»¥åˆ†ä¸ºä¸‰æ­¥ï¼š3.1 ä¸º DoubleCheck åˆ†é…å†…å­˜åœ°å€ ï¼ˆalloc memory addressï¼‰3.2 åˆå§‹åŒ–å¯¹è±¡ DoubleCheck ï¼ˆinit DoubleCheckï¼‰3.3 å°†å¼•ç”¨åœ°å€æŒ‡å‘ instance ï¼ˆinstance &gt; memory addressï¼‰åœ¨ JVM çœ‹æ¥3.2å’Œ3.3å¹¶ä¸å­˜åœ¨ä¾èµ–å…³ç³»ï¼Œæ˜¯æœ‰å¯èƒ½ä¼šé‡æŽ’åºçš„ï¼Œå¦‚æžœå°†3.2å’Œ3.3é‡æŽ’åºï¼š çº¿ç¨‹2åœ¨æ­¥éª¤ä¸€æ—¶åˆ¤æ–­ instance ä¸ä¸ºç©ºçš„æƒ…å†µä¸‹ï¼Œå®žé™…ä¸Šå¯¹è±¡å¹¶æ²¡æœ‰åˆå§‹åŒ–ï¼Œ3.2å¹¶æ²¡æœ‰æ‰§è¡Œã€‚å¯¼è‡´æŽ¥ä¸‹æ¥ä½¿ç”¨å¯¹è±¡å‘ç”Ÿé”™è¯¯ã€‚æ­¤æ—¶ä½¿ç”¨ volatile ä¿®é¥° instance å˜é‡å°±å¯ä»¥é˜²æ­¢3.2å’Œ3.3é‡æŽ’åºï¼Œè¿™æ ·å°±ä¿è¯äº†å¤šçº¿ç¨‹è®¿é—®æ—¶ä»£ç çš„æ­£ç¡®æ€§ã€‚3ã€ä¸‹é¢çš„åœºæ™¯ä¸æ˜¯ç»å¸¸å‡ºçŽ°ï¼Œä½†æ˜¯å¯ä»¥ä½œä¸ºå¯¹ volatile å®Œæ•´ç†è§£çš„å¼•å­ã€‚12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970public class VolatileClass &#123; public static void main(String[] args) throws InterruptedException &#123; AAndB aAndB = new AAndB(); for (int i = 0; i &lt; 10000000; i++) &#123; AThread aThread = new AThread(aAndB); BThread bThread = new BThread(aAndB); aThread.start(); bThread.start(); aThread.join(); bThread.join(); if (aAndB.x == 0 &amp;&amp; aAndB.y == 0) &#123; System.out.println(&quot;resort&quot;); &#125; aAndB.x = aAndB.y = aAndB.a = aAndB.b = 0; &#125; System.out.println(&quot;end&quot;); &#125; public static class AAndB &#123; volatile int x = 0; volatile int y = 0; volatile int a = 0; volatile int b = 0; public void awrite() &#123; a = 1; x = b; &#125; public void bwrite() &#123; b = 1; y = a; &#125; &#125; public static class AThread extends Thread &#123; private AAndB aAndB; public AThread(AAndB aAndB) &#123; this.aAndB = aAndB; &#125; @Override public void run() &#123; super.run(); this.aAndB.awrite(); &#125; &#125; public static class BThread extends Thread &#123; private AAndB aAndB; public BThread(AAndB aAndB) &#123; this.aAndB = aAndB; &#125; @Override public void run() &#123; super.run(); this.aAndB.bwrite(); &#125; &#125;&#125;// end 1ã€x,y ä½¿ç”¨ volatile ä¿®é¥°æ˜¯ä¸ºäº†é¿å… JVM çš„é‡æŽ’åºé—®é¢˜ï¼Œè¿™ä¸ªåœ¨æœ¬æ–‡å¼€å¤´çš„é“¾æŽ¥ä¸­æœ‰æã€‚2ã€a,b ä½¿ç”¨ volatile ä¿®é¥°æ˜¯ä¸ºäº†ä¿è¯æ•°æ®çš„å¯è§æ€§ã€‚3ã€æ‰€ä»¥ï¼Œåªæœ‰ x,y,a,b å…¨éƒ¨éƒ½ç”¨ volatile ä¿®é¥°æ‰èƒ½ä¿è¯ x,y ä¸åŒæ—¶ä¸º 0 ã€‚ å‚è€ƒé“¾æŽ¥&gt;&gt;(PSï¼šè¿™é‡Œåªæ˜¯ä¹ æƒ¯æ€§åœ°æ³¨æ˜ŽçŸ¥è¯†çš„æ¥æºã€‚å¯¹äºŽæ–‡é“¾ä¸­çš„å…¶ä½™éƒ¨åˆ†ç¬”è€…è¿˜å­˜æœ‰ç–‘æƒ‘ï¼Œè¯·è°¨æ…Žå‚è€ƒï¼è€Œä¸”ï¼Œå¯¹äºŽåœºæ™¯ä¸‰ç¬”è€…å’Œæ–‡é“¾ä¸­çš„è§‚ç‚¹æ˜¯æœ‰äº›è®¸ä¸åŒçš„ã€‚) ä»Ž JMM ç†è§£ synchronizedã€volatile ç­‰å…³é”®å­—å‚è€ƒé“¾æŽ¥&gt;&gt; AtomicIntegerä»‹ç»åŽŸå­æ“ä½œåœ¨å¤šçº¿ç¨‹åœºæ™¯æ˜¯å¾ˆæœ‰å¿…è¦çš„ï¼Œå®ƒå¯ä»¥é¿å…æ•°æ®çš„äºŒä¹‰æ€§äº§ç”Ÿã€‚ä¸‹é¢çš„ç¨‹åºä¸­æˆ‘ä»¬æ–°å»ºäº†ä¸¤ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹å¯¹åŒä¸€ä¸ªæ•°å¢žåŠ äº†4æ¬¡ï¼Œæ¯æ¬¡åŠ 1ï¼Œæœ€åŽçš„ç»“æžœæ­£ç¡®åº”è¯¥æ˜¯8ã€‚12345678910111213141516171819202122232425262728293031323334353637383940public class JavaAtomic &#123; public static void main(String[] args) throws InterruptedException &#123; ProcessingThread pt = new ProcessingThread(); Thread t1 = new Thread(pt, &quot;t1&quot;); t1.start(); Thread t2 = new Thread(pt, &quot;t2&quot;); t2.start(); t1.join(); t2.join(); System.out.println(&quot;Processing count=&quot; + pt.getCount()); &#125;&#125;class ProcessingThread implements Runnable &#123; private int count; @Override public void run() &#123; for (int i = 1; i &lt; 5; i++) &#123; processSomething(i); count++; &#125; &#125; public int getCount() &#123; return this.count; &#125; private void processSomething(int i) &#123; // processing some job try &#123; Thread.sleep(i * 1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; è¿è¡Œä¸Šé¢çš„ç¨‹åºåŽï¼Œä½ ä¼šå‘çŽ°æœ€åŽçš„è¿è¡Œç»“æžœæ¯æ¬¡éƒ½ä¸ä¸€æ ·ï¼Œå¯èƒ½æ˜¯5ï¼Œ6ï¼Œ7æˆ–è€…8ã€‚åŽŸå› å°±æ˜¯ count++ ä¸å…·å¤‡åŽŸå­æ€§ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹è¯»å–äº† count çš„å€¼å¹¶è¿›è¡Œå®ŒåŠ 1æ“ä½œæ—¶ï¼Œå¦å¤–ä¸€ä¸ªçº¿ç¨‹è¿˜æ˜¯å¼•ç”¨çš„åŽŸæ¥æ—§çš„ count å€¼ï¼Œè¿™æ ·å°±å¯¼è‡´äº†æœ€åŽåŠ 1åŽçš„ç»“æžœä¸ç¬¦åˆé¢„æœŸçš„çŽ°è±¡ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é™¤äº†å¯ä»¥ä½¿ç”¨ Synchronizedã€Lockï¼Œè¿˜å¯ä»¥ä½¿ç”¨ Java 5 java.util.concurrent.atomic æä¾›çš„ AutomicInteger å®žçŽ°åŽŸå­æ“ä½œã€‚å¹¶ä¸”åœ¨ç¨‹åºé€»è¾‘å…è®¸çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä¼˜å…ˆä½¿ç”¨ atomicï¼Œå®ƒåœ¨æ‰§è¡Œé€Ÿåº¦ã€å¯è¯»æ€§ã€å®žç”¨æ€§æ–¹é¢å‡ä¼˜äºŽå‰ä¸¤è€…ã€‚123456789101112131415161718192021222324252627282930313233343536373839public class JavaAtomic &#123; public static void main(String[] args) throws InterruptedException &#123; ProcessingThread pt = new ProcessingThread(); Thread t1 = new Thread(pt, &quot;t1&quot;); t1.start(); Thread t2 = new Thread(pt, &quot;t2&quot;); t2.start(); t1.join(); t2.join(); System.out.println(&quot;Processing count=&quot; + pt.getCount()); &#125;&#125;class ProcessingThread implements Runnable &#123; private AtomicInteger count = new AtomicInteger(); @Override public void run() &#123; for (int i = 1; i &lt; 5; i++) &#123; processSomething(i); count.incrementAndGet(); &#125; &#125; public int getCount() &#123; return this.count.get(); &#125; private void processSomething(int i) &#123; // processing some job try &#123; Thread.sleep(i * 1000); &#125; catch (InterruptedException e) &#123; e.printStackTrace(); &#125; &#125;&#125; å‚è€ƒé“¾æŽ¥&gt;&gt;]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Fragmentçš„ç†è§£]]></title>
    <url>%2F2017%2F02%2F16%2FFragment%E7%9A%84%E7%90%86%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ç¢Žç‰‡åŒ–çš„å‡ºçŽ°è®©ä¸€äº›å¤æ‚å†—é•¿çš„å†…å®¹åœ¨ä¸€äº›å±å¹•ä¸Žåˆ†è¾¨çŽ‡å­˜åœ¨å·®å¼‚çš„å±å¹•ä¸Šå¾—åˆ°äº†åˆç†çš„å±•ç¤ºï¼Œæžå¤§åœ°æé«˜äº†ç”¨æˆ·çš„ä½“éªŒã€‚ä¸‹é¢å¯¹Fragmentçš„ä¸€äº›çƒ­ç‚¹é—®é¢˜è¿›è¡Œä¸€ä¸‹è®²è§£ã€‚ æ¦‚å¿µFragmentï¼ˆç¢Žç‰‡ï¼‰æ˜¯åœ¨Android 3.0å‡ºçŽ°çš„ã€‚å¯ä»¥æŠŠFragmentç†è§£æˆActivityçš„ä¸€ä¸ªæ¨¡å—åŒ–åŒºåŸŸï¼Œä»–æ‹¥æœ‰è‡ªå·±çš„ç”Ÿå‘½å‘¨æœŸï¼ŒæŽ¥æ”¶å±žäºŽè‡ªå·±çš„è¾“å…¥äº‹ä»¶ï¼Œå¹¶ä¸”å¯ä»¥åœ¨Activityè¿è¡ŒæœŸé—´è¢«æ·»åŠ å’Œåˆ é™¤ã€‚Fragmentå¿…é¡»è¢«åµŒå…¥ä¸€ä¸ªActivityä¸­ï¼Œå®ƒä»¬çš„ç”Ÿå‘½å‘¨æœŸç›´æŽ¥å—å®¿ä¸»Activityçš„å½±å“ã€‚å½“ä¸€ä¸ªActivityæ­£åœ¨è¿è¡Œæ—¶ï¼Œå¯ä»¥ç‹¬ç«‹çš„æ“ä½œå…¶ä¸­çš„æ¯ä¸€ä¸ªFragmentï¼Œå¦‚æ·»åŠ å’Œåˆ é™¤ã€‚Fragmentçš„åŠ è½½æ–¹å¼æœ‰ä¸¤ç§ï¼šé™æ€åŠ è½½å’ŒåŠ¨æ€åŠ è½½ã€‚é™æ€åŠ è½½å¾ˆç®€å•ï¼Œåªéœ€æŠŠFragmentå½“æˆæ™®é€šUIæ”¾åœ¨ç•Œé¢Layoutä¸­ã€‚åŠ¨æ€åŠ è½½éœ€è¦å…ˆäº†è§£Fragmentäº‹åŠ¡ï¼Œäº‹åŠ¡æŒ‡çš„å°±æ˜¯åŽŸå­æ€§ï¼Œä¸å¯åˆ†å‰²çš„æ“ä½œã€‚æ‰€è°“çš„Fragmentäº‹åŠ¡ã€‚æ‰€è°“Fragmentäº‹åŠ¡ï¼Œå°±æ˜¯å¯¹Fragmentçš„è¿›è¡Œæ·»åŠ ã€åˆ é™¤ã€æ›¿æ¢æˆ–è€…å…¶å®ƒæ“ä½œï¼Œæäº¤ç»™Activityçš„æ¯ä¸€ä¸ªå˜åŒ–ï¼Œè¿™å°±æ˜¯äº‹åŠ¡ã€‚åŠ¨æ€åŠ è½½çš„æµç¨‹å¦‚ä¸‹ï¼š å¼€å¯ä¸€ä¸ªæ–°äº‹åŠ¡ï¼› é€šè¿‡äº‹åŠ¡æ·»åŠ Fragmentï¼› æäº¤äº‹åŠ¡ï¼Œå¦åˆ™æ·»åŠ ä¸æˆåŠŸã€‚ Fragment çš„ç”Ÿå‘½å‘¨æœŸFragmentçš„ç”Ÿå‘½å‘¨æœŸä¸ŽActivityç±»ä¼¼ï¼Œç”¨åˆ°çš„æ–¹æ³•å¦‚ä¸‹è¡¨æ‰€ç¤ºã€‚ æ–¹æ³•åç§° æ–¹æ³•è¯´æ˜Ž onAttach() ç»‘å®šFragmentåˆ°Activity onCreate() åˆ›å»ºFragment onCreateView() åˆ›å»ºFragmentçš„å¸ƒå±€ onActivityCreated() Activityåˆ›å»ºå®ŒæˆåŽå›žè°ƒè¯¥æ–¹æ³• onStart() å¯è§ï¼Œä¸å¯äº¤äº’çŠ¶æ€ onResume() å¯è§ï¼Œå¯äº¤äº’çŠ¶æ€ onPause() éƒ¨åˆ†å¯è§ï¼Œä¸å¯äº¤äº’çŠ¶æ€ onStop() ä¸å¯è§ onDestroyView() é”€æ¯Fragmentçš„Viewå¯¹è±¡ onDestroy() Fragmentè¢«é”€æ¯ onDetach() Fragmentä»ŽActivityè§£ç»‘ è¿™é‡Œæœ‰å‡ ç‚¹éœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼š1ã€å› ä¸ºFragmentä¸ŽActivityæ˜¯ç»‘å®šåœ¨ä¸€èµ·çš„ï¼Œæ‰€ä»¥å½“Activityè¢«é”€æ¯æ—¶ï¼ŒFragmentä¹Ÿè¦è¢«é”€æ¯ã€‚Fragmentçš„è°ƒé”€æ¯è¿‡ç¨‹æ˜¯ï¼šonPause()â€”â€”&gt;onStop()â€”â€”&gt;onDestroyView()â€”â€”&gt;onDestroy()â€”â€”&gt;onDetach()ã€‚2ã€è°ƒç”¨FragmentTransactionçš„hide()ä¸Žshow()å¯¹äºŽFragmentçš„ç”Ÿå‘½å‘¨æœŸæ²¡æœ‰å½±å“ã€‚3ã€è°ƒç”¨FragmentTransactionçš„replace()æ–¹æ³•ï¼Œå¹¶ä¸”åœ¨æ¬¡ä¹‹å‰æ²¡æœ‰è°ƒç”¨addToBackStackï¼Œåˆ™ä¹‹å‰å·²åˆ›å»ºçš„Fragment(å¦‚æžœæœ‰)å°†ä¼šè¢«è§£ç»‘ï¼›åä¹‹ï¼Œå¦‚æžœåœ¨æ­¤ä¹‹å‰è°ƒç”¨äº†addToBackStackæ–¹æ³•ï¼Œä¹‹å‰å·²åˆ›å»ºçš„Fragment(å¦‚æžœæœ‰)å°†åªä¼šè¢«é”€æ¯å®ƒçš„Viewå¯¹è±¡ï¼Œå³è°ƒç”¨onDestroyView()æ–¹æ³•ã€‚ä¹‹åŽå¦‚æžœæŒ‰è¿”å›žé”®æˆ–è€…è°ƒç”¨getSupportFragmentManager().popBackStack()æ–¹æ³•ï¼Œä¹‹å‰çš„Fragmentå°†ä¼šå†æ¬¡æ˜¾ç¤ºï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ä¾æ¬¡è°ƒç”¨äº†ä¹‹å‰fragmentçš„onCreateView()â€”â€”&gt;onActivityCreated()â€”â€”&gt;onStart()â€”â€”&gt;onResume()æ–¹æ³•ã€‚ Fragment ä¸Ž Activity å¦‚ä½•è¿›è¡Œäº¤äº’ç”±äºŽæ‰€æœ‰çš„Fragmentéƒ½ä¾èµ–ä¸ŽActivityï¼Œå› æ­¤å®ƒä»¬ä¹‹é—´å®žçŽ°é€šä¿¡å¹¶ä¸å¤æ‚ï¼Œå¤§æ¦‚å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼šä¸€ç§æ˜¯åœ¨Activityä¸­è®¿é—®Fragmentï¼Œä¸€ç§æ˜¯åœ¨Framentä¸­è®¿é—®Activityï¼Œå…·ä½“å¦‚ä¸‹ï¼š åœ¨ Activity ä¸­è®¿é—® Framentå› ä¸ºå¯ä»¥åœ¨Activityä¸­èŽ·å–Fragmentå®žä¾‹ï¼ˆç‰¹æ®Šé™¤å¤–ï¼‰ï¼Œæ‰€ä»¥å¯ä»¥ç›´æŽ¥è®¿é—®Framentä¸­å£°æ˜Žçš„å…¬æœ‰æ–¹æ³•ã€‚ å°æç¤ºï¼šé™¤äº†ç›´æŽ¥é€šè¿‡Fragmentçš„å…¬æœ‰æ–¹æ³•è®¿é—®å¤–ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡æŽ¥å£å›žè°ƒçš„æ–¹å¼è®¿é—®Fragmentä¸­ç›¸å…³å‚æ•°ã€‚ åœ¨ Fragment ä¸­è®¿é—® Activityåœ¨Fragmentä¸­å¯ä»¥é€šè¿‡getActivity()æ–¹æ³•å¾—åˆ°å½“å‰ç»‘å®šçš„Activityçš„å®žä¾‹ï¼Œç„¶åŽè¿›è¡Œæ“ä½œã€‚ å¦‚ä½•åˆ‡æ¢ Fragmenté¦–å…ˆåˆ†åˆ«èŽ·å–FragmentMangagerä¸ŽFragmentTransactionçš„å®žä¾‹ï¼Œç„¶åŽåˆ›å»ºä¸€ä¸ªFragmentå¯¹è±¡ï¼ŒæŽ¥ä¸‹æ¥è°ƒç”¨FragmentTransactionå¯¹è±¡çš„replaceï¼ˆï¼‰æ–¹æ³•å’Œcommitæ–¹æ³•æ¥å®ŒæˆFragmentçš„åˆ‡æ¢ã€‚å…·ä½“ä»£ç å¦‚ä¸‹ï¼š123456//èŽ·å–FragmentManagerçš„å®žä¾‹FragmentManager fragmentManager=getFragmentManager();FragmentTransaction transaction=fragmentManager.beginTransaction();ExampleFragment fragment=new ExampleFragment();//åˆ›å»ºä¸€ä¸ªFragmentfragmentTransaction.replace(R.id.content,fragment);//R.id.contentå¯¹åº”çš„æŽ§ä»¶å¿…é¡»æ˜¯ä¸€ä¸ªViewGroupfragmentTransaction.commit(); ç†è§£ addToBackStack()å®˜æ–¹çš„è§£é‡Šï¼šAdd this transaction to the back stack. This means that the transaction will be remembered after it is committed, and will reverse its operation when later popped off the stack.å¤§ç™½è¯ï¼šåœ¨commitä¹‹å‰ä¿å­˜æ­¤æ—¶çš„çŠ¶æ€ï¼Œä¹‹åŽå¦‚æžœæŒ‰è¿”å›žé”®ï¼Œå¯ä»¥å†æ¬¡å›žåˆ°æ­¤æ—¶çš„çŠ¶æ€ã€‚ä¸€èˆ¬æˆ‘ä»¬éœ€è¦ä½¿ç”¨addToBackStackçš„è¯ï¼Œç›´æŽ¥è°ƒç”¨addToBackStack(null)å³å¯ã€‚ commitNowAllowingStateLoss\commitAllowingStateLoss ç”¨æ³•åº”ç”¨å¤„äºŽåŽå°è¿è¡ŒçŠ¶æ€æ—¶ï¼ˆåªè¦æ˜¯ onSaveInstanceState è¢«è°ƒç”¨äº†ï¼‰è¦è®© DialogFrament\Fragment æ˜¾ç¤ºçš„è¯ï¼Œå¿…é¡»è¦ç”¨ commitNowAllowingStateLoss\commitAllowingStateLoss æ¥å¯åŠ¨ã€‚å› ä¸º commit åœ¨ onSaveInstanceState ä¹‹åŽè°ƒç”¨ä¼šæŠ¥é”™ã€‚ æ‹“å±•çŸ¥è¯†1ã€å½“åº”ç”¨å¤„äºŽåŽå°è¿è¡ŒçŠ¶æ€æ—¶ï¼Œå¯åŠ¨ Activity å¿…é¡»ç”¨ PendIntent ï¼ŒåŒæ—¶æœ‰äº›æœºåž‹å¿…é¡»å¼€å¯åŽå°å¯åŠ¨ç•Œé¢çš„æƒé™ï¼ˆå°ç±³ï¼‰ã€‚å°ç±³æ‰‹æœºåªè¦å¼€å¯äº†åŽå°å¯åŠ¨ç•Œé¢çš„æƒé™ï¼Œä¸ç®¡ç”¨ PendIntent å¯åŠ¨è¿˜æ˜¯ Intent åŽå°å¯åŠ¨ Activity éƒ½ä¸ä¼šæœ‰é—®é¢˜ï¼Œå¯æ˜¯æˆ‘åœ¨oppo a83ä¸Šæœ‰é—®é¢˜ï¼Œæ‰€ä»¥è¿˜æ˜¯è¦ç”¨ PendIntent æ¥å¤„ç†åŽå°å¯åŠ¨çš„éœ€æ±‚ï¼Œè€Œä¸” oppo a83 æ²¡æœ‰åŽå°å¯åŠ¨çš„æƒé™çš„å¼€å…³ï¼Œæ‰€ä»¥ç”¨ PendIntent åŽå°å¯åŠ¨ Activity æˆåŠŸçš„æ¦‚çŽ‡å¤§å¾ˆå¤šï¼ˆé™¤äº†å°ç±³æ‰‹æœºï¼‰ã€‚æœ€åŽï¼Œè¿™é‡Œè¯´çš„ä¸å¼¹å‡ºä¸ä¼šå¼•å‘é—ªé€€ï¼Œæˆ‘æµ‹è¯•äº†å°ç±³ 5A å’Œ oppo a83ï¼Œå…¶å®ƒæœºåž‹ä¸çŸ¥é“ä¼šä¸ä¼šå´©æºƒã€‚2ã€onSaveInstanceState å’Œ onRestoreInstanceState è¯¦è§£ã€‚3ã€commit() , commitNow() å’Œ commitAllowingStateLoss() æ¯”è¾ƒã€‚ï¼ˆæ³¨æ„ï¼Œç¬”è€…åªçœ‹äº†ä¸­æ–‡ç¿»è¯‘ï¼Œç¿»è¯‘ä¸­çš„è‹±æ–‡å¼•ç”¨æˆ‘æ²¡æœ‰çœ‹ã€‚ä¸è¿‡è¿™ä¸å½±å“ç†è§£ï¼Œç¿»è¯‘æ–‡å·²ç»è®²çš„å¾ˆé€å½»äº†ï¼‰ã€‚]]></content>
      <categories>
        <category>å››å¤§ç»„ä»¶</category>
      </categories>
      <tags>
        <tag>Fragment</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaå¹¶å‘ç¼–ç¨‹ä¹‹Lock]]></title>
    <url>%2F2017%2F01%2F14%2FJava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BLock%2F</url>
    <content type="text"><![CDATA[ç›¸å¯¹äºŽSynchronized,æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ›´åŠ äººæ€§åŒ–çš„Lockå…³é”®å­—ä½œä¸ºçº¿ç¨‹åŒæ­¥çš„å®žçŽ°æ–¹æ¡ˆã€‚æœ¬ç¯‡æ–‡ç« å°†è¯¦ç»†ä»‹ç»Lockçš„ç›¸å…³ç”¨æ³•ä»¥åŠä½¿ç”¨å®ƒçš„ä¼˜åŠ¿ã€‚ ä½¿ç”¨LockåŒæ­¥ä»£ç å—Javaæä¾›å¦å¤–çš„æœºåˆ¶ç”¨æ¥åŒæ­¥ä»£ç å—ã€‚å®ƒæ¯”synchronizedå…³é”®å­—æ›´åŠ å¼ºå¤§ã€çµæ´»ã€‚å®ƒæ˜¯åŸºäºŽLockæŽ¥å£å’Œå®žçŽ°å®ƒçš„ç±»ï¼ˆå¦‚ReentrantLockï¼‰ã€‚è¿™ç§æœºåˆ¶æœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š å®ƒå…è®¸ä»¥ä¸€ç§æ›´çµæ´»çš„æ–¹å¼æ¥æž„å»ºsynchronizedå—ã€‚ä½¿ç”¨synchronizedå…³é”®å­—ï¼Œä½ å¿…é¡»ä»¥ç»“æž„åŒ–æ–¹å¼å¾—åˆ°é‡Šæ”¾synchronizedä»£ç å—çš„æŽ§åˆ¶æƒã€‚LockæŽ¥å£å…è®¸ä½ èŽ·å¾—æ›´å¤æ‚çš„ç»“æž„æ¥å®žçŽ°ä½ çš„ä¸´ç•ŒåŒºã€‚ LockæŽ¥å£æ¯”synchronizedå…³é”®å­—æä¾›æ›´å¤šé¢å¤–çš„åŠŸèƒ½ï¼Œæ–°åŠŸèƒ½ä¹‹ä¸€æ˜¯å®ƒæä¾›çš„tryLock()æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•è¯•å›¾èŽ·å–é”çš„æŽ§åˆ¶æƒå¹¶ä¸”å¦‚æžœå®ƒä¸èƒ½èŽ·å–è¯¥é”æ˜¯ç”±äºŽå…¶ä»–çº¿ç¨‹åœ¨ä½¿ç”¨è¿™ä¸ªé”ï¼Œå®ƒå°†è¿”å›žfalseã€‚ä½¿ç”¨synchronizedå…³é”®å­—ï¼Œå½“çº¿ç¨‹Aè¯•å›¾æ‰§è¡Œsynchronizedä»£ç å—ï¼Œå¦‚æžœçº¿ç¨‹Bæ­£åœ¨æ‰§è¡Œå®ƒï¼Œé‚£ä¹ˆçº¿ç¨‹Aå°†é˜»å¡žç›´åˆ°çº¿ç¨‹Bæ‰§è¡Œå®Œsynchronizedä»£ç å—ã€‚ä½¿ç”¨Lockï¼Œä½ å¯ä»¥æ‰§è¡ŒtryLock()æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•è¿”å›žä¸€ä¸ªBooleanå€¼è¡¨ç¤ºæ˜¯å¦æœ‰å…¶ä»–çº¿ç¨‹æ­£åœ¨è¿è¡Œè¿™ä¸ªé”æ‰€ä¿æŠ¤çš„ä»£ç ã€‚ å½“æœ‰å¤šä¸ªè¯»è€…å’Œä¸€ä¸ªå†™è€…æ—¶ï¼ŒLockæŽ¥å£å…è®¸è¯»å†™æ“ä½œåˆ†ç¦»ã€‚ LockæŽ¥å£æä¾›äº†ç›¸æ¯”äºŽwaitæ›´åŠ çµæ´»çš„awaitå…³é”®å­—ç”¨äºŽçº¿ç¨‹é€šä¿¡ã€‚ ReentrantLockæä¾›äº†å¤šæ ·åŒ–çš„åŒæ­¥ï¼Œæ¯”å¦‚æœ‰æ—¶é—´é™åˆ¶çš„åŒæ­¥ï¼Œå¯ä»¥è¢«Interruptçš„åŒæ­¥ï¼ˆsynchronizedçš„åŒæ­¥æ˜¯ä¸èƒ½Interruptçš„ï¼‰ç­‰ã€‚ æ³¨æ„ï¼šå¯¹äºŽä¸Šé¢ç¬¬5æ¡ä¼˜åŠ¿ä¸­çš„æåˆ°çš„å¯ä»¥è¢«Interruptçš„åŒæ­¥æ˜¯ç›¸å¯¹äºŽè¿›å…¥åŒæ­¥å—å‰çš„è¿™ä¸ªæ—¶é—´æ®µæ¥è¯´çš„ã€‚å¦å¤–åœ¨è¿›å…¥åŒæ­¥å—åŽï¼Œå¦‚æžœè°ƒç”¨äº†synchronizedæ¦‚å¿µä¸­çš„wait()æˆ–Lockæ¦‚å¿µä¸­çš„await()æˆ–è€…sleepï¼ˆï¼‰ï¼Œé‚£ä¹ˆè¯¥çº¿ç¨‹åœ¨ç­‰å¾…å”¤é†’çš„è¿‡ç¨‹ä¸­æ˜¯å¯ä»¥å“åº”æ‰“æ–­çš„ï¼ˆæŠ›å‡ºå¼‚å¸¸åŽç»§ç»­æ‰§è¡Œï¼Œè€Œä¸æ˜¯çº¿ç¨‹ç»ˆæ­¢ï¼‰ï¼›å¦‚æžœè°ƒç”¨äº†Lockæ¦‚å¿µä¸­çš„awaitUninterruptibly()æˆ–è€—æ—¶ä¸šåŠ¡é€»è¾‘å¯¼è‡´çš„å»¶è¿Ÿæ“ä½œï¼Œåˆ™ä¸ä¼šå“åº”æ‰“æ–­ã€‚ åœ¨ä¸‹é¢çš„æ¡ˆä¾‹ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•é€šè¿‡é”æ¥åŒæ­¥ä»£ç å—å’Œé€šè¿‡LockæŽ¥å£åŠå…¶å®žçŽ°è€…ReentrantLockç±»æ¥åˆ›å»ºä¸´ç•ŒåŒºï¼Œå®žçŽ°ä¸€ä¸ªç¨‹åºæ¥æ¨¡æ‹Ÿæ‰“å°é˜Ÿåˆ—ã€‚1.åˆ›å»ºPrintQueueç±»ï¼Œæ¥å®žçŽ°æ‰“å°é˜Ÿåˆ—ã€‚1public class PrintQueue &#123; 2.å£°æ˜Žä¸€ä¸ªLockå¯¹è±¡ï¼Œå¹¶ä¸”ä½¿ç”¨ReentrantLockç±»çš„ä¸€ä¸ªæ–°å¯¹è±¡æ¥åˆå§‹åŒ–å®ƒã€‚1private final Lock queueLock=new ReentrantLock(); 3.å®žçŽ°printJob()æ–¹æ³•ï¼Œå®ƒå°†æŽ¥æ”¶Objectå¯¹è±¡ä½œä¸ºå‚æ•°ï¼Œå¹¶ä¸”ä¸ä¼šè¿”å›žä»»ä½•å€¼ã€‚1public void printJob(Object document)&#123; 4.åœ¨printJob()æ–¹æ³•å†…éƒ¨ï¼Œé€šè¿‡è°ƒç”¨lock()æ–¹æ³•æ¥èŽ·å–Lockå¯¹è±¡çš„æŽ§åˆ¶æƒã€‚1queueLock.lock(); 5.ç„¶åŽï¼ŒåŒ…å«ä»¥ä¸‹ä»£ç æ¥æ¨¡æ‹Ÿæ–‡æ¡£çš„æ‰“å°:1234567try &#123;System.out.printf(&quot;%s:print start!!!\n&quot;, Thread.currentThread().getName());Thread.sleep(1000);System.out.printf(&quot;%s:print end!!!\n&quot;, Thread.currentThread().getName());&#125; catch (InterruptedException e) &#123;e.printStackTrace();&#125; 6.æœ€åŽï¼Œé€šè¿‡è°ƒç”¨unlock()æ–¹æ³•æ¥é‡Šæ”¾Lockå¯¹è±¡çš„æŽ§åˆ¶ã€‚123finally &#123;queueLock.unlock();&#125; 7.åˆ›å»ºä¸€ä¸ªJobç±»ï¼Œå¹¶æŒ‡å®šå®ƒå®žçŽ°RunnableæŽ¥å£ã€‚1public class Job implements Runnable &#123; 8.å£°æ˜Žä¸€ä¸ªPrintQueueç±»çš„å¯¹è±¡ï¼Œå¹¶é€šè¿‡å®žçŽ°ç±»ï¼ˆJobç±»ï¼‰çš„æž„é€ å™¨æ¥åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚1234private PrintQueue printQueue;public Job(PrintQueue printQueue)&#123;this.printQueue=printQueue;&#125; 9.å®žçŽ°run()æ–¹æ³•ï¼Œå®ƒä½¿ç”¨PrintQueueå¯¹è±¡æ¥å‘é€ä¸€ä¸ªæ‰“å°ä»»åŠ¡ã€‚1234@Overridepublic void run() &#123;printQueue.printJob(new Object());&#125; 10.é€šè¿‡åˆ›å»ºç±»åä¸ºMainï¼Œä¸”åŒ…æ‹¬mainï¼ˆï¼‰æ–¹æ³•æ¥å®žçŽ°è¿™ä¸ªç¤ºä¾‹çš„ä¸»ç±»ã€‚12public class Main &#123;public static void main(String[] args) &#123; 11.åˆ›å»ºä¸€ä¸ªå…±äº«çš„PrintQueueå¯¹è±¡ã€‚1PrintQueue printQueue=new PrintQueue(); 12.åˆ›å»º10ä¸ªJobå¯¹è±¡ï¼Œå¹¶ä¸”ä½¿ç”¨10ä¸ªçº¿ç¨‹æ¥è¿è¡Œå®ƒä»¬ã€‚1234Thread thread[]=new Thread[5];for (int i=0; i&lt;10; i++)&#123;thread[i]=new Thread(new Job(printQueue));&#125; 13.å¯åŠ¨è¿™10ä¸ªçº¿ç¨‹ã€‚123for (int i=0; i&lt;10; i++)&#123;thread[i].start();&#125; ä»Žä»¥ä¸‹æˆªå›¾ï¼Œä½ å¯ä»¥çœ‹åˆ°æ‰§è¡Œè¿™ä¸ªç¤ºä¾‹çš„è¾“å‡ºï¼šåœ¨ printJob()ä¸­ï¼ŒqueueLockæ˜¯è¿™ä¸ªç¤ºä¾‹çš„å…³é”®æ‰€åœ¨ã€‚å½“æˆ‘ä»¬é€šè¿‡é”æ¥å®žçŽ°ä¸€ä¸ªä¸´ç•ŒåŒºå¹¶ä¸”ä¿è¯åªæœ‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹èƒ½è¿è¡Œä¸€ä¸ªä»£ç å—ï¼Œæˆ‘ä»¬å¿…é¡»åˆ›å»ºä¸€ä¸ªReentrantLockå¯¹è±¡ã€‚åœ¨ä¸´ç•ŒåŒºçš„èµ·å§‹éƒ¨åˆ†ï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡ä½¿ç”¨lock()æ–¹æ³•æ¥èŽ·å¾—é”çš„æŽ§åˆ¶æƒã€‚å½“ä¸€ä¸ªçº¿ç¨‹Aè°ƒç”¨è¿™ä¸ªæ–¹æ³•æ—¶ï¼Œå¦‚æžœæ²¡æœ‰å…¶ä»–çº¿ç¨‹æŒæœ‰è¿™ä¸ªé”çš„æŽ§åˆ¶æƒï¼Œé‚£ä¹ˆè¿™ä¸ªæ–¹æ³•å°±ä¼šç»™çº¿ç¨‹Aåˆ†é…è¿™ä¸ªé”çš„æŽ§åˆ¶æƒå¹¶å…è®¸çº¿ç¨‹Aæ‰§è¡Œè¿™ä¸ªä¸´ç•ŒåŒºã€‚å¦åˆ™ï¼Œå¦‚æžœå…¶ä»–çº¿ç¨‹Bæ­£åœ¨æ‰§è¡Œç”±è¿™ä¸ªé”æŽ§åˆ¶çš„ä¸´ç•ŒåŒºï¼Œlock()æ–¹æ³•å°†ä¼šä½¿çº¿ç¨‹Aç¡çœ ç›´åˆ°çº¿ç¨‹Bå®Œæˆè¿™ä¸ªä¸´ç•ŒåŒºçš„æ‰§è¡Œã€‚åœ¨ä¸´ç•ŒåŒºçš„å°¾éƒ¨ï¼Œæˆ‘ä»¬å¿…é¡»ä½¿ç”¨unlock()æ–¹æ³•æ¥é‡Šæ”¾é”çš„æŽ§åˆ¶æƒï¼Œå…è®¸å…¶ä»–çº¿ç¨‹è¿è¡Œè¿™ä¸ªä¸´ç•ŒåŒºã€‚å¦‚æžœä½ åœ¨ä¸´ç•ŒåŒºçš„å°¾éƒ¨æ²¡æœ‰è°ƒç”¨unlock()æ–¹æ³•ï¼Œé‚£ä¹ˆå…¶ä»–æ­£åœ¨ç­‰å¾…è¯¥ä»£ç å—çš„çº¿ç¨‹å°†ä¼šæ°¸è¿œç­‰å¾…ï¼Œé€ æˆæ­»é”æƒ…å†µã€‚å¦‚æžœä½ åœ¨ä¸´ç•ŒåŒºä½¿ç”¨try-catchä»£ç å—ï¼Œåˆ«å¿˜äº†åœ¨finallyéƒ¨åˆ†çš„å†…éƒ¨åŒ…å«unlock()æ–¹æ³•çš„ä»£ç ã€‚ tryLock()LockæŽ¥å£ï¼ˆå’ŒReentrantLockç±»ï¼Œä»¥åŠåŽé¢è¦è®²çš„ReadWriteLockæŽ¥å£å’ŒReentrantReadWriteLockç±»ï¼‰åŒ…å«å…¶ä»–æ–¹æ³•æ¥èŽ·å–é”çš„æŽ§åˆ¶æƒï¼Œé‚£å°±æ˜¯tryLock()æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•ä¸Žlock()æ–¹æ³•çš„æœ€å¤§åŒºåˆ«æ˜¯ï¼Œå¦‚æžœä¸€ä¸ªçº¿ç¨‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¸èƒ½èŽ·å–LockæŽ¥å£çš„æŽ§åˆ¶æƒæ—¶ï¼Œå°†ä¼šç«‹å³è¿”å›žå¹¶ä¸”ä¸ä¼šä½¿è¿™ä¸ªçº¿ç¨‹è¿›å…¥ç¡çœ ã€‚è¿™ä¸ªæ–¹æ³•è¿”å›žä¸€ä¸ªbooleanå€¼ï¼Œtrueè¡¨ç¤ºè¿™ä¸ªçº¿ç¨‹èŽ·å–äº†é”çš„æŽ§åˆ¶æƒï¼Œfalseåˆ™è¡¨ç¤ºæ²¡æœ‰ã€‚ å°çŸ¥è¯†:é¢„å…ˆè€ƒè™‘åˆ°tryLock()æ–¹æ³•çš„ç»“æžœï¼Œå¹¶é‡‡å–ç›¸åº”çš„æŽªæ–½ï¼Œè¿™æ˜¯ç¨‹åºå‘˜çš„è´£ä»»ã€‚å¦‚æžœè¿™ä¸ªæ–¹æ³•è¿”å›žfalseå€¼ï¼Œé¢„è®¡ä½ çš„ç¨‹åºä¸ä¼šæ‰§è¡Œè¿™ä¸ªä¸´ç•ŒåŒºã€‚å¦‚æžœæ˜¯è¿™æ ·ï¼Œä½ åº”è¯¥é’ˆå¯¹æ­¤é”™è¯¯ç»“æžœåšç›¸åº”çš„å¤„ç†ã€‚ ReentrantLockç±»ä¹Ÿå…è®¸é€’å½’è°ƒç”¨ï¼ˆé”çš„å¯é‡å…¥æ€§ï¼‰ï¼Œå½“ä¸€ä¸ªçº¿ç¨‹æœ‰é”çš„æŽ§åˆ¶æƒå¹¶ä¸”ä½¿ç”¨é€’å½’è°ƒç”¨ï¼Œå®ƒå»¶ç»­äº†é”çš„æŽ§åˆ¶æƒï¼Œæ‰€ä»¥è°ƒç”¨lock()æ–¹æ³•å°†ä¼šç«‹å³è¿”å›žå¹¶ä¸”ç»§ç»­é€’å½’è°ƒç”¨çš„æ‰§è¡Œã€‚ lockInterruptibly()lockInterruptibly()æ˜¯Lockæä¾›çš„å¦ä¸€ä¸ªç”¨æ¥èŽ·å–é”çš„æŽ§åˆ¶æƒçš„æ–¹æ³•ã€‚å®ƒå¯ä»¥ç«‹å³å“åº”çº¿ç¨‹çš„interrupt,ä¸ä¼¦å½“å‰çº¿ç¨‹æ˜¯åœ¨ç­‰å¾…é”çš„æœŸé—´æˆ–æ˜¯åœ¨å·²ç»èŽ·å–é”çš„æŽ§åˆ¶æƒæœŸé—´ã€‚lock()ç›¸æ¯”äºŽlockInterruptibly()æ¥è¯´æ²¡æœ‰é‚£ä¹ˆåŠæ—¶ï¼Œå®ƒè¦åœ¨èŽ·å–é”çš„é‚£ä¸€åˆ»æ‰èƒ½å“åº”çº¿ç¨‹çš„interruptäº‹ä»¶ã€‚ ä½¿ç”¨è¯»/å†™é”åŒæ­¥æ•°æ®è®¿é—®é”æ‰€æä¾›çš„æœ€é‡è¦çš„æ”¹è¿›ä¹‹ä¸€å°±æ˜¯ReadWriteLockæŽ¥å£å’Œå”¯ä¸€ä¸€ä¸ªå®žçŽ°å®ƒçš„ReentrantReadWriteLockç±»ã€‚è¿™ä¸ªç±»æä¾›ä¸¤æŠŠé”ï¼Œä¸€æŠŠç”¨äºŽè¯»æ“ä½œå’Œä¸€æŠŠç”¨äºŽå†™æ“ä½œã€‚åŒæ—¶å¯ä»¥æœ‰å¤šä¸ªçº¿ç¨‹æ‰§è¡Œè¯»æ“ä½œï¼Œä½†åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥æ‰§è¡Œå†™æ“ä½œã€‚å½“ä¸€ä¸ªçº¿ç¨‹æ­£åœ¨æ‰§è¡Œä¸€ä¸ªå†™æ“ä½œï¼Œä¸å¯èƒ½æœ‰ä»»ä½•çº¿ç¨‹æ‰§è¡Œè¯»æ“ä½œã€‚åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œä½ å°†ä¼šå­¦ä¹ å¦‚ä½•ä½¿ç”¨ReadWriteLockæŽ¥å£å®žçŽ°ä¸€ä¸ªç¨‹åºï¼Œä½¿ç”¨å®ƒæ¥æŽ§åˆ¶è®¿é—®ä¸€ä¸ªå­˜å‚¨ä¸¤ä¸ªäº§å“ä»·æ ¼çš„å¯¹è±¡ã€‚1.åˆ›å»ºPricesInfoç±»ï¼Œç”¨å®ƒæ¥å­˜å‚¨ä¸¤ä¸ªäº§å“ä»·æ ¼çš„ä¿¡æ¯ã€‚1public class PricesInfo &#123; 2.å£°æ˜Žä¸¤ä¸ªdoubleç±»åž‹çš„å±žæ€§ï¼Œåˆ†åˆ«å‘½åä¸ºprice1å’Œprice2ã€‚12private double price1;private double price2; 3.å£°æ˜Žä¸€ä¸ªåä¸ºlockçš„ReadWriteLockå¯¹è±¡ã€‚1private ReadWriteLock lock; 4.å®žçŽ°ç±»çš„æž„é€ å™¨ï¼Œåˆå§‹åŒ–è¿™ä¸‰ä¸ªå±žæ€§ã€‚å…¶ä¸­ï¼Œå¯¹äºŽlockå±žæ€§ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„ReentrantReadWriteLockå¯¹è±¡ã€‚12345public PricesInfo()&#123;price1=1.0;price2=2.0;lock=new ReentrantReadWriteLock();&#125; 5.å®žçŽ°getPrice1()æ–¹æ³•ï¼Œç”¨å®ƒæ¥è¿”å›žprice1å±žæ€§çš„å€¼ã€‚å®ƒä½¿ç”¨è¯»é”æ¥æŽ§åˆ¶è¿™ä¸ªå±žæ€§å€¼çš„è®¿é—®ã€‚123456public double getPrice1() &#123;lock.readLock().lock();double value=price1;lock.readLock().unlock();return value;&#125; 6.å®žçŽ°getPrice2()æ–¹æ³•ï¼Œç”¨å®ƒæ¥è¿”å›žprice2å±žæ€§çš„å€¼ã€‚å®ƒä½¿ç”¨è¯»é”æ¥æŽ§åˆ¶è¿™ä¸ªå±žæ€§å€¼çš„è®¿é—®ã€‚123456public double getPrice2() &#123;lock.readLock().lock();double value=price2;lock.readLock().unlock();return value;&#125; 7.å®žçŽ°setPrices()æ–¹æ³•ï¼Œç”¨æ¥å»ºç«‹è¿™ä¸¤ä¸ªå±žæ€§çš„å€¼ã€‚å®ƒä½¿ç”¨å†™é”æ¥æŽ§åˆ¶å¯¹å®ƒä»¬çš„è®¿é—®ã€‚123456public void setPrices(double price1, double price2) &#123;lock.writeLock().lock();this.price1=price1;this.price2=price2;lock.writeLock().unlock();&#125; 8.åˆ›å»ºReaderç±»ï¼Œå¹¶æŒ‡å®šå®ƒå®žçŽ°RunnableæŽ¥å£ã€‚è¿™ä¸ªç±»å®žçŽ°äº†PricesInfoç±»å±žæ€§å€¼çš„è¯»è€…ã€‚1public class Reader implements Runnable &#123; 9.å£°æ˜Žä¸€ä¸ªPricesInfoå¯¹è±¡ï¼Œå¹¶ä¸”å®žçŽ°Readerç±»çš„æž„é€ å™¨æ¥åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚1234private PricesInfo pricesInfo;public Reader (PricesInfo pricesInfo)&#123;this.pricesInfo=pricesInfo;&#125; 10.å®žçŽ°Readerç±»çš„run()æ–¹æ³•ï¼Œå®ƒè¯»å–10æ¬¡ä¸¤ä¸ªä»·æ ¼çš„å€¼ã€‚123456789@Overridepublic void run() &#123;for (int i=0; i&lt;10; i++)&#123;System.out.printf(&quot;%s: Price 1: %f\n&quot;, Thread.currentThread().getName(),pricesInfo.getPrice1());System.out.printf(&quot;%s: Price 2: %f\n&quot;, Thread.currentThread().getName(),pricesInfo.getPrice2());&#125;&#125; 11.åˆ›å»ºWriterç±»ï¼Œå¹¶æŒ‡å®šå®ƒå®žçŽ°RunnableæŽ¥å£ã€‚è¿™ä¸ªç±»å®žçŽ°äº†PricesInfoç±»å±žæ€§å€¼çš„ä¿®æ”¹è€…ã€‚1public class Writer implements Runnable &#123; 12.å£°æ˜Žä¸€ä¸ªPricesInfoå¯¹è±¡ï¼Œå¹¶ä¸”å®žçŽ°Writerç±»çš„æž„é€ å™¨æ¥åˆå§‹åŒ–è¿™ä¸ªå¯¹è±¡ã€‚1234private PricesInfo pricesInfo;public Writer(PricesInfo pricesInfo)&#123;this.pricesInfo=pricesInfo;&#125; 13.å®žçŽ°run()æ–¹æ³•ï¼Œå®ƒä¿®æ”¹äº†ä¸‰æ¬¡ä¸¤ä¸ªä»·æ ¼çš„å€¼ï¼Œå¹¶ä¸”åœ¨æ¯æ¬¡ä¿®æ”¹ä¹‹åŽç¡çœ 2ç§’ã€‚1234567891011121314@Overridepublic void run() &#123;for (int i=0; i&lt;3; i++) &#123;System.out.printf(&quot;Writer: Attempt to modify theprices.\n&quot;);pricesInfo.setPrices(Math.random()*10, Math.random()*8);System.out.printf(&quot;Writer: Prices have been modified.\n&quot;);try &#123;Thread.sleep(2);&#125; catch (InterruptedException e) &#123;e.printStackTrace();&#125;&#125;&#125; 14.é€šè¿‡åˆ›å»ºç±»åä¸ºMainï¼Œä¸”åŒ…æ‹¬mainï¼ˆï¼‰æ–¹æ³•æ¥å®žçŽ°è¿™ä¸ªç¤ºä¾‹çš„ä¸»ç±»ã€‚12public class Main &#123;public static void main(String[] args) &#123; 15.åˆ›å»ºä¸€ä¸ªPricesInfoå¯¹è±¡ã€‚1PricesInfo pricesInfo=new PricesInfo(); 16.åˆ›å»º5ä¸ªReaderå¯¹è±¡ï¼Œå¹¶ä¸”ç”¨5ä¸ªçº¿ç¨‹æ¥æ‰§è¡Œå®ƒä»¬ã€‚123456Reader readers[]=new Reader[5];Thread threadsReader[]=new Thread[5];for (int i=0; i&lt;5; i++)&#123;readers[i]=new Reader(pricesInfo);threadsReader[i]=new Thread(readers[i]);&#125; 17.åˆ›å»ºä¸€ä¸ªWriterå¯¹è±¡ï¼Œå¹¶ä¸”ç”¨çº¿ç¨‹æ¥æ‰§è¡Œå®ƒã€‚12Writer writer=new Writer(pricesInfo);Thread threadWriter=new Thread(writer); 18.å¯åŠ¨è¿™äº›çº¿ç¨‹ã€‚1234for (int i=0; i&lt;5; i++)&#123;threadsReader[i].start();&#125;threadWriter.start(); åœ¨ä»¥ä¸‹æˆªå›¾ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°æ‰§è¡Œè¿™ä¸ªä¾‹å­çš„ä¸€ä¸ªéƒ¨åˆ†è¾“å‡º: ä¿®æ”¹Lockçš„å…¬å¹³æ€§åœ¨ReentrantLockç±»å’ŒReentrantReadWriteLockç±»çš„æž„é€ å™¨ä¸­ï¼Œå…è®¸ä¸€ä¸ªåä¸ºfairçš„booleanç±»åž‹å‚æ•°ï¼Œå®ƒå…è®¸ä½ æ¥æŽ§åˆ¶è¿™äº›ç±»çš„è¡Œä¸ºã€‚é»˜è®¤å€¼ä¸º falseï¼Œè¿™å°†å¯ç”¨éžå…¬å¹³æ¨¡å¼ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…ä¸€æŠŠé”ï¼ˆReentrantLockæˆ–è€… ReentrantReadWriteLockï¼‰ï¼Œè¿™ä¸ªé”å¿…é¡»é€‰æ‹©å®ƒä»¬ä¸­é—´çš„ä¸€ä¸ªæ¥èŽ·å¾—è¿›å…¥ä¸´ç•ŒåŒºï¼Œé€‰æ‹©ä»»æ„ä¸€ä¸ªæ˜¯æ²¡æœ‰ä»»ä½•æ ‡å‡†çš„ã€‚trueå€¼å°†å¼€å¯å…¬å¹³æ¨¡å¼ã€‚åœ¨è¿™ä¸ªæ¨¡å¼ä¸­ï¼Œå½“æœ‰å¤šä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…ä¸€æŠŠé”ï¼ˆReentrantLockæˆ–è€…ReentrantReadWriteLockï¼‰ï¼Œè¿™ä¸ªé”å¿…é¡»é€‰æ‹©å®ƒä»¬ä¸­é—´çš„ä¸€ä¸ªæ¥èŽ·å¾—è¿›å…¥ä¸´ç•ŒåŒºï¼Œå®ƒå°†é€‰æ‹©ç­‰å¾…æ—¶é—´æœ€é•¿çš„çº¿ç¨‹ã€‚ç”±äºŽtryLock()æ–¹æ³•å¹¶ä¸ä¼šä½¿çº¿ç¨‹è¿›å…¥ç¡çœ ï¼Œå³ä½¿LockæŽ¥å£æ­£åœ¨è¢«ä½¿ç”¨ï¼Œè¿™ä¸ªå…¬å¹³å±žæ€§å¹¶ä¸ä¼šå½±å“å®ƒçš„åŠŸèƒ½ã€‚æ›´å¤šå…³äºŽå…¬å¹³æ¨¡å¼çš„ä»‹ç»ï¼Œè¯·ç‚¹å‡»æŸ¥é˜…ã€‚ å‚è€ƒèµ„æ–™å¹¶å‘ç¼–ç¨‹ç½‘-1å¹¶å‘ç¼–ç¨‹ç½‘-2]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¼˜ç§€èµ„æ–™æ”¶é›†]]></title>
    <url>%2F2016%2F12%2F28%2F%E4%BC%98%E7%A7%80%E8%B5%84%E6%96%99%E6%94%B6%E9%9B%86%2F</url>
    <content type="text"><![CDATA[æ‰‹åŠ¿æ£€æµ‹GestureDetector:http://www.gcssloop.com/customview/gestruedectorScaleGestureDetector:http://www.27house.cn/archives/526 Android äº‹ä»¶åˆ†å‘æœºåˆ¶ViewRootImplç¯‡ï¼ˆå‰ä¼ ï¼‰ï¼šhttps://blog.csdn.net/dongxianfei/article/details/83863888Part01:http://www.gcssloop.com/customview/dispatch-touchevent-theoryPart02:http://www.gcssloop.com/customview/dispatch-touchevent-source UML ç±»å›¾Part01:https://www.cnblogs.com/xrq730/p/5527115.htmlPart02:http://www.cnblogs.com/xrq730/p/5533019.html ä¸­æ–‡æŠ€æœ¯æ–‡æ¡£çš„å†™ä½œè§„èŒƒhttps://github.com/ruanyf/document-style-guide è®¤è¯† Android æ–‡ä»¶å­˜å‚¨ç›®å½•https://blog.csdn.net/u010937230/article/details/73303034 æ³¨æ„ï¼šæ–‡ä»¶æŒ‚è½½ç›¸å…³çš„ä¸ç”¨çœ‹ï¼Œå†™çš„æœ‰ç‚¹æ··ä¹±ã€‚ç¬”è€…è®¤ä¸ºè¿™ä¸ªéƒ¨åˆ†æ„ä¹‰ä¹Ÿä¸å¤§ï¼Œå¦‚æžœè¦äº†è§£å¯ä»¥æ‰¾ä¸‹å…¶å®ƒçš„æŠ€æœ¯æ–‡æ¡£ã€‚]]></content>
  </entry>
  <entry>
    <title><![CDATA[Javaå¹¶å‘ç¼–ç¨‹ä¹‹Synchronized]]></title>
    <url>%2F2016%2F12%2F18%2FJava%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B-Synchronized%2F</url>
    <content type="text"><![CDATA[ä»‹ç»åœ¨å¹¶å‘ç¼–ç¨‹ä¸­å‘ç”Ÿçš„æœ€å¸¸è§çš„ä¸€ç§æƒ…å†µæ˜¯è¶…è¿‡ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹ä½¿ç”¨å…±äº«èµ„æºã€‚åœ¨å¹¶å‘åº”ç”¨ç¨‹åºä¸­ï¼Œå¤šä¸ªçº¿ç¨‹è¯»æˆ–å†™ç›¸åŒçš„æ•°æ®æˆ–è®¿é—®åŒä¸€æ–‡ä»¶æˆ–æ•°æ®åº“è¿žæŽ¥è¿™æ˜¯æ­£å¸¸çš„ã€‚è¿™äº›å…±äº«èµ„æºä¼šå¼•å‘é”™è¯¯æˆ–æ•°æ®ä¸ä¸€è‡´çš„æƒ…å†µï¼Œæˆ‘ä»¬å¿…é¡»é€šè¿‡åŒæ­¥æœºåˆ¶æ¥é¿å…è¿™äº›é”™è¯¯ã€‚è§£å†³è¿™äº›é—®é¢˜ä»Žä¸´ç•ŒåŒºçš„æ¦‚å¿µå¼€å§‹ã€‚ä¸´ç•ŒåŒºæ˜¯è®¿é—®ä¸€ä¸ªå…±äº«èµ„æºåœ¨åŒä¸€æ—¶é—´ä¸èƒ½è¢«è¶…è¿‡ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œçš„ä»£ç å—ã€‚Java(å’Œå‡ ä¹Žæ‰€æœ‰çš„ç¼–ç¨‹è¯­è¨€)æä¾›åŒæ­¥æœºåˆ¶ï¼Œå¸®åŠ©ç¨‹åºå‘˜å®žçŽ°ä¸´ç•ŒåŒºã€‚å½“ä¸€ä¸ªçº¿ç¨‹æƒ³è¦è®¿é—®ä¸€ä¸ªä¸´ç•ŒåŒº,å®ƒä½¿ç”¨å…¶ä¸­çš„ä¸€ä¸ªåŒæ­¥æœºåˆ¶æ¥æ‰¾å‡ºæ˜¯å¦æœ‰ä»»ä½•å…¶ä»–çº¿ç¨‹æ‰§è¡Œä¸´ç•ŒåŒºã€‚å¦‚æžœæ²¡æœ‰ï¼Œè¿™ä¸ªçº¿ç¨‹å°±è¿›å…¥ä¸´ç•ŒåŒºã€‚å¦åˆ™ï¼Œè¿™ä¸ªçº¿ç¨‹é€šè¿‡åŒæ­¥æœºåˆ¶æš‚åœç›´åˆ°å¦ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œå®Œä¸´ç•ŒåŒºã€‚å½“å¤šä¸ªçº¿ç¨‹æ­£åœ¨ç­‰å¾…ä¸€ä¸ªçº¿ç¨‹å®Œæˆæ‰§è¡Œçš„ä¸€ä¸ªä¸´ç•ŒåŒºï¼ŒJVMé€‰æ‹©å…¶ä¸­ä¸€ä¸ªçº¿ç¨‹æ‰§è¡Œï¼Œå…¶ä½™çš„çº¿ç¨‹ä¼šç­‰å¾…ç›´åˆ°è½®åˆ°å®ƒä»¬ã€‚è¿™ä¸ªç³»åˆ—çš„æ–‡ç« å°†é€ä¸€ä»‹ç»Javaæä¾›çš„å‡ ä¸ªåŒæ­¥æœºåˆ¶ï¼šSynchronizedã€Lockã€Automicå’ŒVolatileã€‚Synchronizedå¯ä»¥æ ‡è®°ä»¥ä¸‹å››ç§ç±»åž‹çš„ä»£ç åŒºåŸŸï¼š Instance methodsï¼ˆæ™®é€šæ–¹æ³•ï¼‰ Static methodsï¼ˆé™æ€æ–¹æ³•ï¼‰ Code blocks inside instance methodsï¼ˆæ™®é€šæ–¹æ³•å†…çš„ä»£ç å¿«ï¼‰ Code blocks inside static methodsï¼ˆé™æ€æ–¹æ³•å†…çš„ä»£ç å¿«) æ™®é€šåŒæ­¥æ–¹æ³•ä¸‹é¢æ˜¯ä¸€ä¸ªæ™®é€šçš„åŒæ­¥æ–¹æ³•ã€‚123public synchronized void add(int value)&#123;this.count += value;&#125; å¦‚æžœæ­¤æ—¶Açº¿ç¨‹å’ŒBçº¿ç¨‹åŒæ—¶å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„addæ–¹æ³•è®¿é—®ï¼Œé‚£ä¹ˆåªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹ï¼ˆå‡è®¾æ˜¯Açº¿ç¨‹ï¼‰èƒ½å¤Ÿè¿›å…¥æ–¹æ³•ä½“å†…èŽ·å¾—é”èµ„æºï¼Œæ­¤æ—¶Bçº¿ç¨‹åªèƒ½ç­‰å¾…Açº¿ç¨‹æ‰§è¡Œå®Œæ–¹æ³•ä½“åŽï¼ˆé‡Šæ”¾é”èµ„æºï¼‰æ‰èƒ½æ‰§è¡Œaddæ–¹æ³•ä½“ä¸­çš„ä»£ç ã€‚æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œåœ¨åŒä¸€æ—¶åˆ»åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹èƒ½å¯¹åŒä¸€ä¸ªå¯¹è±¡çš„synchronizedæ–¹æ³•è¿›è¡Œè®¿é—®ã€‚å¦‚æžœä¸€ä¸ªçº¿ç¨‹Aæ­£åœ¨æ‰§è¡Œä¸€ä¸ªsynchronizedæ–¹æ³•ï¼Œè€Œçº¿ç¨‹Bæƒ³è¦æ‰§è¡ŒåŒä¸ªå®žä¾‹å¯¹è±¡çš„éžé™æ€synchronizedæ–¹æ³•ï¼Œå®ƒå°†é˜»å¡žï¼Œç›´åˆ°çº¿ç¨‹Aæ‰§è¡Œå®Œã€‚ä½†æ˜¯å¦‚æžœçº¿ç¨‹Bè®¿é—®ç›¸åŒç±»çš„ä¸åŒå®žä¾‹å¯¹è±¡ï¼Œå®ƒä»¬éƒ½ä¸ä¼šè¢«é˜»å¡žã€‚ å†æ·±å…¥ä¸€ç‚¹ï¼šCPUä»Žä¸»å†…å­˜ä¸­è¯»æ•°æ®çš„æ•ˆçŽ‡ç›¸å¯¹æ¥è¯´ä¸é«˜ï¼ŒçŽ°åœ¨ä¸»æµçš„è®¡ç®—æœºä¸­ï¼Œéƒ½æœ‰å‡ çº§ç¼“å­˜ã€‚æ¯ä¸ªçº¿ç¨‹è¯»å–å…±äº«å˜é‡æ—¶ï¼Œéƒ½ä¼šå°†è¯¥å˜é‡åŠ è½½è¿›å…¶å¯¹åº”CPUçš„é«˜é€Ÿç¼“å­˜é‡Œï¼Œä¿®æ”¹è¯¥å˜é‡åŽï¼ŒCPUä¼šç«‹å³æ›´æ–°è¯¥ç¼“å­˜ï¼Œä½†å¹¶ä¸ä¸€å®šä¼šç«‹å³å°†å…¶å†™å›žä¸»å†…å­˜ï¼ˆå®žé™…ä¸Šå†™å›žä¸»å†…å­˜çš„æ—¶é—´ä¸å¯é¢„æœŸï¼‰ã€‚æ­¤æ—¶å…¶å®ƒçº¿ç¨‹ï¼ˆå°¤å…¶æ˜¯ä¸åœ¨åŒä¸€ä¸ªCPUä¸Šæ‰§è¡Œçš„çº¿ç¨‹ï¼‰è®¿é—®è¯¥å˜é‡æ—¶ï¼Œä»Žä¸»å†…å­˜ä¸­è¯»åˆ°çš„å°±æ˜¯æ—§çš„æ•°æ®ï¼Œè€Œéžç¬¬ä¸€ä¸ªçº¿ç¨‹æ›´æ–°åŽçš„æ•°æ®ã€‚ é™æ€åŒæ­¥æ–¹æ³•123public static synchronized void add(int value)&#123;count += value;&#125; ä¸Žæ™®é€šåŒæ­¥æ–¹æ³•ä¸åŒï¼Œé™æ€åŒæ­¥æ–¹æ³•ä¿®é¥°çš„å¯¹è±¡æ˜¯æ•´ä¸ªclasså¯¹è±¡ã€‚åªæœ‰ä¸€ä¸ªæ‰§è¡Œçº¿ç¨‹èƒ½è®¿é—®è¢«synchronizedå…³é”®å­—å£°æ˜Žçš„é™æ€æ–¹æ³•ï¼Œä½†å¦ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®è¯¥ç±»çš„ä¸€ä¸ªå¯¹è±¡ä¸­çš„å…¶ä»–éžé™æ€çš„æ–¹æ³•ã€‚ä½ å¿…é¡»éžå¸¸å°å¿ƒè¿™ä¸€ç‚¹ï¼Œå› ä¸ºä¸¤ä¸ªçº¿ç¨‹å¯ä»¥è®¿é—®ä¸¤ä¸ªä¸åŒçš„åŒæ­¥æ–¹æ³•ï¼Œå¦‚æžœå…¶ä¸­ä¸€ä¸ªæ˜¯é™æ€çš„è€Œå¦ä¸€ä¸ªä¸æ˜¯ã€‚å¦‚æžœè¿™ä¸¤ç§æ–¹æ³•æ”¹å˜ç›¸åŒçš„æ•°æ®,ä½ å°†ä¼šæœ‰æ•°æ®ä¸ä¸€è‡´çš„é”™è¯¯ã€‚ æ™®é€šæ–¹æ³•ä¸­çš„åŒæ­¥å—123456public void log2(String msg1, String msg2)&#123;synchronized(this)&#123;log.writeln(msg1);log.writeln(msg2);&#125;&#125; è¿™æ ·è°ƒç”¨å’Œæ™®é€šåŒæ­¥æ–¹æ³•å®žçŽ°çš„æ•ˆæžœå…¶å®žæ˜¯ä¸€æ ·çš„ã€‚æ³¨æ„åˆ°â€œthisâ€å­—æ®µæ˜¯ä¸€ä¸ªMonitorå¯¹è±¡ï¼Œå®ƒå’Œæ™®é€šåŒæ­¥æ–¹æ³•ä¸­é”å®šçš„å¯¹è±¡æ˜¯ä¸€ä¸ªæ¦‚å¿µã€‚ å°çŸ¥è¯†ï¼šå¼•ç”¨ç»´åŸºç™¾ç§‘çš„è¯´æ³•ï¼Œmonitoræ˜¯ä¸€ç§çº¿ç¨‹å®‰å…¨çš„class,objectæˆ–è€…moduleï¼Œå³monitorå…è®¸å¤šä¸ªçº¿ç¨‹åŒæ—¶è®¿é—®å…¶å†…çš„æ–¹æ³•æˆ–è€…å±žæ€§è€Œä¸ä¼šå‡ºçŽ°äºŒä¹‰æ€§ã€‚ é™æ€æ–¹æ³•ä¸­çš„åŒæ­¥å—123456public static void log2(String msg1, String msg2)&#123;synchronized(MyClass.class)&#123;log.writeln(msg1);log.writeln(msg2);&#125;&#125; é”çš„åˆ†ç±»ä»¥ä¸Šå†…å®¹å°±æ˜¯å¯¹Synchronizedå…³é”®å­—ä½¿ç”¨å’Œè§¦å‘åœºæ™¯çš„ä»‹ç»ï¼Œä¸‹é¢å†ä»Žå®è§‚ä¸Šä»‹ç»ä¸€ä¸‹å…³äºŽé”çš„åˆ†ç±»ï¼šï¼ˆ*ï¼‰åå‘é”ã€è½»é‡é”ã€é‡é‡é”ã€‚åå‘é”ï¼Œé¡¾åæ€ä¹‰ï¼Œå®ƒä¼šåå‘äºŽç¬¬ä¸€ä¸ªè®¿é—®é”çš„çº¿ç¨‹ï¼Œå¦‚æžœåœ¨æŽ¥ä¸‹æ¥çš„è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¯¥é”æ²¡æœ‰è¢«å…¶ä»–çš„çº¿ç¨‹è®¿é—®ï¼Œåˆ™æŒæœ‰åå‘é”çš„çº¿ç¨‹å°†æ°¸è¿œä¸éœ€è¦è§¦å‘åŒæ­¥ã€‚å¦‚æžœåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œé‡åˆ°äº†å…¶ä»–çº¿ç¨‹æŠ¢å é”ï¼ŒJVMä¼šå°è¯•æ¶ˆé™¤å®ƒèº«ä¸Šçš„åå‘é”ï¼Œå°†é”æ¢å¤åˆ°æ ‡å‡†çš„è½»é‡çº§é”ã€‚åå‘é”åªèƒ½åœ¨å•çº¿ç¨‹ä¸‹èµ·ä½œç”¨,ä¸»è¦è§£å†³æ— ç«žäº‰ä¸‹çš„é”æ€§èƒ½é—®é¢˜ã€‚ æˆ‘ä»¬çœ‹ä¸‹æ— ç«žäº‰ä¸‹é”å­˜åœ¨ä»€ä¹ˆé—®é¢˜:æŒ‰ç…§ä¹‹å‰çš„HotSpotè®¾è®¡ï¼Œæ¯æ¬¡åŠ é”/è§£é”éƒ½ä¼šæ¶‰åŠåˆ°ä¸€äº›CASæ“ä½œï¼ˆæ¯”å¦‚å¯¹ç­‰å¾…é˜Ÿåˆ—çš„CASæ“ä½œï¼‰ï¼ŒCASæ“ä½œä¼šå»¶è¿Ÿæœ¬åœ°è°ƒç”¨ï¼Œå› æ­¤åå‘é”çš„æƒ³æ³•æ˜¯ä¸€æ—¦çº¿ç¨‹ç¬¬ä¸€æ¬¡èŽ·å¾—äº†ç›‘è§†å¯¹è±¡ï¼Œä¹‹åŽè®©ç›‘è§†å¯¹è±¡â€œåå‘â€è¿™ä¸ªçº¿ç¨‹ï¼Œä¹‹åŽçš„å¤šæ¬¡è°ƒç”¨åˆ™å¯ä»¥é¿å…CASæ“ä½œï¼Œè¯´ç™½äº†å°±æ˜¯ç½®ä¸ªå˜é‡ï¼Œå¦‚æžœå‘çŽ°ä¸ºtrueåˆ™æ— éœ€å†èµ°å„ç§åŠ é”/è§£é”æµç¨‹ã€‚é”æ¼”å˜çš„æµç¨‹æ˜¯è¿™æ ·çš„ï¼šåå‘é”-&gt;è½»é‡çº§é”-&gt;é‡é‡çº§é”ã€‚ çº¿ç¨‹é€šä¿¡ï¼ˆwaitã€notifyã€notifyAllï¼‰å½“ä¸€ä¸ªçº¿ç¨‹è¿›å…¥waitä¹‹åŽï¼Œå°±å¿…é¡»ç­‰å…¶ä»–çº¿ç¨‹notify/notifyall,ä½¿ç”¨notifyall,å¯ä»¥å”¤é†’æ‰€æœ‰å¤„äºŽwaitçŠ¶æ€çš„çº¿ç¨‹ï¼Œä½¿å…¶é‡æ–°è¿›å…¥é”çš„äº‰å¤ºé˜Ÿåˆ—ä¸­ï¼Œè€Œnotifyåªèƒ½å”¤é†’ä¸€ä¸ªã€‚æ³¨æ„ï¼Œä»»ä½•æ—¶å€™åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥èŽ·å¾—é”ï¼Œä¹Ÿå°±æ˜¯è¯´åªæœ‰ä¸€ä¸ªçº¿ç¨‹å¯ä»¥è¿è¡Œsynchronizedä¸­çš„ä»£ç ï¼Œnotifyallåªæ˜¯è®©å¤„äºŽwaitçš„çº¿ç¨‹é‡æ–°æ‹¥æœ‰é”çš„äº‰å¤ºæƒï¼Œä½†æ˜¯åªä¼šæœ‰ä¸€ä¸ªèŽ·å¾—é”å¹¶æ‰§è¡Œã€‚ æ³¨æ„ï¼šwaitã€notifyã€notifyAllå¿…é¡»éƒ½åœ¨åŒæ­¥å—ä¸­è°ƒç”¨ï¼Œå¦è€…ä¼šæŠ›å‡ºIllegalMonitorStateExceptionå¼‚å¸¸ã€‚ æ·±å…¥äº†è§£notifyä¸ŽnotifyAllçš„åŒºåˆ«å…ˆè¯´ä¸¤ä¸ªæ¦‚å¿µï¼šé”æ± å’Œç­‰å¾…æ± ã€‚é”æ± :å‡è®¾çº¿ç¨‹Aå·²ç»æ‹¥æœ‰äº†æŸä¸ªå¯¹è±¡(æ³¨æ„:ä¸æ˜¯ç±»)çš„é”ï¼Œè€Œå…¶å®ƒçš„çº¿ç¨‹æƒ³è¦è°ƒç”¨è¿™ä¸ªå¯¹è±¡çš„æŸä¸ªsynchronizedæ–¹æ³•(æˆ–è€…synchronizedå—)ï¼Œç”±äºŽè¿™äº›çº¿ç¨‹åœ¨è¿›å…¥å¯¹è±¡çš„synchronizedæ–¹æ³•ä¹‹å‰å¿…é¡»å…ˆèŽ·å¾—è¯¥å¯¹è±¡çš„é”çš„æ‹¥æœ‰æƒï¼Œä½†æ˜¯è¯¥å¯¹è±¡çš„é”ç›®å‰æ­£è¢«çº¿ç¨‹Aæ‹¥æœ‰ï¼Œæ‰€ä»¥è¿™äº›çº¿ç¨‹å°±è¿›å…¥äº†è¯¥å¯¹è±¡çš„é”æ± ä¸­ã€‚ç­‰å¾…æ± :å‡è®¾ä¸€ä¸ªçº¿ç¨‹Aè°ƒç”¨äº†æŸä¸ªå¯¹è±¡çš„wait()æ–¹æ³•ï¼Œçº¿ç¨‹Aå°±ä¼šé‡Šæ”¾è¯¥å¯¹è±¡çš„é”åŽï¼Œè¿›å…¥åˆ°äº†è¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ã€‚ç„¶åŽå†æ¥è¯´notifyå’ŒnotifyAllçš„åŒºåˆ«ã€‚ å¦‚æžœçº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„wait()æ–¹æ³•ï¼Œé‚£ä¹ˆçº¿ç¨‹ä¾¿ä¼šå¤„äºŽè¯¥å¯¹è±¡çš„ç­‰å¾…æ± ä¸­ï¼Œç­‰å¾…æ± ä¸­çš„çº¿ç¨‹ä¸ä¼šåŽ»ç«žäº‰è¯¥å¯¹è±¡çš„é”ã€‚ å½“æœ‰çº¿ç¨‹è°ƒç”¨äº†å¯¹è±¡çš„notifyAll()æ–¹æ³•ï¼ˆå”¤é†’æ‰€æœ‰waitçº¿ç¨‹æˆ–notify()æ–¹æ³•ï¼ˆåªéšæœºå”¤é†’ä¸€ä¸ª wait çº¿ç¨‹ï¼‰ï¼Œè¢«å”¤é†’çš„çš„çº¿ç¨‹ä¾¿ä¼šè¿›å…¥è¯¥å¯¹è±¡çš„é”æ± ä¸­ï¼Œé”æ± ä¸­çš„çº¿ç¨‹ä¼šåŽ»ç«žäº‰è¯¥å¯¹è±¡é”ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œè°ƒç”¨äº†notifyåŽåªè¦ä¸€ä¸ªçº¿ç¨‹ä¼šç”±ç­‰å¾…æ± è¿›å…¥é”æ± ï¼Œè€ŒnotifyAllä¼šå°†è¯¥å¯¹è±¡ç­‰å¾…æ± å†…çš„æ‰€æœ‰çº¿ç¨‹ç§»åŠ¨åˆ°é”æ± ä¸­ï¼Œç­‰å¾…é”ç«žäº‰ã€‚ ä¼˜å…ˆçº§é«˜çš„çº¿ç¨‹ç«žäº‰åˆ°å¯¹è±¡é”çš„æ¦‚çŽ‡å¤§ï¼Œå‡è‹¥æŸçº¿ç¨‹æ²¡æœ‰ç«žäº‰åˆ°è¯¥å¯¹è±¡é”ï¼Œå®ƒè¿˜ä¼šç•™åœ¨é”æ± ä¸­ï¼Œå”¯æœ‰çº¿ç¨‹å†æ¬¡è°ƒç”¨wait()æ–¹æ³•ï¼Œå®ƒæ‰ä¼šé‡æ–°å›žåˆ°ç­‰å¾…æ± ä¸­ã€‚è€Œç«žäº‰åˆ°å¯¹è±¡é”çš„çº¿ç¨‹åˆ™ç»§ç»­å¾€ä¸‹æ‰§è¡Œï¼Œç›´åˆ°æ‰§è¡Œå®Œäº†synchronizedä»£ç å—ï¼Œå®ƒä¼šé‡Šæ”¾æŽ‰è¯¥å¯¹è±¡é”ï¼Œè¿™æ—¶é”æ± ä¸­çš„çº¿ç¨‹ä¼šç»§ç»­ç«žäº‰è¯¥å¯¹è±¡é”ã€‚ ç»¼ä¸Šï¼Œæ‰€è°“å”¤é†’çº¿ç¨‹ï¼Œå¦ä¸€ç§è§£é‡Šå¯ä»¥è¯´æ˜¯å°†çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åŠ¨åˆ°é”æ± ï¼ŒnotifyAllè°ƒç”¨åŽï¼Œä¼šå°†å…¨éƒ¨çº¿ç¨‹ç”±ç­‰å¾…æ± ç§»åˆ°é”æ± ï¼Œç„¶åŽå‚ä¸Žé”çš„ç«žäº‰ï¼Œç«žäº‰æˆåŠŸåˆ™ç»§ç»­æ‰§è¡Œï¼Œå¦‚æžœä¸æˆåŠŸåˆ™ç•™åœ¨é”æ± ç­‰å¾…é”è¢«é‡Šæ”¾åŽå†æ¬¡å‚ä¸Žç«žäº‰ã€‚è€Œnotifyåªä¼šå”¤é†’ä¸€ä¸ªçº¿ç¨‹ã€‚ å¦‚ä½•é¿å…æ­»é”åœ¨å¤šçº¿ç¨‹åŒæ­¥æœºåˆ¶ä¸­ï¼Œè¯•æƒ³ä¸€ä¸‹ä¼šä¸ä¼šå‡ºçŽ°çº¿ç¨‹1å’Œçº¿ç¨‹2äº’ç›¸éœ€è¦å¯¹æ–¹æ‰€æŒæœ‰çš„é”çš„æƒ…å†µå‘¢ï¼Ÿç­”æ¡ˆæ˜¯è‚¯å®šçš„ï¼Œè¿™å°±æ˜¯æ­»é”ã€‚æˆ‘ä»¬è¦é¿å…æ­»é”ï¼Œéœ€ä»Žä»¥ä¸‹ä¸‰ä¸ªæ–¹é¢å…¥æ‰‹ï¼š1.åŠ é”é¡ºåº2.åŠ é”æ—¶é™3.æ­»é”æ£€æµ‹ åŠ é”é¡ºåºå½“å¤šä¸ªçº¿ç¨‹éœ€è¦ç›¸åŒçš„ä¸€äº›é”ï¼Œä½†æ˜¯æŒ‰ç…§ä¸åŒçš„é¡ºåºåŠ é”ï¼Œæ­»é”å°±å¾ˆå®¹æ˜“å‘ç”Ÿã€‚å¦‚æžœèƒ½ç¡®ä¿æ‰€æœ‰çš„çº¿ç¨‹éƒ½æ˜¯æŒ‰ç…§ç›¸åŒçš„é¡ºåºèŽ·å¾—é”ï¼Œé‚£ä¹ˆæ­»é”å°±ä¸ä¼šå‘ç”Ÿã€‚ åŠ é”æ—¶é™å¦å¤–ä¸€ä¸ªå¯ä»¥é¿å…æ­»é”çš„æ–¹æ³•æ˜¯åœ¨å°è¯•èŽ·å–é”çš„æ—¶å€™åŠ ä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€åœ¨å°è¯•èŽ·å–é”çš„è¿‡ç¨‹ä¸­è‹¥è¶…è¿‡äº†è¿™ä¸ªæ—¶é™è¯¥çº¿ç¨‹åˆ™æ”¾å¼ƒå¯¹è¯¥é”è¯·æ±‚ã€‚è‹¥ä¸€ä¸ªçº¿ç¨‹æ²¡æœ‰åœ¨ç»™å®šçš„æ—¶é™å†…æˆåŠŸèŽ·å¾—æ‰€æœ‰éœ€è¦çš„é”ï¼Œåˆ™ä¼šè¿›è¡Œå›žé€€å¹¶é‡Šæ”¾æ‰€æœ‰å·²ç»èŽ·å¾—çš„é”ï¼Œç„¶åŽç­‰å¾…ä¸€æ®µéšæœºçš„æ—¶é—´å†é‡è¯•ã€‚è¿™æ®µéšæœºçš„ç­‰å¾…æ—¶é—´è®©å…¶å®ƒçº¿ç¨‹æœ‰æœºä¼šå°è¯•èŽ·å–ç›¸åŒçš„è¿™äº›é”ï¼Œå¹¶ä¸”è®©è¯¥åº”ç”¨åœ¨æ²¡æœ‰èŽ·å¾—é”çš„æ—¶å€™å¯ä»¥ç»§ç»­è¿è¡Œã€‚è¿™ç§æœºåˆ¶å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨Javaä¸­ä¸èƒ½å¯¹synchronizedåŒæ­¥å—è®¾ç½®è¶…æ—¶æ—¶é—´ã€‚ä½ éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰é”ï¼Œæˆ–ä½¿ç”¨Java5ä¸­java.util.concurrentåŒ…ä¸‹çš„å·¥å…·ã€‚ æ­»é”æ£€æµ‹æ­»é”æ£€æµ‹æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ­»é”é¢„é˜²æœºåˆ¶ï¼Œå®ƒä¸»è¦æ˜¯é’ˆå¯¹é‚£äº›ä¸å¯èƒ½å®žçŽ°æŒ‰åºåŠ é”å¹¶ä¸”é”è¶…æ—¶ä¹Ÿä¸å¯è¡Œçš„åœºæ™¯ã€‚æ¯å½“ä¸€ä¸ªçº¿ç¨‹èŽ·å¾—äº†é”ï¼Œä¼šåœ¨çº¿ç¨‹å’Œé”ç›¸å…³çš„æ•°æ®ç»“æž„ä¸­ï¼ˆmapã€graphç­‰ç­‰ï¼‰å°†å…¶è®°ä¸‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œæ¯å½“æœ‰çº¿ç¨‹è¯·æ±‚é”ï¼Œä¹Ÿéœ€è¦è®°å½•åœ¨è¿™ä¸ªæ•°æ®ç»“æž„ä¸­ã€‚å½“ä¸€ä¸ªçº¿ç¨‹è¯·æ±‚é”å¤±è´¥æ—¶ï¼Œè¿™ä¸ªçº¿ç¨‹å¯ä»¥éåŽ†é”çš„å…³ç³»å›¾çœ‹çœ‹æ˜¯å¦æœ‰æ­»é”å‘ç”Ÿã€‚ä¾‹å¦‚ï¼Œçº¿ç¨‹Aè¯·æ±‚é”7ï¼Œä½†æ˜¯é”7è¿™ä¸ªæ—¶å€™è¢«çº¿ç¨‹BæŒæœ‰ï¼Œè¿™æ—¶çº¿ç¨‹Aå°±å¯ä»¥æ£€æŸ¥ä¸€ä¸‹çº¿ç¨‹Bæ˜¯å¦å·²ç»è¯·æ±‚äº†çº¿ç¨‹Aå½“å‰æ‰€æŒæœ‰çš„é”ã€‚å¦‚æžœçº¿ç¨‹Bç¡®å®žæœ‰è¿™æ ·çš„è¯·æ±‚ï¼Œé‚£ä¹ˆå°±æ˜¯å‘ç”Ÿäº†æ­»é”ï¼ˆçº¿ç¨‹Aæ‹¥æœ‰é”1ï¼Œè¯·æ±‚é”7ï¼›çº¿ç¨‹Bæ‹¥æœ‰é”7ï¼Œè¯·æ±‚é”1ï¼‰ã€‚é‚£ä¹ˆå½“æ£€æµ‹å‡ºæ­»é”æ—¶ï¼Œè¿™äº›çº¿ç¨‹è¯¥åšäº›ä»€ä¹ˆå‘¢ï¼Ÿä¸€ä¸ªå¯è¡Œçš„åšæ³•æ˜¯é‡Šæ”¾æ‰€æœ‰é”ï¼Œå›žé€€ï¼Œå¹¶ä¸”ç­‰å¾…ä¸€æ®µéšæœºçš„æ—¶é—´åŽé‡è¯•ã€‚è¿™ä¸ªå’Œç®€å•çš„åŠ é”è¶…æ—¶ç±»ä¼¼ï¼Œä¸ä¸€æ ·çš„æ˜¯åªæœ‰æ­»é”å·²ç»å‘ç”Ÿäº†æ‰å›žé€€ï¼Œè€Œä¸ä¼šæ˜¯å› ä¸ºåŠ é”çš„è¯·æ±‚è¶…æ—¶äº†ã€‚è™½ç„¶æœ‰å›žé€€å’Œç­‰å¾…ï¼Œä½†æ˜¯å¦‚æžœæœ‰å¤§é‡çš„çº¿ç¨‹ç«žäº‰åŒä¸€æ‰¹é”ï¼Œå®ƒä»¬è¿˜æ˜¯ä¼šé‡å¤åœ°æ­»é”ã€‚ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆæ˜¯ç»™è¿™äº›çº¿ç¨‹è®¾ç½®ä¼˜å…ˆçº§ï¼Œè®©ä¸€ä¸ªï¼ˆæˆ–å‡ ä¸ªï¼‰çº¿ç¨‹å›žé€€ï¼Œå‰©ä¸‹çš„çº¿ç¨‹å°±åƒæ²¡å‘ç”Ÿæ­»é”ä¸€æ ·ç»§ç»­ä¿æŒç€å®ƒä»¬éœ€è¦çš„é”ã€‚å¦‚æžœèµ‹äºˆè¿™äº›çº¿ç¨‹çš„ä¼˜å…ˆçº§æ˜¯å›ºå®šä¸å˜çš„ï¼ŒåŒä¸€æ‰¹çº¿ç¨‹æ€»æ˜¯ä¼šæ‹¥æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ä¸ºé¿å…è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥åœ¨æ­»é”å‘ç”Ÿçš„æ—¶å€™è®¾ç½®éšæœºçš„ä¼˜å…ˆçº§ã€‚ å‚è€ƒèµ„æ–™1.å¹¶å‘ç¼–ç¨‹ç½‘2.Java Synchronized Blocks3.javaä¸­çš„notifyå’ŒnotifyAllæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ4.é¿å…æ­»é”]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>å¹¶å‘ç¼–ç¨‹</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Javaæ­£åˆ™è¡¨è¾¾å¼è¯¦è§£]]></title>
    <url>%2F2016%2F11%2F10%2FJava%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%AF%A6%E8%A7%A3%2F</url>
    <content type="text"><![CDATA[ä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼ŸèŠ‚çœä»£ç ï¼Œçˆ±æŠ¤é˜Ÿå‹ã€‚ åœ¨æ­£å¼ä»‹ç»ä¹‹å‰ï¼Œå…ˆè´´ä¸€æ®µä½¿ç”¨äº†æ­£åˆ™è¡¨è¾¾å¼çš„ä»£ç å§ã€‚12345String phoneNum = &quot;16510758936&quot;;String patternString = &quot;\\d&#123;11&#125;&quot;;Pattern pattern = Pattern.compile(patternString);Matcher matcher = pattern.matcher(phoneNum);System.out.println(&quot;matches = &quot;+matcher.matches()); ä»…è¿™æ®µä»£ç å°±å¯ä»¥ç®€å•åˆ¤æ–­å­—ç¬¦ä¸²ï¼ˆä»£ç ä¸­çš„â€œphoneNumâ€å­—ç¬¦ä¸²ï¼‰æ˜¯å¦ä¸ºæ‰‹æœºå·æ ¼å¼ã€‚æ˜¯ä¸æ˜¯å¾ˆé«˜æ•ˆå‘¢ï¼Ÿäº‹å®žä¸Šæ­£åˆ™è¡¨è¾¾å¼è¿˜å¯ä»¥åšå¾ˆå¤šå¾ˆé…·çš„äº‹æƒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬å¾ˆæœ‰å¿…è¦è®¤çœŸçš„å­¦ä¸€ä¸‹å®ƒã€‚æœ¬æ–‡å°†ä»ŽAPIã€è¯­æ³•ä¸¤ä¸ªç»´åº¦ä»‹ç»è¯¥ä¸»é¢˜ã€‚ APIä½¿ç”¨ç±» java.util.regex.Pattern ç®€ç§° Pattern, æ˜¯Javaæ­£åˆ™è¡¨è¾¾å¼APIä¸­çš„ä¸»è¦å…¥å£ï¼Œæ— è®ºä½•æ—¶,éœ€è¦ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼,ä»ŽPattern ç±»å¼€å§‹ Pattern.matches()è¿™æ˜¯æ£€æµ‹æ­£åˆ™è¡¨è¾¾å¼çš„æ¨¡å¼æ˜¯å¦åŒ¹é…ä¸€æ®µæ–‡æœ¬çš„æœ€ç›´æŽ¥æ–¹æ³•ï¼Œegï¼š123456String text =&quot;This is the text to be searched &quot; +&quot;for occurrences of the pattern.&quot;;String pattern = &quot;.*is.*&quot;;boolean matches = Pattern.matches(pattern, text);System.out.println(&quot;matches = &quot; + matches); â€œ.â€è¡¨ç¤ºä»»æ„å­—ç¬¦ï¼Œâ€œ*â€è¡¨ç¤º0æˆ–è€…å¤šä¸ªï¼Œâ€œ.*â€ç»„åˆè¡¨ç¤º0æˆ–è€…å¤šä¸ªä»»æ„å­—ç¬¦ã€‚æ˜¾ç„¶ï¼Œ â€œ.*is.*â€œä»£è¡¨ä¸€ä¸ªå­—ç¬¦ä¸²ä¸­åŒ…å«â€œisâ€å­—æ®µï¼Œä¸Šé¢ä»£ç è¿”å›žç»“æžœæ˜¯trueã€‚Pattern.matches() æ–¹æ³•é€‚ç”¨äºŽæ£€æŸ¥ ä¸€ä¸ªæ¨¡å¼åœ¨ä¸€ä¸ªæ–‡æœ¬ä¸­å‡ºçŽ°ä¸€æ¬¡çš„æƒ…å†µï¼Œæˆ–é€‚ç”¨äºŽPatternç±»çš„é»˜è®¤è®¾ç½®ã€‚å¦‚æžœéœ€è¦åŒ¹é…å¤šæ¬¡å‡ºçŽ°,ç”šè‡³è¾“å‡ºä¸åŒçš„åŒ¹é…æ–‡æœ¬ï¼Œæˆ–è€…åªæ˜¯éœ€è¦éžé»˜è®¤è®¾ç½®ã€‚éœ€è¦é€šè¿‡Pattern.compile() æ–¹æ³•å¾—åˆ°ä¸€ä¸ªPattern å®žä¾‹ã€‚ Pattern.compile()å¦‚æžœéœ€è¦åŒ¹é…ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼åœ¨æ–‡æœ¬ä¸­å¤šæ¬¡å‡ºçŽ°ï¼Œéœ€è¦é€šè¿‡Pattern.compile() æ–¹æ³•åˆ›å»ºä¸€ä¸ªPatternå¯¹è±¡ã€‚ç¤ºä¾‹å¦‚ä¸‹ã€‚12345String text =&quot;This is the text to be searched &quot; +&quot;for occurrences of the http:// pattern.&quot;;String patternString = &quot;.*http://.*&quot;;Pattern pattern = Pattern.compile(patternString); å¯ä»¥åœ¨Compile æ–¹æ³•ä¸­ï¼ŒæŒ‡å®šä¸€ä¸ªç‰¹æ®Šæ ‡å¿—ï¼šPattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE);Pattern ç±»åŒ…å«å¤šä¸ªæ ‡å¿—(int ç±»åž‹),è¿™äº›æ ‡å¿—å¯ä»¥æŽ§åˆ¶Pattern åŒ¹é…æ¨¡å¼çš„æ–¹å¼ã€‚ä¸Šé¢ä»£ç ä¸­çš„æ ‡å¿—ä½¿æ¨¡å¼åŒ¹é…æ˜¯å¿½ç•¥å¤§å°å†™ pattern.matcher()ä¸€æ—¦èŽ·å¾—äº†Patternå¯¹è±¡ï¼ŒæŽ¥ç€å¯ä»¥èŽ·å¾—Matcherå¯¹è±¡ã€‚Matcher ç¤ºä¾‹ç”¨äºŽåŒ¹é…æ–‡æœ¬ä¸­çš„æ¨¡å¼.ç¤ºä¾‹å¦‚ä¸‹Matcher matcher = pattern.matcher(text);Matcherç±»æœ‰ä¸€ä¸ªmatches()æ–¹æ³•ï¼Œå¯ä»¥æ£€æŸ¥æ–‡æœ¬æ˜¯å¦åŒ¹é…æ¨¡å¼ã€‚ä»¥ä¸‹æ˜¯å…³äºŽMatcherçš„ä¸€ä¸ªå®Œæ•´ä¾‹å­12345678String text =&quot;This is the text to be searched &quot; +&quot;for occurrences of the http:// pattern.&quot;;String patternString = &quot;.*http://.*&quot;;Pattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE);Matcher matcher = pattern.matcher(text);boolean matches = matcher.matches();System.out.println(&quot;matches = &quot; + matches); pattern.split()Pattern ç±»çš„ split()æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ­£åˆ™è¡¨è¾¾å¼ä½œä¸ºåˆ†éš”ç¬¦ï¼ŒæŠŠæ–‡æœ¬åˆ†å‰²ä¸ºStringç±»åž‹çš„æ•°ç»„ã€‚ç¤ºä¾‹ï¼š12345678String text = &quot;A sep Text sep With sep Many sep Separators&quot;;String patternString = &quot;sep&quot;;Pattern pattern = Pattern.compile(patternString);String[] split = pattern.split(text);System.out.println(&quot;split.length = &quot; + split.length);for(String element : split)&#123;System.out.println(&quot;element = &quot; + element);&#125; ä¸Šä¾‹ä¸­æŠŠtext æ–‡æœ¬åˆ†å‰²ä¸ºä¸€ä¸ªåŒ…å«5ä¸ªå­—ç¬¦ä¸²çš„æ•°ç»„ã€‚ pattern.pattern()Pattern ç±»çš„ pattern è¿”å›žç”¨äºŽåˆ›å»ºPattern å¯¹è±¡çš„æ­£åˆ™è¡¨è¾¾å¼ã€‚ Matcher (java.util.regex.Matcher)java.util.regex.Matcher ç±»ç”¨äºŽåŒ¹é…ä¸€æ®µæ–‡æœ¬ä¸­å¤šæ¬¡å‡ºçŽ°ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼ŒMatcher ä¹Ÿé€‚ç”¨äºŽå¤šæ–‡æœ¬ä¸­åŒ¹é…åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ã€‚ åˆ›å»ºMatcheré€šè¿‡Pattern çš„matcher() æ–¹æ³•åˆ›å»ºä¸€ä¸ªMatcherã€‚123456String text =&quot;This is the text to be searched &quot; +&quot;for occurrences of the http:// pattern.&quot;;String patternString = &quot;.*http://.*&quot;;Pattern pattern = Pattern.compile(patternString);Matcher matcher = pattern.matcher(text); matches()Matcher ç±»çš„ matches() æ–¹æ³•ç”¨äºŽåœ¨æ–‡æœ¬ä¸­åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼1boolean matches = matcher.matches(); å¦‚æžœæ–‡æœ¬åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œmatches() æ–¹æ³•è¿”å›žtrueã€‚å¦åˆ™è¿”å›žfalseã€‚matches() æ–¹æ³•ä¸èƒ½ç”¨äºŽæŸ¥æ‰¾æ­£åˆ™è¡¨è¾¾å¼å¤šæ¬¡å‡ºçŽ°ã€‚å¦‚æžœéœ€è¦ï¼Œè¦ä½¿ç”¨find(), start() å’Œ end() æ–¹æ³•ã€‚ lookingAt()lookingAt() ä¸Žmatches() æ–¹æ³•ç±»ä¼¼ï¼Œæœ€å¤§çš„ä¸åŒæ˜¯ï¼ŒlookingAt()æ–¹æ³•å¯¹æ–‡æœ¬çš„å¼€å¤´åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼›è€Œmatches() å¯¹æ•´ä¸ªæ–‡æœ¬åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ã€‚æ¢å¥è¯è¯´ï¼Œå¦‚æžœæ­£åˆ™è¡¨è¾¾å¼åŒ¹é…æ–‡æœ¬å¼€å¤´è€Œä¸åŒ¹é…æ•´ä¸ªæ–‡æœ¬,lookingAt() è¿”å›žtrue,è€Œmatches() è¿”å›žfalseã€‚ ç¤ºä¾‹ï¼š12345678String text =&quot;This is the text to be searched &quot; +&quot;for occurrences of the http:// pattern.&quot;;String patternString = &quot;This is the&quot;;Pattern pattern = Pattern.compile(patternString, Pattern.CASE_INSENSITIVE);Matcher matcher = pattern.matcher(text);System.out.println(&quot;lookingAt = &quot; + matcher.lookingAt());System.out.println(&quot;matches = &quot; + matcher.matches()); ä¸Šé¢çš„ä¾‹å­åˆ†åˆ«å¯¹æ–‡æœ¬å¼€å¤´å’Œæ•´ä¸ªæ–‡æœ¬åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ â€œthis is theâ€, åŒ¹é…æ–‡æœ¬å¼€å¤´çš„æ–¹æ³•(lookingAt()) è¿”å›žtrueã€‚å¯¹æ•´ä¸ªæ–‡æœ¬åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼çš„æ–¹æ³• (matches()) è¿”å›žfalseï¼Œå› ä¸ºæ•´ä¸ªæ–‡æœ¬åŒ…å«å¤šä½™çš„å­—ç¬¦,è€Œæ­£åˆ™è¡¨è¾¾å¼è¦æ±‚æ–‡æœ¬ç²¾ç¡®åŒ¹é…â€this is theâ€,å‰åŽåˆä¸èƒ½æœ‰é¢å¤–å­—ç¬¦ã€‚ find() + start() + end()find() æ–¹æ³•ç”¨äºŽåœ¨æ–‡æœ¬ä¸­æŸ¥æ‰¾å‡ºçŽ°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼Œæ–‡æœ¬æ˜¯åˆ›å»ºMatcheræ—¶ï¼Œé€šè¿‡ Pattern.matcher(text) æ–¹æ³•ä¼ å…¥çš„ã€‚å¦‚æžœåœ¨æ–‡æœ¬ä¸­å¤šæ¬¡åŒ¹é…ï¼Œfind() æ–¹æ³•è¿”å›žç¬¬ä¸€ä¸ªï¼Œä¹‹åŽæ¯æ¬¡è°ƒç”¨ find() éƒ½ä¼šè¿”å›žä¸‹ä¸€ä¸ªã€‚start() å’Œ end() è¿”å›žæ¯æ¬¡åŒ¹é…çš„å­—ä¸²åœ¨æ•´ä¸ªæ–‡æœ¬ä¸­çš„å¼€å§‹å’Œç»“æŸä½ç½®ã€‚å®žé™…ä¸Š, end() è¿”å›žçš„æ˜¯å­—ç¬¦ä¸²æœ«å°¾çš„åŽä¸€ä½ï¼Œè¿™æ ·ï¼Œå¯ä»¥åœ¨æŠŠ start() å’Œ end() çš„è¿”å›žå€¼ç›´æŽ¥ç”¨åœ¨String.substring() é‡Œã€‚1234567891011String text =&quot;This is the text which is to be searched &quot; +&quot;for occurrences of the word &apos;is&apos;.&quot;;String patternString = &quot;is&quot;;Pattern pattern = Pattern.compile(patternString);Matcher matcher = pattern.matcher(text);int count = 0;while(matcher.find()) &#123;count++;System.out.println(&quot;found: &quot; + count + &quot; : &quot; + matcher.start() + &quot; - &quot; + matcher.end());&#125; è¿™ä¸ªä¾‹å­åœ¨æ–‡æœ¬ä¸­æ‰¾åˆ°æ¨¡å¼ â€œisâ€ 4æ¬¡ï¼Œè¾“å‡ºå¦‚ä¸‹:1234found: 1 : 2 - 4found: 2 : 5 - 7found: 3 : 23 - 25found: 4 : 70 - 72 reset()reset() æ–¹æ³•ä¼šé‡ç½®Matcher å†…éƒ¨çš„ åŒ¹é…çŠ¶æ€ã€‚å½“find() æ–¹æ³•å¼€å§‹åŒ¹é…æ—¶,Matcher å†…éƒ¨ä¼šè®°å½•æˆªè‡³å½“å‰æŸ¥æ‰¾çš„è·ç¦»ã€‚è°ƒç”¨ reset() ä¼šé‡æ–°ä»Žæ–‡æœ¬å¼€å¤´æŸ¥æ‰¾ã€‚ä¹Ÿå¯ä»¥è°ƒç”¨ reset(CharSequence) æ–¹æ³•. è¿™ä¸ªæ–¹æ³•é‡ç½®Matcher,åŒæ—¶æŠŠä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ å…¥ï¼Œç”¨äºŽä»£æ›¿åˆ›å»º Matcher çš„åŽŸå§‹å­—ç¬¦ä¸²ã€‚ è¡¥å……ï¼šå¦‚æžœåœ¨ç¨‹åºä¸­å¤šæ¬¡ä½¿ç”¨åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸€å®šè¦ç”¨Pattern.compile()ç¼–è¯‘ï¼Œä»£æ›¿ç›´æŽ¥ä½¿ç”¨Pattern.matches()ã€‚å¦‚æžœä¸€æ¬¡æ¬¡å¯¹åŒä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨Pattern.matches()ï¼Œä¾‹å¦‚åœ¨å¾ªçŽ¯ä¸­ï¼Œæ²¡æœ‰ç¼–è¯‘çš„æ­£åˆ™è¡¨è¾¾å¼æ¶ˆè€—æ¯”è¾ƒå¤§ã€‚å› ä¸ºmatches()æ–¹æ³•æ¯æ¬¡éƒ½ä¼šé¢„ç¼–è¯‘ä½¿ç”¨çš„è¡¨è¾¾å¼ã€‚å¦å¤–ï¼Œè®°ä½ä½ å¯ä»¥é€šè¿‡è°ƒç”¨reset()æ–¹æ³•å¯¹ä¸åŒçš„è¾“å…¥å­—ç¬¦ä¸²é‡å¤ä½¿ç”¨Matcherå¯¹è±¡ã€‚ group()å‡è®¾æƒ³åœ¨ä¸€ä¸ªæ–‡æœ¬ä¸­æŸ¥æ‰¾URLé“¾æŽ¥ï¼Œå¹¶ä¸”æƒ³æŠŠæ‰¾åˆ°çš„é“¾æŽ¥æå–å‡ºæ¥ã€‚å½“ç„¶å¯ä»¥é€šè¿‡ start()å’Œ end()æ–¹æ³•å®Œæˆã€‚ä½†æ˜¯ç”¨group()æ–¹æ³•æ›´å®¹æ˜“äº›ã€‚åˆ†ç»„åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ç”¨æ‹¬å·è¡¨ç¤ºï¼Œä¾‹å¦‚:(John)æ­¤æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…John, æ‹¬å·ä¸å±žäºŽè¦åŒ¹é…çš„æ–‡æœ¬ã€‚æ‹¬å·å®šä¹‰äº†ä¸€ä¸ªåˆ†ç»„ã€‚å½“æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…åˆ°æ–‡æœ¬åŽï¼Œå¯ä»¥è®¿é—®åˆ†ç»„å†…çš„éƒ¨åˆ†ã€‚ä½¿ç”¨group(int groupNo) æ–¹æ³•è®¿é—®ä¸€ä¸ªåˆ†ç»„ã€‚ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥æœ‰å¤šä¸ªåˆ†ç»„ã€‚æ¯ä¸ªåˆ†ç»„ç”±ä¸€å¯¹æ‹¬å·æ ‡è®°ã€‚æƒ³è¦è®¿é—®æ­£åˆ™è¡¨è¾¾å¼ä¸­æŸåˆ†ç»„åŒ¹é…çš„æ–‡æœ¬ï¼Œå¯ä»¥æŠŠåˆ†ç»„ç¼–å·ä¼ å…¥ group(int groupNo)æ–¹æ³•ã€‚group(0) è¡¨ç¤ºæ•´ä¸ªæ­£åˆ™è¡¨è¾¾å¼ï¼Œè¦èŽ·å¾—ä¸€ä¸ªæœ‰æ‹¬å·æ ‡è®°çš„åˆ†ç»„ï¼Œåˆ†ç»„ç¼–å·åº”è¯¥ä»Ž1å¼€å§‹è®¡ç®—ã€‚12345678String text = &quot;John writes about this, and John writes about that,&quot; +&quot; and John writes about everything. &quot; ;String patternString1 = &quot;(John)&quot;;Pattern pattern = Pattern.compile(patternString1);Matcher matcher = pattern.matcher(text);while(matcher.find()) &#123;System.out.println(&quot;found: &quot; + matcher.group(1));&#125; 1234ä»¥ä¸Šä»£ç åœ¨æ–‡æœ¬ä¸­æœç´¢å•è¯John.ä»Žæ¯ä¸ªåŒ¹é…æ–‡æœ¬ä¸­ï¼Œæå–åˆ†ç»„1ï¼Œå°±æ˜¯ç”±æ‹¬å·æ ‡è®°çš„éƒ¨åˆ†ã€‚è¾“å‡ºï¼šfound: Johnfound: Johnfound: John å¤šåˆ†ç»„ä¸Šé¢æåˆ°ï¼Œä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼å¯ä»¥æœ‰å¤šä¸ªåˆ†ç»„ï¼Œä¾‹å¦‚ï¼š(John) (.+?)è¿™ä¸ªè¡¨è¾¾å¼åŒ¹é…æ–‡æœ¬â€Johnâ€ åŽè·Ÿä¸€ä¸ªç©ºæ ¼,ç„¶åŽè·Ÿ1ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ï¼Œæœ€åŽè·Ÿä¸€ä¸ªç©ºæ ¼ã€‚ä½ å¯èƒ½çœ‹ä¸åˆ°æœ€åŽçš„ç©ºæ ¼ã€‚è¿™ä¸ªè¡¨è¾¾å¼åŒ…æ‹¬ä¸€äº›å­—ç¬¦æœ‰ç‰¹åˆ«æ„ä¹‰ã€‚å­—ç¬¦ ç‚¹ . è¡¨ç¤ºä»»æ„å­—ç¬¦ã€‚ å­—ç¬¦ + è¡¨ç¤ºå‡ºçŽ°ä¸€ä¸ªæˆ–å¤šä¸ªï¼Œå’Œ. åœ¨ä¸€èµ·è¡¨ç¤º ä»»ä½•å­—ç¬¦,å‡ºçŽ°ä¸€æ¬¡æˆ–å¤šæ¬¡ã€‚å­—ç¬¦? è¡¨ç¤º åŒ¹é…å°½å¯èƒ½çŸ­çš„æ–‡æœ¬ã€‚å®Œæ•´ä»£ç å¦‚ä¸‹ï¼šString text =â€œJohn writes about this, and John Doe writes about that,â€ +â€œ and John Wayne writes about everything.â€;String patternString1 = â€œ(John) (.+?) â€œ;Pattern pattern = Pattern.compile(patternString1);Matcher matcher = pattern.matcher(text);while(matcher.find()) {System.out.println(â€œfound: â€œ + matcher.group(1) +â€œ â€œ + matcher.group(2));}1234æ³¨æ„ä»£ç ä¸­å¼•ç”¨åˆ†ç»„çš„æ–¹å¼ã€‚ä»£ç è¾“å‡ºå¦‚ä¸‹:found: John writesfound: John Doefound: John Wayne åµŒå¥—åˆ†ç»„åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­åˆ†ç»„å¯ä»¥åµŒå¥—åˆ†ç»„ï¼Œä¾‹å¦‚:((John) (.+?))è¿™æ˜¯ä¹‹å‰çš„ä¾‹å­ï¼ŒçŽ°åœ¨æ”¾åœ¨ä¸€ä¸ªå¤§åˆ†ç»„é‡Œ.(è¡¨è¾¾å¼æœ«å°¾æœ‰ä¸€ä¸ªç©ºæ ¼)ã€‚å½“é‡åˆ°åµŒå¥—åˆ†ç»„æ—¶, åˆ†ç»„ç¼–å·æ˜¯ç”±å·¦æ‹¬å·çš„é¡ºåºç¡®å®šçš„ã€‚ä¸Šä¾‹ä¸­ï¼Œåˆ†ç»„1 æ˜¯é‚£ä¸ªå¤§åˆ†ç»„ã€‚åˆ†ç»„2 æ˜¯åŒ…æ‹¬Johnçš„åˆ†ç»„ï¼Œåˆ†ç»„3 æ˜¯åŒ…æ‹¬ .+? çš„åˆ†ç»„ã€‚å½“éœ€è¦é€šè¿‡groups(int groupNo) å¼•ç”¨åˆ†ç»„æ—¶ï¼Œäº†è§£è¿™äº›éžå¸¸é‡è¦ã€‚ä»¥ä¸‹ä»£ç æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨åµŒå¥—åˆ†ç»„12345678910String text =&quot;John writes about this, and John Doe writes about that,&quot; +&quot; and John Wayne writes about everything.&quot;;String patternString1 = &quot;((John) (.+?)) &quot;;Pattern pattern = Pattern.compile(patternString1);Matcher matcher = pattern.matcher(text);while(matcher.find()) &#123;System.out.println(&quot;found: &quot;);&#125; 1234è¾“å‡ºå¦‚ä¸‹found:found:found: replaceAll() + replaceFirst()replaceAll() å’Œ replaceFirst() æ–¹æ³•å¯ä»¥ç”¨äºŽæ›¿æ¢Matcheræœç´¢å­—ç¬¦ä¸²ä¸­çš„ä¸€éƒ¨åˆ†ã€‚replaceAll() æ–¹æ³•æ›¿æ¢å…¨éƒ¨åŒ¹é…çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ŒreplaceFirst() åªæ›¿æ¢ç¬¬ä¸€ä¸ªåŒ¹é…çš„ã€‚åœ¨å¤„ç†ä¹‹å‰ï¼ŒMatcher ä¼šå…ˆé‡ç½®ã€‚æ‰€ä»¥è¿™é‡Œçš„åŒ¹é…è¡¨è¾¾å¼ä»Žæ–‡æœ¬å¼€å¤´å¼€å§‹è®¡ç®—ã€‚ç¤ºä¾‹å¦‚ä¸‹1234567891011String text =&quot;John writes about this, and John Doe writes about that,&quot; +&quot; and John Wayne writes about everything.&quot;;String patternString1 = &quot;((John) (.+?)) &quot;;Pattern pattern = Pattern.compile(patternString1);Matcher matcher = pattern.matcher(text);String replaceAll = matcher.replaceAll(&quot;Joe Blocks &quot;);System.out.println(&quot;replaceAll = &quot; + replaceAll);String replaceFirst = matcher.replaceFirst(&quot;Joe Blocks &quot;);System.out.println(&quot;replaceFirst = &quot; + replaceFirst); è¾“å‡ºå¦‚ä¸‹1234replaceAll = Joe Blocks about this, and Joe Blocks writes about that,and Joe Blocks writes about everything.replaceFirst = Joe Blocks about this, and John Doe writes about that,and John Wayne writes about everything. appendReplacement() + appendTail()appendReplacement() å’Œ appendTail() æ–¹æ³•ç”¨äºŽæ›¿æ¢è¾“å…¥æ–‡æœ¬ä¸­çš„å­—ç¬¦ä¸²çŸ­è¯­ï¼ŒåŒæ—¶æŠŠæ›¿æ¢åŽçš„å­—ç¬¦ä¸²é™„åŠ åˆ°ä¸€ä¸ª StringBuffer ä¸­ã€‚å½“find() æ–¹æ³•æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…é¡¹æ—¶ï¼Œå¯ä»¥è°ƒç”¨ appendReplacement() æ–¹æ³•ï¼Œè¿™ä¼šå¯¼è‡´è¾“å…¥å­—ç¬¦ä¸²è¢«å¢žåŠ åˆ°StringBuffer ä¸­ï¼Œè€Œä¸”åŒ¹é…æ–‡æœ¬è¢«æ›¿æ¢ã€‚ ä»Žä¸Šä¸€ä¸ªåŒ¹é…æ–‡æœ¬ç»“å°¾å¤„å¼€å§‹ï¼Œç›´åˆ°æœ¬æ¬¡åŒ¹é…æ–‡æœ¬ä¼šè¢«æ‹·è´ã€‚appendReplacement() ä¼šè®°å½•æ‹·è´StringBuffer ä¸­çš„å†…å®¹ï¼Œå¯ä»¥æŒç»­è°ƒç”¨find(),ç›´åˆ°æ²¡æœ‰åŒ¹é…é¡¹ã€‚ç›´åˆ°æœ€åŽä¸€ä¸ªåŒ¹é…é¡¹ç›®ï¼Œè¾“å…¥æ–‡æœ¬ä¸­å‰©ä½™ä¸€éƒ¨åˆ†æ²¡æœ‰æ‹·è´åˆ° StringBuffer. è¿™éƒ¨åˆ†æ–‡æœ¬æ˜¯ä»Žæœ€åŽä¸€ä¸ªåŒ¹é…é¡¹ç»“å°¾ï¼Œåˆ°æ–‡æœ¬æœ«å°¾éƒ¨åˆ†ã€‚é€šè¿‡è°ƒç”¨ appendTail() æ–¹æ³•ï¼Œå¯ä»¥æŠŠè¿™éƒ¨åˆ†å†…å®¹æ‹·è´åˆ° StringBuffer ä¸­.1234567891011121314String text =&quot;John writes about this, and John Doe writes about that,&quot; +&quot; and John Wayne writes about everything.&quot;;String patternString1 = &quot;((John) (.+?)) &quot;;Pattern pattern = Pattern.compile(patternString1);Matcher matcher = pattern.matcher(text);StringBuffer stringBuffer = new StringBuffer();while(matcher.find())&#123;matcher.appendReplacement(stringBuffer, &quot;Joe Blocks &quot;);System.out.println(stringBuffer.toString());&#125;matcher.appendTail(stringBuffer);System.out.println(stringBuffer.toString()); æ³¨æ„æˆ‘ä»¬åœ¨whileå¾ªçŽ¯ä¸­è°ƒç”¨appendReplacement() æ–¹æ³•ã€‚åœ¨å¾ªçŽ¯å®Œæ¯•åŽè°ƒç”¨appendTail()ã€‚ä»£ç è¾“å‡ºå¦‚ä¸‹:12345Joe BlocksJoe Blocks about this, and Joe BlocksJoe Blocks about this, and Joe Blocks writes about that, and Joe BlocksJoe Blocks about this, and Joe Blocks writes about that, and Joe Blockswrites about everything. Java æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ä¸ºäº†æ›´æœ‰æ•ˆçš„ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼Œéœ€è¦äº†è§£æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ã€‚æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•å¾ˆå¤æ‚ï¼Œå¯ä»¥å†™å‡ºéžå¸¸é«˜çº§çš„è¡¨è¾¾å¼ã€‚åªæœ‰é€šè¿‡å¤§é‡çš„ç»ƒä¹ æ‰èƒ½æŽŒæ¡è¿™äº›è¯­æ³•è§„åˆ™ã€‚ åŸºæœ¬è¯­æ³•åœ¨ä»‹ç»é«˜çº§åŠŸèƒ½å‰ï¼Œæˆ‘ä»¬å…ˆå¿«é€Ÿæµè§ˆä¸‹æ­£åˆ™è¡¨è¾¾å¼çš„åŸºæœ¬è¯­æ³•ã€‚ å­—ç¬¦æ˜¯æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ€ç»å¸¸ä½¿ç”¨çš„çš„ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œä½œç”¨æ˜¯ç®€å•çš„åŒ¹é…ä¸€ä¸ªç¡®å®šçš„å­—ç¬¦ã€‚ä¾‹å¦‚ï¼šJohnè¿™ä¸ªç®€å•çš„è¡¨è¾¾å¼å°†ä¼šåœ¨ä¸€ä¸ªè¾“å…¥æ–‡æœ¬ä¸­åŒ¹é…Johnæ–‡æœ¬ã€‚å¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ä»»æ„è‹±æ–‡å­—ç¬¦ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨å­—ç¬¦å¯¹äºŽçš„8è¿›åˆ¶ï¼Œ16è¿›åˆ¶æˆ–unicodeç¼–ç è¡¨ç¤ºã€‚ä¾‹å¦‚ï¼š101\x41\u0041ä»¥ä¸Š3ä¸ªè¡¨è¾¾å¼ éƒ½è¡¨ç¤ºå¤§å†™å­—ç¬¦Aã€‚ç¬¬ä¸€ä¸ªæ˜¯8è¿›åˆ¶ç¼–ç (101),ç¬¬2ä¸ªæ˜¯16è¿›åˆ¶ç¼–ç (41),ç¬¬3ä¸ªæ˜¯unicodeç¼–ç (0041). å­—ç¬¦åˆ†ç±»å­—ç¬¦åˆ†ç±»æ˜¯ä¸€ç§ç»“æž„ï¼Œå¯ä»¥é’ˆå¯¹å¤šä¸ªå­—ç¬¦åŒ¹é…è€Œä¸åªæ˜¯ä¸€ä¸ªå­—ç¬¦ã€‚æ¢å¥è¯è¯´ï¼Œä¸€ä¸ªå­—ç¬¦åˆ†ç±»åŒ¹é…è¾“å…¥æ–‡æœ¬ä¸­çš„ä¸€ä¸ªå­—ç¬¦ï¼Œå¯¹åº”å­—ç¬¦åˆ†ç±»ä¸­å¤šä¸ªå…è®¸å­—ç¬¦ã€‚ä¾‹å¦‚ï¼Œä½ æƒ³åŒ¹é…å­—ç¬¦ a,b æˆ–cï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼š[abc]ç”¨ä¸€å¯¹æ–¹æ‹¬å·[] è¡¨ç¤ºå­—ç¬¦åˆ†ç±»ã€‚æ–¹æ‹¬å·æœ¬èº«å¹¶ä¸æ˜¯è¦åŒ¹é…çš„ä¸€éƒ¨åˆ†ã€‚å¯ä»¥ç”¨å­—ç¬¦åˆ†ç±»å®Œæˆå¾ˆå¤šäº‹ã€‚ä¾‹å¦‚æƒ³è¦åŒ¹é…å•è¯Johnï¼Œé¦–å­—æ¯å¯ä»¥ä¸ºå¤§å†™å’Œå°å†™J.[Jj]ohnå­—ç¬¦åˆ†ç±»[Jj] åŒ¹é…Jæˆ–jï¼Œå‰©ä½™çš„ ohn ä¼šå‡†ç¡®åŒ¹é…å­—ç¬¦ohn. é¢„å®šä¹‰å­—ç¬¦åˆ†ç±»æ­£åˆ™è¡¨è¾¾å¼ä¸­æœ‰ä¸€äº›é¢„å®šä¹‰çš„å­—ç¬¦åˆ†ç±»å¯ä»¥ä½¿ç”¨ã€‚ä¾‹å¦‚, \d è¡¨ç¤ºä»»æ„æ•°å­—, \s è¡¨ç¤ºä»»æ„ç©ºç™½å­—ç¬¦,\w è¡¨ç¤ºä»»æ„å•è¯å­—ç¬¦ã€‚é¢„å®šä¹‰å­—ç¬¦åˆ†ç±»ä¸éœ€è¦æ‹¬åœ¨æ–¹æ‹¬å·é‡Œï¼Œå½“ç„¶ä¹Ÿå¯ä»¥ç»„åˆä½¿ç”¨\d[\d\s]ç¬¬1ä¸ªåŒ¹é…ä»»æ„æ•°å­—ï¼Œç¬¬2ä¸ªåŒ¹é…ä»»æ„æ•°å­—æˆ–ç©ºç™½ç¬¦ã€‚å®Œæ•´çš„é¢„å®šä¹‰å­—ç¬¦åˆ†ç±»åˆ—è¡¨ï¼Œåœ¨æœ¬æ–‡æœ€åŽåˆ—å‡ºã€‚ è¾¹ç•ŒåŒ¹é…æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒåŒ¹é…è¾¹ç•Œï¼Œä¾‹å¦‚å•è¯è¾¹ç•Œï¼Œæ–‡æœ¬çš„å¼€å¤´æˆ–æœ«å°¾ã€‚ä¾‹å¦‚ï¼Œ\w åŒ¹é…ä¸€ä¸ªå•è¯ï¼Œ^åŒ¹é…è¡Œé¦–,$ åŒ¹é…è¡Œå°¾ã€‚^This is a single line$ä¸Šé¢çš„è¡¨è¾¾å¼åŒ¹é…ä¸€è¡Œæ–‡æœ¬ï¼Œåªæœ‰æ–‡æœ¬ This is a single lineã€‚æ³¨æ„å…¶ä¸­çš„è¡Œé¦–å’Œè¡Œå°¾æ ‡å¿—ï¼Œè¡¨ç¤ºä¸èƒ½æœ‰ä»»ä½•æ–‡æœ¬åœ¨æ–‡æœ¬çš„å‰é¢åŽåŽé¢ï¼Œåªèƒ½æ˜¯è¡Œé¦–å’Œè¡Œå°¾ã€‚å®Œæ•´çš„åŒ¹é…è¾¹ç•Œåˆ—è¡¨ï¼Œåœ¨æœ¬æ–‡æœ€åŽåˆ—å‡ºã€‚ é‡è¯åŒ¹é…é‡è¯å¯ä»¥åŒ¹é…ä¸€ä¸ªè¡¨è¾¾å¼å¤šæ¬¡å‡ºçŽ°ã€‚ä¾‹å¦‚ä¸‹åˆ—è¡¨è¾¾å¼åŒ¹é…å­—æ¯A å‡ºçŽ°0æ¬¡æˆ–å¤šæ¬¡ã€‚A*é‡è¯ * è¡¨ç¤º0æ¬¡æˆ–å¤šæ¬¡ã€‚+ è¡¨ç¤º1æ¬¡æˆ–å¤šæ¬¡ã€‚? è¡¨ç¤º0æ¬¡æˆ–1æ¬¡ã€‚è¿˜æœ‰äº›å…¶ä»–é‡è¯ï¼Œå‚è§æœ¬æ–‡åŽé¢çš„åˆ—è¡¨ã€‚é‡è¯åŒ¹é…åˆ†ä¸ºï¼šé¥¥é¥¿æ¨¡å¼,è´ªå©ªæ¨¡å¼,ç‹¬å æ¨¡å¼ã€‚é¥¥é¥¿æ¨¡å¼ åŒ¹é…å°½å¯èƒ½å°‘çš„æ–‡æœ¬ã€‚è´ªå©ªæ¨¡å¼åŒ¹é…å°½å¯èƒ½å¤šçš„æ–‡æœ¬ã€‚ç‹¬å æ¨¡å¼åŒ¹é…å°½å¯èƒ½å¤šçš„æ–‡æœ¬ï¼Œç”šè‡³å¯¼è‡´å‰©ä½™è¡¨è¾¾å¼åŒ¹é…å¤±è´¥ã€‚ä»¥ä¸‹æ¼”ç¤ºé¥¥é¥¿æ¨¡å¼,è´ªå©ªæ¨¡å¼,ç‹¬å æ¨¡å¼åŒºåˆ«ã€‚å‡è®¾ä»¥ä¸‹æ–‡æœ¬ï¼šJohn went for a walk, and John fell down, and John hurt his knee.é¥¥é¥¿æ¨¡å¼ä¸‹ è¡¨è¾¾å¼ï¼šJohn.*?è¿™ä¸ªè¡¨è¾¾å¼åŒ¹é…John åŽè·Ÿ0ä¸ªæˆ–å¤šä¸ªå­—ç¬¦ã€‚ . è¡¨ç¤ºä»»æ„å­—ç¬¦ã€‚* è¡¨ç¤º0æˆ–å¤šæ¬¡ã€‚? è·Ÿåœ¨ * åŽé¢ï¼Œè¡¨ç¤º * é‡‡ç”¨é¥¥é¥¿æ¨¡å¼ã€‚é¥¥é¥¿æ¨¡å¼ä¸‹ï¼Œé‡è¯åªä¼šåŒ¹é…å°½å¯èƒ½å°‘çš„å­—ç¬¦ï¼Œå³0ä¸ªå­—ç¬¦ã€‚ä¸Šä¾‹ä¸­çš„è¡¨è¾¾å¼å°†ä¼šåŒ¹é…å•è¯John,åœ¨è¾“å…¥æ–‡æœ¬ä¸­å‡ºçŽ°3æ¬¡ã€‚å¦‚æžœæ”¹ä¸ºè´ªå©ªæ¨¡å¼ï¼Œè¡¨è¾¾å¼å¦‚ä¸‹ï¼šJohn.*è´ªå©ªæ¨¡å¼ä¸‹ï¼Œé‡è¯ä¼šåŒ¹é…å°½å¯èƒ½å¤šçš„å­—ç¬¦ã€‚çŽ°åœ¨è¡¨è¾¾å¼ä¼šåŒ¹é…ç¬¬ä¸€ä¸ªå‡ºçŽ°çš„Johnï¼Œä»¥åŠåœ¨è´ªå©ªæ¨¡å¼ä¸‹ åŒ¹é…å‰©ä½™çš„æ‰€æœ‰å­—ç¬¦ã€‚è¿™æ ·ï¼Œåªæœ‰ä¸€ä¸ªåŒ¹é…é¡¹ã€‚æœ€åŽï¼Œæˆ‘ä»¬æ”¹ä¸ºç‹¬å æ¨¡å¼ï¼šJohn.*+hurt*åŽè·Ÿ+ è¡¨ç¤ºç‹¬å æ¨¡å¼é‡è¯ã€‚è¿™ä¸ªè¡¨è¾¾å¼åœ¨è¾“å…¥æ–‡æœ¬ä¸­æ²¡æœ‰åŒ¹é…é¡¹ï¼Œå°½ç®¡æ–‡æœ¬ä¸­åŒ…æ‹¬ John å’Œ hurt. ä¸ºä»€ä¹ˆä¼šè¿™æ ·? å› ä¸º .*+ æ˜¯ç‹¬å æ¨¡å¼ã€‚ä¸Žè´ªå©ªæ¨¡å¼ä¸‹ï¼Œå°½å¯èƒ½å¤šçš„åŒ¹é…æ–‡æœ¬ï¼Œä»¥ä½¿æ•´ä¸ªè¡¨è¾¾å¼åŒ¹é…ä¸åŒã€‚ç‹¬å æ¨¡å¼ä¼šå°½å¯èƒ½çš„å¤šçš„åŒ¹é…ï¼Œä½†ä¸è€ƒè™‘è¡¨è¾¾å¼å‰©ä½™éƒ¨åˆ†æ˜¯å¦èƒ½åŒ¹é…ä¸Šã€‚.*+ å°†ä¼šåŒ¹é…ç¬¬ä¸€ä¸ªJohnä¹‹åŽçš„æ‰€æœ‰å­—ç¬¦ï¼Œè¿™ä¼šå¯¼è‡´è¡¨è¾¾å¼ä¸­å‰©ä½™çš„ hurt æ²¡æœ‰åŒ¹é…é¡¹ã€‚å¦‚æžœæ”¹ä¸ºè´ªå©ªæ¨¡å¼ï¼Œä¼šæœ‰ä¸€ä¸ªåŒ¹é…é¡¹ã€‚è¡¨è¾¾å¼å¦‚ä¸‹ï¼šJohn.*hurt é€»è¾‘æ“ä½œç¬¦æ­£åˆ™è¡¨è¾¾å¼æ”¯æŒå°‘é‡çš„é€»è¾‘è¿ç®—(ä¸Žï¼Œæˆ–ï¼Œéž)ã€‚ä¸Žæ“ä½œæ˜¯é»˜è®¤çš„ï¼Œè¡¨è¾¾å¼ John ,æ„å‘³ç€J ä¸Ž oä¸Žhä¸Žnã€‚æˆ–æ“ä½œéœ€è¦æ˜¾ç¤ºæŒ‡å®šï¼Œç”¨ | è¡¨ç¤ºã€‚ä¾‹å¦‚è¡¨è¾¾å¼ John|hurt æ„å‘³ç€John æˆ– hurt ã€‚ ?!ç‰¹æ®Šæ“ä½œ ?!å¸®æˆ‘ä»¬è§£å†³äº†å­—ç¬¦ä¸²â€œä¸åŒ…å«â€åŒ¹é…çš„é—®é¢˜ï¼Œä¾‹å¦‚è¡¨è¾¾å¼ ^(?!.*went).*$ æ„å‘³ç€åŒ¹é…çš„å­—ç¬¦ä¸²ä¸­ä¸èƒ½åŒ…å«â€œwentâ€å­—ç¬¦ä¸²ã€‚ å­—ç¬¦ Type Description . é™¤æ¢è¡Œä»¥å¤–çš„ä»»æ„å­—ç¬¦ \\ åæ–œæ , å•ç‹¬çš„åæ–œæ åšä¸ºè½¬ä¹‰å­—ç¬¦,ä¸Žå…¶ä»–ç‰¹æ®Šå­—ç¬¦ä¸€èµ·ä½¿ç”¨ã€‚å¦‚æžœæƒ³åŒ¹é…åæ–œæ æœ¬èº«,éœ€è¦è½¬ä¹‰ã€‚ä¸¤ä¸ªåæ–œæ å®žé™…åŒ¹é…ä¸€ä¸ªåæ–œæ ã€‚ nn å­—ç¬¦çš„8è¿›åˆ¶è¡¨ç¤º.n åœ¨0è‡³7ä¹‹é—´å–å€¼ mnn å­—ç¬¦çš„8è¿›åˆ¶è¡¨ç¤º. m åœ¨0è‡³3ä¹‹é—´å–å€¼, n åœ¨0è‡³7ä¹‹é—´å–å€¼ \xhh å­—ç¬¦çš„16è¿›åˆ¶è¡¨ç¤º. \uhhhh å­—ç¬¦çš„16è¿›åˆ¶è¡¨ç¤º 0xhhhh. å¯¹åº”unicode ç¼–ç å­—ç¬¦ \t ç¼©è¿›ç¬¦. \n æ¢è¡Œç¬¦ (unicode: â€˜\u000Aâ€™) \r å›žè½¦ç¬¦ (unicode: â€˜\u000Dâ€™) \f åˆ¶è¡¨ç¬¦ (unicode: â€˜\u000Câ€™) \a è­¦æŠ¥ï¼ˆé“ƒå£°ï¼‰å­—ç¬¦ (unicode: â€˜\u0007â€™) \e è½¬ä¹‰ç¬¦ (unicode: â€˜\u001Bâ€™) \cx æŽ§åˆ¶ç¬¦ x å­—ç¬¦åˆ†ç±» Type Description [abc] åŒ¹é… a, æˆ– b æˆ– c [^abc] åŒ¹é…ä¸æ˜¯a,b,c çš„å­—ç¬¦ï¼Œæ˜¯å¦å®šåŒ¹é… [a-zA-Z] åŒ¹é…a åˆ° z ï¼ŒAåˆ°Z ç›´æŽ¥çš„å­—ç¬¦ï¼Œæ˜¯èŒƒå›´åŒ¹é… [a-d[m-p]] åŒ¹é…aåˆ°dä¹‹é—´å­—ç¬¦æˆ– måˆ°pä¹‹é—´å­—ç¬¦ï¼Œæ˜¯å¹¶é›†åŒ¹é… [a-z&amp;&amp;[def]] åŒ¹é… d, e, æˆ– f. æ˜¯äº¤é›†åŒ¹é… (è¿™é‡Œæ˜¯åœ¨èŒƒå›´ a-zå’Œå­—ç¬¦defä¹‹é—´å–äº¤é›†). [a-z&amp;&amp;[^bc]] åŒ¹é…a-z ä¹‹é—´æ‰€æœ‰å­—ç¬¦ï¼ŒæŽ’é™¤bcçš„å­—ç¬¦ã€‚æ˜¯å‡æ³•åŒ¹é… [a-z&amp;&amp;[^m-p]] åŒ¹é…a-z ä¹‹é—´æ‰€æœ‰å­—ç¬¦,æŽ’é™¤m-pä¹‹é—´çš„å­—ç¬¦æ˜¯å‡æ³•åŒ¹é… å†…ç½®å­—ç¬¦åˆ†ç±» Type Description . åŒ¹é…ä»»æ„ä¸€ä¸ªå­—ç¬¦,æ ¹æ®åˆ›å»ºPatternæ˜¯ä¼ å…¥çš„æ ‡å¿—,å¯èƒ½åŒ¹é…è¡Œç»“å°¾ç¬¦ \d åŒ¹é…ä»»æ„æ•°å­— [0-9] \D åŒ¹é…ä»»æ„éžæ•°å­— [^0-9] \s åŒ¹é…ä»»æ„ç©ºç™½ç¬¦ (ç©ºæ ¼, ç¼©è¿›, æ¢è¡Œ,å›žè½¦) \S åŒ¹é…ä»»æ„éžç©ºç™½ç¬¦ \w åŒ¹é…ä»»æ„å•è¯ \W åŒ¹é…ä»»æ„éžå•è¯ è¾¹ç•ŒåŒ¹é… Type Description ^ åŒ¹é…è¡Œé¦– $ åŒ¹é…è¡Œå°¾ \b åŒ¹é…å•è¯è¾¹ç•Œ \B åŒ¹é…éžå•è¯è¾¹ç•Œ \A åŒ¹é…æ–‡æœ¬å¼€å¤´ \G åŒ¹é…å‰ä¸€åŒ¹é…é¡¹ç»“å°¾ã€ä¸çŸ¥å…¶ç”¨æ³•å’Œç”¨æ„ã€‚ã€‘ \Z è¾“å…¥çš„ç»“æŸï¼Œä½†æ˜¯å¯¹äºŽæœ€ç»ˆç»ˆæ­¢ç¬¦ï¼Œå¦‚æžœæœ‰çš„è¯ \z è¾“å…¥çš„ç»“æŸ é‡è¯ è´ªå©ªæ¨¡å¼ é¥¥é¥¿æ¨¡å¼ ç‹¬å æ¨¡å¼ X? X?? X?+ åŒ¹é…0æˆ–1æ¬¡ X* X*? X*+ åŒ¹é…0æˆ–å¤šæ¬¡ X+ X+? X++ åŒ¹é…1æˆ–å¤šæ¬¡ X{n} X{n}? X{n}+ åŒ¹é…næ¬¡ X{n,} X{n,}? X{n,}+ åŒ¹é…æœ€å°‘næ¬¡ X{n, m} X{n, m}? X{n, m}+ åŒ¹é…æœ€å°‘næ¬¡ï¼Œæœ€å¤šmæ¬¡ å‚è€ƒèµ„æ–™1.Javaæ­£åˆ™è¡¨è¾¾å¼2.Java æ­£åˆ™è¡¨è¾¾å¼ StackOverflowError é—®é¢˜åŠå…¶ä¼˜åŒ–]]></content>
      <categories>
        <category>JavaåŸºç¡€</category>
      </categories>
      <tags>
        <tag>æ­£åˆ™è¡¨è¾¾å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[AutoCacheé«˜æ€§èƒ½ç¼“å­˜æ¡†æž¶ä½¿ç”¨æ•™ç¨‹]]></title>
    <url>%2F2016%2F10%2F23%2FAutoCache%E9%AB%98%E6%80%A7%E8%83%BD%E7%BC%93%E5%AD%98%E6%A1%86%E6%9E%B6%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B%2F</url>
    <content type="text"><![CDATA[è¯»è€…å¯èƒ½ä¼šé—®åœ¨ä¸‹ï¼š ä¸ºä»€ä¹ˆè¦ä½¿ç”¨AutoCacheï¼Ÿç®€æ´ã€é«˜æ€§èƒ½ã€‚ çŽ°åœ¨å¸‚é¢ä¸Šæœ‰é‚£ä¹ˆå¤šç¼“å­˜çš„æ¡†æž¶ï¼Œåƒpiccsoç­‰éƒ½å¾ˆä¼˜ç§€ï¼Œé‚£ç¬”è€…æ˜¯ä¸æ˜¯åœ¨é‡å¤é€ è½¦ï¼ŸAutoCacheæ˜¯ä¸ºé‚£äº›è¿½æ±‚è½»é‡çº§ç¼“å­˜çš„APPè€Œç”Ÿçš„ã€‚ç›®çš„æ˜¯è®©å¼€å‘è€…æ—¢èƒ½å¿«é€Ÿå®ŒæˆAPPç¼“å­˜åŠŸèƒ½çš„å¼€å‘ï¼Œåˆèƒ½ä¿è¯ä¸Šçº¿åŽæ€§èƒ½çš„ç¨³å®šã€‚ AutoCache èƒ½å¤Ÿè®©ä½ é«˜æ•ˆåœ°ç¼–å†™appç¼“å­˜ä»£ç  ï¼Œä¿è¯ä½ çš„æ•°æ®æµè¢«å®‰å…¨ã€å‡†ç¡®åœ°å­˜å‚¨åˆ°SDcardç§æœ‰ç›®å½•ã€‚å‚è€ƒä¸‹åˆ—æ ¸å¿ƒè°ƒç”¨ä»£ç æ¥å¼€å§‹ä½ çš„ AutoCache ä¹‹æ—…ï¼š1234567891011121314151617181920212223AutoCache.MediaCache.getInstance(context).asyncCache(&quot;url&quot;, new CallBack() &#123;@Overridepublic void onStart() &#123;//Run in UI thread.&#125;@Overridepublic void save2DataBase(String cachePath) &#123;//Run in io thread,//You can sava the cachPath to database or sharepreference.&#125;@Overridepublic void onSuccess(byte[] bytes) &#123;//Run in UI thread.&#125;@Overridepublic void onErro(Throwable e) &#123;//Run in UI thread.&#125;&#125;, FILE_TYPE, &quot;filename&quot;); é›†æˆæ–¹æ³•åœ¨Moduleçš„build.gradleæ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä¾èµ–å³å¯ã€‚1compile &apos;com.txm.topcodes.autocache:autocache:0.1.2&apos; è°ƒç”¨æ–¹å¼ä¸ºæ–¹ä¾¿å¼€å‘è€…ï¼ŒAutoCacheæä¾›ç»Ÿä¸€è°ƒç”¨å…¥å£ï¼Œè°ƒç”¨æ–¹å¼ååˆ†ç®€æ´ã€‚ä¸‹é¢å…ˆç»™å¤§å®¶çœ‹ä¸€å¼ æ€ç»´å¯¼å›¾ï¼Œè¯¥å›¾ç½—åˆ—äº†æ¡†æž¶çš„ä¸»ä½“åŠŸèƒ½åŠå…¶æž„æˆã€‚ ä»Žç»“æž„å›¾ä¸éš¾çœ‹å‡ºï¼ŒAutoCacheç±»å°±æ˜¯è°ƒç”¨æ¡†æž¶çš„å…¥å£ç±»ã€‚å½“æˆ‘ä»¬éœ€è¦ä»Žæœ¬åœ°èŽ·å–æµæ–‡ä»¶æ—¶ï¼Œè°ƒç”¨æ–¹å¼æ˜¯è¿™æ ·çš„1AutoCache.Media.getâ€¦(); ç¼“å­˜ç½‘ç»œæ–‡ä»¶æ—¶ï¼Œè°ƒç”¨æ–¹å¼æ˜¯è¿™æ ·çš„1AutoCache.MediaCache.getInstance(context).asyncCache(); ç¼“å­˜å†…å­˜æ–‡ä»¶æ—¶ï¼Œè°ƒç”¨æ–¹å¼æ˜¯è¿™æ ·çš„1AutoCache.MediaCache.getInstance(context).cache(); å½“éœ€è¦æŒ‡å®šæ–‡ä»¶æ–‡ä»¶ç±»åž‹æ—¶ï¼Œä½¿ç”¨æ–¹å¼æ˜¯è¿™æ ·çš„1AutoCache.DIRECTORY_PICTURES ã€Œå¦‚éœ€èŽ·å–è¯¦ç»†ä¿¡æ¯ï¼Œè¯·åœ¨ GitHub çš„ auto-cacheé¡µé¢æŸ¥çœ‹æºä»£ç .ã€ æ–‡ä»¶ç±»åž‹AutoCacheæ”¯æŒç¼“å­˜ä»¥ä¸‹æ³›åª’ä½“ç±»åž‹ï¼šPodcasts,Pictures,Movies,Music,Documents,Downloadã€‚å…¶ä¸­Downloadæ¯”è¾ƒç‰¹æ®Šï¼Œç”¨å®ƒå¯ä»¥æŒ‡å®šæœªçŸ¥çš„æ–‡ä»¶ç±»åž‹ã€‚ ä½¿ç”¨åœºæ™¯å½“æˆ‘ä»¬çš„APPä»Žç½‘ç»œèŽ·å–æ–‡ä»¶æµæ—¶ï¼Œå¾€å¾€ä¼šæœ‰è¿™æ ·çš„éœ€æ±‚ã€Œä¹Ÿå¯èƒ½æ˜¯å…¶ä¸­ä¹‹ä¸€ã€ï¼š ç½‘ç»œè¯·æ±‚æ—¶ï¼Œè¦å¯ä»¥è‡ªåŠ¨å°†æ–‡ä»¶ä¿å­˜åˆ°APPæœ¬åœ°ã€‚ ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå°†ç½‘ç»œå›¾ç‰‡çš„æœ¬åœ°è·¯å¾„å­˜å‚¨åˆ°SQLiteæˆ–å…¶å®ƒæ•°æ®æŒä¹…åŒ–ä¸­ï¼Œä»¥æ–¹ä¾¿é€»è¾‘å¤„ç†ã€‚ ç½‘ç»œè¯·æ±‚æ—¶ï¼Œç›´æŽ¥ä½¿ç”¨ä»Žç½‘ç»œèŽ·å–åˆ°æ–‡ä»¶æµã€‚ ç½‘ç»œè¯·æ±‚æ—¶ï¼Œæ–¹ä¾¿æ·»åŠ è¿›åº¦æ¡åŠŸèƒ½ã€‚ ç½‘ç»œè¯·æ±‚æ—¶ï¼Œå…¨å±€æ•èŽ·å¼‚å¸¸ã€‚ æœ¬æ¬¡è¯·æ±‚ä¹‹åŽï¼Œæ ¹æ®æ–‡ä»¶åã€æ–‡ä»¶ç±»åž‹ä»Žæœ¬åœ°èŽ·å–æ–‡ä»¶æµã€‚ å¯¹äºŽéœ€æ±‚1ã€‚AutoCacheå®Œå…¨æ˜¯åœ¨åŽå°IOçº¿ç¨‹ä¸­å®Œæˆçš„ï¼Œä¸éœ€è¦è°ƒç”¨è€…ä¸»åŠ¨åŽ»æ“ä½œã€‚ IOçº¿ç¨‹ï¼šI/O æ“ä½œï¼ˆè¯»å†™æ–‡ä»¶ã€è¯»å†™æ•°æ®åº“ã€ç½‘ç»œä¿¡æ¯äº¤äº’ç­‰ï¼‰æ‰€ä½¿ç”¨çš„ Schedulerã€‚è¡Œä¸ºæ¨¡å¼å’Œ newThread() å·®ä¸å¤šï¼ŒåŒºåˆ«åœ¨äºŽ io() çš„å†…éƒ¨å®žçŽ°æ˜¯æ˜¯ç”¨ä¸€ä¸ªæ— æ•°é‡ä¸Šé™çš„çº¿ç¨‹æ± ï¼Œå¯ä»¥é‡ç”¨ç©ºé—²çš„çº¿ç¨‹ï¼Œå› æ­¤å¤šæ•°æƒ…å†µä¸‹ ioçº¿ç¨‹æ¯”Threadçº¿ç¨‹æ›´æœ‰æ•ˆçŽ‡ã€‚ å¯¹äºŽéœ€æ±‚2ã€‚save2DataBase(String cachePath)å›žè°ƒæ–¹æ³•è‡ªåŠ¨å°±è¢«æŒ‡å®šåœ¨IOçº¿ç¨‹ä¸­è¿è¡Œã€‚ã€Œæ‰€ä»¥ï¼Œsave2DataBaseæ—¢æ˜¯ä¸€ä¸ªéžé˜»å¡žçš„æ–¹æ³•ï¼Œåˆå…·å¤‡IOçº¿ç¨‹çš„é«˜æ•ˆæ€§ã€‚ã€ å¯¹äºŽéœ€æ±‚3ã€‚onSuccess(byte[] bytes)å›žè°ƒæ–¹æ³•è¢«æŒ‡å®šè‡ªåŠ¨è¿è¡Œåœ¨UIçº¿ç¨‹ä¸­ã€‚ å¯¹äºŽéœ€æ±‚4ã€‚AutoCacheæä¾›äº†onstart()å›žè°ƒæ–¹æ³•ä½œä¸ºè°ƒç”¨å¼€å§‹çš„æ ‡å¿—ï¼ŒonSuccess(byte[] bytes)æˆ–onErro(Throwable e)ä½œä¸ºè°ƒç”¨ç»“æŸç‚¹ã€‚ å¯¹äºŽéœ€æ±‚5ã€‚å…¨å±€æ•èŽ·å¼‚å¸¸æŒ‡çš„æ˜¯ï¼šonErro(Throwable e)ä¸ä»…å¯ä»¥æ•èŽ·ç½‘ç»œå¼‚å¸¸ã€æœ¬åœ°ç¼“å­˜åª’ä½“æ—¶å‘ç”Ÿçš„å¼‚å¸¸ï¼Œè€Œä¸”è¿˜å¯ä»¥æ•èŽ·å‘ç”Ÿåœ¨onStartã€save2DataBaseã€onSuccessä¸­çš„å¼‚å¸¸ã€‚ å¯¹äºŽéœ€æ±‚6ã€‚AutoCache.Mediaç±»æä¾›äº†4ç§åŒæ­¥æ–¹å¼æ¥èŽ·å–æœ¬åœ°çš„åª’ä½“æµã€‚ æœ€ä½³å®žè·µ ####é˜²æ­¢OOMAutoCache.Mediaç±»ä¸­æä¾›äº†getSoftBmp(~)ï¼ŒgetWeakBmp(~)ï¼ŒgetBmp(~)ï¼ŒgetFile(~)å››ç§æ–¹å¼æ¥èŽ·å–æµã€‚å¦‚æžœæ˜¯å›¾ç‰‡æ–‡ä»¶ï¼Œç¬”è€…å»ºè®®ä½¿ç”¨å‰ä¸¤ç§æ–¹å¼ï¼Œå…·ä½“å¯å‚è€ƒå–„äºŽåˆ©ç”¨è½¯å¼•ç”¨å’Œå¼±å¼•ç”¨ã€‚ ####å®šåˆ¶å›žè°ƒæ–¹æ³•AutoCacheæ¡†æž¶æä¾›äº†CallBackAdapteræŽ¥å£ç”¨äºŽæ›¿æ¢CallBackæŽ¥å£ã€‚å¯ä»¥é€šè¿‡å®ƒå®žçŽ°è‡ªç”±å®šåˆ¶è‡ªå·±éœ€è¦çš„å›žè°ƒæ–¹æ³•ã€‚ã€Œè¿™æ ·æ˜¯ä¸ºäº†ä»£ç çœ‹ä¸ŠåŽ»ç®€æ´ã€‚ã€1234567891011AutoCache.MediaCache.getInstance(context).asyncCache(&quot;url&quot;, new CallBackAdapter() &#123;@Overridepublic void save2DataBase(String cachePath) &#123;&#125;@Overridepublic void onSuccess(byte[] bytes) &#123;&#125;//you can add other callback function here.&#125;,FILE_TYPE,&quot;filename&quot;); FAQ æˆ‘å‘çŽ°AutoCacheè¿˜å­˜åœ¨BUGï¼ŸAutoCacheæ˜¯ä¸€ä¸ªå®Œå…¨å¼€æºçš„æ¡†æž¶ï¼Œå¦‚æžœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­å‘çŽ°é—®é¢˜ï¼Œè¯·åœ¨GitHubåˆ›å»ºä¸€ä¸ªé—®é¢˜ã€‚ æˆ‘æ˜¯Eclipseç”¨æˆ·ï¼Œå¯ä»¥ä½¿ç”¨AutoCacheä¹ˆï¼Ÿä¸å¯ä»¥ã€‚ AutoCacheç”¨åˆ°äº†å“ªäº›ç¬¬ä¸‰æ–¹æ¡†æž¶ï¼Ÿæ˜¯çš„ã€‚AutoCacheæ˜¯åœ¨RXjava+OkhttpåŸºç¡€ä¹‹ä¸Šå°è£…çš„ä¸€ä¸ªè½»é‡çº§ç¼“å­˜æ¡†æž¶ã€‚ AutoCacheæä¾›ç¼“å­˜æ–‡ä»¶è·¯å¾„åˆ°SQLiteæ•°æ®åº“çš„æ–¹æ³•äº†å—ï¼Ÿæ²¡æœ‰ã€‚AutoCacheç¼“å­˜çš„é‡å¿ƒæ˜¯å°†æµæ–‡ä»¶ç¼“å­˜åˆ°æœ¬åœ°ç›®å½•ã€‚å¦‚æžœéœ€è¦å°†æ–‡ä»¶è·¯å¾„ç¼“å­˜åˆ°SQLiteæˆ–å…¶ä»–æŒä¹…åŒ–æ•°æ®å±‚ä¸­ï¼Œå¼€å‘è€…éœ€è¦è‡ªè¡Œåœ¨save2DataBase(cachePath)å›žè°ƒæ–¹æ³•ä¸­å®žçŽ°é€»è¾‘ã€‚ æˆ‘åœ¨android studioä¸­é“¾æŽ¥AutoCacheåº“å¤±è´¥äº†ï¼Ÿç¡®ä¿æ‚¨çš„å·¥ç¨‹ä½¿ç”¨çš„è¿œç¨‹ä»“åº“ä¸ºjcenterã€‚12345allprojects &#123;repositories &#123;jcenter()&#125;&#125;]]></content>
      <categories>
        <category>æˆ‘çš„Androidæ¡†æž¶</category>
      </categories>
      <tags>
        <tag>æ¡†æž¶</tag>
        <tag>Cache</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Android Studio NDKå¼€å‘å…¨æ”»ç•¥]]></title>
    <url>%2F2016%2F08%2F14%2FNDK%E5%BC%80%E5%8F%91%E5%85%A8%E6%94%BB%E7%95%A5%2F</url>
    <content type="text"><![CDATA[è¯»å®Œæœ¬ç« ï¼Œä½ å¯ä»¥ï¼š åœ¨Android Studioä¸Šè½»æ¾æ­å»ºNDKå¼€å‘çŽ¯å¢ƒã€‚ æŽŒæ¡æœ€å¿«æ·çš„JNIå¼€å‘æ–¹å¼ã€‚ æŽŒæ¡ä½¿ç”¨.soæ–‡ä»¶å¼€å‘Androidç¨‹åºçš„æŠ€å·§ã€‚ ä¸€ã€ NDKçŽ¯å¢ƒæ­å»º å¼€å‘å·¥å…·å‡†å¤‡è¦è¿›è¡ŒAndroid NDKå¼€å‘ï¼Œé¦–å…ˆè¦ä¸‹è½½Android NDKå¼€å‘å·¥å…·ã€‚å¯ä»¥åœ¨AndroidStudioä¸Šé¢ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥è‡ªå·±ä¸‹è½½å¥½äº†ï¼Œç„¶åŽå°†NDKçš„è·¯å¾„è®¾ç½®ä¸ºè‡ªå·±ä¸‹è½½çš„Android NDKå¼€å‘å·¥å…·çš„è·¯å¾„ã€‚ Gradleçš„ç›¸å…³é…ç½®1) æˆ‘ä»¬æ¥é…ç½®Projectçš„build.gradleã€‚1234/*gradleæ’ä»¶ä¸æ”¯æŒNDKï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨gradle-experimentalæ’ä»¶ã€‚ */dependencies &#123;classpath &apos;com.android.tools.build:gradle-experimental:0.7.0&apos;&#125; 2) æˆ‘ä»¬æ¥é…ç½®Moduleçš„build.gradleã€‚12345678910111213141516171819202122232425262728293031323334apply plugin: &apos;com.android.model.application&apos;model &#123;android &#123;compileSdkVersion = 23buildToolsVersion = &quot;23.0.2&quot;defaultConfig &#123;applicationId &quot;com.lavor.ndklearning&quot;minSdkVersion.apiLevel 15targetSdkVersion.apiLevel 23versionCode 4versionName &quot;1.0.1&quot;&#125;&#125;android.ndk &#123;moduleName &quot;lavor&quot;ldLibs.addAll([&apos;log&apos;])cppFlags.add(&quot;-std=c++11&quot;)cppFlags.add(&quot;-fexceptions&quot;)platformVersion 15stl &apos;gnustl_shared&apos;&#125;android.buildTypes &#123;release &#123;minifyEnabled = falseproguardFiles.add(file(&quot;proguard-rules.txt&quot;))&#125;&#125;&#125;dependencies &#123;compile fileTree(dir: &apos;libs&apos;, include: [&apos;*.jar&apos;])compile &apos;com.android.support:appcompat-v7:23.1.1&apos;compile &apos;com.android.support:recyclerview-v7:23.1.1&apos;compile &apos;com.android.support:design:23.1.1&apos;&#125; å°æç¤º é¦–å…ˆï¼Œåœ¨applyçš„æ—¶å€™æˆ‘ä»¬å¼•å…¥çš„æ’ä»¶åç§°ç”±â€™com.android.applicationâ€™å˜æˆäº†â€™com.android.model.applicationâ€™ã€‚ å…¶æ¬¡ï¼Œåœ¨åŽŸæ¥androidçš„å¤–å±‚åŠ å…¥äº†ä¸€ä¸ªmodelå±‚æ¬¡ã€‚ å†æ¬¡ï¼ŒåŽŸæ¥åœ¨androidçš„é‡Œé¢çš„å—ï¼Œé™¤äº†defaultConfigå¤–ï¼Œå…¨éƒ¨ç§»é™¤androidå—æ”¾å…¥modelå—ä¸­ä¸Žandroidå¹¶åˆ—ï¼Œå¹¶ä¸”å‰é¢çš„åå­—åŠ ä¸Šandroid.ã€‚ ç„¶åŽï¼ŒcompileSdkVersion 23ä¸Ž buildToolsVersion â€œ23.0.2â€æ”¹æˆ compileSdkVersion = 23å’Œ buildToolsVersion = â€œ23.0.2â€ï¼Œä¸­é—´åŠ ä¸Šäº†=ã€‚ å…¶æ¬¡ï¼Œæ·»åŠ ä¸Šandroid.ndkå—ï¼Œå—ä¸­çš„moduleNameè¡¨ç¤ºC/C++ä»£ç æ‰“åŒ…æˆsoæ–‡ä»¶çš„åå­—ã€‚ å†æ¬¡ï¼Œandroid.buildTypeså—ä¸­çš„proguardFiles getDefaultProguardFile(â€˜proguard-android.txtâ€™), â€˜proguard-rules.proâ€™æ”¹æˆproguardFiles.add(file(â€œproguard-rules.txtâ€))ã€‚ æœ€åŽï¼Œæ³¨æ„dependencieså—ä¾ç„¶åœ¨æœ€å¤–å±‚ï¼Œå®ƒä¸åœ¨modelå—ä¸­ã€‚ äºŒã€ ä½¿ç”¨NDKå¼€å‘ç¬¬ä¸€ä¸ªJNIç¨‹åº åœ¨Androidç¨‹åºä¸­æ–°å»ºä¸€ä¸ªåŒ…å«nativeï¼ˆæœ¬åœ°ï¼‰æ–¹æ³•çš„NDKTestç±»ã€‚12345678package com.lavor.ndklearning;public class NDKTest &#123;static &#123;//åŠ è½½.soåº“æ–‡ä»¶System.loadLibrary(&quot;lavor&quot;);&#125;public native String getString();&#125; å°çŸ¥è¯† ç¨‹åºä¸­static{}ç§°ä¸ºé™æ€ä»£ç å—ï¼Œå®ƒåœ¨ç±»åˆå§‹åŒ–çš„æ—¶å€™æ‰§è¡Œã€‚ä¸æ‡‚è¯·çŒ›å‡»&gt;&gt; å°†é¼ æ ‡ç§»åŠ¨åˆ°æ–¹æ³•ågetStringä¸Šï¼Œç„¶åŽæŒ‰ä¸‹Alt+Enterå¿«æ·é”®ï¼Œå¼¹å‡ºä¸€äº›è§£å†³çš„æ–¹æ³•å»ºè®®ï¼Œç‚¹å‡»ç¬¬ä¸€ä¸ªCreate Functionâ€¦ æ­¤æ—¶ä¼šè‡ªåŠ¨å»ºç«‹ä¸€ä¸ªä¸Žjavaç›®å½•åŒçº§çš„jniç›®å½•ï¼Œåœ¨jniç›®å½•è‡ªåŠ¨å»ºç«‹ä¸€ä¸ªcæ–‡ä»¶ï¼Œåœ¨cæ–‡ä»¶ä¸­å®žçŽ°äº†åˆšæ‰çš„nativeæ–¹æ³•ã€‚ ç„¶åŽï¼Œç¨ç¨ä¿®æ”¹ä¸€ä¸‹.cæ–‡ä»¶ä¸­å®žçŽ°çš„nativeæ–¹æ³•ã€‚12345JNIEXPORT jstring JNICALLJava_com_lavor_ndklearning_NDKTest_getString(JNIEnv *env, jobject instance) &#123;// TODOreturn (*env)-&gt;NewStringUTF(env, &quot;AndroidStudio NDKå¼€å‘æœ€ä½³å…¥é—¨å®žè·µ&quot;);&#125; è¡¥å……è¯´æ˜Ž ä»”ç»†è§‚å¯Ÿå¯ä»¥çœ‹åˆ°cæ–‡ä»¶çš„æ–¹æ³•åæ˜¯éµå¾ªâ€œJava_åŒ…åç±»åæœ¬åœ°æ–¹æ³•åâ€æ¥ç»„ç»‡çš„ï¼ˆäº†è§£åˆ°è¿™äº›åŽï¼Œæˆ‘ä»¬å°±å¯ä»¥è„±ç¦»ç¼–è¯‘å™¨çš„å¸®åŠ©ï¼Œç›´æŽ¥åŽ»å†™.cæ–‡ä»¶å•¦ï¼‰ã€‚ æœ€åŽåœ¨Androidç¨‹åºä¸­è°ƒç”¨JNIæŽ¥å£ã€‚1234567891011public class MainActivity extends Activity &#123;private android.widget.TextView text;@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;super.onCreate(savedInstanceState);setContentView(R.layout.activity_main);this.text = (TextView) findViewById(R.id.text);NDKTest NDK=new NDKTest();text.setText(NDK.getString());&#125;&#125; è¿è¡Œç¨‹åºåŽç•Œé¢å¦‚ä¸‹ï¼š æ·±åº¦æ€»ç»“ è®²é“ç†ï¼Œæˆ‘ä»¬åœ¨æ­£å¼å¼€å‘æ—¶ï¼Œä¸ä¼šåƒè¿™æ ·å­åŽ»å¼€å‘ã€‚å› ä¸ºè¿™æ ·çš„è¯å°±ä¼šæŠŠæˆ‘ä»¬çš„cä»£ç ä¹Ÿæš´éœ²äº†å‡ºæ¥ã€‚è¿™æ˜Žæ˜¾ä¸ŽJNIçš„å®‰å…¨ä¿å¯†æœºåˆ¶ç›¸è¿èƒŒï¼Œæ‰€ä»¥ï¼Œæ­£å¼å¼€å‘çš„æ—¶å€™ï¼Œæˆ‘ä»¬ä¼šä½¿ç”¨.soæ–‡ä»¶è¿›è¡Œå…¨ä¿å¯†å¼çš„å¼€å‘ã€‚ ä¸‰ã€ ä½¿ç”¨.soæ–‡ä»¶å¼€å‘Androidç¨‹åºä¸çŸ¥é“å¤§å®¶æœ‰æ²¡æœ‰è®°å¾—ä¸Šä¸€ç« è¯´è¿‡ï¼Œä½¿ç”¨JNIæœ‰ä¸ªå¥½å¤„å°±æ˜¯å®‰å…¨æ€§é«˜ï¼ŒJNIéƒ¨åˆ†çš„ä»£ç å¾ˆéš¾è¢«åç¼–è¯‘ã€‚è¿™å…¶å®žæ˜¯è¦å½’åŠŸäºŽ.soæ–‡ä»¶ã€‚ä¸‹å›¾ä¸º.soæ–‡ä»¶çš„ç”Ÿæˆä½ç½®ã€‚å…·ä½“çš„ä½¿ç”¨æ­¥éª¤æ˜¯æ€Žæ ·çš„å‘¢ï¼Ÿ æ–°å»ºä¸€ä¸ªAndroidå·¥ç¨‹ï¼Œå‘½åä¸ºï¼šAndroidApplicationã€‚ï¼ˆå·¥ç¨‹åã€åŒ…åã€ç»„ç»‡åä»»æ„ï¼‰ å¯¼å…¥.soæ–‡ä»¶è‡³app/libsä¸­ã€‚ ä¸ºäº†èƒ½å¤Ÿè°ƒç”¨libsæ–‡ä»¶å¤¹ä¸‹çš„.soèµ„æºï¼Œéœ€åœ¨appçš„build.gradleçš„androidèŠ‚ç‚¹ä¸‹è®¾ç½®ã€‚ 12345sourceSets&#123;main&#123;jniLibs.srcDirs = [&apos;libs&apos;]&#125;&#125; æ–°å»ºç›¸å…³ç±»ç»“æž„ã€‚ 12345678package com.lavor.ndklearning;public class NDKTest &#123;static &#123;//åŠ è½½.soåº“æ–‡ä»¶System.loadLibrary(&quot;lavor&quot;);&#125;public native String getString();&#125; è¡¥å……è¯´æ˜Ž Androidç«¯å£°æ˜Žnative codeçš„ä»£ç éœ€è¦ä¸¥æ ¼æŒ‰ç…§JNIæŽ¥å£æ¥ç»„ç»‡ã€‚ï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼ŒåŒ…åã€ç±»åéƒ½è¦å’Œ.soæ–‡ä»¶ä¸­JNIåç§°ä¸€è‡´ï¼‰ä¸æ‡‚å°±ç‚¹å‡»è¿™é‡Œå§&gt;&gt; å‡½æ•°è°ƒç”¨ã€‚12345678public class DemoActivity extends AppCompatActivity &#123;@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;super.onCreate(savedInstanceState);setContentView(R.layout.activity_demo);Log.d(&quot;NDK&quot;,new NDKTest().getString());&#125;&#125; è¿è¡Œç»“æžœå¦‚ä¸‹ï¼š æ³¨æ„å•¦ï¼æ­¤æ–‡å¹¶éžåŽŸåˆ›ï¼Œç®—æ˜¯å¯¹ä¸€æ³¢ä¼˜ç§€æ–‡ç« çš„æ€»ç»“å§ã€‚ç¬”è€…å¸Œæœ›é€šè¿‡è¿™ç§æ–¹å¼æ¿€åŠ±è‡ªå·±å­¦ä¹ ï¼Œä¹ŸæœŸå¾…å¯ä»¥å¸®åˆ°æ­£åœ¨å­¦ä¹ NDKçš„ä½ ã€‚æ¬¢è¿ŽæŒ‡å‡ºæœ¬æ–‡çš„BUGï¼Œå…±å‹‰ï¼ï¼ï¼ï¼ï¼ å‚è€ƒèµ„æ–™ AndroidStudio NDKå¼€å‘æœ€ä½³å…¥é—¨å®žè·µ å¦‚ä½•åœ¨Androidä¸­ä½¿ç”¨ç¼–è¯‘å¥½çš„.soåº“]]></content>
      <categories>
        <category>NDK</category>
      </categories>
      <tags>
        <tag>NDK</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[ä¸ƒå¤•å‰ï¼Œæˆ‘è®¤è¯†äº†NDK]]></title>
    <url>%2F2016%2F08%2F06%2F%E4%B8%83%E5%A4%95%E5%89%8D%EF%BC%8C%E6%88%91%E8%AE%A4%E8%AF%86%E4%BA%86NDK%2F</url>
    <content type="text"><![CDATA[çœ‹å‰å¿…è¯» è¯»å®Œæœ¬ç« ï¼Œä½ å¯ä»¥æŽŒæ¡NDKã€JNIçš„æ¦‚å¿µåŠå…¶å¼€å‘æµç¨‹ã€‚ é˜…è¯»æ—¶ï¼Œä¸å¿…çº ç»“äºŽè¯»ä¸æ‡‚çš„ä»£ç ç»“æž„ï¼ŒåŽé¢çš„æ•™ç¨‹ éƒ½ä¼šè®²åˆ°çš„ã€‚ ä¸€ã€ä¸ºä½•è¦å­¦ä¹ NDKï¼Ÿ ä»£ç çš„ä¿æŠ¤ã€‚Android APKçš„Javaå±‚ä»£ç å¾ˆå®¹æ˜“è¢«åç¼–è¯‘ï¼Œä½†C/C++åº“åç¼–è¯‘éš¾åº¦è¾ƒå¤§ã€‚ å¯ä»¥æ–¹ä¾¿åœ°ä½¿ç”¨çŽ°å­˜çš„å¼€æºåº“ã€‚å¤§éƒ¨åˆ†çŽ°å­˜çš„å¼€æºåº“éƒ½æ˜¯ç”¨C/C++ä»£ç ç¼–å†™çš„ã€‚ æé«˜ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚å°†è¦æ±‚é«˜æ€§èƒ½çš„åº”ç”¨é€»è¾‘ä½¿ç”¨Cå¼€å‘ï¼Œä»Žè€Œæé«˜åº”ç”¨ç¨‹åºçš„æ‰§è¡Œæ•ˆçŽ‡ã€‚ ä¾¿äºŽç§»æ¤ã€‚ç”¨C/C++å†™çš„åº“å¯ä»¥æ–¹ä¾¿åœ¨å…¶ä»–çš„åµŒå…¥å¼å¹³å°ä¸Šå†æ¬¡ä½¿ç”¨ã€‚ äºŒã€å…ˆçŸ¥é“ä»€ä¹ˆæ˜¯JNIJNIï¼ˆJava Native Interfaceï¼‰æ˜¯Javaè¯­è¨€æä¾›çš„Javaå’ŒC/C++äº’ç›¸æ²Ÿé€šçš„æœºåˆ¶ï¼Œå¯ä»¥å®žçŽ°ï¼š javaè°ƒç”¨æœ¬åœ°çš„C/C++ä»£ç  æœ¬åœ°çš„C/C++ä»£ç ä¹Ÿå¯ä»¥è°ƒç”¨javaä»£ç  ä¸‰ã€å¼€å‘JNIç¨‹åºçš„ç®€åŒ–æµç¨‹ ç¼–å†™Java Codeï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 12345678910111213/*** åŠ è½½lavoræœ¬åœ°å…±äº«åº“åˆ°å†…å­˜ä¸­*/static &#123;System.loadLibrary(&quot;lavor&quot;);&#125;/*** å®šä¹‰æœ¬åœ°æ–¹æ³•å¯¹åº”çš„Javaæ–¹æ³•** @return*/public native String getString(); ç¼–å†™C/C++ï¼Œå¦‚ä¸‹ä¾‹å­ï¼š 123456#include &lt;jni.h&gt;JNIEXPORT jstring JNICALLJava_com_lavor_ndklearning_MainActivity_getString(JNIEnv *env, jobject instance) &#123;return (*env)-&gt;NewStringUTF(env, &quot;è¿™æ˜¯æˆ‘çš„cç¨‹åºä»£ç &quot;);&#125; ç¼–è¯‘ C/C++ Codeï¼ŒæˆåŠŸå¹¶å¾—åˆ°æœ¬åœ°å…±äº«åº“ã€‚ å°çŸ¥è¯† æœ¬åœ°å…±äº«åº“æ˜¯Linuxä¸‹çš„å«æ³•ï¼Œæ–‡ä»¶æ‰©å±•åæ˜¯.soï¼Œwindowsä¸‹å«åŠ¨æ€é“¾æŽ¥åº“ï¼Œæ–‡ä»¶æ‰©å±•åæ˜¯.dllã€‚ C /C++çš„è·¨å¹³å°æ€§æ˜¯ä»¥ç‰ºç‰²ç¼–è¯‘æ—¶é—´ä»¥åŠç¼–è¯‘éš¾åº¦ä¸ºä»£ä»·çš„ã€‚ï¼ˆè¿™é‡Œçš„ç¼–è¯‘éš¾åº¦æ˜¯æŒ‡ä¸ºé€‚åº”ä¸åŒå¹³å°è€Œåšçš„ç¼–è¯‘è¿‡ç¨‹çš„è°ƒæ•´ï¼‰ Javaçš„ä¸€æ¬¡ç¼–è¯‘åˆ°å¤„è¿è¡Œï¼Œæ˜¯ä»¥ç‰ºç‰²è¿è¡Œæ•ˆçŽ‡ä¸ºä»£ä»·çš„ã€‚ ç¼–è¯‘å¹¶æ‰“åŒ…Javaã€‚æŠŠæœ¬åœ°å…±äº«åº“ï¼ˆ.soæ–‡ä»¶ï¼‰æ”¾ç½®åˆ°Javaé¡¹ç›®çš„æŒ‡å®šç›®å½•ï¼Œä¸€èˆ¬æ˜¯libsæ–‡ä»¶å¤¹ã€‚ç„¶åŽç¼–è¯‘Javaä»£ç å³å¯æ‰“åŒ…è¿è¡Œã€‚ å°çŸ¥è¯† Androidé¡¹ç›®ä¸­ï¼Œ.soæ–‡ä»¶å­˜æ”¾åœ°å€ä¸ºlibs/armeabiã€‚(armeabiæ˜¯å¯¹åº”çš„å¹³å°ï¼Œä¸‹ä¸€ç« å°†ä¼šè¯¦ç»†ä»‹ç») å››ã€NDKæ¦‚è¿°NDK(Native Development Kit)æ˜¯Googleä¸ºAndroidè¿›è¡Œæœ¬åœ°å¼€å‘è€Œæ”¾å‡ºçš„ä¸€ä¸ªæœ¬åœ°å¼€å‘å·¥å…·ï¼Œ åŒ…æ‹¬Androidçš„Native APIã€å…¬å…±åº“ä»¥åŠç¼–è¯‘å·¥å…·ã€‚å…¶å®žè¯´ç™½å°±æ˜¯Googleä¸ºæ–¹ä¾¿Androidç¨‹åºçŒ¿å¼€å‘JNIç¨‹åºï¼Œè€Œæä¾›çš„ä¾¿æ·å·¥å…·ã€‚ è¡¥å……ä¸¤ç‚¹ NDKå¤„åœ¨JNIå¼€å‘æµç¨‹ä¸­çš„ç¼–è¯‘çŽ¯èŠ‚ï¼ˆç¬¬ä¸‰ã€å››æ­¥ï¼‰ã€‚é’ˆå¯¹ä¸åŒçš„å¹³å°ï¼ŒNDKå¯ä»¥å…¨è‡ªåŠ¨ç¼–è¯‘å‡ºå¯¹åº”å¯è¿è¡Œçš„æœ¬åœ°å…±äº«åº“ï¼Œå¹¶å¯å°†å¯¹åº”çš„.soæ–‡ä»¶å’Œåº”ç”¨ç¨‹åºä¸€èµ·æ‰“åŒ…æˆapkå‘å¸ƒã€‚ï¼ˆè¿™æ—¶ï¼Œè·¨å¹³å°ç¼–è¯‘C/C++çš„éš¾åº¦æŒ‡æ•°é™ä¸º0ã€‚ä¸æ˜Žç™½è¯·çŒ›å‡»ï¼‰ NDKéœ€è¦Android 1.5ç‰ˆæœ¬ä»¥ä¸Šçš„æ”¯æŒã€‚ äº”ã€å¼€å‘NDKç¨‹åºçš„æµç¨‹è¿™ä¸ªå¼€å‘æµç¨‹å¤§è‡´ä¸ŽJNIçš„å¼€å‘æµç¨‹å·®ä¸å¤šï¼š SDKå¼€å‘ã€‚ç¼–å†™Javaä»£ç ï¼Œè°ƒç”¨å„ç§Androidçš„APIå®žçŽ°åŠŸèƒ½ï¼Œç¼–å†™å«æœ‰nativeå…³é”®å­—çš„ä»£ç å¼€å§‹JNIã€‚ JNIå¼€å‘ã€‚æŒ‰ç…§ JNIç¼–ç è§„èŒƒï¼Œç¼–å†™ä¸ŽJavaäº¤äº’çš„æœ¬åœ°ä»£ç ï¼ˆä¸€èˆ¬å°±æ˜¯æ•°æ®ç±»åž‹çš„è½¬æ¢ï¼ŒæŠŠ C/C++çš„æ•°æ®ç±»è½¬æ¢æˆJavaèƒ½è¯†åˆ«çš„ï¼Œæˆ–åè¿‡æ¥ï¼‰ã€‚ C/C++å¼€å‘ã€‚ç¼–ç å®žçŽ°ä¸šåŠ¡é€»è¾‘ï¼Œæˆ–è°ƒç”¨NDKæä¾›çš„æœ¬åœ°APIæˆ–åº“ï¼Œå®ŒæˆAndroidå¹³å°ä¸Šç‰¹å®šåŠŸèƒ½çš„å¼€å‘ã€å°è£…ã€‚ NDKç¼–è¯‘ï¼Œç¼–å†™.mkæ–‡ä»¶ï¼Œç¼–è¯‘è°ƒè¯•ï¼Œæœ€åŽä¿®æ”¹.mkæ–‡ä»¶ï¼Œé’ˆå¯¹ç‰¹å®šçš„å¹³å°ï¼ˆARM/x86ï¼‰åšç¼–è¯‘ç»“æžœçš„ä¼˜åŒ–ã€‚ æœ€åŽå°±æ˜¯SDKç¼–è¯‘ã€æ‰“åŒ…ï¼Œä¸ŠçœŸæœºè°ƒè¯•äº†â€¦ æ³¨æ„å•¦ï¼æ­¤æ–‡å¹¶éžåŽŸåˆ›ï¼Œç®—æ˜¯å¯¹ä¸€æ³¢ä¼˜ç§€æ–‡ç« çš„æ€»ç»“å§ã€‚ç¬”è€…å¸Œæœ›é€šè¿‡è¿™ç§æ–¹å¼æ¿€åŠ±è‡ªå·±å­¦ä¹ ï¼Œä¹ŸæœŸå¾…å¯ä»¥å¸®åˆ°æ­£åœ¨å­¦ä¹ NDKçš„ä½ ã€‚æ¬¢è¿ŽæŒ‡å‡ºæœ¬æ–‡çš„BUGï¼Œå…±å‹‰ï¼ï¼ï¼ï¼ï¼ å‚è€ƒèµ„æ–™Androidä¹‹NDKå¼€å‘]]></content>
      <categories>
        <category>NDK</category>
      </categories>
      <tags>
        <tag>NDK</tag>
        <tag>C/C++</tag>
      </tags>
  </entry>
</search>
